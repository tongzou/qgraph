!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash")):"function"==typeof define&&define.amd?define("qgraph",["lodash"],e):"object"==typeof exports?exports.qgraph=e(require("lodash")):t.qgraph=e(t._)}("undefined"!=typeof window?window:this,function(__WEBPACK_EXTERNAL_MODULE__1__){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"distance",value:function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))}},{key:"translate",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this}},{key:"getScaled",value:function(e){return new t(this.x*e,this.y*e)}},{key:"getTranslated",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"getDirection",value:function(e){var n=this.distance(e);return new t((e.x-this.x)/n,(e.y-this.y)/n)}},{key:"rotate",value:function(t){var e=Math.cos(t*Math.PI/180),n=Math.sin(t*Math.PI/180),r=this.x,i=this.y;return this.x=r*e-i*n,this.y=r*n+i*e,this}},{key:"getRotated",value:function(t){return this.clone().rotate(t)}},{key:"dotProduct",value:function(t){return this.x*t.x+this.y*t.y}},{key:"getMidPoint",value:function(e){return new t((this.x+e.x)/2,(this.y+e.y)/2)}},{key:"reverse",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"equals",value:function(e){return!!(e&&e instanceof t)&&(this.x===e.x&&this.y===e.y)}},{key:"reflect",value:function(t,e){return e?this.x=2*t.x-this.x:this.y=2*t.y-this.y,this}},{key:"toString",value:function(){return this.x+","+this.y}}]),t}();i.W=new i(-1,0),i.N=new i(0,-1),i.S=new i(0,1),i.E=new i(1,0),i.NE=new i(1,-1),i.NW=new i(-1,-1),i.SE=new i(1,1),i.SW=new i(-1,1),e.a=i},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(1),i=n.n(r),o=n(0),a=n(5);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,h(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,a["a"]),function(t,e,n){e&&l(t.prototype,e),n&&l(t,n)}(e,[{key:"contains",value:function(t){var e=t.width||0,n=t.height||0,r=t.x-e/2,i=t.x+e/2,o=t.y-n/2,a=t.y+n/2;return i<=this.right&&r>=this.left&&o>=this.top&&a<=this.bottom}},{key:"distance",value:function(t){return this.contains(t)?0:t.x<this.left?t.y<this.top?t.distance(new o.a(this.left,this.top)):t.y<=this.bottom?this.left-t.x:t.distance(new o.a(this.left,this.bottom)):t.x<=this.right?t.y<=this.top?this.top-t.y:t.y-this.bottom:t.y<this.top?t.distance(new o.a(this.right,this.top)):t.y<=this.bottom?t.x-this.right:t.distance(new o.a(this.right,this.bottom))}},{key:"detectIntersection",value:function(t,e){var n=t.y===e.y,r=this.contains(t),i=this.contains(e);if(r&&i)return 4;if(!r&&!i){if(n&&t.y>=this.top&&t.y<=this.bottom){if(t.x<this.left&&e.x>this.right)return 0;if(t.x>this.right&&e.x<this.left)return 2}if(!n&&t.x>=this.left&&t.x<=this.right){if(t.y<this.top&&e.y>this.bottom)return 1;if(t.y>this.bottom&&e.y<this.top)return 3}return-1}var o=r?e:t;return n?o.x>this.right?2:0:o.y<this.top?1:3}},{key:"toString",value:function(){return"Rectangle:{x="+this.x+";y="+this.y+";width="+this.width+";height="+this.height+"}"}}],[{key:"getPerimeter",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.x,a=t.y,s=n.x-i,l=n.y-a,u=Math.atan2(l,s),h=new o.a(0,0),c=Math.PI,f=Math.PI/2-u,p=Math.atan2(t.height,t.width);return u<-c+p||u>c-p?(h.x=t.left,h.y=a-t.width*Math.tan(u)/2):u<-p?(h.y=t.top,h.x=i-t.height*Math.tan(f)/2):u<p?(h.x=t.right,h.y=a+t.width*Math.tan(u)/2):(h.y=t.bottom,h.x=i+t.height*Math.tan(f)/2),r&&(u<-c+p||u>c-p?(h.x=t.left,h.y=a):u<-p?(h.y=t.top,h.x=i):u<p?(h.x=t.right,h.y=a):(h.y=t.bottom,h.x=i)),{point:h,direction:e.getDirection(t,h,r)}}},{key:"getBoundingRectangle",value:function(t,n){if(!t||0===t.length)return null;n=n||[0,0,0,0],i.a.isArray(n)||(n=[n,n,n,n]);for(var r=[t[0].x,t[0].y],o=[t[0].x,t[0].y],a=1;a<t.length;a++){var s=t[a];s.x<r[0]&&(r[0]=s.x),s.y<r[1]&&(r[1]=s.y),s.x>o[0]&&(o[0]=s.x),s.y>o[1]&&(o[1]=s.y)}r[0]=r[0]-n[0],r[1]=r[1]-n[1],o[0]=o[0]+n[2],o[1]=o[1]+n[3];var l=Math.abs(o[0]-r[0]),u=Math.abs(o[1]-r[1]);return new e(r[0]+l/2,r[1]+u/2,l,u)}},{key:"union",value:function(t){var n=null,r=null,o=-1/0,a=-1/0;return i.a.each(t,function(t){n=n||t.x,r=r||t.y,n=Math.min(n,t.x),r=Math.min(r,t.y),o=Math.max(o,t.right()),a=Math.max(a,t.bottom())}),new e(n=n||0,r=r||0,o-n,a-r)}},{key:"getDirection",value:function(t,e){var n;if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]))return new o.a(t.x,t.y).getDirection(new o.a(e.x,e.y));var r=Math.abs(t.left-e.x),i=o.a.W;return(n=Math.abs(t.top-e.y))<=r&&(r=n,i=o.a.N),(n=Math.abs(t.bottom-e.y))<=r&&(r=n,i=o.a.S),(n=Math.abs(t.right-e.x))<r&&(i=o.a.E),i}}]),e}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),_geometry_Point__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_geometry_Rectangle__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _debugging=[],_debugAll=!1,typeRegistry={},splice=Array.splice;__webpack_exports__.a={type:function(t,e,n){return typeRegistry[t]||(typeRegistry[t]=new Map),e?n?void typeRegistry[t].set(e,n):typeRegistry[t].get(e):typeRegistry[t]},createType:function(t,e,n){var r=e.name,i=this.type(t,r);if(!i){var o=e.extends?this.type(t,e.extends):null;!o&&n&&(o=n),i=o?function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,o),e}():function t(e){_classCallCheck(this,t),lodash__WEBPACK_IMPORTED_MODULE_0___default.a.assign(this,e)},delete e.name,delete e.extends,lodash__WEBPACK_IMPORTED_MODULE_0___default.a.assign(i.prototype,e),i.typeName=r,this.type(t,r,i),this.log("Utils","Utils.createType - "+t+"."+r)}return i},buildTypes:function(t,e,n){var r=this;if(this.log("Utils","Utils.buildTypes - "+e),!t&&n)return this.createType(e,n),void this.log("Utils","Utils.buildTypes end");if(n){var i=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.remove(t,{name:n.name});i=i.length>0?i[0]:null,n=i?this.createType(e,lodash__WEBPACK_IMPORTED_MODULE_0___default.a.defaultsDeep(i,n)):this.createType(e,n)}lodash__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(t,function(t){r.createType(e,t,n)}),this.log("Utils","Utils.buildTypes end")},extend:function(t,e,n,r){lodash__WEBPACK_IMPORTED_MODULE_0___default.a.extend(t,e,r);var i=function(){this.constructor=t};return i.prototype=e.prototype,t.prototype=new i,n&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.extend(t.prototype,n),t.superclass=e.prototype,t},initConfig:function(t,e){for(var n={},r=t.constructor,i=[r];r;)r.super?(r=r.super.constructor,splice.apply(i,[0,0,r])):r=null;for(var o=0;o<i.length;o++)(r=i[o]).DEFAULTS&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.assign(n,r.DEFAULTS);t.props=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.assign(n,e),r.prototype.prop=function(t,e){if(!e)return this.props[t];this.props[t]=e}},getConstructor:function getConstructor(jsClass,defaultClass){return jsClass||(jsClass=defaultClass),lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isString(jsClass)&&(jsClass=eval(jsClass)),jsClass},debug:function(t){t?_debugging.push(t):_debugAll=!0},log:function(t,e){var n=_debugAll;if(!_debugAll){n=!1;for(var r=0;r<_debugging.length;r++)_debugging[r]===t&&(n=!0)}if(n){for(;t.length<10;)t+=" ";t=t.substring(0,10)+" - ",console.info(t,e)}},getRelativePosition:function(t,e){var n=Math.abs(e.x)<=1?t.width*e.x:e.x,r=Math.abs(e.y)<=1?t.height*e.y:e.y;return this.offsetPosition([n,r],e)},offsetPosition:function(t,e){return[t[0]+e.width*e.anchorX+e.offsetX,t[1]+e.height*e.anchorY+e.offsetY]},unscale:function(t,e,n){return n instanceof _geometry_Rectangle__WEBPACK_IMPORTED_MODULE_2__.a?new _geometry_Rectangle__WEBPACK_IMPORTED_MODULE_2__.a(n.x*e+t[0],n.y*e+t[1],n.width*e,n.height*e):n instanceof _geometry_Point__WEBPACK_IMPORTED_MODULE_1__.a?new _geometry_Point__WEBPACK_IMPORTED_MODULE_1__.a(n.x*e+t[0],n.y*e+t[1]):[n[0]*e+t[0],n[1]*e+t[1]]},scale:function(t,e,n){return n instanceof _geometry_Rectangle__WEBPACK_IMPORTED_MODULE_2__.a?new _geometry_Rectangle__WEBPACK_IMPORTED_MODULE_2__.a((n.x-t[0])/e,(n.y-t[1])/e,n.width/e,n.height/e):n instanceof _geometry_Point__WEBPACK_IMPORTED_MODULE_1__.a?new _geometry_Point__WEBPACK_IMPORTED_MODULE_1__.a((n.x-t[0])/e,(n.y-t[1])/e):[(n[0]-t[0])/e,(n[1]-t[1])/e]},getProperty:function(t,e){return t?lodash__WEBPACK_IMPORTED_MODULE_0___default.a.has(t,e)?t[e]:t.prop&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isFunction(t.prop)?t.prop(e):null:null}}},function(t,e,n){var r,i;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
  * Bean - copyright (c) Jacob Thornton 2011-2012
  * https://github.com/fat/bean
  * MIT license
  */
/*!
  * Bean - copyright (c) Jacob Thornton 2011-2012
  * https://github.com/fat/bean
  * MIT license
  */
!function(o,a,s){void 0!==t&&t.exports?t.exports=s():void 0===(i="function"==typeof(r=s)?r.call(e,n,e,t):r)||(t.exports=i)}(0,0,function(t,e){t=t||"bean",e=e||this;var n,r="undefined"!=typeof window?window:this,i=e[t],a=/[^\.]*(?=\..*)\.|.*/,s=/\..*/,l="addEventListener",u="undefined"!=typeof document?document:{},h="undefined"!=typeof navigator?navigator:{},c=u.documentElement||{},f=c[l],p=f?l:"attachEvent",d={},g=Array.prototype.slice,y=function(t,e){return t.split(e||" ")},v=function(t){return"string"==typeof t},m=function(t){return"function"==typeof t},b=function(t,e,n){for(n=0;n<e.length;n++)e[n]&&(t[e[n]]=1);return t}({},y("click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll "+(f?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinput readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":""))),w=function(){var t="compareDocumentPosition"in c?function(t,e){return e.compareDocumentPosition&&16==(16&e.compareDocumentPosition(t))}:"contains"in c?function(t,e){return(e=9===e.nodeType||e===window?c:e)!==t&&e.contains(t)}:function(t,e){for(;t=t.parentNode;)if(t===e)return 1;return 0},e=function(e){var n=e.relatedTarget;return n?n!==this&&"xul"!==n.prefix&&!/document/.test(this.toString())&&!t(n,this):null==n};return{mouseenter:{base:"mouseover",condition:e},mouseleave:{base:"mouseout",condition:e},mousewheel:{base:/Firefox/.test(h.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),x=function(){var t=y("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),e=t.concat(y("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),n=e.concat(y("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),i=t.concat(y("char charCode key keyCode keyIdentifier keyLocation location")),o=t.concat(y("data")),a=t.concat(y("touches targetTouches changedTouches scale rotation")),s=t.concat(y("data origin source")),l=t.concat(y("state")),h=/over|out/,f=[{reg:/key/i,fix:function(t,e){return e.keyCode=t.keyCode||t.which,i}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(t,n,r){return n.rightClick=3===t.which||2===t.button,n.pos={x:0,y:0},t.pageX||t.pageY?(n.clientX=t.pageX,n.clientY=t.pageY):(t.clientX||t.clientY)&&(n.clientX=t.clientX+u.body.scrollLeft+c.scrollLeft,n.clientY=t.clientY+u.body.scrollTop+c.scrollTop),h.test(r)&&(n.relatedTarget=t.relatedTarget||t[("mouseover"==r?"from":"to")+"Element"]),e}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return n}},{reg:/^text/i,fix:function(){return o}},{reg:/^touch|^gesture/i,fix:function(){return a}},{reg:/^message$/i,fix:function(){return s}},{reg:/^popstate$/i,fix:function(){return l}},{reg:/.*/,fix:function(){return t}}],p={},d=function(t,e,n){if(arguments.length&&(t=t||((e.ownerDocument||e.document||e).parentWindow||r).event,this.originalEvent=t,this.isNative=n,this.isBean=!0,t)){var i,o,a,s,l,u=t.type,h=t.target||t.srcElement;if(this.target=h&&3===h.nodeType?h.parentNode:h,n){if(!(l=p[u]))for(i=0,o=f.length;i<o;i++)if(f[i].reg.test(u)){p[u]=l=f[i].fix;break}for(i=(s=l(t,this,u)).length;i--;)!((a=s[i])in this)&&a in t&&(this[a]=t[a])}}};return d.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},d.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},d.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},d.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},d.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},d.prototype.clone=function(t){var e=new d(this,this.element,this.isNative);return e.currentTarget=t,e},d}(),_=function(t,e){return f||e||t!==u&&t!==r?t:c},k=function(){var t=function(t,e,n,r){var i=function(n,i){return e.apply(t,r?g.call(i,n?0:1).concat(r):i)},o=function(n,r){return e.__beanDel?e.__beanDel.ft(n.target,t):r},a=n?function(t){var e=o(t,this);if(n.apply(e,arguments))return t&&(t.currentTarget=e),i(t,arguments)}:function(t){return e.__beanDel&&(t=t.clone(o(t))),i(t,arguments)};return a.__beanDel=e.__beanDel,a},e=function(e,n,r,i,o,a,s){var l,u=w[n];"unload"==n&&(r=C(M,e,n,r,i)),u&&(u.condition&&(r=t(e,r,u.condition,a)),n=u.base||n),this.isNative=l=b[n]&&!!e[p],this.customType=!f&&!l&&n,this.element=e,this.type=n,this.original=i,this.namespaces=o,this.eventType=f||l?n:"propertychange",this.target=_(e,l),this[p]=!!this.target[p],this.root=s,this.handler=t(e,r,null,a)};return e.prototype.inNamespaces=function(t){var e,n,r=0;if(!t)return!0;if(!this.namespaces)return!1;for(e=t.length;e--;)for(n=this.namespaces.length;n--;)t[e]==this.namespaces[n]&&r++;return t.length===r},e.prototype.matches=function(t,e,n){return!(this.element!==t||e&&this.original!==e||n&&this.handler!==n)},e}(),E=function(){var t={},e=function e(n,r,i,o,a,s){var l=a?"r":"$";if(r&&"*"!=r){var u,h=0,c=t[l+r],f="*"==n;if(!c)return;for(u=c.length;h<u;h++)if((f||c[h].matches(n,i,o))&&!s(c[h],c,h,r))return}else for(var p in t)p.charAt(0)==l&&e(n,p.substr(1),i,o,a,s)};return{has:function(e,n,r,i){var o,a=t[(i?"r":"$")+n];if(a)for(o=a.length;o--;)if(!a[o].root&&a[o].matches(e,r,null))return!0;return!1},get:function(t,n,r,i){var o=[];return e(t,n,r,null,i,function(t){return o.push(t)}),o},put:function(e){var n=!e.root&&!this.has(e.element,e.type,null,!1),r=(e.root?"r":"$")+e.type;return(t[r]||(t[r]=[])).push(e),n},del:function(n){e(n.element,n.type,null,n.handler,n.root,function(e,n,r){return n.splice(r,1),e.removed=!0,0===n.length&&delete t[(e.root?"r":"$")+e.type],!1})},entries:function(){var e,n=[];for(e in t)"$"==e.charAt(0)&&(n=n.concat(t[e]));return n}}}(),S=function(t){n=arguments.length?t:u.querySelectorAll?function(t,e){return e.querySelectorAll(t)}:function(){throw new Error("Bean: No selector engine installed")}},P=function(t,e){if(f||!e||!t||t.propertyName=="_on"+e){var n=E.get(this,e||t.type,null,!1),r=n.length,i=0;for(t=new x(t,this,!0),e&&(t.type=e);i<r&&!t.isImmediatePropagationStopped();i++)n[i].removed||n[i].handler.call(this,t)}},O=f?function(t,e,n){t[n?l:"removeEventListener"](e,P,!1)}:function(t,e,n,r){var i;n?(E.put(i=new k(t,r||e,function(e){P.call(t,e,r)},P,null,null,!0)),r&&null==t["_on"+r]&&(t["_on"+r]=0),i.target.attachEvent("on"+i.eventType,i.handler)):(i=E.get(t,r||e,P,!0)[0])&&(i.target.detachEvent("on"+i.eventType,i.handler),E.del(i))},C=function(t,e,n,r,i){return function(){r.apply(this,arguments),t(e,n,i)}},M=function(t,e,n,r){var i,o,a=e&&e.replace(s,""),l=E.get(t,a,null,!1),u={};for(i=0,o=l.length;i<o;i++)n&&l[i].original!==n||!l[i].inNamespaces(r)||(E.del(l[i]),!u[l[i].eventType]&&l[i][p]&&(u[l[i].eventType]={t:l[i].eventType,c:l[i].type}));for(i in u)E.has(t,u[i].t,null,!1)||O(t,u[i].t,!1,u[i].c)},T=f?function(t,e,n){var i=u.createEvent(t?"HTMLEvents":"UIEvents");i[t?"initEvent":"initUIEvent"](e,!0,!0,r,1),n.dispatchEvent(i)}:function(t,e,n){n=_(n,t),t?n.fireEvent("on"+e,u.createEventObject()):n["_on"+e]++},N=function t(e,n,r){var i,o,l,u,h=v(n);if(h&&n.indexOf(" ")>0){for(u=(n=y(n)).length;u--;)t(e,n[u],r);return e}if((o=h&&n.replace(s,""))&&w[o]&&(o=w[o].base),!n||h)(l=h&&n.replace(a,""))&&(l=y(l,".")),M(e,o,r,l);else if(m(n))M(e,null,n);else for(i in n)n.hasOwnProperty(i)&&t(e,i,n[i]);return e},R=function t(e,r,i,l){var u,h,c,f,b,w,x;if(void 0!==i||"object"!=o(r)){for(m(i)?(b=g.call(arguments,3),l=u=i):(u=l,b=g.call(arguments,4),l=function(t,e){var r=function(e,r){for(var i,o=v(t)?n(t,r):t;e&&e!==r;e=e.parentNode)for(i=o.length;i--;)if(o[i]===e)return e},i=function(t){var n=r(t.target,this);n&&e.apply(n,arguments)};return i.__beanDel={ft:r,selector:t},i}(i,u)),c=y(r),this===d&&(l=C(N,e,r,l,u)),f=c.length;f--;)x=E.put(w=new k(e,c[f].replace(s,""),l,u,y(c[f].replace(a,""),"."),b,!1)),w[p]&&x&&O(e,w.eventType,!0,w.customType);return e}for(h in r)r.hasOwnProperty(h)&&t.call(this,e,h,r[h])},L={on:R,add:function(t,e,n,r){return R.apply(null,v(n)?[t,n,e,r].concat(arguments.length>3?g.call(arguments,5):[]):g.call(arguments))},one:function(){return R.apply(d,arguments)},off:N,remove:N,clone:function(t,e,n){for(var r,i,o=E.get(e,n,null,!1),a=o.length,s=0;s<a;s++)o[s].original&&(r=[t,o[s].type],(i=o[s].handler.__beanDel)&&r.push(i.selector),r.push(o[s].original),R.apply(null,r));return t},fire:function(t,e,n){var r,i,o,l,u,h=y(e);for(r=h.length;r--;)if(e=h[r].replace(s,""),(l=h[r].replace(a,""))&&(l=y(l,".")),l||n||!t[p])for(u=E.get(t,e,null,!1),n=[!1].concat(n),i=0,o=u.length;i<o;i++)u[i].inNamespaces(l)&&u[i].handler.apply(t,n);else T(b[e],e,t);return t},Event:x,setSelectorEngine:S,noConflict:function(){return e[t]=i,this}};if(r.attachEvent){r.attachEvent("onunload",function t(){var e,n=E.entries();for(e in n)n[e].type&&"unload"!==n[e].type&&N(n[e].element,n[e].type);r.detachEvent("onunload",t),r.CollectGarbage&&r.CollectGarbage()})}return S(),L})},function(t,e,n){"use strict";var r=n(1),i=n.n(r),o=n(0),a=n(2);function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l={},u=function(){function t(e,n,r,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.width=r,this.height=o,i.a.defaults(this,a,{x:0,y:0,width:0,height:0})}return function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(t,[{key:"contains",value:function(t){return!1}},{key:"getRegularPoints",value:function(t){return null}},{key:"getPerimeter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.constructor.getPerimeter(this,t,e)}},{key:"render",value:function(t){return i.a.template(t.getTemplate(this.name,this))(this)}},{key:"top",get:function(){return this.y-this.height/2}},{key:"bottom",get:function(){return this.y+this.height/2}},{key:"left",get:function(){return this.x-this.width/2}},{key:"right",get:function(){return this.x+this.width/2}},{key:"center",get:function(){return new o.a(this.x,this.y)}},{key:"bounds",get:function(){return new a.a(this.x,this.y,this.width,this.height)}}],[{key:"getShape",value:function(t){return l[t]}},{key:"addShape",value:function(t,e){l[t]=e}},{key:"removeShape",value:function(t){delete l[t]}}]),t}();e.a=u},function(t,e,n){"use strict";n.r(e);var r={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,n,i,o,a,s,l,u="",h=0;for(t=r._utf8_encode(t);h<t.length;)o=(e=t.charCodeAt(h++))>>2,a=(3&e)<<4|(n=t.charCodeAt(h++))>>4,s=(15&n)<<2|(i=t.charCodeAt(h++))>>6,l=63&i,isNaN(n)?s=l=64:isNaN(i)&&(l=64),u=u+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(s)+this._keyStr.charAt(l);return u},decode:function(t){var e,n,i,o,a,s,l="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)e=this._keyStr.indexOf(t.charAt(u++))<<2|(o=this._keyStr.indexOf(t.charAt(u++)))>>4,n=(15&o)<<4|(a=this._keyStr.indexOf(t.charAt(u++)))>>2,i=(3&a)<<6|(s=this._keyStr.indexOf(t.charAt(u++))),l+=String.fromCharCode(e),64!=a&&(l+=String.fromCharCode(n)),64!=s&&(l+=String.fromCharCode(i));return l=r._utf8_decode(l)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},_utf8_decode:function(t){for(var e="",n=0,r=c1=c2=0;n<t.length;)(r=t.charCodeAt(n))<128?(e+=String.fromCharCode(r),n++):r>191&&r<224?(c2=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return e}},i=r,o={},a={get:function(t,e){return this.getCache(e)[t]},set:function(t,e,n){this.getCache(n)[t]=e},contains:function(t,e){return t in this.getCache(e)},remove:function(t,e){delete this.getCache(e)[t]},clear:function(t){t?o[t]&&(o[t]={}):o={}},getCache:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return o[t]||(o[t]={}),o[t]}},s=n(3),l=n(1),u=n.n(l),h=function(){return"undefined"!=typeof window&&window.navigator&&"undefined"!=typeof navigator},c={isIE:function(){if(!h())return!1;var t=window.navigator.userAgent,e=t.indexOf("MSIE");return e>0?parseInt(t.substring(e+5,t.indexOf(".",e))):navigator.userAgent.match(/Trident\/7\./)?11:!!navigator.userAgent.match(/Edge\//)&&"Edge"}(),isFireFox:"undefined"!=typeof InstallTrigger,isChrome:function(){if(!h()||navigator.userAgent.indexOf("Edge")>=0)return!1;var t=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return!!t&&parseInt(t[2],10)}(),isMac:!!h()&&navigator.platform.toUpperCase().indexOf("MAC")>=0,isWindows:!!h()&&navigator.appVersion.indexOf("Windows")>=0,isLinux:!!h()&&navigator.appVersion.indexOf("Linux")>=0,createElement:function(t,e,n,r){var i=document.createElement(t);return this.setElement(i,e,n),r&&(i.innerHTML=r),i},createElementByString:function(t){return this.createElement("div",null,null,t).childNodes},setElement:function(t,e,n){e&&u.a.forEach(e,function(e,n){t.setAttribute(n,e)}),n&&u.a.forEach(n,function(e,n){t.style[n]=e})},testElement:function(t,e){return t&&1===t.nodeType&&(!e||e(t))},getAncestorBy:function(t,e){for(;null!==(t=t.parentNode);)if(this.testElement(t,e))return t;return null},getPosition:function(t,e){e||(e=document.body);var n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return[n.left-r.left,n.top-r.top]},getCenterPosition:function(t,e){e||(e=document.body);var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.right-n.left,o=n.bottom-n.top;return[n.left-r.left+i/2,n.top-r.top+o/2]},move:function(t,e,n){e&&(t.style.left=e+"px"),n&&(t.style.top=n+"px")},getSize:function(t){return[parseInt(t.style.offsetWidth,10),parseInt(t.style.offsetHeight,10)]},resize:function(t,e,n){e&&(t.style.width=e+"px"),n&&(t.style.height=n+"px")},preloadImages:function(t){this.preloadImages.list||(this.preloadImages.list=[]),this.preloadImages.loaded||(this.preloadImages.loaded={});for(var e,n=this.preloadImages.list,r=this,i=0;i<t.length;i++)(e=new Image).onload=function(){var t=n.indexOf(this);-1!==t&&(r.preloadImages.loaded[this.name]={width:this.width,height:this.height},n.splice(t,1))},n.push(e),e.src=t[i],e.name=t[i]},getImageInfo:function(t){return this.preloadImages.loaded?this.preloadImages.loaded[t]:null},downloadFile:function(t,e){if(e){var n=e.match(/^data:([^;,]*)/)[1];if(t.indexOf(".")<0)if(n||(n="text/plain"),"text/plain"===n)t+=".txt";else{var r=n.split("/")[1];r.indexOf("+")>0&&(r=r.split("+")[0]),t=t+"."+r}if(this.isIE){e=e.indexOf(";base64")>=0?atob(e.replace("data:"+n+";base64,","")):decodeURI(e.replace("data:"+n+",","")),e=this.GetBlob(e,n),navigator.msSaveBlob(e,t)}else{var i=this.createElement("a",{href:e,download:t},{display:"none"});document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)}}},GetBlob:function(t,e,n){e=e||"",n=n||512;for(var r=[],i=0;i<t.length;i+=n){for(var o=t.slice(i,i+n),a=new Array(o.length),s=0;s<o.length;s++)a[s]=o.charCodeAt(s);var l=new Uint8Array(a);r.push(l)}return new Blob(r,{type:e})},openImage:function(t,e){if(h()){var n=window.open("","_blank","toolbar=yes, scrollbars=yes, resizable=yes, width=500, height=500").document,r=n.createElement("img");this.setElement(r,{src:e,name:t}),n.body.appendChild(r)}},eventFromInput:function(t){var e=t.target.tagName;return"INPUT"===e||"TEXTAREA"===e||"SELECT"===e},waitForElement:function(t){return new Promise(function(e){var n=document.getElementById(t);if(n)return e(n);var r=setInterval(function(){var n=document.getElementById(t);if(n)return clearInterval(r),e(n)},200)})}};function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.buffer=[],e&&this.buffer.push(e)}return function(t,e,n){e&&f(t.prototype,e),n&&f(t,n)}(t,[{key:"append",value:function(t){return u.a.isString(t)?this.buffer.push(t):u.a.isArray(t)?this.buffer=this.buffer.concat(t):this.buffer.push(""+t),this}},{key:"prepend",value:function(t){return u.a.isString(t)?this.buffer.splice(0,0,t):u.a.isArray(t)?this.buffer=t.concat(this.buffer):this.buffer.splice(0,0,""+t),this}},{key:"clear",value:function(){this.buffer=[]}},{key:"removeLast",value:function(){return this.buffer.pop(),this}},{key:"toString",value:function(t){return t||(t=""),this.buffer.join(t)}}]),t}(),d=n(0);function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.start=e,this.end=n}return function(t,e,n){e&&g(t.prototype,e),n&&g(t,n)}(t,[{key:"length",value:function(){return this.start.distance(this.end)}},{key:"distance",value:function(t){var e=this.start.distance(t);if(0===e)return 0;var n=this.length(),r=new d.a((this.end.x-this.start.x)/n,(this.end.y-this.start.y)/n).dotProduct(new d.a(t.x/e,t.y/e));return e*Math.sqrt(1-r*r)}},{key:"toString",value:function(){return"Line:{start="+this.start+";end="+this.end+"}"}}],[{key:"intersection",value:function(t,e,n,r,i,o,a,s){var l=(s-o)*(n-t)-(a-i)*(r-e),u=((a-i)*(e-o)-(s-o)*(t-i))/l,h=((n-t)*(e-o)-(r-e)*(t-i))/l;if(u>=0&&u<=1&&h>=0&&h<=1){var c=t+u*(n-t),f=e+u*(r-e);return new d.a(c,f)}return null}}]),t}(),v=n(5),m=n(2);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var S=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,k(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(e,v["a"]),function(t,e,n){e&&w(t.prototype,e),n&&w(t,n)}(e,[{key:"toString",value:function(){return"Ellipse:{x="+this.x+";y="+this.y+";width="+this.width+";height="+this.height+"}"}}],[{key:"getPerimeter",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.width/2,i=t.height/2,o=t.x,a=t.y,s=e.x,l=e.y,u=parseInt(s-o),h=parseInt(l-a);if(0===u&&0!==h)return new d.a(o,a+i*h/Math.abs(h));if(0===u&&0===h)return new d.a(s,l);var c=h/u,f=a-c*o,p=r*r*c*c+i*i,g=-2*o*p,y=r*r*c*c*o*o+i*i*o*o-r*r*i*i,v=Math.sqrt(g*g-4*p*y),b=(-g+v)/(2*p),w=(-g-v)/(2*p),x=c*b+f,_=c*w+f,k=0,E=0;Math.sqrt(Math.pow(b-s,2)+Math.pow(x-l,2))<Math.sqrt(Math.pow(w-s,2)+Math.pow(_-l,2))?(k=b,E=x):(k=w,E=_);var S=new d.a(k,E),P=m.a.getDirection(t,S,n);if(n){if(-1===P.x)return{point:new d.a(o-r,a),direction:P};if(1===P.x)return{point:new d.a(o+r,a),direction:P};if(-1===P.y)return{point:new d.a(o,a-i),direction:P};if(1===P.y)return{point:new d.a(o,a+i),direction:P}}return{point:S,direction:P}}}]),e}();function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var N=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,M(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,v["a"]),function(t,e,n){e&&O(t.prototype,e),n&&O(t,n)}(e,[{key:"toString",value:function(){return"Rhombus:{x="+this.x+";y="+this.y+";width="+this.width+";height="+this.height+"}"}}],[{key:"getPerimeter",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.width,i=t.height,o=t.x,a=t.y,s=o-r/2,l=a-i/2,u=e.x,h=e.y;if(o===u)return a>h?{point:new d.a(o,l),direction:d.a.S}:{point:new d.a(o,l+i),direction:d.a.N};if(a===h)return o>u?{point:new d.a(s,a),direction:d.a.E}:{point:new d.a(s+r,a),direction:d.a.W};var c,f,p=o,g=a;return n&&(u>=s&&u<=s+r?p=u:h>=l&&h<=l+i&&(g=h)),u<o?h<a?(c=y.intersection(u,h,p,g,o,l,s,a),f=d.a.S):(c=y.intersection(u,h,p,g,o,l+i,s,a),f=d.a.N):h<a?(c=y.intersection(u,h,p,g,o,l,s+r,a),f=d.a.E):(c=y.intersection(u,h,p,g,o,l+i,s+r,a),f=d.a.W),{point:c,direction:f}}}]),e}();function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e,n){return e&&B(t.prototype,e),n&&B(t,n),t}var $={type:"direct",showGauge:!0,orthogonal:!1},F={width:0,height:0,anchorX:0,anchorY:0,offsetX:0,offsetY:0},z={},K=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;A(this,t),this.start=e[0].point,this.end=e[1].point,this.startNormal=e[0].direction,this.endNormal=e[1].direction,this.startMarker=r,this.endMarker=i,Object.assign(this,n)}return U(t,[{key:"render",value:function(t){return t.renderLink(this)}},{key:"getRelativePosition",value:function(t){u.a.isNumber(t)&&(t={x:t});var e=(t=u.a.defaults(t,F)).x,n=this.length;Math.abs(e)<=1&&(e*=n),e<0&&(e=n+e),e>n&&(e=n);for(var r,i,o,a=this.points,l=0;l<a.length-1;l++){if(e<=(r=a[l].distance(a[l+1]))){o=(i=a[l].clone()).getDirection(a[l+1]),i.translate(o.getScaled(e));break}e-=r}return i||(i=a[a.length-1]),s.a.offsetPosition([i.x,i.y],t)}},{key:"toString",value:function(){return"Link"}},{key:"points",get:function(){return null}},{key:"controlPts",get:function(){return null}},{key:"length",get:function(){var t,e=this.points,n=0;for(t=0;t<e.length-1;t++)n+=e[t].distance(e[t+1]);return n}}],[{key:"getLink",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=u.a.defaultsDeep(e,$);var i=z[e.type];return i?new i(t,e,n,r):(console.log("link type not supported: "+e.type),null)}}]),t}(),W=function(t){function e(){return A(this,e),L(this,D(e).apply(this,arguments))}return j(e,K),U(e,[{key:"points",get:function(){return[this.start,this.end]}}]),e}(),H=function(t){function e(){return A(this,e),L(this,D(e).apply(this,arguments))}return j(e,K),U(e,[{key:"getRelativePosition",value:function(t){u.a.isNumber(t)&&(t={x:t});var e=(t=u.a.defaults(t,F)).x,n=this.length;Math.abs(e)>1&&(e/=n),e<0&&e++,e>1&&e--;var r=this.points,i=this.controlPts,o=r[0],a=i[1][0],l=i[1][1],h=r[1],c=[(1-e)*(1-e)*(1-e)*o.x+3*e*(1-e)*(1-e)*a.x+3*e*e*(1-e)*l.x+e*e*e*h.x,(1-e)*(1-e)*(1-e)*o.y+3*e*(1-e)*(1-e)*a.y+3*e*e*(1-e)*l.y+e*e*e*h.y];return s.a.offsetPosition([c.x,c.y],t)}},{key:"points",get:function(){return[this.start,this.end]}},{key:"controlPts",get:function(){var t=this.points[0],e=this.points[1],n=[];return n[0]=null,n[1]=[],0===this.startNormal.x?n[1][0]=new d.a(t.x,(t.y+e.y)/2):n[1][0]=new d.a((t.x+e.x)/2,t.y),0===this.endNormal.x?n[1][1]=new d.a(e.x,(t.y+e.y)/2):n[1][1]=new d.a((t.x+e.x)/2,e.y),n}}]),e}(),V=function(t){function e(){return A(this,e),L(this,D(e).apply(this,arguments))}return j(e,K),U(e,[{key:"points",get:function(){var t=Port.getBounds(edge,!0),e=Port.getBounds(edge,!1),n=e.right()<t.x,r=t.right()<e.x,i=[],o=n?t.x:t.x+t.width,a=t.getCenterY();i.push(new d.a(o,a));var s=r?e.x:e.x+e.width,l=e.getCenterY(),u=this.segment,h=n?-u:u,c=new d.a(o+h,a);h=r?-u:u;var f=new d.a(s+h,l);if(n===r){var p=n?Math.min(o,s)-u:Math.max(o,s)+u;i.push(new d.a(p,a)),i.push(new d.a(p,l))}else if(c.x<f.x===n){var g=a+(l-a)/2;i.push(c),i.push(new d.a(c.x,g)),i.push(new d.a(f.x,g)),i.push(f)}else i.push(c),i.push(f);return i.push(new d.a(s,l)),i}}]),e}(),G=function(t){function e(t,n,r,i){return A(this,e),n=u.a.defaults(n,{MIN_BUFFER:10,autoRoute:!1,randomNoise:0,step:1,maxChannelWidth:100}),L(this,D(e).call(this,t,n,r,i))}return j(e,K),U(e,[{key:"autoRoute",value:function(t,e,n,r,i){var o,a,s,l,u,h,c,f,p,g;l=n[i],o=(p=t[t.length-2]).y<l.y?1:p.y>l.y+l.height?3:p.x<l.x?0:2,g=(c=_getChannel(e,i,n,o)).horizontal?(c.right-c.left)/2:(c.bottom-c.top)/2;for(var y=0;y<t.length-1;y++)if((t[y+1].x!==t[y].x||t[y+1].y!==t[y].y)&&(u=_getFirstIntersection(t,y,n,r,i))){switch(h=u[0],o=u[1],l=n[h],c=_getChannel(e,h,n,o),o){case 0:case 2:p=new d.a((c.right+c.left)/2,t[y].y),a=_getRouteTendency(t,y,p,l,o)<0?1:3,f=_getChannel(e,h,n,a),s=y>1&&t[y-2].y===t[y-1].y&&t[y-1].y>f.top&&t[y-1].y<f.bottom?t[y-1].y-p.y:y<t.length-3&&t[y+2].y===t[y+3].y&&t[y+2].y>f.top&&t[y+2].y<f.bottom?t[y+2].y-p.y:(f.bottom+f.top)/2-p.y,0===o&&p.x<=t[y].x||2===o&&p.x>=t[y].x?p=null:y>0&&(_hasIntersection([new d.a(t[y].x,t[y].y),new d.a(t[y].x,t[y].y+s),new d.a(p.x,p.y+s)],n)||(p=null));break;case 1:case 3:p=new d.a(t[y].x,(c.bottom+c.top)/2),a=_getRouteTendency(t,y,p,l,o)<0?0:2,f=_getChannel(e,h,n,a),s=y>1&&t[y-2].x===t[y-1].x&&t[y-1].x>f.left&&t[y-1].x<f.right?t[y-1].x-p.x:y<t.length-3&&t[y+2].x===t[y+3].x&&t[y+2].x>f.left&&t[y+2].x<f.right?t[y+2].x-p.x:(f.right+f.left)/2-p.x,1===o&&p.y<=t[y].y||3===o&&p.y>=t[y].y?p=null:y>0&&(_hasIntersection([new d.a(t[y].x,t[y].y),new d.a(t[y].x+s,t[y].y),new d.a(p.x+s,p.y)],n)||(p=null));break;case 4:continue}if(y>20)return;!p||p.x===t[y].x&&p.y===t[y].y?_moveSegment(t,y,s,0,g):(t.splice(y+1,0,p),_moveSegment(t,y+1,s,0,g),y++)}}},{key:"_getRouteTendency",value:function(t,e,n,r,i){var o,a;switch(i){case 0:case 2:a="y";break;case 1:case 3:a="x"}return 0===(o=_getRouteDirection(n,t[t.length-1])[a])&&0===(o=-_getRouteDirection(t[0],t[t.length-1])[a])&&(o=n[a]<r.getCenter()[a]?-1:1),o}},{key:"_getChannel",value:function(t,e,n,r){var i,o,a,s,l,u,h,c=this.maxChannelWidth,f=n[e],p={};switch(r){case 0:for(o=f.getLeft(),p.right=o.x,p.horizontal=!1,a=0;a<n.length;a++)a!==e&&((h=n[a].getRight().x)>=o.x||(!p.left||p.left<h)&&(p.left=h));for(p.left||(p.left=t.getLeft().x,p.right-p.left>c&&(p.left=p.right-c)),a=0;a<n.length;a++)a!==e&&(u=(i=n[a]).getBottom().y,l=i.getTop().y,u<o.y&&i.getRight()>p.left&&i.getLeft()<p.right&&(!p.top||p.top<u)&&(p.top=u),l>o.y&&i.getRight()>p.left&&i.getLeft()<p.right&&(!p.bottom||p.bottom>l)&&(p.bottom=l));p.top||(p.top=t.getTop().y),p.bottom||(p.bottom=t.getBottom().y);break;case 1:for(o=f.getTop(),p.horizontal=!0,p.bottom=o.y,a=0;a<n.length;a++)a!==e&&((u=n[a].getBottom().y)>=o.y||(!p.top||p.top<u)&&(p.top=u));for(p.top||(p.top=t.getTop().y,p.bottom-p.top>c&&(p.top=p.bottom-c)),a=0;a<n.length;a++)a!==e&&(s=(i=n[a]).getLeft().x,(h=i.getRight().x)<o.x&&i.getBottom()>p.top&&i.getTop()<p.bottom&&(!p.left||p.left<h)&&(p.left=h),s>o.x&&i.getBottom()>p.top&&i.getTop()<p.bottom&&(!p.right||p.right>s)&&(p.right=s));p.left||(p.left=t.getLeft().x),p.right||(p.right=t.getRight().x);break;case 2:for(o=f.getRight(),p.horizontal=!1,p.left=o.x,a=0;a<n.length;a++)a!==e&&((s=n[a].getLeft().x)<=o.x||(!p.right||p.right>s)&&(p.right=s));for(p.right||(p.right=t.getRight().x,p.right-p.left>c&&(p.right=p.left+c)),a=0;a<n.length;a++)a!==e&&(u=(i=n[a]).getBottom().y,l=i.getTop().y,u<o.y&&i.getRight()>p.left&&i.getLeft()<p.right&&(!p.top||p.top<u)&&(p.top=u),l>o.y&&i.getRight()>p.left&&i.getLeft()<p.right&&(!p.bottom||p.bottom>l)&&(p.bottom=l));p.top||(p.top=t.getTop().y),p.bottom||(p.bottom=t.getBottom().y);break;case 3:for(o=f.getBottom(),p.horizontal=!0,p.top=o.y,a=0;a<n.length;a++)a!==e&&((i=n[a]).getTop().y<=o.y||(!p.bottom||p.bottom>i.getTop().y)&&(p.bottom=i.getTop().y));for(p.bottom||(p.bottom=t.getBottom().y,p.bottom-p.top>c&&(p.bottom=p.top+c)),a=0;a<n.length;a++)a!==e&&(s=(i=n[a]).getLeft().x,(h=i.getRight().x)<o.x&&i.getBottom()>p.top&&i.getTop()<p.bottom&&(!p.left||p.left<h)&&(p.left=h),s>o.x&&i.getBottom()>p.top&&i.getTop()<p.bottom&&(!p.right||p.right>s)&&(p.right=s));p.left||(p.left=t.getLeft().x),p.right||(p.right=t.getRight().x)}return p}},{key:"_moveSegment",value:function(t,e,n,r,i){var o,a,s;return 0===e?(o=t[0].getDirection(t[1]),r||(r=this.MIN_BUFFER),a=Math.min(r,t[0].distance(t[1])/2),s=t[0].getTranslated(o.scale(a)),t.splice(1,0,s),void this._moveSegment(t,e+1,n)):e===t.length-2?(o=t[t.length-1].getDirection(t[t.length-2]),i||(i=this.MIN_BUFFER),a=Math.min(i,t[t.length-1].distance(t[t.length-2])/2),s=t[t.length-1].getTranslated(o.scale(a)),t.splice(t.length-1,0,s),void this._moveSegment(t,e,n)):void(t[e].y===t[e+1].y?(e>0&&t[e-1].y===t[e].y&&(t.splice(e+1,0,t[e].clone()),e++),e<t.length-2&&t[e+1].y===t[e+2].y&&t.splice(e+1,0,t[e+1].clone()),t[e].y+=n,t[e+1].y+=n):(e>0&&t[e-1].x===t[e].x&&(t.splice(e+1,0,t[e].clone()),e++),e<t.length-2&&t[e+1].x===t[e+2].x&&t.splice(e+1,0,t[e+1].clone()),t[e].x+=n,t[e+1].x+=n))}},{key:"points",get:function(){var t=e.route(this.start,this.end,this.startNormal,this.endNormal,this.MIN_BUFFER);if(this.autoRoute){this._mergeSegments(t);for(var n,r,i,o=[],a=edge.source.getCommonAncestor(edge.target),s=a.getDescendants(),l=0,u=0;u<s.length;u++)(n=s[u]).excludeFromRouting(edge)||n.isAncestor(edge.source)||n.isAncestor(edge.target)||(n===edge.source&&(r=l),n===edge.target&&(i=l),o.push(n.getBounds(document)),l++);o.length>1&&this.autoRoute(t,a.getBounds(document),o,r,i)}if(e._mergeSegments(t),this.randomNoise&&t.length>3)for(var h=1;h<t.length-2;h++){var c=this.randomNoise/this.step,f=Math.floor(Math.random()*c*2-c+1)*this.step;if(this.randomNoise&&4==t.length){var p=(0!=this.startNormal.x&&this.startNormal.x!=this.endNormal.x?this.randomNoise<=Math.abs(t[1].x-t[0].x-this.startNormal.x*this.MIN_BUFFER)?this.randomNoise:Math.abs(t[1].x-t[0].x-this.startNormal.x*this.MIN_BUFFER):0!=this.startNormal.y&&this.startNormal.y!=this.endNormal.y?this.randomNoise<=Math.abs(t[1].y-t[0].y-this.startNormal.y*this.MIN_BUFFER)?this.randomNoise:Math.abs(t[1].y-t[0].y-this.startNormal.y*this.MIN_BUFFER):this.randomNoise)/this.step,d=void 0;d=this.startNormal.x!==this.endNormal.x||this.startNormal.y!==this.endNormal.y?Math.floor(Math.random()*p*2-p+1)*this.step:Math.sign(0!==this.startNormal.x?this.startNormal.x:this.startNormal.y)*Math.floor(Math.random()*p+1)*this.step,this._moveSegment(t,1,d,1,1)}if(this.randomNoise&&t.length>4)for(var g=1;g<t.length-2;g++)c=this.randomNoise/this.step,f=1==g?Math.sign(0!==this.startNormal.x?this.startNormal.x:this.startNormal.y)*Math.floor(Math.random()*c+1)*this.step:g==t.length-3?Math.sign(0!==this.endNormal.x?this.endNormal.x:this.endNormal.y)*Math.floor(Math.random()*c+1)*this.step:Math.floor(Math.random()*c*2-c+1)*this.step,this._moveSegment(t,g,f,1,1)}return t}}],[{key:"route",value:function(t,e,n,r,i){var o,a,s,l=new d.a(t.x+n.x*i,t.y+n.y*i),u=new d.a(e.x+r.x*i,e.y+r.y*i);(o=0!==n.x?(u.x-l.x)/n.x>0?n:new d.a(0,u.y>=l.y?1:-1):(u.y-l.y)/n.y>0?n:new d.a(u.x>=l.x?1:-1,0),a=0!==r.x?(l.x-u.x)/r.x>0?r:new d.a(0,l.y>=u.y?1:-1):(l.y-u.y)/r.y>0?r:new d.a(l.x>=u.x?1:-1,0),0===o.dotProduct(a))?s=[t,l,0===o.x?new d.a(l.x,u.y):new d.a(u.x,l.y),u,e]:s=o.dotProduct(a)<0?0===o.x?[t,l,new d.a(l.x,(t.y+e.y)/2),new d.a(u.x,(t.y+e.y)/2),u,e]:[t,l,new d.a((t.x+e.x)/2,l.y),new d.a((t.x+e.x)/2,u.y),u,e]:[t,l,new d.a(l.x+o.x*i,l.y+o.y*i),new d.a(u.x+a.x*i,u.y+a.y*i),u,e];var h=[];h[0]=s[0];for(var c=1;c<s.length-1;c++)s[c].x===s[c-1].x&&s[c].x===s[c+1].x||s[c].y===s[c-1].y&&s[c].y===s[c+1].y||h.push(s[c]);return h.push(s[s.length-1]),h}},{key:"_hasIntersection",value:function(t,e){for(var n=0;n<t.length-1;n++)for(var r=0;r<e.length;r++)if(e[r].detectIntersection(t[n],t[n+1])>=0)return!0;return!1}},{key:"_getFirstIntersection",value:function(t,e,n,r,i){for(var o,a,s=null,l=null,u=0;u<n.length;u++)0===e&&u===r||e===t.length-2&&u===i||(a=(o=n[u]).detectIntersection(t[e],t[e+1]))>=0&&(null==s?(s=u,l=a):n[s].distance(t[e])>o.distance(t[e])&&(s=u,l=a));return null!=s?[s,l]:null}},{key:"_getRouteDirection",value:function(t,e){return t.x===e.x?t.y<e.y?d.a.S:d.a.N:t.y===e.y?t.x<e.x?d.a.E:d.a.W:t.x<e.x?t.y<e.y?d.a.SE:d.a.NE:t.y<e.y?d.a.SW:d.a.NW}},{key:"_mergeSegments",value:function(t){for(var e=t[t.length-1].y===t[t.length-2].y,n=t.length-2;n>=1;n--)t[n].y===t[n-1].y===e||t[n].equals(t[n-1])?t.splice(n,1):e=!e}}]),e}();z.direct=W,z.bezier=H,z.entityRelations=V,z.manhattan=G;var X=K,q=n(4),Y=n.n(q);function Z(t,e,n,r,i){var o=new p;return t&&o.append("CTRL"),e&&o.append("ALT"),n&&o.append("SHIFT"),r&&o.append("META"),i&&o.append(i),o.toString(".")}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Q={stopPropagation:!1},tt="undefined"!=typeof window?window:{addEventHandler:function(){}},et="undefined"!=typeof document?document:{},nt=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,1/0],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=e,this.rootNS=e.getAttribute("ns")||"root",this.zoomScale=r,Object.assign(this,Q,i),this.scale=1,this.listeners={},this.dragging=!1,this.handler=function(t){n.handleEvent(t)},this.started=!1,this.enterStack=[]}return function(t,e,n){e&&J(t.prototype,e),n&&J(t,n)}(t,[{key:"start",value:function(){this.started||(Y.a.on(this.root,"mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel",this.handler),this.startKeys(),this.started=!0)}},{key:"stop",value:function(){this.started&&(Y.a.off(this.root,"mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel",this.handler),this.stopKeys(),this.started=!1)}},{key:"startKeys",value:function(){Y.a.on(et,"keydown keyup",this.handler)}},{key:"stopKeys",value:function(){Y.a.off(et,"keydown keyup",this.handler)}},{key:"zoomIn",value:function(){return this.scale*=1.25,this.scale=Math.max(Math.min(this.zoomScale[1],this.scale),this.zoomScale[0]),this.scale}},{key:"zoomOut",value:function(){return this.scale*=.8,this.scale=Math.max(Math.min(this.zoomScale[1],this.scale),this.zoomScale[0]),this.scale}},{key:"getEventInfo",value:function(t){for(var e,n=t.target,r=new p,i=[],o=!1;!o&&n&&n!==et;)(e=n.getAttribute("ns"))&&((o=e.startsWith("root."))&&(e=e.substring(5),t.rootTarget=n),t.nsTarget||(t.nsTarget=n),i.splice(0,0,n),r.prepend(e)),n=n.parentNode;return o||(t.rootTarget=t.nsTarget),t.targetStack=i,""===(e=r.toString("."))&&(e=this.rootNS),{data:t.rootTarget,ns:e}}},{key:"handleEvent",value:function(e){var n=this,r=e.type;if(!this.dragging&&!c.eventFromInput(e)){var i,o,a,s=this.getPosition(e),l="keydown"===r||"keyup"===r;if(l)i=this.root,o=function(t){if(!(t&&t instanceof KeyboardEvent))return null;var e=t.keyCode||t.which;return e>=16&&e<=18&&(e=null),Z(t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,e)}(e);else{if(!(a=this.getEventInfo(e)))return;i=a.data,o=a.ns}if("mousewheel"===r&&(this.scale*=Math.pow(2,.002*e.wheelDelta),this.scale=Math.max(Math.min(this.zoomScale[1],this.scale),this.zoomScale[0]),e.scale=this.scale,r="zoom"),"mousedown"===r&&0===e.button){var u,h={data:i,pos:"root"===o?t.mouse(this.root,e):s};this.dragging=!1;var f=function(e){var r=n.getPosition(e);if(!n.dragging){if(h.pos[0]===r[0]&&h.pos[1]===r[1])return;n.dragging=!0,e.rootTarget=h.data,n.dispatch(e,"dragstart",o,h.data,h.pos)}u="root"===o?t.mouse(n.root,e):r,n.getEventInfo(e),n.dispatch(e,"drag",o,h.data,u)};e.preventDefault(),Y.a.on(tt,"mousemove",f),Y.a.on(tt,"mouseup",function e(r){u="root"===o?t.mouse(n.root,r):n.getPosition(r);var i=n.getEventInfo(r);n.dragging?(n.dragging=!1,n.dispatch(r,"dragend",o,h.data,u)):n.dispatch(r,"mouseup",o,i.data,u),Y.a.off(tt,"mousemove",f),Y.a.off(tt,"mouseup",e)})}l||this.simulateEnterLeave(e,r,o,i,s),this.dispatch(e,r,o,i,s)}}},{key:"simulateEnterLeave",value:function(t,e,n,r,i){var o,a,s=this,l=function(e){for(e=e||0;s.enterStack.length>=e+1;)o=s.enterStack.pop(),s.dispatch(t,"mouseleave",o.ns,o.data,i)},u=function(t){for(var e=new p,n=0;n<=t;n++){var r=a[n].getAttribute("ns");r.startsWith("root.")&&(r=r.substring(5)),e.append(r)}return e.toString(".")};if(n&&n!==this.rootNS&&"mouseover"===e){var h;a=t.targetStack;for(var c=0;c<a.length;c++){if(c<this.enterStack.length){if(this.enterStack[c].target===a[c])continue;l(c)}h={data:r,ns:u(c),target:a[c]},this.enterStack.push(h),this.dispatch(t,"mouseenter",h.ns,r,i)}a.length<this.enterStack.length&&l(a.length)}n===this.rootNS&&this.enterStack.length>0&&l()}},{key:"dispatch",value:function(e,n,r,i,o){if(this.started){var a=r?n+"."+r:n;u.a.forEach(this.listeners,function(s,l){t.match(a,s.regexp?s.regexp:l)&&u.a.forEach(s,function(t){t.context?t.callback.apply(t.context,[n,r,i,o,e]):t.callback.apply(window,[n,r,i,o,e])})}),this.stopPropagation&&e.stopPropagation&&e.stopPropagation()}}},{key:"getPosition",value:function(e){var n=t.mouse(this.root,e);return u.a.isNaN(n[0])||u.a.isNaN(n[1])||(this.lastPosition=n),this.lastPosition}},{key:"registerKey",value:function(t,e,n,r){var i=this;if(Array.isArray(e))e.forEach(function(e){i.registerKey(t,e,n,r)});else if((e=Z(e.ctrl,e.alt,e.shift,e.meta,e.code)).length){e=new p(t).append(e).toString(".");var o={callback:n,context:r};this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(o)}}},{key:"unregisterKey",value:function(t,e,n,r){var i=this;if(Array.isArray(e))e.forEach(function(e){i.unregisterKey(t,e,n,r)});else if((e=Z(e.ctrl,e.alt,e.shift,e.meta,e.code)).length){e=new p(t).append(e).toString(".");var o,a=this.listeners[e];if(a)for(var s=0;s<a.length;s++)if((o=a[s]).callback===n&&(!r||r===o.context))return void a.splice(s,1)}}},{key:"register",value:function(t,e,n,r){var i=this;if(Array.isArray(t))t.forEach(function(t){i.register(t,e,n,r)});else{var o={callback:e,context:n,zIndex:r},a=null;t instanceof RegExp&&(a=t,t+=""),this.listeners[t]||(this.listeners[t]=[]),a&&!this.listeners[t].regexp&&(this.listeners[t].regexp=a),this.listeners[t].push(o)}}},{key:"unregister",value:function(t,e,n){t instanceof RegExp&&(t+="");var r,i=this.listeners[t];if(i)for(var o=0;o<i.length;o++)if((r=i[o]).callback===e&&(!n||n===r.context))return void i.splice(o,1)}},{key:"destroy",value:function(){this.stop(),delete this.root,delete this.listeners,delete this.enterStack}}],[{key:"match",value:function(t,e){return e instanceof RegExp?t.match(e):t===e}},{key:"mouse",value:function(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}]),t}(),rt=1,it=2,ot=4,at=8,st={fontSize:11,fontFamily:"Arial",fontStyle:0,fontColor:"black",padding:0,linePadding:0,align:"left",width:0,height:0,rotation:null,geometry:{x:0,y:0,anchorY:0,offsetX:0,offsetY:0}},lt=function(){var t,e,n=null,r=u.a.memoize(function(r,i,o,a){if(i=i||11,o=o||"Arial,Helvetica",a=!u.a.isUndefined(a)&&a,!n){n=c.createElement("iframe",{id:"_ComputeStylesIframe"},{position:"absolute",visibility:"hidden",width:"auto"}),document.body.appendChild(n);var s=n.contentWindow.document;s.open(),s.write('<html><body>\n        <div id="baselineDiv" style="height:100px;"><span style="line-height:0">T</span><span style="height:100%;display:inline-block;"></span></div>\n        <div id="measureDiv" style="position:absolute;width:auto;height:auto;padding:0;white-space:nowrap;display:inline-block;"></div>\n        </body></html>'),s.close(),t=s.getElementById("measureDiv"),e=s.getElementById("baselineDiv")}e.style.fontSize=t.style.fontSize=i,e.style.fontFamily=t.style.fontFamily=o,e.style.fontWeight=t.style.fontWeight=a?"bold":"normal",t.innerHTML=r;var l=e.firstChild,h=l.offsetTop+l.offsetHeight-e.offsetHeight-e.offsetTop;return{width:t.offsetWidth,height:t.offsetHeight,baseline:h}},function(t,e,n,r){return t+";"+e+";"+n+";"+r}),i=u.a.memoize(function(t,e,n,i,o){e=e||0,n=n||11,i=i||"Arial,Helvetica",o=!u.a.isUndefined(o)&&o;var a=[],s=r("&nbsp;",n,i,o),l=s.width;if(a.lineHeight=s.height,a.baseline=s.baseline,!e||!t||""===t)return a.push(t),a.width=t&&""!==t?r(t,n,i,o).width:l,a.height=a.lineHeight,a;for(var h=0,c=t.split("\n"),f=new p,d=0;d<c.length;d++){for(var g=c[d].split(/\s/),y="",v=0,m=0,b=!0,w=void 0,x=0;x<g.length;x++)w=g[x],m=r(w,n,i,o).width,(b?m:v+l+m)>e?(b?(f.append(w),h=Math.max(h,m),x<g.length-1&&(a.push(f.toString()),f.clear())):(a.push(f.append(y).toString()),h=Math.max(h,v+l+m),f.clear()),y="",v=0,b||x--,b=!0):(y=b?w:y+" "+w,v=b?m:v+l+m,h=Math.max(h,v),b=!1);""!==y&&f.append(y),d<c.length-1&&(a.push(f.toString()),f.clear())}return a.push(f.toString()),a.width=h,a.height=a.lineHeight*a.length,a},function(t,e,n,r,i){return t+";"+e+";"+n+";"+r+";"+i});function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=(e=u.a.defaultsDeep(e,st)).fontSize,i=e.fontFamily,o=e.fontStyle,a=(o&rt)===rt,l=e.padding,h=e.linePadding,c=e.align,f=e.width,p=e.height;n.width&&(f=f<=5?n.width*f:f,p=p<=5?n.height*p:p),f-=2*l,p-=2*l,f=Math.max(0,f),p=Math.max(0,p);var d=u.a.clone(e.geometry),g=this.wrap(t,f,r,i,a);d.width=g.width+2*l,d.height=g.height+2*l+(g.length-1)*h;var y,v="start",b=0,w=!u.a.has(d,"anchorX");switch(c){case"center":v="middle",w&&(d.anchorX=0);break;case"right":v="end",b=g.width/2,w&&(d.anchorX=-.5);break;case"left":b=-g.width/2,w&&(d.anchorX=.5)}y=n.getRelativePosition?n.getRelativePosition(d):s.a.getRelativePosition({width:n.width,height:n.height},d);var x=new m.a(y[0],y[1],d.width,d.height),_="center"===c?[0,0]:"left"===c?[-g.width/2,0]:[g.width/2,0];d.width=Math.max(f+2*l,d.width),d.height=Math.max(p+2*l,d.height),y=n.getRelativePosition?n.getRelativePosition(d):s.a.getRelativePosition({width:n.width,height:n.height},d);var k=new m.a(y[0],y[1],d.width,d.height);return{config:e,label:g,_label:t,bold:a,underline:o&ot,italic:o&it,shadow:o&at,dx:b,dy:-d.height/2+l+g.lineHeight-g.baseline,anchor:v,lineHeight:g.lineHeight+h,pivot:_,bounds:x,maxBounds:k}}return{FONT_BOLD:rt,FONT_ITALIC:it,FONT_UNDERLINE:ot,FONT_SHADOW:at,getStringSize:r,wrap:i,getLabelBox:function(t,e,n,r){return o.call(this,t,e,{width:n,height:r})},getLabelBoxForLink:function(t,e,n){return o.call(this,t,e,n)},render:function(t,e){return t.renderLabel(e)},editor:{start:function(t,e,n,r,i){var o=this,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(this.input){if(this.key===t)return;this.stop()}var l=s?"input":"textarea";this.input=c.createElement(l,{id:"inlineEditor",unselectable:"off"},{position:"absolute",overflow:"hidden",padding:"0px",margin:"0px",border:"transparent"}),s&&Y.a.on(this.input,"keydown keyup",function(t){13===t.keyCode&&(Y.a.off(o.input,"keydown keyup"),o.stop())}),e.appendChild(this.input),this.key=t,this.box=n,this.refEl=r,this.textEl=i;var u=n.config,h=new m.a(n.maxBounds.x,n.maxBounds.y,n.maxBounds.width*a,n.maxBounds.height*a),f=c.getCenterPosition(r,e);f=[f[0]+h.left,f[1]+h.top],i&&(i.style.visibility="hidden"),c.setElement(this.input,null,{visibility:"visible",left:f[0]+"px",top:f[1]+"px",width:h.width+"px",height:h.height+"px","font-family":u.fontFamily,"font-size":u.fontSize*a+"px","font-weight":(u.fontStyle&rt)===rt?"bold":"normal"}),this.input.value=n._label,this.input.focus(),this.input.select(),Y.a.fire(this,"editor.start",[this.key])},stop:function(t){this.input&&(t=t||!1,this.textEl&&(this.textEl.style.visibility=null),this.input.parentNode.removeChild(this.input),t||Y.a.fire(this,"editor.update",[this.key,this.input.value]),Y.a.fire(this,"editor.stop",[this.key]),delete this.input,delete this.key,delete this.box,delete this.refEl,delete this.textEl)}}}}();function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ht=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:u.a.uniqueId()};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.graph=e,this.id=n.id,delete n.id,n.decorators&&(this.createDecorators(n.decorators),delete n.decorators),n.views&&(this.viewProps=n.views,delete n.views);var r=n.type||"Default";if(!(r=s.a.type(this.constructor.namespace,r)))throw new Error("Type not found "+n.type);delete n.type,this.props=new r(n)}return function(t,e,n){e&&ut(t.prototype,e),n&&ut(t,n)}(t,[{key:"prop",value:function(t,e){if(u.a.isUndefined(e))return this.props[t];this.props[t]=e}},{key:"viewProp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(u.a.isUndefined(n))return"default"===t?this.prop(e,n):this.viewProps[t][e];"default"===t?this.prop(e,n):(this.viewProps[t]||(this.viewProps[t]={}),this.viewProps[t][e]=n)}},{key:"createDecorators",value:function(t){}},{key:"getView",value:function(t){var e=this.getShape(t);return u.a.assign({id:this.id,key:t,className:this.computedClassName,style:this.viewProp(t,"style"),namespace:this.namespace},e)}},{key:"getShape",value:function(t){var e=a.get(this.id+".shape",t);if(e)return e;var n=this.viewProp(t,"shape");return e=new(n?v.a.getShape(n.name):v.a.getShape("Rectangle"))(this.viewProp(t,"x"),this.viewProp(t,"y"),this.viewProp(t,"width"),this.viewProp(t,"height"),n),a.set(this.id+".shape",e,t),e}},{key:"render",value:function(t){var e=a.get(this.id+".template",t.id);if(!e){var n=this.prop("role");e=t.getTemplate("$"+n,null,this),u.a.isString(e)&&(e=u.a.template(e)),a.set(this.id+".template",e,t.id)}return e(this.getView(t.id))}},{key:"renderShape",value:function(t){var e=this.getShape(t.id);return e?e.render(t):""}},{key:"renderLabel",value:function(t){if(this===this.graph.currentRoot)return null;var e=this.getLabelBox(t.id);return e?t.renderLabel(e):""}},{key:"getLabelBox",value:function(t){var e=a.get(this.id+".labelBox",t);if(e)return e;var n=this.getShape(t);return e=lt.getLabelBox(this.prop("label"),this.viewProp(t,"labelConfig"),n.width,n.height),a.set(this.id+".labelBox",e,t),e}},{key:"destroy",value:function(){delete this.graph,delete this.decorators,delete this.props,delete this.viewProps,this.destroyed=!0}},{key:"computedClassName",get:function(){if(!this._computedClassName){var t=new p(this.prop("role")),e=this.props;for(e.hasOwnProperty("className")&&t.append(e.className),e=e.constructor.prototype;e;)e.hasOwnProperty("className")&&t.append(e.className),e=Object.getPrototypeOf(e);this._computedClassName=t.toString(" ")}return this._computedClassName}},{key:"namespace",get:function(){return this===this.graph.currentRoot?"":"root."+this.prop("role")}}]),t}();function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(t,e){return!e||"object"!==ct(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gt(t,e){return(gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yt=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r.id||(r.id=u.a.uniqueId("N")),(n=pt(this,dt(e).call(this,t,r))).inEdges=[],n.outEdges=[],n.ports=null,n.parent=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gt(t,e)}(e,ht),function(t,e,n){e&&ft(t.prototype,e),n&&ft(t,n)}(e,[{key:"isAncestor",value:function(t){for(var e=t.parent;e;){if(this===e)return!0;e=e.parent}return!1}},{key:"removeEdge",value:function(t){for(var e=t.source===this?this.outEdges:this.inEdges,n=0;n<e.length;n++)if(t===e[n]){e.splice(n,1);break}}},{key:"addInEdge",value:function(t,e){null==e||void 0===e?this.inEdges.push(t):this.inEdges.splice(e,0,t)}},{key:"addOutEdge",value:function(t,e){null==e||void 0===e||e>t.length-1?this.outEdges.push(t):this.outEdges.splice(e,0,t)}},{key:"renderChildren",value:function(t){if(this.children){var e=new p;return u.a.forEach(this.children,function(n){e.append(n.render(t))}),e.toString()}return""}},{key:"getPort",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=this.getShape(t);return"auto"===e?i.getPerimeter(n,r):null}},{key:"toString",value:function(){var t=this.prop("label")?this.prop("label"):"undefined";return u.a.isArray(t)&&(t=t[0]),"Node:{id:"+this.id+";label:"+t+";type:"+this.props.constructor.typeName+"}"}}]),e}();yt.namespace="Nodes";var vt=yt;function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wt(t,e){return!e||"object"!==mt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xt(t,e,n){return(xt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_t(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Et=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r.id||(r.id=u.a.uniqueId("E")),(n=wt(this,_t(e).call(this,t,r))).source=n.target=null,n.setSource(i,r.sourcePos),n.setTarget(o,r.targetPos),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(e,ht),function(t,e,n){e&&bt(t.prototype,e),n&&bt(t,n)}(e,[{key:"setSource",value:function(t,e){this.setTerminal(t,e,"source")}},{key:"setTarget",value:function(t,e){this.setTerminal(t,e,"target")}},{key:"setTerminal",value:function(t,e,n){var r="source"==n?this.source:this.target;r==t?t&&t.setEdgeAt(this,e):(r&&r.removeEdge(this),t&&("source"==n?t.addOutEdge(this,e):t.addInEdge(this,e)),"source"==n?this.source=t:this.target=t)}},{key:"getLabelBox",value:function(t){var e=this.prop("label");return e?lt.getLabelBoxForLink(e,this.viewProp(t,"labelConfig"),this.getShape(t)):null}},{key:"getReferencePoints",value:function(t){var e=[];return this.source?e.push(this.source.getShape(t).center):e.push(this.viewProp(t,"start")),this.target?e.push(this.target.getShape(t).center):e.push(this.viewProp(t,"end")),e}},{key:"getTerminalVisual",value:function(t,e){var n=this.getReferencePoints(t),r=[],i=function(t){return new m.a(t.x,t.y,3,3)};return this.source?r.push(this.source.getPort(t,this.prop("sourcePort"),n[1],e)):r.push({point:n[0],direction:m.a.getDirection(i(n[0]),n[1],!0)}),this.target?r.push(this.target.getPort(t,this.prop("targetPort"),n[0],e)):r.push({point:n[1],direction:m.a.getDirection(i(n[1]),n[0],!0)}),r}},{key:"getShape",value:function(t){var e=a.get(this.id+".shape",t);if(e)return e;var n=this.viewProp(t,"shape");return e=X.getLink(this.getTerminalVisual(t,n.orthogonal),n,this.prop("startMarker"),this.prop("endMarker")),a.set(this.id+".shape",e,t),e}},{key:"toString",value:function(){return"Edge:{"+(this.source?this.source.id:"null")+"--"+(this.target?this.target.id:"null")+"}"}},{key:"destroy",value:function(){xt(_t(e.prototype),"destroy",this).call(this),this.setSource(null),this.setTarget(null)}}]),e}();Et.namespace="Edges";var St=Et,Pt={},Ot=function(){return Pt.arrow=function(t,e,n){var r=e?-1:1,i={viewBox:new m.a(-5,-5,10,10),size:t,ref:[4*r,0],fill:n.color};return i.shape={name:"Polygon",points:[[-2*r,0],[-4*r,4],[4*r,0],[-4*r,-4]]},i},Pt.triangle=function(t,e,n){var r=e?-1:1,i={viewBox:new m.a(-5,-5,10,10),size:t,ref:[4*r,0],fill:n.color};return i.shape={name:"Polygon",points:[[-5*r,-5],[-5*r,5],[4*r,0]]},i},Pt.oval=function(t,e,n){var r=t/2,i={viewBox:new m.a(-r,-r,t,t),size:t,ref:[0,0],fill:n.color};return i.shape='<ellipse cx="0" cy="0" rx="'+r+'" ry="'+r+'"></ellipse>',i},Pt.diamond=function(t,e,n){var r=e?-1:1,i={viewBox:new m.a(-5,-5,10,10),size:t,ref:[4*r,0],fill:n.color,shape:{name:"Polygon",points:[[-4,0],[0,4],[4,0],[0,-4]]}};return i},{registry:Pt,getMarker:function(t,e){var n=(0,Pt[t.type])(t.size,e,t);return n.id=t.id,n}}}();function Ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Mt={name:"Default",role:"node",draggable:!0,selectable:!0,editable:!0,resizable:!1,sourceable:!0,targetable:!0,visible:!0},Tt={name:"Default",role:"edge",selectable:!0,visible:!0,startMarker:null,endMarker:{id:"Default_EndMarker",type:"arrow",size:10,color:"#0ea117"},start:[0,0],end:[400,200]},Nt=function(){function t(){var e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.a.uniqueId("G"),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=r,this.nodes={},this.edges={},this.selection=null,this.destroyed=!1,s.a.buildTypes(i.nodeTypes,"Nodes",Mt),s.a.buildTypes(i.edgeTypes,"Edges",Tt),this.markers=[],s.a.type(St.namespace).forEach(function(t){(n=t.prototype.startMarker)&&(e=Ot.getMarker(n,!0),this.markers.push(e)),(n=t.prototype.endMarker)&&(e=Ot.getMarker(n,!1),this.markers.push(e))},this),delete i.nodeTypes,delete i.edgeTypes,s.a.initConfig(this,i),this.root=null,o&&this.loadModel(o)}return function(t,e,n){e&&Ct(t.prototype,e),n&&Ct(t,n)}(t,[{key:"addNode",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentRoot,r=arguments.length>2?arguments[2]:void 0,i=new(t.getJSClass(e,vt))(this,e);return n?t.addChild(n,i,r):(this.root=i,this.root.prop("role","root")),this.nodes[i.id]=i,i}},{key:"addEdge",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentRoot,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=new(t.getJSClass(e,St))(this,e,r,i);return t.addChild(n,o),this.edges[o.id]=o,o}},{key:"loadModel",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentRoot,r=t.nodes,i=t.edges;delete t.nodes,delete t.edges;var o=this.addNode(t,n);r&&u.a.forEach(r,function(t){e.loadModel(t,o)}),i&&u.a.forEach(i,function(t){var n,r;t.from&&(n=e.nodes[t.from]),t.to&&(r=e.nodes[t.to]),e.addEdge(t,o,n,r)})}},{key:"reset",value:function(){}},{key:"destroy",value:function(){}},{key:"currentRoot",get:function(){return this.root}}],[{key:"getJSClass",value:function(t,e){var n=null;if(t&&t.type){var r=s.a.type(e.namespace,t.type);r&&(n=r.jsClass)}return s.a.getConstructor(n,e)}},{key:"addChild",value:function(t,e){t.children||(t.children=[]),e.parent!=t&&(t.children.push(e),e.parent&&e.parent.children&&(e.parent.children=u.a.without(e.parent.children,e))),e.parent=t}}]),t}();Nt.DEFAULTS={allowDanglingEdges:!0,multiConnect:!1,readOnly:!1,viewOnly:!1};var Rt=Nt;function Lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Dt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.hasOwnProperty("orientation")&&u.a.isString(e.orientation)&&("HORIZONTAL"==e.orientation.toUpperCase()?e.orientation=t.HORIZONTAL:delete e.orientation),s.a.initConfig(this,e)}return function(t,e,n){e&&Lt(t.prototype,e),n&&Lt(t,n)}(t,[{key:"layout",value:function(t,e){}},{key:"reset",value:function(){}},{key:"destroy",value:function(){}}]),t}();Dt.VERTICAL=0,Dt.HORIZONTAL=1,Dt.DEFAULTS={orientation:Dt.VERTICAL};var jt=Dt;function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bt(t,e){return!e||"object"!==It(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ut(t){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $t(t,e){return($t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ft=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Bt(this,Ut(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$t(t,e)}(e,jt),function(t,e,n){e&&At(t.prototype,e),n&&At(t,n)}(e,[{key:"layout",value:function(t,e){var n;if((n=t?_.isArray(t)?t:t.getLinkedNodes("target"):this.owner.childNodes)&&0!=n.length){for(var r,i=0,o=0,a=0,s=0,l=0,u=0;u<n.length;u++)r=n[u],i>0&&i+this.hgap+r.getProperty("width")>e.width&&(o+=a+this.vgap,i=0,a=0,s=0,l++),r._flPos=[s,l],r.moveTo([e.x+i,e.y+o]),i+=this.hgap+r.getProperty("width"),s++,a=a<r.getProperty("height")?r.getProperty("height"):a;this.trigger(new Rectangle(e.x,e.y,e.width,o+a))}}}]),e}();Ft.DEFAULTS={hgap:10,vgap:10};var zt=Ft;function Kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Wt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return function(t,e,n){e&&Kt(t.prototype,e),n&&Kt(t,n)}(t,[{key:"destroy",value:function(){delete this.renderer}}]),t}();function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gt(t){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Yt=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?qt(t):e}(this,Gt(e).call(this,t));var r=t.dispatcher;return r.register(/^drag.*\.graph$/,n.handleDrag,qt(qt(n))),r.register(/^zoom/,n.handleZoom,qt(qt(n))),n.offset=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}(e,Wt),function(t,e,n){e&&Vt(t.prototype,e),n&&Vt(t,n)}(e,[{key:"handleZoom",value:function(t,e,n,r,i){this.renderer.transform(null,null,i.scale)}},{key:"handleDrag",value:function(t,e,n,r,i){if("dragstart"!=t)this.offset&&(this.renderer.transform(r[0]+this.offset[0],r[1]+this.offset[1]),"dragend"==t&&delete this.offset);else{if(!("pan"==this.renderer.prop("defaultClickMode")^(i.ctrlKey||i.shiftKey)))return;var o=this.renderer.translate;this.offset=[o[0]-r[0],o[1]-r[1]]}}}]),e}();function Zt(t){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qt(t,e,n){return(Qt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=te(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function te(t){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ee(t,e){return(ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ne(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var re=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==Zt(e)&&"function"!=typeof e?ne(t):e}(this,te(e).call(this,t));var r=t.dispatcher;return r.register("mousedown.*",n.selectCell,ne(ne(n))),r.register("mouseup.*",n.unselectCell,ne(ne(n))),r.register("drag*.graph",n.handleMultiSelect,ne(ne(n))),n.selectedNodes=null,n.selectedLinks=null,n.attachedLinks=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ee(t,e)}(e,Wt),function(t,e,n){e&&Jt(t.prototype,e),n&&Jt(t,n)}(e,[{key:"updateSelections",value:function(){this.selectedNodes&&this.selectedNodes.classed("selected",!1),this.selectedLinks&&this.selectedLinks.classed("selected",!1),this.selectedNodes=null,this.selectedLinks=null,this.attachedLinks=null,this.graph.selectedVertices&&this.graph.selectedVertices.length>0&&(this.selectedNodes=this.graph.renderer.getShapes(this.graph.selectedVertices),this.attachedLinks=this.graph.renderer.getShapes(this.graph.getAttachedEdges()),this.selectedNodes.classed("selected",!0)),this.graph.selectedEdges&&this.graph.selectedEdges.length>0&&(this.selectedLinks=this.graph.renderer.getShapes(this.graph.selectedEdges),this.selectedLinks.classed("selected",!0))}},{key:"selectCell",value:function(t,e,n,r,i){var o=n===this.graph?null:n;if(!o||o instanceof ht){var a=i.ctrlKey||i.shiftKey;o&&o instanceof ht&&(this.graph.isSelected(o)?o._firstSelection=!0:delete o._firstSelection,d3.select(i.dataTarget).moveToFront(),this.graph.setSelection(o,a))}}},{key:"unselectCell",value:function(t,e,n,r,i){var o=n===this.graph?null:n;if(!o||o instanceof ht){var a=i.ctrlKey||i.shiftKey;o||this.graph.setSelection(o,a)}}},{key:"handleMultiSelect",value:function(t,e,n,r,i){if(r=util.scale(this.graph,r),"dragstart"!==t){if(this.startPt){var o=m.a.getBoundingRectangle([new Point(r[0],r[1]),this.startPt]),a=this.graph.renderer;if(this.rubberband||(this.rubberband=d3.select(a.appendNode(a.getCellLayer(),{template:_.template('<g><rect x="0" y="0" width="100" height="100" stroke="#000000" fill="none" stroke-dasharray="3 3"/></g>')},!1))),"dragend"==t){var s=this.graph.getCurrentRoot().children;return s=_.filter(s,function(t){var e=t.getBounds();return!!o.contains(e)}),this.graph.setSelection(s,i.ctrlKey),this.rubberband.remove(),delete this.startPt,void delete this.rubberband}this.rubberband.select("rect").attr({x:o.x,y:o.y,width:o.width,height:o.height})}}else{if(!("select"==this.graph.getProperty("defaultClickMode")^(i.ctrlKey||i.shiftKey)))return;this.startPt=new Point(r[0],r[1])}}},{key:"destroy",value:function(){Qt(te(e.prototype),"destroy",this).call(this),delete this.selectedNodes,delete this.selectedLinks,delete this.attachedLinks}}]),e}();function ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var oe=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.box=c.createElement("div",{id:this.id,tabindex:0,ns:"graph"},{overflow:"hidden",width:"100%",height:"100%",position:"relative"}),n.appendChild(this.box),r.layout){var o=s.a.getConstructor(r.layout.jsClass,jt);this.layout=new o(r.layout.config),delete r.layout}this.clear=!0,this._translate=[0,0],this._scale=1,this.graph=i,this.dispatcher=null,this.graphBehavior=null,this.selectionBehavior=null,this.nodeBehavior=null,this.edgeBehavior=null,this.connectionBehavior=null,s.a.initConfig(this,r),Y.a.on(lt.editor,"editor.update.*",function(t,e){console.log(t+"="+e)})}return function(t,e,n){e&&ie(t.prototype,e),n&&ie(t,n)}(t,[{key:"viewport",value:function(t,e){if((u.a.isUndefined(t)||u.a.isNull(t))&&(t=!1),!e){var n=new m.a(0,0,this.box.offsetWidth,this.box.offsetHeight);return t?s.a.scale(this.translate,this.scale,n):n}t||(e=s.a.scale(this.translate,this.scale,e));var r=this.box.offsetWidth/e.width;this.transform(-e.x*r,-e.y*r,r)}},{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.graph,i=r?r.currentRoot:null;(u.a.isNull(t)||(this._translate[0]=t,i&&i.viewProp(this.id,"x",t)),u.a.isNull(e)||(this._translate[1]=e,i&&i.viewProp(this.id,"y",e)),u.a.isNull(n))||(this._scale=n,i&&i.viewProp(this.id,"scale",n),this.dispatcher.scale!==n&&(this.dispatcher.scale=n));this.refresh()}},{key:"render",value:function(){return!!this._graph&&(this.layout&&this.layout.layout(this._graph.currentRoot,this.viewport()),this.initializeBehaviors(),!0)}},{key:"renderLabel",value:function(t){return this.constructor.renderLabel(t)}},{key:"renderLink",value:function(t){return this.constructor.renderLink(t)}},{key:"renderMarkers",value:function(t){return this.constructor.renderMarkers(t)}},{key:"initializeBehaviors",value:function(){var t;this.dispatcher||(this.dispatcher=new nt(this.box,[this.prop("minZoom"),this.prop("maxZoom")]),this.prop("graphBehavior")&&(t=s.a.getConstructor(this.prop("graphBehavior")),this.graphBehavior=new t(this)),this.prop("selectionBehavior")&&(t=s.a.getConstructor(this.prop("selectionBehavior")),this.selectionBehavior=new t(this)),this.dispatcher.register("mouseup.node.label",function(t,e,n,r,i){var o=this,a=this._graph.nodes[n.getAttribute("id")];this.dispatcher.dragging||a._firstSelection||(lt._delayEdit=u.a.delay(function(){lt._delayEdit&&(delete lt._delayEdit,lt.editor.start(a.id,o.box,a.getLabelBox(o.id),n,i.nsTarget,o.scale))},250))},this),this.dispatcher.register([/^mousedown/,/^zoom/],function(t,e,n,r,i){c.eventFromInput(i)||lt.editor.stop()},this));this.dispatcher.start()}},{key:"refresh",value:function(){}},{key:"getTemplate",value:function(t,e,n){var r=this.constructor.TEMPLATES[t];if(r&&u.a.isFunction(r)&&(r=r(e)),n){var i=r.match(/(#{[^#]*})/g),o={};for(var a in i)o[a=(a=i[a]).substring(2,a.length-1).trim()]=n[u.a.camelCase("render "+a)](this);r=u.a.template(r,{interpolate:/#{([\s\S]+?)}/g})(o)}return r}},{key:"reset",value:function(){}},{key:"destroy",value:function(){delete this._graph,delete this.layout,this.dispatcher&&(this.dispatcher.stop(),delete this.dispatcher),this.box.innerHTML=""}},{key:"graph",get:function(){return this._graph},set:function(t){this._graph=t;var e=t.currentRoot;e&&(this._translate=[e.viewProp(this.id,"x")||0,e.viewProp(this.id,"y")||0],this._scale=e.viewProp(this.id,"scale")||1)}},{key:"translate",get:function(){return this._translate},set:function(t){this.transform(t[0],t[1])}},{key:"scale",get:function(){return this._scale},set:function(t){switch(t){case"in":t=this.scale*this.prop("zoomFactor");break;case"out":t=this.scale/this.prop("zoomFactor");break;case"actual":t=1;break;case"fit":var e=2*this.prop("gridSize"),n=this.getBounds(),r=this.viewport();r.width-=e,r.height-=e,t=Math.min(r.width/n.width,r.height/n.height,1);break;default:u.a.isString(t)&&(t=parseFloat(t))}this.transform(null,null,t)}}]),t}();oe.DEFAULTS={defaultClickMode:"pan",hideOutline:!1,singleSelect:!0,draggable:!0,gridEnabled:!1,guidesEnabled:!0,gridSize:30,maxZoom:4,minZoom:.2,zoomFactor:1.2,maskOpacity:.5,graphBehavior:Yt,selectionBehavior:re};var ae=oe;function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ue(t,e){return!e||"object"!==se(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function he(t,e,n){return(he="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ce(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ce(t){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}if("undefined"!=typeof SVGElement){var pe=document.createElementNS("http://www.w3.org/2000/svg","svg");pe.innerHTML="<circle/>","[object SVGCircleElement]"!==pe.firstChild&&Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:!1,configurable:!0,get:function(){var t,e;return e=document.createElement("div"),t=this.cloneNode(!0),e.appendChild(t),e.innerHTML}},innerHTML:{enumerable:!1,configurable:!0,get:function(){var t=this.outerHTML,e=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i"),n=new RegExp("</"+this.nodeName+">$","i");return t.replace(e,"").replace(n,"")},set:function(t){for(var e;null!==(e=this.lastChild);)this.removeChild(e);var n=new p;n.append("<svg>").append(t).append("</svg");for(var r=c.createElement("div",null,null,n.toString()).firstElementChild;r.firstChild;)this.appendChild(r.firstChild)}}}),SVGElement.prototype.toDataURL=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,r=function(t){};function o(t){var e="data:image/svg+xml;base64,";return window&&window.btoa?(r("using window.btoa for base64 encoding"),e+=btoa(t)):(r("using custom base64 encoder"),e+=i.encode(t)),e}switch(!0===e.debug&&"undefined"!=typeof console&&(r=function(t){console.log("SVG.toDataURL:",t)}),t||(t="image/svg+xml"),e.keepNonSafe&&r("NOTE: keepNonSafe is NOT supported and will be ignored!"),e.keepOutsideViewport&&r("NOTE: keepOutsideViewport is only supported with canvg exporter."),t){case"image/svg+xml":return function(){var i=o(n.outerHTML);return r(t+" length: "+i.length),e.callback&&e.callback(i),i}();case"image/png":case"image/jpeg":case"javascript":switch(e.renderer||(window&&window.canvg?e.renderer="canvg":e.renderer="native"),e.renderer){case"canvg":return r("using canvg renderer for "+t+" image export"),function(t){if("undefined"==typeof canvg)return null;var i=c.createElement("canvas",null,{display:"none"});if(document.body.appendChild(i),"javascript"===t&&"undefined"!=typeof jsCanvas){var o=new jsCanvas("jscanvastest");o.canvas.style.display="none"}if(e.keepOutsideViewport){var a=e.padding||0,s=1,l=[0,0],u=n.getBBox();r("detected svg dimensions "+[u.x,u.y,u.width,u.height]);var h=n.firstElementChild.getAttribute("transform");h&&(r("detected svg transform "+h),l=(h=de.transform(h)).translate,s=h.scale);var f=new p;if(f.append('<svg width="').append(u.width+2*a).append('px" height="').append(u.height+2*a).append('px"><g transform="translate(').append(-u.x+l[0]+a).append(",").append(-u.y+l[1]+a).append(")scale(").append(s).append(')">').append(n.firstElementChild.innerHTML).append("</g></svg>"),"javascript"===t)return void o.compile(f.toString(),function(){e.callback&&e.callback(o.toString())});canvg(i,f.toString())}else canvg(i,n.outerHTML);var d=i.toDataURL(t);return e.callback&&e.callback(d),i.parentNode.removeChild(i),d}(t);case"native":return r("using native renderer for "+t+" export. THIS MIGHT FAIL."),function(t){var i=document.createElement("canvas"),a=i.getContext("2d"),s=new Image,l=n.outerHTML;s.src=o(l),s.onload=function(){r("exported image size: "+[s.width,s.height]),i.width=s.width,i.height=s.height,a.drawImage(s,0,0);var n=i.toDataURL(t);r(t+" length: "+n.length),e.callback?e.callback(n):r("WARNING: no callback set, so nothing happens.")},s.onerror=function(){r("Can't export! Maybe your browser doesn't support SVG in img element or SVG input for Canvas drawImage?\nhttp://en.wikipedia.org/wiki/SVG#Native_support")}}(t);default:r("unknown image renderer given, doing noting ("+e.renderer+")")}break;default:r("Sorry! Exporting as '"+t+"' is not supported!")}return null}}var de=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ue(this,ce(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fe(t,e)}(e,ae),function(t,e,n){e&&le(t.prototype,e),n&&le(t,n)}(e,[{key:"render",value:function(){if(he(ce(e.prototype),"render",this).call(this)){var t=this.graph.currentRoot,n=new p('<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">'),r=this.translate;n.append('<g transform="translate(').append(r[0]).append(",").append(r[1]).append(")scale(").append(this.scale).append(')">'),n.append(this.renderDefs()),n.append(t.render(this)),n.append("</g></svg>"),this.box.innerHTML=n.toString(),this.svg=this.box.firstElementChild}}},{key:"renderDefs",value:function(){var t=new p("<defs>");t.append(this.getTemplate("Grid",this.prop("gridSize")));var n=this.graph.markers;return n.length>0&&t.append(e.renderMarkers(n)),t.append("</defs>"),t.toString()}},{key:"refresh",value:function(){if(this.svg){var t=this.svg.querySelector("g"),e=this.translate;t.setAttribute("transform","translate("+e[0]+","+e[1]+")scale("+this.scale+")")}}}],[{key:"renderMarkers",value:function(t){var e,n,r=new p;return t.forEach(function(t){e=this.TEMPLATES.Marker(t),n=t.shape,u.a.isString(n)||(n=this.renderShape(n)),e=e.replace(/#\{shape\}/,n),r.append(e)},this),r.toString()}},{key:"renderLabel",value:function(t){return this.TEMPLATES.Label(t)}},{key:"renderShape",value:function(t){var e=this.TEMPLATES[t.name];return u.a.isString(e)&&(e=u.a.template(e)),e(t)}},{key:"getPathData",value:function(t){var e=t.points,n=t.controlPts;if(!e||0===e.length)return"";if(!n&&t.round){var r=[];n=[];var i,o,a,s,l=e[0];r.push(l);for(var u=1;u<e.length-1;u++)i=e[u],n[2*u]=[i,i],o=l.distance(i),a=i.distance(e[u+1]),s=Math.min(t.round,o/2,a/2),r.push(i.getDirection(l).scale(s).translate(i)),r.push(i.getDirection(e[u+1]).scale(s).translate(i)),l=i;r.push(e[e.length-1]),e=r}for(var h,c=new p("M"),f=0;f<e.length;f++)if(h=e[f],0===f)c.append(h);else if(n&&n[f]){c.append(" C ");for(var d=0;d<n[f].length;d++)c.append(n[f][d]).append(" ");c.append(h)}else c.append(" L ").append(h);return c.toString()}},{key:"renderLink",value:function(t){var n=new p,r=e.getPathData(t);return t.showGauge&&n.append('<path style="stroke: white; stroke-width: 9; visibility: hidden; pointer-events: stroke;" d="').append(r).append('"/>'),n.append('<path d="').append(r).append('"'),(t.startMarker||t.endMarker)&&(n.append(' style="'),t.startMarker&&n.append("marker-start: url(#").append(u.a.isString(t.startMarker)?t.startMarker:t.startMarker.id).append(");"),t.endMarker&&n.append("marker-end: url(#").append(u.a.isString(t.endMarker)?t.endMarker:t.endMarker.id).append(");"),n.append('"')),n.append("/>"),n.toString()}},{key:"appendContent",value:function(t,e){var n=new p;n.append("<svg>").append(e).append("</svg");for(var r=c.createElement("div",null,null,n.toString()).firstElementChild;r.firstChild;)t.appendChild(r.firstChild);return t}},{key:"transform",value:function(t){var e=[0,0],n=1,r=t.match(/translate\(\s*([^)]+)/);if(r){var i=r[1].trim().match(/([\d.-]+)[ ,]([\d.-]+)/);i?(e[0]=parseFloat(i[1])||0,e[1]=parseFloat(i[2])||0):e[0]=e[1]=parseFloat(r[1])}return(r=t.match(/scale\(\s*([^)]+)/))&&(n=parseFloat(r[1])||1),{translate:e,scale:n}}}]),e}();de.TEMPLATES={$root:'<g id="${id}" class="${className}">#{children}</g>',$node:'<g id="${id}" class="${className}" style="${style}" ns="${namespace}" transform="translate(${x},${y})">#{shape}#{label}</g>',$edge:'<g id="${id}" class="${className}" style="${style}" ns="${namespace}">#{shape}#{label}</g>',Ellipse:'<ellipse cx="0" cy="0" rx="${width/2}" ry="${height/2}"/>',Rectangle:'<rect x="${-width/2}" y="${-height/2}" width="${width}" height="${height}" rx="9" ry="9"/>',Triangle:'<polygon points="${-width/2},${-height/2} ${width/2},${-height/2} 0,${height/2}"/>',Rhombus:'<polygon points="0,${-height/2} ${width/2},0 0,${height/2} ${-width/2},0"/>',Hexagon:function(t){return"north"===t.direction||"south"===t.direction?'<polygon points="0,${-height/2} ${width/2},${-height/4} ${width/2},${height/4} 0,${height/2} ${-width/2},${height/4} ${-width/2},${-height/4}"/>':'<polygon points="${-width/2},0 ${width/4},${-height/2} ${width/4},${-height/2} ${width/2},0 ${width/4},${height/2} ${-width/4},${height/2}"/>'},Polygon:function(t){var e=new p('<polygon points="');return t.points.forEach(function(t){e.append(t[0]).append(",").append(t[1]).append(" ")}),e.removeLast(),e.append('"/>'),e.toString()},Image:function(t){return'<image x="${-width/2}" y="${-height/2}" width="${width}" height="${height}" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t.image+'"/>'},Marker:function(t){return'\n<marker id="'.concat(t.id,'" markerWidth="').concat(t.size,'" markerHeight="').concat(t.size,'" refx="').concat(t.ref[0],'"\nrefy="').concat(t.ref[1],'" orient="auto" viewbox="').concat(t.viewBox.x," ").concat(t.viewBox.y," ").concat(t.viewBox.width," ").concat(t.viewBox.height,'"\nmarkerUnits="userSpaceOnUse" ').concat(t.fill?'style="stroke: '.concat(t.fill,";fill:").concat(t.fill,'"'):"",">#{shape}</marker>\n").trim()},Grid:function(t){return'\n<pattern id="GridPattern" width="'.concat(t,'" height="').concat(t,'" patternUnits="userSpaceOnUse">\n  <ellipse cx="0" cy="0" rx="1" ry="1" fill="#999999"/>\n  <ellipse cx="0" cy="').concat(t,'" rx="1" ry="1" fill="#999999"/>\n  <ellipse cx="').concat(t,'" cy="0" rx="1" ry="1" fill="#999999"/>\n  <ellipse cx="').concat(t,'" cy="').concat(t,'" rx="1" ry="1" fill="#999999"/>\n</pattern>').trim()},Label:u.a.template('\n<% var box = _.has(data, "dx") ? data : (data.getLabelBox ? data.getLabelBox() : null);\n   if (box) {%>\n  <g <% if (box.config && box.config.class) {%>class="<%=box.config.class%>"<%}%>    <% if (box.config && box.config.ns) {%>ns="<%=box.config.ns%>"<%}%>    <% if (box.config && box.config.inlineStyle) {%>      font-size="<%=box.config.fontSize%>"      font-family="<%=box.config.fontFamily%>"      font-weight="<% if (box.bold) {%>bold<%} else {%>normal<%}%>"      <% if (box.underline) {%>text-decoration="underline"<%}%>      <% if (box.italic) {%>font-style="italic"<%}%>    <%}%>    text-anchor="<%=box.anchor%>"    transform="translate(<%=box.bounds.x%>,<%=box.bounds.y%>)<% if (box.config && box.config.rotation) {%>rotate(<%=box.config.rotation%> <%=box.pivot[0]%> <%=box.pivot[1]%>)<%}%>">\n  <% if (box.config.backgroundStyle) {%>\n    <rect x="<%=-box.bounds.width/2%>" y="<%=-box.bounds.height/2%>" width="<%=box.bounds.width%>" height="<%=box.bounds.height%>" style="<%=box.config.backgroundStyle%>"/>\n  <% } if (_.isArray(box.label)) {\n    _.each(box.label, function(value, line) {%>\n      <text <% if (box.config && box.config.textStyle) {%>style="<%=box.config.textStyle%>"<%}%>        dx="<%=box.dx%>" dy="<%=box.dy + box.lineHeight * line%>"><%=value%></text>\n    <%});} else { %>\n      <text><%=box.label%></text>\n    <%}%>\n    <% if (box.config.title) {%>\n      <title><%=box.config.title%></title>\n    <%}%>\n  </g>\n<%}%>\n'.trim(),{variable:"data"})};var ge=de;v.a.addShape("Rectangle",m.a),v.a.addShape("Ellipse",S),v.a.addShape("Rhombus",N);e.default={Base64:i,Cache:a,Utils:s.a,DomUtils:c,StringBuffer:p,Point:d.a,Line:y,Shape:v.a,Rectangle:m.a,Ellipse:S,Link:X,EventDispatcher:nt,Label:lt,Marker:Ot,Graph:Rt,Cell:ht,Node:vt,Edge:St,Layout:jt,FlowLayout:zt,Renderer:ae,SVGRenderer:ge,GraphBehavior:Yt}}])});
//# sourceMappingURL=qgraph.min.js.map