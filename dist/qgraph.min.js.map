{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","qgraph.js","webpack:/webpack/bootstrap 3d3198c62e0845f10ff8","webpack:///src/index.js","webpack:///src/util/base64.js","webpack:///src/util/Utils.js","webpack:///src/geometry/Point.js","webpack:///src/geometry/Rectangle.js","webpack:/external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}","webpack:///src/geometry/Shape.js","webpack:///src/util/DomUtils.js","webpack:///src/util/StringBuffer.js","webpack:///src/geometry/Line.js","webpack:///src/geometry/Ellipse.js","webpack:///src/geometry/Link.js","webpack:///~/bean/bean.js","webpack:///src/event/EventDispatcher.js","webpack:///src/event/KeyUtils.js","webpack:///src/graph/Graph.js","webpack:///src/graph/Node.js","webpack:///src/graph/Cell.js","webpack:///src/util/Cache.js","webpack:///src/view/Label.js","webpack:///src/graph/Edge.js","webpack:///src/view/Marker.js","webpack:///src/layout/Layout.js","webpack:///src/layout/FlowLayout.js","webpack:///src/view/Renderer.js","webpack:///src/behavior/GraphBehavior.js","webpack:///src/behavior/Behavior.js","webpack:///src/behavior/SelectionBehavior.js","webpack:///src/view/SVGRenderer.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_5__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_base","_base2","_Utils","_Utils2","_DomUtils","_DomUtils2","_StringBuffer","_StringBuffer2","_Point","_Point2","_Line","_Line2","_Shape","_Shape2","_Rectangle","_Rectangle2","_Ellipse","_Ellipse2","_Link","_Link2","_bean","_bean2","_EventDispatcher","_EventDispatcher2","_Graph","_Graph2","_Cell","_Cell2","_Node","_Node2","_Edge","_Edge2","_Layout","_Layout2","_FlowLayout","_FlowLayout2","_Label","_Label2","_Marker","_Marker2","_Renderer","_Renderer2","_SVGRenderer","_SVGRenderer2","_GraphBehavior","_GraphBehavior2","_SelectionBehavior","_SelectionBehavior2","addShape","Events","Base64","Cache","Utils","DomUtils","StringBuffer","Point","Line","Shape","Rectangle","Ellipse","Link","EventDispatcher","Label","Marker","Graph","Cell","Node","Edge","Layout","FlowLayout","Renderer","SVGRenderer","GraphBehavior","SelectionBehavior","_keyStr","encode","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","i","_utf8_encode","length","charCodeAt","isNaN","charAt","decode","replace","indexOf","String","fromCharCode","_utf8_decode","string","utftext","n","c1","c2","c3","global","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","window","addEventHandler","document","navigator","_debugging","_debugAll","typeRegistry","splice","Array","type","namespace","name","_type","Map","set","get","createType","props","defaultType","extend","_extend","getPrototypeOf","apply","arguments","config","_","assign","typeName","log","buildTypes","types","_this2","remove","defaultsDeep","forEach","child","parent","protoProps","staticProps","Surrogate","superclass","initConfig","cArr","DEFAULTS","prop","getConstructor","jsClass","defaultClass","isString","eval","debug","moduleName","push","message","console","substring","info","getRelativePosition","bounds","geometry","x","Math","abs","width","y","height","offsetPosition","pos","anchorX","offsetX","anchorY","offsetY","unscale","t","scale","o","_scale","getProperty","has","isFunction","_createClass","defineProperties","target","descriptor","key","aPt","sqrt","p2","dist","distance","angle","cos","PI","sin","clone","rotate","rect","vertical","W","N","S","E","NE","NW","SE","SW","_lodash","_lodash2","_Shape3","el","w","h","left","right","top","bottom","pt","contains","pt1","pt2","horizontal","contains1","contains2","outPt","orthogonal","undefined","dx","dy","alpha","atan2","pi","pi2","beta","tan","dir","getDirection","point","direction","pts","margin","isArray","min","max","rects","minx","miny","maxx","Infinity","maxy","each","r","registry","defaults","refPt","getPerimeter","view","template","getTemplate","isIE","sAgent","userAgent","Idx","parseInt","match","isFireFox","InstallTrigger","isChrome","raw","isMac","platform","toUpperCase","isWindows","appVersion","isLinux","createElement","tag","attribs","styles","html","setElement","innerHTML","createElementByString","str","temp","childNodes","setAttribute","style","testElement","node","method","nodeType","getAncestorBy","parentNode","getPosition","context","body","elRect","getBoundingClientRect","contextRect","getCenterPosition","move","getSize","offsetWidth","offsetHeight","resize","preloadImages","array","list","img","that","Image","onload","index","src","getImageInfo","downloadFile","data","mime","split","encoded","atob","decodeURI","GetBlob","msSaveBlob","link","href","download","display","appendChild","click","removeChild","contentType","sliceSize","byteArrays","offset","slice","byteNumbers","byteArray","Uint8Array","Blob","openImage","image","myWindow","open","myDocument","eventFromInput","e","tagName","buffer","stuff","concat","pop","sep","join","start","end","l","cosa","dotProduct","x0","y0","x1","y1","x2","y2","x3","y3","denom","nume_a","nume_b","ua","ub","intersectionX","intersectionY","a","b","cx","cy","px","py","d","f","g","det","xout1","xout2","yout1","yout2","dist1","pow","dist2","xout","yout","defaultConfig","showGauge","defaultGeometry","linkTypes","terminalVisual","shapeConfig","startMarker","endMarker","startNormal","endNormal","renderLink","isNumber","points","translate","getScaled","linkClass","DirectLink","BezierLink","ctrlpts","controlPts","p1","p3","p4","s","EntityRelations","_Link3","source","Port","getBounds","edge","isSourceLeft","isTargetLeft","result","getCenterY","xe","ye","seg","segment","dep","arr","midY","Manhattan","_Link4","MIN_BUFFER","autoRoute","randomNoise","step","maxChannelWidth","container","boxes","startBox","endBox","side","side2","box","intersect","j","channel","channel2","endPadding","startPadding","_getChannel","_getFirstIntersection","_getRouteTendency","_hasIntersection","_moveSegment","breakPt","_getRouteDirection","getCenter","box2","box1","getLeft","getRight","getBottom","getTop","getTranslated","route","_mergeSegments","getCommonAncestor","getDescendants","excludeFromRouting","isAncestor","range","randomNumber","floor","random","startBufferNormal","endBufferNormal","startBuffer","endBuffer","middle","prunePts","detectIntersection","savedIndex","savedSide","h2","h1","equals","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","definition","selectorEngine","win","old","namespaceRegex","nameRegex","addEvent","removeEvent","doc","documentElement","W3C_MODEL","eventSupport","ONE","str2arr","standardNativeEvents","w3cNativeEvents","nativeEvents","hash","events","customEvents","element","compareDocumentPosition","check","event","related","relatedTarget","prefix","test","toString","mouseenter","base","condition","mouseleave","mousewheel","Event","commonProps","mouseProps","mouseWheelProps","keyProps","textProps","touchProps","messageProps","stateProps","overOutRegex","typeFixers","reg","fix","newEvent","keyCode","which","rightClick","button","pageX","pageY","clientX","clientY","scrollLeft","scrollTop","typeFixerMap","isNative","ownerDocument","parentWindow","originalEvent","isBean","fixer","srcElement","preventDefault","returnValue","stopPropagation","cancelBubble","stop","stopped","stopImmediatePropagation","isImmediatePropagationStopped","currentTarget","ne","targetElement","RegEntry","wrappedHandler","fn","args","eargs","findTarget","eventElement","__beanDel","ft","handler","original","namespaces","customType","once","removeListener","eventType","inNamespaces","checkNamespaces","matches","checkElement","checkOriginal","checkHandler","map","forAll","pfx","all","substr","entries","entry","put","del","removed","setSelectorEngine","querySelectorAll","Error","rootListener","propertyName","listeners","listener","add","custom","attachEvent","detachEvent","rm","originalFn","orgType","handlers","delegate","selector","fireListener","evt","createEvent","dispatchEvent","fireEvent","createEventObject","off","typeSpec","k","isTypeStr","hasOwnProperty","on","first","delfn","one","fire","names","from","beanDel","bean","noConflict","cleanup","CollectGarbage","_interopRequireWildcard","newObj","_KeyUtils","KeyUtils","zoomScale","rootNS","getAttribute","dragging","bind","handleEvent","started","enterStack","startKeys","stopKeys","buf","ns","stack","isRoot","startsWith","rootTarget","nsTarget","prepend","targetStack","_this","isKeyEvent","getKeyEvent","getEventInfo","wheelDelta","dragObject","mouse","dragPos","mousemove","currentPos","dispatch","mouseup","simulateEnterLeave","last","clearEnterStack","getNS","val","append","item","nsType","regexp","callback","lastPosition","_this3","registerKey","getKeyData","ctrl","alt","shift","meta","code","_this4","unregisterKey","zIndex","_this5","register","RegExp","registeredType","changedTouches","svg","ownerSVGElement","createSVGPoint","matrixTransform","getScreenCTM","inverse","clientLeft","clientTop","KeyboardEvent","ctrlKey","altKey","shiftKey","metaKey","nodeDefaults","role","draggable","selectable","editable","resizable","sourceable","targetable","visible","edgeDefaults","size","color","uniqueId","model","nodes","edges","selection","destroyed","nodeTypes","edgeTypes","markers","marker","markerConfig","getMarker","loadModel","currentRoot","NodeClass","getJSClass","addChild","to","EdgeClass","addNode","addEdge","children","without","allowDanglingEdges","multiConnect","readOnly","viewOnly","_typeof","Symbol","iterator","_Cell3","graph","inEdges","outEdges","ports","_ret","render","v","portName","endPt","shape","getShape","label","_Cache","_Cache2","decorators","createDecorators","views","viewProps","isUndefined","className","computedClassName","viewProp","shapeClass","getView","getLabelBox","renderLabel","_computedClassName","caches","getCache","clear","namesapce","FONT_BOLD","FONT_ITALIC","FONT_UNDERLINE","FONT_SHADOW","fontSize","fontFamily","fontStyle","fontColor","padding","linePadding","align","rotation","labelConfig","containerWidth","containerHeight","_getLabelBox","getLabelBoxForLink","bold","wrappedLabel","wrap","anchor","setAnchorX","pivot","maxBounds","_label","underline","italic","shadow","lineHeight","baseline","stringMeasureEl","measureDiv","baselineDiv","getStringSize","memoize","position","visibility","contentWindow","write","close","getElementById","fontWeight","strut","firstChild","baselineHeight","offsetTop","maxWidth","spaceSize","space","lines","word","words","line","currentWidth","wordWidth","newLine","editor","refEl","textEl","singleLine","unselectable","overflow","border","font-family","font-size","font-weight","focus","select","cancel","_get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","getter","setSource","sourcePos","setTarget","targetPos","setTerminal","setEdgeAt","removeEdge","addOutEdge","addInEdge","center","refPts","getReferencePoints","terminals","getBound","getPort","getLink","getTerminalVisual","arrow","sign","viewBox","ref","fill","triangle","oval","diamond","orientation","HORIZONTAL","VERTICAL","_Layout3","items","getLinkedNodes","owner","hgap","vgap","_flPos","moveTo","trigger","tabindex","layout","layoutClass","_translate","dispatcher","graphBehavior","selectionBehavior","nodeBehavior","edgeBehavior","connectionBehavior","scaled","_viewport","isNull","vp","transform","refresh","_graph","viewport","initializeBehaviors","renderMarkers","_firstSelection","_delayEdit","delay","preprocessor","TEMPLATES","parts","part","trim","camelCase","interpolate","gridSize","gBounds","vBounds","parseFloat","defaultClickMode","hideOutline","singleSelect","gridEnabled","guidesEnabled","maxZoom","minZoom","zoomFactor","maskOpacity","_Behavior2","_Behavior3","_Behavior","renderer","handleDrag","handleZoom","pan","Behavior","selectCell","unselectCell","handleMultiSelect","selectedNodes","selectedLinks","attachedLinks","classed","selectedVertices","getShapes","getAttachedEdges","selectedEdges","cell","toggle","isSelected","d3","dataTarget","moveToFront","setSelection","util","startPt","getBoundingRectangle","rubberband","appendNode","getCellLayer","cells","getCurrentRoot","filter","attr","_Renderer3","NS","SVGElement","createElementNS","outerHTML","$node","$temp","cloneNode","ropen","nodeName","rclose","markup","lastChild","firstElementChild","toDataURL","exportSVG","svg_xml","_svg","svg_dataurl","base64dataURLencode","options","b64","btoa","exportImage","canvas","ctx","getContext","svg_img","drawImage","image_dataurl","onerror","exportImageCanvg","canvg","xcanvas","jsCanvas","keepOutsideViewport","bbox","getBBox","compile","msg","keepNonSafe","renderDefs","querySelector","str1","str2","renderShape","round","newPts","prev","next","d1","d2","corner","_i","getPathData","content","_transform","$root","$edge","Triangle","Rhombus","Hexagon","Polygon","removeLast","Grid","variable"],"mappings":"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","file":"qgraph.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"qgraph\"] = factory(require(\"lodash\"));\n\telse\n\t\troot[\"qgraph\"] = factory(root[\"_\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","/*!\n * \n * \tqgraph - A Graph Manipulation and Visualization Library\n * \tAuthor: Tong Zou\n * \tVersion: v0.1.3\n * \tUrl: https://github.com/tongzou/qgraph\n * \tLicense(s): MIT\n * \n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"qgraph\"] = factory(require(\"lodash\"));\n\telse\n\t\troot[\"qgraph\"] = factory(root[\"_\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _base = __webpack_require__(1);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _DomUtils = __webpack_require__(7);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tvar _Point = __webpack_require__(3);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Line = __webpack_require__(9);\n\t\n\tvar _Line2 = _interopRequireDefault(_Line);\n\t\n\tvar _Shape = __webpack_require__(6);\n\t\n\tvar _Shape2 = _interopRequireDefault(_Shape);\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _Ellipse = __webpack_require__(10);\n\t\n\tvar _Ellipse2 = _interopRequireDefault(_Ellipse);\n\t\n\tvar _Link = __webpack_require__(11);\n\t\n\tvar _Link2 = _interopRequireDefault(_Link);\n\t\n\tvar _bean = __webpack_require__(12);\n\t\n\tvar _bean2 = _interopRequireDefault(_bean);\n\t\n\tvar _EventDispatcher = __webpack_require__(13);\n\t\n\tvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\t\n\tvar _Graph = __webpack_require__(15);\n\t\n\tvar _Graph2 = _interopRequireDefault(_Graph);\n\t\n\tvar _Cell = __webpack_require__(17);\n\t\n\tvar _Cell2 = _interopRequireDefault(_Cell);\n\t\n\tvar _Node = __webpack_require__(16);\n\t\n\tvar _Node2 = _interopRequireDefault(_Node);\n\t\n\tvar _Edge = __webpack_require__(20);\n\t\n\tvar _Edge2 = _interopRequireDefault(_Edge);\n\t\n\tvar _Layout = __webpack_require__(22);\n\t\n\tvar _Layout2 = _interopRequireDefault(_Layout);\n\t\n\tvar _FlowLayout = __webpack_require__(23);\n\t\n\tvar _FlowLayout2 = _interopRequireDefault(_FlowLayout);\n\t\n\tvar _Label = __webpack_require__(19);\n\t\n\tvar _Label2 = _interopRequireDefault(_Label);\n\t\n\tvar _Marker = __webpack_require__(21);\n\t\n\tvar _Marker2 = _interopRequireDefault(_Marker);\n\t\n\tvar _Renderer = __webpack_require__(24);\n\t\n\tvar _Renderer2 = _interopRequireDefault(_Renderer);\n\t\n\tvar _SVGRenderer = __webpack_require__(28);\n\t\n\tvar _SVGRenderer2 = _interopRequireDefault(_SVGRenderer);\n\t\n\tvar _GraphBehavior = __webpack_require__(25);\n\t\n\tvar _GraphBehavior2 = _interopRequireDefault(_GraphBehavior);\n\t\n\tvar _SelectionBehavior = __webpack_require__(27);\n\t\n\tvar _SelectionBehavior2 = _interopRequireDefault(_SelectionBehavior);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_Shape2.default.addShape(\"Rectangle\", _Rectangle2.default);\n\t_Shape2.default.addShape(\"Ellipse\", _Ellipse2.default);\n\t\n\texports.default = {\n\t\tEvents: _bean2.default,\n\t\tBase64: _base2.default,\n\t\tCache: _Utils2.default,\n\t\tUtils: _Utils2.default,\n\t\tDomUtils: _DomUtils2.default,\n\t\tStringBuffer: _StringBuffer2.default,\n\t\tPoint: _Point2.default,\n\t\tLine: _Line2.default,\n\t\tShape: _Shape2.default,\n\t\tRectangle: _Rectangle2.default,\n\t\tEllipse: _Ellipse2.default,\n\t\tLink: _Link2.default,\n\t\tEventDispatcher: _EventDispatcher2.default,\n\t\tLabel: _Label2.default,\n\t\tMarker: _Marker2.default,\n\t\tGraph: _Graph2.default,\n\t\tCell: _Cell2.default,\n\t\tNode: _Node2.default,\n\t\tEdge: _Edge2.default,\n\t\tLayout: _Layout2.default,\n\t\tFlowLayout: _FlowLayout2.default,\n\t\tRenderer: _Renderer2.default,\n\t\tSVGRenderer: _SVGRenderer2.default,\n\t\tGraphBehavior: _GraphBehavior2.default,\n\t\tSelectionBehavior: _SelectionBehavior2.default\n\t};\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t// http://www.webtoolkit.info/javascript-base64.html\n\t\n\tvar Base64 = {\n\t\n\t\t// private property\n\t\t_keyStr: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n\t\n\t\t// public method for encoding\n\t\tencode: function encode(input) {\n\t\t\tvar output = \"\";\n\t\t\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n\t\t\tvar i = 0;\n\t\n\t\t\tinput = Base64._utf8_encode(input);\n\t\n\t\t\twhile (i < input.length) {\n\t\n\t\t\t\tchr1 = input.charCodeAt(i++);\n\t\t\t\tchr2 = input.charCodeAt(i++);\n\t\t\t\tchr3 = input.charCodeAt(i++);\n\t\n\t\t\t\tenc1 = chr1 >> 2;\n\t\t\t\tenc2 = (chr1 & 3) << 4 | chr2 >> 4;\n\t\t\t\tenc3 = (chr2 & 15) << 2 | chr3 >> 6;\n\t\t\t\tenc4 = chr3 & 63;\n\t\n\t\t\t\tif (isNaN(chr2)) {\n\t\t\t\t\tenc3 = enc4 = 64;\n\t\t\t\t} else if (isNaN(chr3)) {\n\t\t\t\t\tenc4 = 64;\n\t\t\t\t}\n\t\n\t\t\t\toutput = output + this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) + this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\n\t\t\t}\n\t\n\t\t\treturn output;\n\t\t},\n\t\n\t\t// public method for decoding\n\t\tdecode: function decode(input) {\n\t\t\tvar output = \"\";\n\t\t\tvar chr1, chr2, chr3;\n\t\t\tvar enc1, enc2, enc3, enc4;\n\t\t\tvar i = 0;\n\t\n\t\t\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\t\n\t\t\twhile (i < input.length) {\n\t\n\t\t\t\tenc1 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\t\tenc2 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\t\tenc3 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\t\tenc4 = this._keyStr.indexOf(input.charAt(i++));\n\t\n\t\t\t\tchr1 = enc1 << 2 | enc2 >> 4;\n\t\t\t\tchr2 = (enc2 & 15) << 4 | enc3 >> 2;\n\t\t\t\tchr3 = (enc3 & 3) << 6 | enc4;\n\t\n\t\t\t\toutput = output + String.fromCharCode(chr1);\n\t\n\t\t\t\tif (enc3 != 64) {\n\t\t\t\t\toutput = output + String.fromCharCode(chr2);\n\t\t\t\t}\n\t\t\t\tif (enc4 != 64) {\n\t\t\t\t\toutput = output + String.fromCharCode(chr3);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\toutput = Base64._utf8_decode(output);\n\t\n\t\t\treturn output;\n\t\t},\n\t\n\t\t// private method for UTF-8 encoding\n\t\t_utf8_encode: function _utf8_encode(string) {\n\t\t\tstring = string.replace(/\\r\\n/g, \"\\n\");\n\t\t\tvar utftext = \"\";\n\t\n\t\t\tfor (var n = 0; n < string.length; n++) {\n\t\n\t\t\t\tvar c = string.charCodeAt(n);\n\t\n\t\t\t\tif (c < 128) {\n\t\t\t\t\tutftext += String.fromCharCode(c);\n\t\t\t\t} else if (c > 127 && c < 2048) {\n\t\t\t\t\tutftext += String.fromCharCode(c >> 6 | 192);\n\t\t\t\t\tutftext += String.fromCharCode(c & 63 | 128);\n\t\t\t\t} else {\n\t\t\t\t\tutftext += String.fromCharCode(c >> 12 | 224);\n\t\t\t\t\tutftext += String.fromCharCode(c >> 6 & 63 | 128);\n\t\t\t\t\tutftext += String.fromCharCode(c & 63 | 128);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn utftext;\n\t\t},\n\t\n\t\t// private method for UTF-8 decoding\n\t\t_utf8_decode: function _utf8_decode(utftext) {\n\t\t\tvar string = \"\";\n\t\t\tvar i = 0;\n\t\t\tvar c = c1 = c2 = 0;\n\t\n\t\t\twhile (i < utftext.length) {\n\t\n\t\t\t\tc = utftext.charCodeAt(i);\n\t\n\t\t\t\tif (c < 128) {\n\t\t\t\t\tstring += String.fromCharCode(c);\n\t\t\t\t\ti++;\n\t\t\t\t} else if (c > 191 && c < 224) {\n\t\t\t\t\tc2 = utftext.charCodeAt(i + 1);\n\t\t\t\t\tstring += String.fromCharCode((c & 31) << 6 | c2 & 63);\n\t\t\t\t\ti += 2;\n\t\t\t\t} else {\n\t\t\t\t\tc2 = utftext.charCodeAt(i + 1);\n\t\t\t\t\tc3 = utftext.charCodeAt(i + 2);\n\t\t\t\t\tstring += String.fromCharCode((c & 15) << 12 | (c2 & 63) << 6 | c3 & 63);\n\t\t\t\t\ti += 3;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn string;\n\t\t}\n\t\n\t};\n\t\n\texports.default = Base64;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _Point = __webpack_require__(3);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t// bean requires the existence of window\n\tif (typeof window === 'undefined' && typeof global !== 'undefined') {\n\t\tglobal.window = { addEventHandler: function addEventHandler() {} };\n\t\tglobal.document = {};\n\t\tglobal.navigator = {};\n\t}\n\t\n\t// util variables\n\tvar _debugging = [],\n\t    _debugAll = false,\n\t    typeRegistry = {},\n\t    splice = Array.splice;\n\t\n\t/**\n\t * Utility functions\n\t */\n\texports.default = {\n\t\ttype: function type(namespace, name, _type) {\n\t\t\tif (!typeRegistry[namespace]) typeRegistry[namespace] = new Map();\n\t\t\tif (!name) return typeRegistry[namespace];\n\t\t\tif (!_type) return typeRegistry[namespace].get(name);\n\t\t\ttypeRegistry[namespace].set(name, _type);\n\t\t},\n\t\n\t\tcreateType: function createType(namespace, props, defaultType) {\n\t\t\tvar name = props.name;\n\t\n\t\t\t// first check if type exists\n\t\t\tvar type = this.type(namespace, name);\n\t\t\tif (!type) {\n\t\t\t\tvar extend = props.extends ? this.type(namespace, props.extends) : null;\n\t\t\t\tif (!extend && defaultType) extend = defaultType;\n\t\t\t\tif (extend) type = function (_extend) {\n\t\t\t\t\t_inherits(type, _extend);\n\t\n\t\t\t\t\tfunction type() {\n\t\t\t\t\t\t_classCallCheck(this, type);\n\t\n\t\t\t\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(type).apply(this, arguments));\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn type;\n\t\t\t\t}(extend);else {\n\t\t\t\t\ttype = function type(config) {\n\t\t\t\t\t\t_classCallCheck(this, type);\n\t\n\t\t\t\t\t\t_.assign(this, config);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tdelete props.name;\n\t\t\t\tdelete props.extends;\n\t\t\t\t_.assign(type.prototype, props);\n\t\t\t\ttype.typeName = name;\n\t\t\t\tthis.type(namespace, name, type);\n\t\t\t\tthis.log('Utils', 'Utils.createType - ' + namespace + '.' + name);\n\t\t\t}\n\t\t\treturn type;\n\t\t},\n\t\n\t\tbuildTypes: function buildTypes(types, namespace, defaultType) {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tthis.log('Utils', 'Utils.buildTypes - ' + namespace);\n\t\n\t\t\tif (!types && defaultType) {\n\t\t\t\tthis.createType(namespace, defaultType);\n\t\t\t\tthis.log('Utils', 'Utils.buildTypes end');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (defaultType) {\n\t\t\t\tvar type = _.remove(types, { name: defaultType.name });\n\t\t\t\ttype = type.length > 0 ? type[0] : null;\n\t\t\t\tif (type) defaultType = this.createType(namespace, _.defaultsDeep(type, defaultType));else defaultType = this.createType(namespace, defaultType);\n\t\t\t}\n\t\n\t\t\t_.forEach(types, function (type) {\n\t\t\t\t_this2.createType(namespace, type, defaultType);\n\t\t\t});\n\t\t\tthis.log('Utils', 'Utils.buildTypes end');\n\t\t},\n\t\n\t\t// Helper function to correctly set up the prototype chain, for subclasses.\n\t\t// Similar to `goog.inherits`, but uses a hash of prototype properties and\n\t\t// class properties to be extended.\n\t\textend: function extend(child, parent, protoProps, staticProps) {\n\t\t\t// Add static properties to the constructor function, if supplied.\n\t\t\t_.extend(child, parent, staticProps);\n\t\n\t\t\t// Set the prototype chain to inherit from `parent`, without calling\n\t\t\t// `parent`'s constructor function.\n\t\t\tvar Surrogate = function Surrogate() {\n\t\t\t\tthis.constructor = child;\n\t\t\t};\n\t\t\tSurrogate.prototype = parent.prototype;\n\t\t\tchild.prototype = new Surrogate();\n\t\n\t\t\t// Add prototype properties (instance properties) to the subclass,\n\t\t\t// if supplied.\n\t\t\tif (protoProps) _.extend(child.prototype, protoProps);\n\t\n\t\t\t// Set a convenience property in case the parent's prototype is needed later.\n\t\t\tchild.superclass = parent.prototype;\n\t\n\t\t\treturn child;\n\t\t},\n\t\n\t\tinitConfig: function initConfig(obj, config) {\n\t\t\tvar props = {},\n\t\t\t    c = obj.constructor,\n\t\t\t    cArr = [c];\n\t\t\twhile (c) {\n\t\t\t\tif (c.super) {\n\t\t\t\t\tc = c.super.constructor;\n\t\t\t\t\tsplice.apply(cArr, [0, 0, c]);\n\t\t\t\t} else c = null;\n\t\t\t}\n\t\n\t\t\tfor (var i = 0; i < cArr.length; i++) {\n\t\t\t\tc = cArr[i];\n\t\t\t\tif (c.DEFAULTS) _.assign(props, c.DEFAULTS);\n\t\t\t}\n\t\t\tobj.props = _.assign(props, config);\n\t\t\tc.prototype.prop = function (name, value) {\n\t\t\t\tif (!value) return this.props[name];\n\t\t\t\tthis.props[name] = value;\n\t\t\t};\n\t\t},\n\t\n\t\t/**\n\t  * Gets the JS class constructor.\n\t  * @param {Object} jsClass\n\t  * @param {Object} defaultClass\n\t  */\n\t\tgetConstructor: function getConstructor(jsClass, defaultClass) {\n\t\t\tif (!jsClass) jsClass = defaultClass;\n\t\n\t\t\tif (_.isString(jsClass)) jsClass = eval(jsClass);\n\t\t\treturn jsClass;\n\t\t},\n\t\n\t\tdebug: function debug(moduleName) {\n\t\t\tif (moduleName) {\n\t\t\t\t_debugging.push(moduleName);\n\t\t\t} else {\n\t\t\t\t_debugAll = true;\n\t\t\t}\n\t\t},\n\t\n\t\tlog: function log(name, message) {\n\t\t\tif (!window.console) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar debug = _debugAll;\n\t\t\tif (!_debugAll) {\n\t\t\t\tdebug = false;\n\t\t\t\tfor (var i = 0; i < _debugging.length; i++) {\n\t\t\t\t\tif (_debugging[i] == name) debug = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!debug) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twhile (name.length < 10) {\n\t\t\t\tname = name + ' ';\n\t\t\t}\n\t\t\tname = name.substring(0, 10) + \" - \";\n\t\t\tconsole.info(name, message);\n\t\t},\n\t\n\t\t/**\n\t  * Get the relative position of sub shapes within a parent share.\n\t  * @param bounds\n\t  * @param geometry The geometry information, the format of Geometry is:\n\t  * {\n\t  *      x: \"x coordinate of ref point, if less than 1, will be treated as the percentage of the parent width.\",\n\t  *      y: \"y coordinate of ref point.\",\n\t  *      anchorX: \"x pos of child relative to the ref point\",\n\t  *      anchorY: \"y pos of child relative to the ref point\",\n\t  *      offsetX: \"the offset in the x direction.\",\n\t  *      offsetY: \"the offset in the y direction.\",\n\t  *      width: \"the width of the child element\",\n\t  *      height: \"the height of the child element\"\n\t  * }\n\t  * @returns {*[]}\n\t  */\n\t\tgetRelativePosition: function getRelativePosition(bounds, geometry) {\n\t\t\tvar x = Math.abs(geometry.x) <= 1 ? bounds.width * geometry.x : geometry.x;\n\t\t\tvar y = Math.abs(geometry.y) <= 1 ? bounds.height * geometry.y : geometry.y;\n\t\t\treturn this.offsetPosition([x, y], geometry);\n\t\t},\n\t\n\t\toffsetPosition: function offsetPosition(pos, geometry) {\n\t\t\treturn [pos[0] + geometry.width * geometry.anchorX + geometry.offsetX, pos[1] + geometry.height * geometry.anchorY + geometry.offsetY];\n\t\t},\n\t\n\t\t/**\n\t  * Get the position relative to the graph that's unscaled, i.e., absolute position without considering translation and scale.\n\t  * @param t the current translate\n\t  * @param scale the current scale\n\t  * @param o can be either a Point or a Rectangle or a Point array.\n\t  */\n\t\tunscale: function unscale(t, scale, o) {\n\t\t\tif (o instanceof _Rectangle2.default) return new _Rectangle2.default(o.x * scale + t[0], o.y * scale + t[1], o.width * scale, o.height * scale);else if (o instanceof _Point2.default) return new _Point2.default(o.x * scale + t[0], o.y * scale + t[1]);else return [o[0] * scale + t[0], o[1] * scale + t[1]];\n\t\t},\n\t\n\t\t/**\n\t  * Get the position relative to the graph that's scaled, i.e., relative position considering translation and scale.\n\t  * @param t the current translation\n\t  * @param scale the current scale\n\t  * @param o can be either a Point or a Rectangle or a Point array.\n\t  */\n\t\tscale: function scale(t, _scale, o) {\n\t\t\tif (o instanceof _Rectangle2.default) return new _Rectangle2.default((o.x - t[0]) / _scale, (o.y - t[1]) / _scale, o.width / _scale, o.height / _scale);else if (o instanceof _Point2.default) return new _Point2.default((o.x - t[0]) / _scale, (o.y - t[1]) / _scale);else return [(o[0] - t[0]) / _scale, (o[1] - t[1]) / _scale];\n\t\t},\n\t\n\t\t/**\n\t  * Convenience method.\n\t  */\n\t\tgetProperty: function getProperty(obj, prop) {\n\t\t\tif (!obj) return null;\n\t\t\tif (_.has(obj, prop)) return obj[prop];\n\t\t\tif (obj.prop && _.isFunction(obj.prop)) return obj.prop(prop);\n\t\t\treturn null;\n\t\t}\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Point = function () {\n\t\tfunction Point(x, y) {\n\t\t\t_classCallCheck(this, Point);\n\t\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t}\n\t\n\t\t/**\n\t  * Make a clone of this point\n\t  */\n\t\n\t\n\t\t_createClass(Point, [{\n\t\t\tkey: \"clone\",\n\t\t\tvalue: function clone() {\n\t\t\t\treturn new Point(this.x, this.y);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Calculate the distance from this pt to the other pt.\n\t   * @param aPt\n\t   * @returns {number}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"distance\",\n\t\t\tvalue: function distance(aPt) {\n\t\t\t\treturn Math.sqrt((this.x - aPt.x) * (this.x - aPt.x) + (this.y - aPt.y) * (this.y - aPt.y));\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Translate this point\n\t  \t */\n\t\n\t\t}, {\n\t\t\tkey: \"translate\",\n\t\t\tvalue: function translate(p2) {\n\t\t\t\tthis.x += p2.x;\n\t\t\t\tthis.y += p2.y;\n\t\t\t\treturn this;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Scale this vector\n\t  \t */\n\t\n\t\t}, {\n\t\t\tkey: \"scale\",\n\t\t\tvalue: function scale(_scale) {\n\t\t\t\tthis.x *= _scale;\n\t\t\t\tthis.y *= _scale;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getScaled\",\n\t\t\tvalue: function getScaled(scale) {\n\t\t\t\treturn new Point(this.x * scale, this.y * scale);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getTranslated\",\n\t\t\tvalue: function getTranslated(p2) {\n\t\t\t\treturn new Point(this.x + p2.x, this.y + p2.y);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Get the direction vector from this point to p2.\n\t   * @param p2\n\t   * @returns {Point}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getDirection\",\n\t\t\tvalue: function getDirection(p2) {\n\t\t\t\tvar dist = this.distance(p2);\n\t\t\t\treturn new Point((p2.x - this.x) / dist, (p2.y - this.y) / dist);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * rotate the point about the origin. With the specified angle.\n\t   * @param angle the angle to rotate\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"rotate\",\n\t\t\tvalue: function rotate(angle) {\n\t\t\t\tvar cos = Math.cos(angle * Math.PI / 180);\n\t\t\t\tvar sin = Math.sin(angle * Math.PI / 180);\n\t\t\t\tvar x = this.x,\n\t\t\t\t    y = this.y;\n\t\t\t\tthis.x = x * cos - y * sin;\n\t\t\t\tthis.y = x * sin + y * cos;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getRotated\",\n\t\t\tvalue: function getRotated(angle) {\n\t\t\t\treturn this.clone().rotate(angle);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Calculate the dot product, treating this and p2 as vectors.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"dotProduct\",\n\t\t\tvalue: function dotProduct(p2) {\n\t\t\t\treturn this.x * p2.x + this.y * p2.y;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Get the mid point between this and p2.\n\t  \t */\n\t\n\t\t}, {\n\t\t\tkey: \"getMidPoint\",\n\t\t\tvalue: function getMidPoint(p2) {\n\t\t\t\treturn new Point((this.x + p2.x) / 2, (this.y + p2.y) / 2);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"reverse\",\n\t\t\tvalue: function reverse() {\n\t\t\t\tthis.x = -this.x;\n\t\t\t\tthis.y = -this.y;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"equals\",\n\t\t\tvalue: function equals(p2) {\n\t\t\t\tif (!p2 || p2.constructor != Point) return false;\n\t\n\t\t\t\treturn this.x == p2.x && this.y == p2.y;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Reflect this point w.r.t. the rectangle.\n\t   * If vertical is true, it will reflect the point cross the vertical\n\t   * central line of the rectangle, otherwise reflect cross the horizontal\n\t   * central line.\n\t   *\n\t   * @param rect the rectangle\n\t   * @param vertical whether is vertical reflection or horizontal reflection.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"reflect\",\n\t\t\tvalue: function reflect(rect, vertical) {\n\t\t\t\tif (vertical) this.x = 2 * rect.x - this.x;else this.y = 2 * rect.y - this.y;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\treturn this.x + \",\" + this.y;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Point;\n\t}();\n\t\n\tPoint.W = new Point(-1, 0);\n\tPoint.N = new Point(0, -1);\n\tPoint.S = new Point(0, 1);\n\tPoint.E = new Point(1, 0);\n\tPoint.NE = new Point(1, -1);\n\tPoint.NW = new Point(-1, -1);\n\tPoint.SE = new Point(1, 1);\n\tPoint.SW = new Point(-1, 1);\n\t\n\texports.default = Point;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Point = __webpack_require__(3);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Shape2 = __webpack_require__(6);\n\t\n\tvar _Shape3 = _interopRequireDefault(_Shape2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Rectangle = function (_Shape) {\n\t\t_inherits(Rectangle, _Shape);\n\t\n\t\tfunction Rectangle() {\n\t\t\t_classCallCheck(this, Rectangle);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(Rectangle).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(Rectangle, [{\n\t\t\tkey: \"contains\",\n\t\n\t\t\t/**\r\n\t   * Checks whether this rectangle contains a given point of a given rectangle\r\n\t   */\n\t\t\tvalue: function contains(el) {\n\t\t\t\tvar w = el.width || 0;\n\t\t\t\tvar h = el.height || 0;\n\t\t\t\tvar left = el.x - w / 2;\n\t\t\t\tvar right = el.x + w / 2;\n\t\t\t\tvar top = el.y - h / 2;\n\t\t\t\tvar bottom = el.y + h / 2;\n\t\t\t\treturn right <= this.right && left >= this.left && top >= this.top && bottom <= this.bottom;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Calcualte the distance to a point. 0 if this rectangle contains the point.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"distance\",\n\t\t\tvalue: function distance(pt) {\n\t\t\t\tif (this.contains(pt)) return 0;\n\t\n\t\t\t\tif (pt.x < this.left) {\n\t\t\t\t\tif (pt.y < this.top) return pt.distance(new _Point2.default(this.left, this.top));\n\t\t\t\t\tif (pt.y <= this.bottom) return this.left - pt.x;\n\t\t\t\t\treturn pt.distance(new _Point2.default(this.left, this.bottom));\n\t\t\t\t}\n\t\t\t\tif (pt.x <= this.right) {\n\t\t\t\t\tif (pt.y <= this.top) return this.top - pt.y;\n\t\t\t\t\treturn pt.y - this.bottom;\n\t\t\t\t}\n\t\t\t\tif (pt.y < this.top) return pt.distance(new _Point2.default(this.right, this.top));\n\t\t\t\tif (pt.y <= this.bottom) return pt.x - this.right;\n\t\t\t\treturn pt.distance(new _Point2.default(this.right, this.bottom));\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Given two points, we want to detect whether the line joining the pts intersect\r\n\t   * with the rectangle or not. We assume only horizontal or vertical line segments.\r\n\t   *\r\n\t   * @return int the side of the intersection: -1: no intersection, 0: left, 1: top, 2: right, 3: bottom, 4: containment.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"detectIntersection\",\n\t\t\tvalue: function detectIntersection(pt1, pt2) {\n\t\t\t\tvar horizontal = pt1.y == pt2.y;\n\t\t\t\tvar contains1 = this.contains(pt1);\n\t\t\t\tvar contains2 = this.contains(pt2);\n\t\t\t\tif (contains1 && contains2) return 4;\n\t\t\t\tif (!contains1 && !contains2) {\n\t\t\t\t\tif (horizontal && pt1.y >= this.top && pt1.y <= this.bottom) {\n\t\t\t\t\t\tif (pt1.x < this.left && pt2.x > this.right) return 0;\n\t\t\t\t\t\tif (pt1.x > this.right && pt2.x < this.left) return 2;\n\t\t\t\t\t}\n\t\t\t\t\tif (!horizontal && pt1.x >= this.left && pt1.x <= this.right) {\n\t\t\t\t\t\tif (pt1.y < this.top && pt2.y > this.bottom) return 1;\n\t\t\t\t\t\tif (pt1.y > this.bottom && pt2.y < this.top) return 3;\n\t\t\t\t\t}\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\n\t\t\t\tvar outPt = contains1 ? pt2 : pt1;\n\t\t\t\tif (horizontal) {\n\t\t\t\t\tif (outPt.x > this.right) return 2;\n\t\t\t\t\treturn 0;\n\t\t\t\t} else {\n\t\t\t\t\tif (outPt.y < this.top) return 1;\n\t\t\t\t\treturn 3;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Rectangle:{x=' + this.x + ';y=' + this.y + ';width=' + this.width + ';height=' + this.height + '}';\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"getPerimeter\",\n\t\t\tvalue: function getPerimeter(rect, pt) {\n\t\t\t\tvar orthogonal = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\t\n\t\t\t\tvar x = rect.x;\n\t\t\t\tvar y = rect.y;\n\t\t\t\tvar dx = pt.x - x;\n\t\t\t\tvar dy = pt.y - y;\n\t\t\t\tvar alpha = Math.atan2(dy, dx);\n\t\t\t\tvar p = new _Point2.default(0, 0);\n\t\t\t\tvar pi = Math.PI;\n\t\t\t\tvar pi2 = Math.PI / 2;\n\t\t\t\tvar beta = pi2 - alpha;\n\t\t\t\tvar t = Math.atan2(rect.height, rect.width);\n\t\n\t\t\t\tif (alpha < -pi + t || alpha > pi - t) {\n\t\t\t\t\t// Left edge\n\t\t\t\t\tp.x = rect.left;\n\t\t\t\t\tp.y = y - rect.width * Math.tan(alpha) / 2;\n\t\t\t\t} else if (alpha < -t) {\n\t\t\t\t\t// Top Edge\n\t\t\t\t\tp.y = rect.top;\n\t\t\t\t\tp.x = x - rect.height * Math.tan(beta) / 2;\n\t\t\t\t} else if (alpha < t) {\n\t\t\t\t\t// Right Edge\n\t\t\t\t\tp.x = rect.right;\n\t\t\t\t\tp.y = y + rect.width * Math.tan(alpha) / 2;\n\t\t\t\t} else {\n\t\t\t\t\t// Bottom Edge\n\t\t\t\t\tp.y = rect.bottom;\n\t\t\t\t\tp.x = x + rect.height * Math.tan(beta) / 2;\n\t\t\t\t}\n\t\n\t\t\t\tif (orthogonal) {\n\t\t\t\t\tif (alpha < -pi + t || alpha > pi - t) {\n\t\t\t\t\t\t// Left edge\n\t\t\t\t\t\tp.x = rect.left;\n\t\t\t\t\t\tp.y = y;\n\t\t\t\t\t} else if (alpha < -t) {\n\t\t\t\t\t\t// Top Edge\n\t\t\t\t\t\tp.y = rect.top;\n\t\t\t\t\t\tp.x = x;\n\t\t\t\t\t} else if (alpha < t) {\n\t\t\t\t\t\t// Right Edge\n\t\t\t\t\t\tp.x = rect.right;\n\t\t\t\t\t\tp.y = y;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Bottom Edge\n\t\t\t\t\t\tp.y = rect.bottom;\n\t\t\t\t\t\tp.x = x;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tvar dir = Rectangle.getDirection(rect, p, orthogonal);\n\t\t\t\treturn { point: p, direction: dir };\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Return the bounding rectangle that contains p1 and p2\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getBoundingRectangle\",\n\t\t\tvalue: function getBoundingRectangle(pts, margin) {\n\t\t\t\tif (!pts || pts.length == 0) return null;\n\t\t\t\tmargin = margin || [0, 0, 0, 0];\n\t\t\t\tif (!_lodash2.default.isArray(margin)) margin = [margin, margin, margin, margin];\n\t\t\t\tvar min = [pts[0].x, pts[0].y];\n\t\t\t\tvar max = [pts[0].x, pts[0].y];\n\t\t\t\tfor (var i = 1; i < pts.length; i++) {\n\t\t\t\t\tvar p = pts[i];\n\t\t\t\t\tif (p.x < min[0]) {\n\t\t\t\t\t\tmin[0] = p.x;\n\t\t\t\t\t}\n\t\t\t\t\tif (p.y < min[1]) {\n\t\t\t\t\t\tmin[1] = p.y;\n\t\t\t\t\t}\n\t\t\t\t\tif (p.x > max[0]) {\n\t\t\t\t\t\tmax[0] = p.x;\n\t\t\t\t\t}\n\t\t\t\t\tif (p.y > max[1]) {\n\t\t\t\t\t\tmax[1] = p.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmin[0] = min[0] - margin[0];\n\t\t\t\tmin[1] = min[1] - margin[1];\n\t\t\t\tmax[0] = max[0] + margin[2];\n\t\t\t\tmax[1] = max[1] + margin[3];\n\t\t\t\tvar w = Math.abs(max[0] - min[0]);\n\t\t\t\tvar h = Math.abs(max[1] - min[1]);\n\t\t\t\treturn new Rectangle(min[0] + w / 2, min[1] + h / 2, w, h);\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Create a union of all the rectangles.\r\n\t   * @param rects\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"union\",\n\t\t\tvalue: function union(rects) {\n\t\t\t\tvar minx = null,\n\t\t\t\t    miny = null,\n\t\t\t\t    maxx = -Infinity,\n\t\t\t\t    maxy = -Infinity;\n\t\t\t\t_lodash2.default.each(rects, function (rect) {\n\t\t\t\t\tminx = minx || rect.x;\n\t\t\t\t\tminy = miny || rect.y;\n\t\t\t\t\tminx = Math.min(minx, rect.x);\n\t\t\t\t\tminy = Math.min(miny, rect.y);\n\t\t\t\t\tmaxx = Math.max(maxx, rect.right());\n\t\t\t\t\tmaxy = Math.max(maxy, rect.bottom());\n\t\t\t\t});\n\t\t\t\tminx = minx || 0;\n\t\t\t\tminy = miny || 0;\n\t\t\t\treturn new Rectangle(minx, miny, maxx - minx, maxy - miny);\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Returns the direction the point <i>p</i> is in relation to the given rectangle.\r\n\t   * Possible values are WEST (-1,0), EAST (1,0), NORTH (0,-1) and SOUTH (0,1) if orthogonal is true, otherwise return\r\n\t   * the direction connection the center of r and p.\r\n\t   * @param r\r\n\t   * @param p\r\n\t   * @param orthogonal\r\n\t   * @returns {Point|*}\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getDirection\",\n\t\t\tvalue: function getDirection(r, p) {\n\t\t\t\tvar orthogonal = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\t\n\t\t\t\tif (!orthogonal) return new _Point2.default(r.x, r.y).getDirection(new _Point2.default(p.x, p.y));\n\t\n\t\t\t\tvar i = void 0,\n\t\t\t\t    distance = Math.abs(r.left - p.x),\n\t\t\t\t    direction = _Point2.default.W;\n\t\n\t\t\t\ti = Math.abs(r.top - p.y);\n\t\t\t\tif (i <= distance) {\n\t\t\t\t\tdistance = i;\n\t\t\t\t\tdirection = _Point2.default.N;\n\t\t\t\t}\n\t\n\t\t\t\ti = Math.abs(r.bottom - p.y);\n\t\t\t\tif (i <= distance) {\n\t\t\t\t\tdistance = i;\n\t\t\t\t\tdirection = _Point2.default.S;\n\t\t\t\t}\n\t\n\t\t\t\ti = Math.abs(r.right - p.x);\n\t\t\t\tif (i < distance) {\n\t\t\t\t\tdirection = _Point2.default.E;\n\t\t\t\t}\n\t\n\t\t\t\treturn direction;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Rectangle;\n\t}(_Shape3.default);\n\t\n\texports.default = Rectangle;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Point = __webpack_require__(3);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar registry = {};\n\t\n\tvar Shape = function () {\n\t\tfunction Shape(x, y, width, height, config) {\n\t\t\t_classCallCheck(this, Shape);\n\t\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\t_lodash2.default.defaults(this, config, { x: 0, y: 0, width: 0, height: 0 });\n\t\t}\n\t\n\t\t/**\n\t  * Return the y-coord of the top side of this rectangle\n\t  */\n\t\n\t\n\t\t_createClass(Shape, [{\n\t\t\tkey: \"contains\",\n\t\t\tvalue: function contains(el) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * This will generate n ports on the shape.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getRegularPoints\",\n\t\t\tvalue: function getRegularPoints(n) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Get the intersection between boundary of this shape and the line connecting (x,y) with the refPt.\n\t   * @param refPt\n\t   * @returns {null}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getPerimeter\",\n\t\t\tvalue: function getPerimeter(refPt) {\n\t\t\t\tvar orthogonal = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t\n\t\t\t\treturn this.constructor.getPerimeter(this, refPt, orthogonal);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"render\",\n\t\t\tvalue: function render(view) {\n\t\t\t\tvar template = _lodash2.default.template(view.getTemplate(this.name, this));\n\t\t\t\treturn template(this);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"top\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.y - this.height / 2;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Returns the y-coordinate of the bottom of this Rectangle.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"bottom\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.y + this.height / 2;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Return the x-coord of left side of this rectangle\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"left\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.x - this.width / 2;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Returns the x-coordinate of the right side of this Rectangle.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"right\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.x + this.width / 2;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"center\",\n\t\t\tget: function get() {\n\t\t\t\treturn new _Point2.default(this.x, this.y);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"bounds\",\n\t\t\tget: function get() {\n\t\t\t\treturn new _Rectangle2.default(this.x, this.y, this.width, this.height);\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"getShape\",\n\t\t\tvalue: function getShape(name) {\n\t\t\t\treturn registry[name];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"addShape\",\n\t\t\tvalue: function addShape(name, c) {\n\t\t\t\tregistry[name] = c;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"removeShape\",\n\t\t\tvalue: function removeShape(name) {\n\t\t\t\tdelete registry[name];\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Shape;\n\t}();\n\t\n\texports.default = Shape;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * dom Utility functions\n\t */\n\texports.default = {\n\t\tisIE: function () {\n\t\t\tif (!window || !window.navigator || !navigator) return false;\n\t\t\tvar sAgent = window.navigator.userAgent;\n\t\t\tvar Idx = sAgent.indexOf(\"MSIE\");\n\t\n\t\t\t// If IE, return version number.\n\t\t\tif (Idx > 0) return parseInt(sAgent.substring(Idx + 5, sAgent.indexOf(\".\", Idx)));\n\t\n\t\t\t// If IE 11 then look for Updated user agent string.\n\t\t\telse if (!!navigator.userAgent.match(/Trident\\/7\\./)) return 11;else if (!!navigator.userAgent.match(/Edge\\//)) return \"Edge\";else return false;\n\t\t}(),\n\t\n\t\tisFireFox: function () {\n\t\t\t// InstallTrigger: Firefox's API to install add-ons\n\t\t\treturn typeof InstallTrigger !== 'undefined';\n\t\t}(),\n\t\n\t\tisChrome: function () {\n\t\t\tif (!window || !window.navigator || !navigator || navigator.userAgent.indexOf('Edge') >= 0) return false;\n\t\t\tvar raw = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n\t\t\treturn raw ? parseInt(raw[2], 10) : false;\n\t\t}(),\n\t\n\t\tisMac: function () {\n\t\t\tif (!window || !window.navigator || !navigator) return false;\n\t\t\treturn navigator.platform.toUpperCase().indexOf('MAC') >= 0;\n\t\t}(),\n\t\n\t\tisWindows: function () {\n\t\t\tif (!window || !window.navigator || !navigator) return false;\n\t\t\treturn navigator.appVersion.indexOf(\"Windows\") >= 0;\n\t\t}(),\n\t\n\t\tisLinux: function () {\n\t\t\tif (!window || !window.navigator || !navigator) return false;\n\t\t\treturn navigator.appVersion.indexOf(\"Linux\") >= 0;\n\t\t}(),\n\t\n\t\tcreateElement: function createElement(tag, attribs, styles, html) {\n\t\t\tvar el = document.createElement(tag);\n\t\t\tthis.setElement(el, attribs, styles);\n\t\t\tif (html) el.innerHTML = html;\n\t\t\treturn el;\n\t\t},\n\t\n\t\tcreateElementByString: function createElementByString(str) {\n\t\t\tvar temp = this.createElement('div', null, null, str);\n\t\t\treturn temp.childNodes;\n\t\t},\n\t\n\t\tsetElement: function setElement(el, attribs, styles) {\n\t\t\tif (attribs) {\n\t\t\t\t_lodash2.default.forEach(attribs, function (value, key) {\n\t\t\t\t\tel.setAttribute(key, value);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (styles) {\n\t\t\t\t_lodash2.default.forEach(styles, function (value, key) {\n\t\t\t\t\tel.style[key] = value;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\n\t\ttestElement: function testElement(node, method) {\n\t\t\treturn node && node.nodeType == 1 && (!method || method(node));\n\t\t},\n\t\n\t\tgetAncestorBy: function getAncestorBy(node, method) {\n\t\t\twhile (node = node.parentNode) {\n\t\t\t\tif (this.testElement(node, method)) return node;\n\t\t\t}return null;\n\t\t},\n\t\n\t\t/**\n\t  * Get the position of element relative to the context.\n\t  * @param el the element\n\t  * @param context\n\t  * @returns {*[]}\n\t  */\n\t\tgetPosition: function getPosition(el, context) {\n\t\t\tif (!context) context = document.body;\n\t\t\tvar elRect = el.getBoundingClientRect();\n\t\t\tvar contextRect = context.getBoundingClientRect();\n\t\n\t\t\treturn [elRect.left - contextRect.left, elRect.top - contextRect.top];\n\t\t},\n\t\tgetCenterPosition: function getCenterPosition(el, context) {\n\t\t\tif (!context) context = document.body;\n\t\t\tvar elRect = el.getBoundingClientRect();\n\t\t\tvar contextRect = context.getBoundingClientRect();\n\t\t\tvar w = elRect.right - elRect.left;\n\t\t\tvar h = elRect.bottom - elRect.top;\n\t\n\t\t\treturn [elRect.left - contextRect.left + w / 2, elRect.top - contextRect.top + h / 2];\n\t\t},\n\t\n\t\n\t\tmove: function move(el, x, y) {\n\t\t\tif (x) el.style.left = x + 'px';\n\t\t\tif (y) el.style.top = y + 'px';\n\t\t},\n\t\n\t\tgetSize: function getSize(el) {\n\t\t\tvar w = parseInt(el.style.offsetWidth, 10);\n\t\t\tvar h = parseInt(el.style.offsetHeight, 10);\n\t\t\treturn [w, h];\n\t\t},\n\t\n\t\tresize: function resize(el, w, h) {\n\t\t\tif (w) el.style.width = w + \"px\";\n\t\t\tif (h) el.style.height = h + 'px';\n\t\t},\n\t\n\t\tpreloadImages: function preloadImages(array) {\n\t\t\tif (!this.preloadImages.list) this.preloadImages.list = [];\n\t\t\tif (!this.preloadImages.loaded) this.preloadImages.loaded = {};\n\t\n\t\t\tvar list = this.preloadImages.list;\n\t\t\tvar img,\n\t\t\t    that = this;\n\t\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\t\timg = new Image();\n\t\t\t\timg.onload = function () {\n\t\t\t\t\tvar index = list.indexOf(this);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tthat.preloadImages.loaded[this.name] = { width: this.width, height: this.height };\n\t\t\t\t\t\t// remove image from the array once it's loaded\n\t\t\t\t\t\t// for memory consumption reasons\n\t\t\t\t\t\tlist.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tlist.push(img);\n\t\t\t\timg.src = array[i];\n\t\t\t\timg.name = array[i];\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t  * Get's the image's information given the url. Must be preloaded by calling the preloadImage function.\n\t  * @param src\n\t  */\n\t\tgetImageInfo: function getImageInfo(src) {\n\t\t\tif (this.preloadImages.loaded) {\n\t\t\t\treturn this.preloadImages.loaded[src];\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\n\t\tdownloadFile: function downloadFile(name, data) {\n\t\t\tif (!data) return;\n\t\t\tvar mime = data.match(/^data:([^;,]*)/)[1];\n\t\t\tif (name.indexOf('.') < 0) {\n\t\t\t\tif (!mime) mime = 'text/plain';\n\t\t\t\tif (mime == 'text/plain') name = name + '.txt';else {\n\t\t\t\t\tvar type = mime.split('/')[1];\n\t\t\t\t\tif (type.indexOf('+') > 0) type = type.split('+')[0];\n\t\t\t\t\tname = name + '.' + type;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.isIE) {\n\t\t\t\tvar encoded = data.indexOf(';base64') >= 0;\n\t\t\t\tif (encoded) data = atob(data.replace('data:' + mime + ';base64,', ''));else data = decodeURI(data.replace('data:' + mime + ',', ''));\n\t\t\t\tdata = this.GetBlob(data, mime);\n\t\t\t\tnavigator.msSaveBlob(data, name);\n\t\t\t} else {\n\t\t\t\tvar link = this.createElement('a', { href: data, download: name }, { display: \"none\" });\n\t\t\t\tdocument.body.appendChild(link);\n\t\t\t\tlink.click();\n\t\t\t\tlink.parentNode.removeChild(link);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t  * Convert b54 to blob. IE only\n\t  */\n\t\tGetBlob: function GetBlob(data, contentType, sliceSize) {\n\t\t\tcontentType = contentType || '';\n\t\t\tsliceSize = sliceSize || 512;\n\t\n\t\t\tvar byteArrays = [];\n\t\n\t\t\tfor (var offset = 0; offset < data.length; offset += sliceSize) {\n\t\t\t\tvar slice = data.slice(offset, offset + sliceSize);\n\t\n\t\t\t\tvar byteNumbers = new Array(slice.length);\n\t\t\t\tfor (var i = 0; i < slice.length; i++) {\n\t\t\t\t\tbyteNumbers[i] = slice.charCodeAt(i);\n\t\t\t\t}\n\t\t\t\tvar byteArray = new Uint8Array(byteNumbers);\n\t\t\t\tbyteArrays.push(byteArray);\n\t\t\t}\n\t\t\treturn new Blob(byteArrays, { type: contentType });\n\t\t},\n\t\n\t\topenImage: function openImage(name, image) {\n\t\t\tvar myWindow = window.open(\"\", \"_blank\", \"toolbar=yes, scrollbars=yes, resizable=yes, width=500, height=500\");\n\t\t\tvar myDocument = myWindow.document;\n\t\t\tvar img = myDocument.createElement(\"img\");\n\t\t\tthis.setElement(img, { src: image, name: name });\n\t\t\tmyDocument.body.appendChild(img);\n\t\t},\n\t\n\t\t/**\n\t  * Check whether the key event is from input, textarea or select.\n\t  * @param e  input event\n\t  */\n\t\teventFromInput: function eventFromInput(e) {\n\t\t\tvar tagName = e.target.tagName;\n\t\t\treturn tagName == 'INPUT' || tagName == 'TEXTAREA' || tagName == 'SELECT';\n\t\t}\n\t};\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * A string buffer for fast string manipulation\n\t */\n\t\n\tvar StringBuffer = function () {\n\t\tfunction StringBuffer(str) {\n\t\t\t_classCallCheck(this, StringBuffer);\n\t\n\t\t\tthis.buffer = [];\n\t\t\tif (str) this.buffer.push(str);\n\t\t}\n\t\n\t\t_createClass(StringBuffer, [{\n\t\t\tkey: \"append\",\n\t\t\tvalue: function append(stuff) {\n\t\t\t\tif (_lodash2.default.isString(stuff)) this.buffer.push(stuff);else if (_lodash2.default.isArray(stuff)) this.buffer = this.buffer.concat(stuff);else this.buffer.push(\"\" + stuff);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"prepend\",\n\t\t\tvalue: function prepend(stuff) {\n\t\t\t\tif (_lodash2.default.isString(stuff)) this.buffer.splice(0, 0, stuff);else if (_lodash2.default.isArray(stuff)) this.buffer = stuff.concat(this.buffer);else this.buffer.splice(0, 0, \"\" + stuff);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"clear\",\n\t\t\tvalue: function clear() {\n\t\t\t\tthis.buffer = [];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"removeLast\",\n\t\t\tvalue: function removeLast() {\n\t\t\t\tthis.buffer.pop();\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString(sep) {\n\t\t\t\tif (!sep) sep = '';\n\t\t\t\treturn this.buffer.join(sep);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn StringBuffer;\n\t}();\n\t\n\texports.default = StringBuffer;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Point = __webpack_require__(3);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Line = function () {\n\t\tfunction Line(start, end) {\n\t\t\t_classCallCheck(this, Line);\n\t\n\t\t\tthis.start = start;\n\t\t\tthis.end = end;\n\t\t}\n\t\n\t\t/**\n\t  * Calculate the length of this line\n\t  */\n\t\n\t\n\t\t_createClass(Line, [{\n\t\t\tkey: 'length',\n\t\t\tvalue: function length() {\n\t\t\t\treturn this.start.distance(this.end);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Calculate the distance of this line to the point.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'distance',\n\t\t\tvalue: function distance(pt) {\n\t\t\t\tvar x = this.start.distance(pt);\n\t\t\t\tif (x == 0) return 0;\n\t\n\t\t\t\tvar l = this.length();\n\t\t\t\tvar cosa = new _Point2.default((this.end.x - this.start.x) / l, (this.end.y - this.start.y) / l).dotProduct(new _Point2.default(pt.x / x, pt.y / x));\n\t\n\t\t\t\treturn x * Math.sqrt(1 - cosa * cosa);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Function: intersection\n\t   *\n\t   * Returns the intersection of two lines as an <mxPoint>.\n\t   *\n\t   * Parameters:\n\t   *\n\t   * x0 - X-coordinate of the first line's startpoint.\n\t   * y0 - X-coordinate of the first line's startpoint.\n\t   * x1 - X-coordinate of the first line's endpoint.\n\t   * y1 - Y-coordinate of the first line's endpoint.\n\t   * x2 - X-coordinate of the second line's startpoint.\n\t   * y2 - Y-coordinate of the second line's startpoint.\n\t   * x3 - X-coordinate of the second line's endpoint.\n\t   * y3 - Y-coordinate of the second line's endpoint.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'toString',\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Line:{start=' + this.start + ';end=' + this.end + '}';\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: 'intersection',\n\t\t\tvalue: function intersection(x0, y0, x1, y1, x2, y2, x3, y3) {\n\t\t\t\tvar denom = (y3 - y2) * (x1 - x0) - (x3 - x2) * (y1 - y0);\n\t\t\t\tvar nume_a = (x3 - x2) * (y0 - y2) - (y3 - y2) * (x0 - x2);\n\t\t\t\tvar nume_b = (x1 - x0) * (y0 - y2) - (y1 - y0) * (x0 - x2);\n\t\n\t\t\t\tvar ua = nume_a / denom;\n\t\t\t\tvar ub = nume_b / denom;\n\t\n\t\t\t\tif (ua >= 0.0 && ua <= 1.0 && ub >= 0.0 && ub <= 1.0) {\n\t\t\t\t\t// Get the intersection point\n\t\t\t\t\tvar intersectionX = x0 + ua * (x1 - x0);\n\t\t\t\t\tvar intersectionY = y0 + ua * (y1 - y0);\n\t\n\t\t\t\t\treturn new _Point2.default(intersectionX, intersectionY);\n\t\t\t\t}\n\t\n\t\t\t\t// No intersection\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Line;\n\t}();\n\t\n\texports.default = Line;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Shape2 = __webpack_require__(6);\n\t\n\tvar _Shape3 = _interopRequireDefault(_Shape2);\n\t\n\tvar _Point = __webpack_require__(3);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Ellipse = function (_Shape) {\n\t\t_inherits(Ellipse, _Shape);\n\t\n\t\tfunction Ellipse() {\n\t\t\t_classCallCheck(this, Ellipse);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(Ellipse).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(Ellipse, [{\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Ellipse:{x=' + this.x + ';y=' + this.y + ';width=' + this.width + ';height=' + this.height + '}';\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"getPerimeter\",\n\t\t\tvalue: function getPerimeter(rect, pt) {\n\t\t\t\tvar orthogonal = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\t\n\t\t\t\tvar a = rect.width / 2;\n\t\t\t\tvar b = rect.height / 2;\n\t\t\t\tvar cx = rect.x;\n\t\t\t\tvar cy = rect.y;\n\t\t\t\tvar px = pt.x;\n\t\t\t\tvar py = pt.y;\n\t\n\t\t\t\t// Calculates straight line equation through\n\t\t\t\t// point and ellipse center y = d * x + h\n\t\t\t\tvar dx = parseInt(px - cx);\n\t\t\t\tvar dy = parseInt(py - cy);\n\t\n\t\t\t\tvar tx, ty;\n\t\n\t\t\t\tif (dx == 0 && dy != 0) {\n\t\t\t\t\treturn new _Point2.default(cx, cy + b * dy / Math.abs(dy));\n\t\t\t\t} else if (dx == 0 && dy == 0) {\n\t\t\t\t\treturn new _Point2.default(px, py);\n\t\t\t\t}\n\t\n\t\t\t\t// Calculates intersection\n\t\t\t\tvar d = dy / dx;\n\t\t\t\tvar h = cy - d * cx;\n\t\t\t\tvar e = a * a * d * d + b * b;\n\t\t\t\tvar f = -2 * cx * e;\n\t\t\t\tvar g = a * a * d * d * cx * cx + b * b * cx * cx - a * a * b * b;\n\t\t\t\tvar det = Math.sqrt(f * f - 4 * e * g);\n\t\n\t\t\t\t// Two solutions (perimeter points)\n\t\t\t\tvar xout1 = (-f + det) / (2 * e);\n\t\t\t\tvar xout2 = (-f - det) / (2 * e);\n\t\t\t\tvar yout1 = d * xout1 + h;\n\t\t\t\tvar yout2 = d * xout2 + h;\n\t\t\t\tvar dist1 = Math.sqrt(Math.pow(xout1 - px, 2) + Math.pow(yout1 - py, 2));\n\t\t\t\tvar dist2 = Math.sqrt(Math.pow(xout2 - px, 2) + Math.pow(yout2 - py, 2));\n\t\n\t\t\t\t// Correct solution\n\t\t\t\tvar xout = 0;\n\t\t\t\tvar yout = 0;\n\t\n\t\t\t\tif (dist1 < dist2) {\n\t\t\t\t\txout = xout1;\n\t\t\t\t\tyout = yout1;\n\t\t\t\t} else {\n\t\t\t\t\txout = xout2;\n\t\t\t\t\tyout = yout2;\n\t\t\t\t}\n\t\n\t\t\t\tvar p = new _Point2.default(xout, yout);\n\t\t\t\tvar dir = _Rectangle2.default.getDirection(rect, p, orthogonal);\n\t\t\t\tif (orthogonal) {\n\t\t\t\t\tif (dir.x == -1) {\n\t\t\t\t\t\treturn { point: new _Point2.default(cx - a, cy), direction: dir };\n\t\t\t\t\t}\n\t\t\t\t\tif (dir.x == 1) {\n\t\t\t\t\t\treturn { point: new _Point2.default(cx + a, cy), direction: dir };\n\t\t\t\t\t}\n\t\t\t\t\tif (dir.y == -1) {\n\t\t\t\t\t\treturn { point: new _Point2.default(cx, cy - b), direction: dir };\n\t\t\t\t\t}\n\t\t\t\t\tif (dir.y == 1) {\n\t\t\t\t\t\treturn { point: new _Point2.default(cx, cy + b), direction: dir };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn { point: p, direction: dir };\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Ellipse;\n\t}(_Shape3.default);\n\t\n\texports.default = Ellipse;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Point = __webpack_require__(3);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar defaultConfig = {\n\t\ttype: \"direct\",\n\t\tshowGauge: true,\n\t\torthogonal: false\n\t};\n\t\n\tvar defaultGeometry = {\n\t\twidth: 0,\n\t\theight: 0,\n\t\tanchorX: 0,\n\t\tanchorY: 0,\n\t\toffsetX: 0,\n\t\toffsetY: 0\n\t};\n\t\n\tvar linkTypes = {};\n\t\n\tvar Link = function () {\n\t\tfunction Link(terminalVisual) {\n\t\t\tvar shapeConfig = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\t\tvar startMarker = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\t\t\tvar endMarker = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];\n\t\n\t\t\t_classCallCheck(this, Link);\n\t\n\t\t\tthis.start = terminalVisual[0].point;\n\t\t\tthis.end = terminalVisual[1].point;\n\t\t\tthis.startNormal = terminalVisual[0].direction;\n\t\t\tthis.endNormal = terminalVisual[1].direction;\n\t\t\tthis.startMarker = startMarker;\n\t\t\tthis.endMarker = endMarker;\n\t\t\t_lodash2.default.assign(this, shapeConfig);\n\t\t}\n\t\n\t\t_createClass(Link, [{\n\t\t\tkey: \"render\",\n\t\t\tvalue: function render(view) {\n\t\t\t\treturn view.renderLink(this);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getRelativePosition\",\n\t\n\t\n\t\t\t/**\r\n\t   * Calculate the position where to put modifiers or label..\r\n\t   *\r\n\t   * @param geometry: defines how far along the edge should the point be placed.\r\n\t   * @return *[] the relative position.\r\n\t   */\n\t\t\tvalue: function getRelativePosition(geometry) {\n\t\t\t\tif (_lodash2.default.isNumber(geometry)) geometry = { x: geometry };\n\t\t\t\tgeometry = _lodash2.default.defaults(geometry, defaultGeometry);\n\t\t\t\tvar p = geometry.x,\n\t\t\t\t    l = this.length;\n\t\t\t\tif (Math.abs(p) <= 1) p *= l;\n\t\t\t\tif (p < 0) p = l + p;\n\t\t\t\tif (p > l) p = l;\n\t\n\t\t\t\tvar points = this.points,\n\t\t\t\t    d = void 0,\n\t\t\t\t    point = void 0,\n\t\t\t\t    dir = void 0;\n\t\t\t\tfor (var i = 0; i < points.length - 1; i++) {\n\t\t\t\t\td = points[i].distance(points[i + 1]);\n\t\t\t\t\tif (p <= d) {\n\t\t\t\t\t\t// we've located the line segment.\n\t\t\t\t\t\tpoint = points[i].clone();\n\t\t\t\t\t\tdir = point.getDirection(points[i + 1]);\n\t\t\t\t\t\tpoint.translate(dir.getScaled(p));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tp -= d;\n\t\t\t\t}\n\t\n\t\t\t\t// return the last point.\n\t\t\t\tif (!point) point = points[points.length - 1];\n\t\t\t\treturn _Utils2.default.offsetPosition([point.x, point.y], geometry);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Link';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"points\",\n\t\t\tget: function get() {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"controlPts\",\n\t\t\tget: function get() {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"length\",\n\t\t\tget: function get() {\n\t\t\t\tvar points = this.points;\n\t\t\t\tvar i = void 0,\n\t\t\t\t    l = 0;\n\t\t\t\tfor (i = 0; i < points.length - 1; i++) {\n\t\t\t\t\tl += points[i].distance(points[i + 1]);\n\t\t\t\t}return l;\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"getLink\",\n\t\t\tvalue: function getLink(terminalVisual) {\n\t\t\t\tvar shapeConfig = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\t\t\tvar startMarker = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\t\t\t\tvar endMarker = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];\n\t\n\t\t\t\tshapeConfig = _lodash2.default.defaultsDeep(shapeConfig, defaultConfig);\n\t\t\t\tvar linkClass = linkTypes[shapeConfig.type];\n\t\t\t\tif (linkClass) return new linkClass(terminalVisual, shapeConfig, startMarker, endMarker);\n\t\t\t\tconsole.log('link type not supported: ' + shapeConfig.type);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Link;\n\t}();\n\t\n\tvar DirectLink = function (_Link) {\n\t\t_inherits(DirectLink, _Link);\n\t\n\t\tfunction DirectLink() {\n\t\t\t_classCallCheck(this, DirectLink);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(DirectLink).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(DirectLink, [{\n\t\t\tkey: \"points\",\n\t\t\tget: function get() {\n\t\t\t\treturn [this.start, this.end];\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn DirectLink;\n\t}(Link);\n\t\n\tvar BezierLink = function (_Link2) {\n\t\t_inherits(BezierLink, _Link2);\n\t\n\t\tfunction BezierLink() {\n\t\t\t_classCallCheck(this, BezierLink);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(BezierLink).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(BezierLink, [{\n\t\t\tkey: \"getRelativePosition\",\n\t\t\tvalue: function getRelativePosition(geometry) {\n\t\t\t\tif (_lodash2.default.isNumber(geometry)) geometry = { x: geometry };\n\t\t\t\tgeometry = _lodash2.default.defaults(geometry, defaultGeometry);\n\t\t\t\tvar p = geometry.x,\n\t\t\t\t    l = this.length;\n\t\t\t\tif (Math.abs(p) > 1) p /= l;\n\t\t\t\tif (p < 0) p++;\n\t\t\t\tif (p > 1) p--;\n\t\n\t\t\t\tvar pts = this.points;\n\t\t\t\tvar ctrlpts = this.controlPts;\n\t\t\t\tvar p1 = pts[0];\n\t\t\t\tvar p2 = ctrlpts[1][0];\n\t\t\t\tvar p3 = ctrlpts[1][1];\n\t\t\t\tvar p4 = pts[1];\n\t\n\t\t\t\tvar point = [(1 - p) * (1 - p) * (1 - p) * p1.x + 3 * p * (1 - p) * (1 - p) * p2.x + 3 * p * p * (1 - p) * p3.x + p * p * p * p4.x, (1 - p) * (1 - p) * (1 - p) * p1.y + 3 * p * (1 - p) * (1 - p) * p2.y + 3 * p * p * (1 - p) * p3.y + p * p * p * p4.y];\n\t\t\t\treturn _Utils2.default.offsetPosition([point.x, point.y], geometry);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"points\",\n\t\t\tget: function get() {\n\t\t\t\treturn [this.start, this.end];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"controlPts\",\n\t\t\tget: function get() {\n\t\t\t\tvar s = this.points[0],\n\t\t\t\t    e = this.points[1];\n\t\t\t\tvar pts = [];\n\t\t\t\tpts[0] = null;\n\t\t\t\tpts[1] = [];\n\t\t\t\tif (this.startNormal.x == 0) {\n\t\t\t\t\tpts[1][0] = new _Point2.default(s.x, (s.y + e.y) / 2);\n\t\t\t\t} else {\n\t\t\t\t\tpts[1][0] = new _Point2.default((s.x + e.x) / 2, s.y);\n\t\t\t\t}\n\t\t\t\tif (this.endNormal.x == 0) {\n\t\t\t\t\tpts[1][1] = new _Point2.default(e.x, (s.y + e.y) / 2);\n\t\t\t\t} else {\n\t\t\t\t\tpts[1][1] = new _Point2.default((s.x + e.x) / 2, e.y);\n\t\t\t\t}\n\t\t\t\treturn pts;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn BezierLink;\n\t}(Link);\n\t\n\tvar EntityRelations = function (_Link3) {\n\t\t_inherits(EntityRelations, _Link3);\n\t\n\t\tfunction EntityRelations() {\n\t\t\t_classCallCheck(this, EntityRelations);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(EntityRelations).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(EntityRelations, [{\n\t\t\tkey: \"points\",\n\t\t\tget: function get() {\n\t\t\t\tvar source = Port.getBounds(edge, true);\n\t\t\t\tvar target = Port.getBounds(edge, false);\n\t\t\t\tvar isSourceLeft = target.right() < source.x;\n\t\t\t\tvar isTargetLeft = source.right() < target.x;\n\t\t\t\tvar result = [];\n\t\n\t\t\t\tvar x0 = isSourceLeft ? source.x : source.x + source.width;\n\t\t\t\tvar y0 = source.getCenterY();\n\t\t\t\tresult.push(new _Point2.default(x0, y0));\n\t\n\t\t\t\tvar xe = isTargetLeft ? target.x : target.x + target.width;\n\t\t\t\tvar ye = target.getCenterY();\n\t\n\t\t\t\tvar seg = this.segment;\n\t\n\t\t\t\tvar dx = isSourceLeft ? -seg : seg;\n\t\t\t\tvar dep = new _Point2.default(x0 + dx, y0);\n\t\n\t\t\t\tdx = isTargetLeft ? -seg : seg;\n\t\t\t\tvar arr = new _Point2.default(xe + dx, ye);\n\t\n\t\t\t\t// Adds intermediate points if both go out on same side\n\t\t\t\tif (isSourceLeft == isTargetLeft) {\n\t\t\t\t\tvar x = isSourceLeft ? Math.min(x0, xe) - seg : Math.max(x0, xe) + seg;\n\t\n\t\t\t\t\tresult.push(new _Point2.default(x, y0));\n\t\t\t\t\tresult.push(new _Point2.default(x, ye));\n\t\t\t\t} else if (dep.x < arr.x == isSourceLeft) {\n\t\t\t\t\tvar midY = y0 + (ye - y0) / 2;\n\t\n\t\t\t\t\tresult.push(dep);\n\t\t\t\t\tresult.push(new _Point2.default(dep.x, midY));\n\t\t\t\t\tresult.push(new _Point2.default(arr.x, midY));\n\t\t\t\t\tresult.push(arr);\n\t\t\t\t} else {\n\t\t\t\t\tresult.push(dep);\n\t\t\t\t\tresult.push(arr);\n\t\t\t\t}\n\t\n\t\t\t\tresult.push(new _Point2.default(xe, ye));\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn EntityRelations;\n\t}(Link);\n\t\n\tvar Manhattan = function (_Link4) {\n\t\t_inherits(Manhattan, _Link4);\n\t\n\t\tfunction Manhattan(terminalVisual, shapeConfig, startMarker, endMarker) {\n\t\t\t_classCallCheck(this, Manhattan);\n\t\n\t\t\tshapeConfig = _lodash2.default.defaults(shapeConfig, {\n\t\t\t\tMIN_BUFFER: 10,\n\t\t\t\tautoRoute: false,\n\t\t\t\trandomNoise: 0,\n\t\t\t\tstep: 1,\n\t\t\t\tmaxChannelWidth: 100\n\t\t\t});\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(Manhattan).call(this, terminalVisual, shapeConfig, startMarker, endMarker));\n\t\t}\n\t\n\t\t_createClass(Manhattan, [{\n\t\t\tkey: \"autoRoute\",\n\t\n\t\n\t\t\t/**\r\n\t   * Automatically route the connection to avoid intersections with other vertices.\r\n\t   */\n\t\t\tvalue: function autoRoute(pts, container, boxes, startBox, endBox) {\n\t\t\t\tvar side, side2, d, box, intersect, j;\n\t\t\t\tvar channel, channel2, pt, dir;\n\t\n\t\t\t\tvar startPadding = 0,\n\t\t\t\t    endPadding;\n\t\t\t\t// first get the start and end channel\n\t\t\t\tbox = boxes[endBox];\n\t\t\t\tpt = pts[pts.length - 2];\n\t\t\t\tif (pt.y < box.y) side = 1;else if (pt.y > box.y + box.height) side = 3;else if (pt.x < box.x) side = 0;else side = 2;\n\t\t\t\tchannel = _getChannel(container, endBox, boxes, side);\n\t\t\t\tendPadding = channel.horizontal ? (channel.right - channel.left) / 2 : (channel.bottom - channel.top) / 2;\n\t\n\t\t\t\tfor (var i = 0; i < pts.length - 1; i++) {\n\t\t\t\t\tif (pts[i + 1].x == pts[i].x && pts[i + 1].y == pts[i].y) continue;\n\t\t\t\t\tintersect = _getFirstIntersection(pts, i, boxes, startBox, endBox);\n\t\t\t\t\tif (!intersect) continue;\n\t\t\t\t\tj = intersect[0];\n\t\t\t\t\tside = intersect[1];\n\t\t\t\t\tbox = boxes[j];\n\t\t\t\t\tchannel = _getChannel(container, j, boxes, side);\n\t\t\t\t\tswitch (side) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\tpt = new _Point2.default((channel.right + channel.left) / 2, pts[i].y);\n\t\t\t\t\t\t\tdir = _getRouteTendency(pts, i, pt, box, side);\n\t\t\t\t\t\t\tside2 = dir < 0 ? 1 : 3;\n\t\t\t\t\t\t\tchannel2 = _getChannel(container, j, boxes, side2);\n\t\t\t\t\t\t\t// if the previous point is in the channel2, use that point instead of center of the channel.\n\t\t\t\t\t\t\tif (i > 1 && pts[i - 2].y == pts[i - 1].y && pts[i - 1].y > channel2.top && pts[i - 1].y < channel2.bottom) d = pts[i - 1].y - pt.y;else if (i < pts.length - 3 && pts[i + 2].y == pts[i + 3].y && pts[i + 2].y > channel2.top && pts[i + 2].y < channel2.bottom) d = pts[i + 2].y - pt.y;else d = (channel2.bottom + channel2.top) / 2 - pt.y;\n\t\t\t\t\t\t\t// check if we need this pt.\n\t\t\t\t\t\t\tif (side == 0 && pt.x <= pts[i].x || side == 2 && pt.x >= pts[i].x) pt = null;else if (i > 0) {\n\t\t\t\t\t\t\t\t// see if we can push the line out to where we started.\n\t\t\t\t\t\t\t\tif (!_hasIntersection([new _Point2.default(pts[i].x, pts[i].y), new _Point2.default(pts[i].x, pts[i].y + d), new _Point2.default(pt.x, pt.y + d)], boxes)) pt = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\tpt = new _Point2.default(pts[i].x, (channel.bottom + channel.top) / 2);\n\t\t\t\t\t\t\tdir = _getRouteTendency(pts, i, pt, box, side);\n\t\t\t\t\t\t\tside2 = dir < 0 ? 0 : 2;\n\t\t\t\t\t\t\tchannel2 = _getChannel(container, j, boxes, side2);\n\t\t\t\t\t\t\t// if the previous point is in the channel2, use that point instead of center of the channel.\n\t\t\t\t\t\t\tif (i > 1 && pts[i - 2].x == pts[i - 1].x && pts[i - 1].x > channel2.left && pts[i - 1].x < channel2.right) d = pts[i - 1].x - pt.x;else if (i < pts.length - 3 && pts[i + 2].x == pts[i + 3].x && pts[i + 2].x > channel2.left && pts[i + 2].x < channel2.right) d = pts[i + 2].x - pt.x;else d = (channel2.right + channel2.left) / 2 - pt.x;\n\t\t\t\t\t\t\t// check if we need this pt.\n\t\t\t\t\t\t\tif (side == 1 && pt.y <= pts[i].y || side == 3 && pt.y >= pts[i].y) pt = null;else if (i > 0) {\n\t\t\t\t\t\t\t\t// see if we can push the line out to where we started.\n\t\t\t\t\t\t\t\tif (!_hasIntersection([new _Point2.default(pts[i].x, pts[i].y), new _Point2.default(pts[i].x + d, pts[i].y), new _Point2.default(pt.x + d, pt.y)], boxes)) pt = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t// max points.\n\t\t\t\t\tif (i > 20) return;\n\t\t\t\t\tif (pt && (pt.x != pts[i].x || pt.y != pts[i].y)) {\n\t\t\t\t\t\tpts.splice(i + 1, 0, pt);\n\t\t\t\t\t\t_moveSegment(pts, i + 1, d, startPadding, endPadding);\n\t\t\t\t\t\ti++;\n\t\t\t\t\t} else _moveSegment(pts, i, d, startPadding, endPadding);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_getRouteTendency\",\n\t\t\tvalue: function _getRouteTendency(pts, i, breakPt, box, side) {\n\t\t\t\tvar dir;\n\t\t\t\tvar p;\n\t\t\t\tswitch (side) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tp = \"y\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tp = \"x\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t//first try the breakpt.\n\t\t\t\tdir = _getRouteDirection(breakPt, pts[pts.length - 1])[p];\n\t\t\t\tif (dir == 0) {\n\t\t\t\t\tdir = -_getRouteDirection(pts[0], pts[pts.length - 1])[p];\n\t\t\t\t\tif (dir == 0) {\n\t\t\t\t\t\tif (breakPt[p] < box.getCenter()[p]) dir = -1;else dir = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn dir;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_getChannel\",\n\t\t\tvalue: function _getChannel(container, index, boxes, side) {\n\t\t\t\tvar maxChannelWidth = this.maxChannelWidth;\n\t\t\t\tvar box1 = boxes[index],\n\t\t\t\t    box2;\n\t\t\t\tvar pt, i;\n\t\t\t\tvar channel = {},\n\t\t\t\t    l,\n\t\t\t\t    t,\n\t\t\t\t    b,\n\t\t\t\t    r;\n\t\t\t\tswitch (side) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tpt = box1.getLeft();\n\t\t\t\t\t\tchannel.right = pt.x;\n\t\t\t\t\t\tchannel.horizontal = false;\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tr = boxes[i].getRight().x;\n\t\t\t\t\t\t\tif (r >= pt.x) continue;\n\t\t\t\t\t\t\tif (!channel.left || channel.left < r) channel.left = r;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.left) {\n\t\t\t\t\t\t\tchannel.left = container.getLeft().x;\n\t\t\t\t\t\t\tif (channel.right - channel.left > maxChannelWidth) channel.left = channel.right - maxChannelWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tbox2 = boxes[i];\n\t\t\t\t\t\t\tb = box2.getBottom().y;\n\t\t\t\t\t\t\tt = box2.getTop().y;\n\t\t\t\t\t\t\tif (b < pt.y && box2.getRight() > channel.left && box2.getLeft() < channel.right) {\n\t\t\t\t\t\t\t\tif (!channel.top || channel.top < b) channel.top = b;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (t > pt.y && box2.getRight() > channel.left && box2.getLeft() < channel.right) {\n\t\t\t\t\t\t\t\tif (!channel.bottom || channel.bottom > t) channel.bottom = t;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.top) channel.top = container.getTop().y;\n\t\t\t\t\t\tif (!channel.bottom) channel.bottom = container.getBottom().y;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tpt = box1.getTop();\n\t\t\t\t\t\tchannel.horizontal = true;\n\t\t\t\t\t\tchannel.bottom = pt.y;\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tb = boxes[i].getBottom().y;\n\t\t\t\t\t\t\tif (b >= pt.y) continue;\n\t\t\t\t\t\t\tif (!channel.top || channel.top < b) channel.top = b;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.top) {\n\t\t\t\t\t\t\tchannel.top = container.getTop().y;\n\t\t\t\t\t\t\tif (channel.bottom - channel.top > maxChannelWidth) channel.top = channel.bottom - maxChannelWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tbox2 = boxes[i];\n\t\t\t\t\t\t\tl = box2.getLeft().x;\n\t\t\t\t\t\t\tr = box2.getRight().x;\n\t\t\t\t\t\t\tif (r < pt.x && box2.getBottom() > channel.top && box2.getTop() < channel.bottom) {\n\t\t\t\t\t\t\t\tif (!channel.left || channel.left < r) channel.left = r;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (l > pt.x && box2.getBottom() > channel.top && box2.getTop() < channel.bottom) {\n\t\t\t\t\t\t\t\tif (!channel.right || channel.right > l) channel.right = l;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.left) channel.left = container.getLeft().x;\n\t\t\t\t\t\tif (!channel.right) channel.right = container.getRight().x;\n\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tpt = box1.getRight();\n\t\t\t\t\t\tchannel.horizontal = false;\n\t\t\t\t\t\tchannel.left = pt.x;\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tl = boxes[i].getLeft().x;\n\t\t\t\t\t\t\tif (l <= pt.x) continue;\n\t\t\t\t\t\t\tif (!channel.right || channel.right > l) channel.right = l;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.right) {\n\t\t\t\t\t\t\tchannel.right = container.getRight().x;\n\t\t\t\t\t\t\tif (channel.right - channel.left > maxChannelWidth) channel.right = channel.left + maxChannelWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tbox2 = boxes[i];\n\t\t\t\t\t\t\tb = box2.getBottom().y;\n\t\t\t\t\t\t\tt = box2.getTop().y;\n\t\t\t\t\t\t\tif (b < pt.y && box2.getRight() > channel.left && box2.getLeft() < channel.right) {\n\t\t\t\t\t\t\t\tif (!channel.top || channel.top < b) channel.top = b;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (t > pt.y && box2.getRight() > channel.left && box2.getLeft() < channel.right) {\n\t\t\t\t\t\t\t\tif (!channel.bottom || channel.bottom > t) channel.bottom = t;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.top) channel.top = container.getTop().y;\n\t\t\t\t\t\tif (!channel.bottom) channel.bottom = container.getBottom().y;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tpt = box1.getBottom();\n\t\t\t\t\t\tchannel.horizontal = true;\n\t\t\t\t\t\tchannel.top = pt.y;\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tbox2 = boxes[i];\n\t\t\t\t\t\t\tif (box2.getTop().y <= pt.y) continue;\n\t\t\t\t\t\t\tif (!channel.bottom || channel.bottom > box2.getTop().y) channel.bottom = box2.getTop().y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.bottom) {\n\t\t\t\t\t\t\tchannel.bottom = container.getBottom().y;\n\t\t\t\t\t\t\tif (channel.bottom - channel.top > maxChannelWidth) channel.bottom = channel.top + maxChannelWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tbox2 = boxes[i];\n\t\t\t\t\t\t\tl = box2.getLeft().x;\n\t\t\t\t\t\t\tr = box2.getRight().x;\n\t\t\t\t\t\t\tif (r < pt.x && box2.getBottom() > channel.top && box2.getTop() < channel.bottom) {\n\t\t\t\t\t\t\t\tif (!channel.left || channel.left < r) channel.left = r;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (l > pt.x && box2.getBottom() > channel.top && box2.getTop() < channel.bottom) {\n\t\t\t\t\t\t\t\tif (!channel.right || channel.right > l) channel.right = l;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.left) channel.left = container.getLeft().x;\n\t\t\t\t\t\tif (!channel.right) channel.right = container.getRight().x;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\treturn channel;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Move a line segment by a specified distance.\r\n\t   *\r\n\t   * @param pts the list of points.\r\n\t   * @param i the index of the segment.\r\n\t   * @param d the distance to move.\r\n\t   * @param startPadding\r\n\t   * @param endPadding\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"_moveSegment\",\n\t\t\tvalue: function _moveSegment(pts, i, d, startPadding, endPadding) {\n\t\t\t\t// first check if we need to add new line segments.\n\t\t\t\tvar dir, l, pt;\n\t\t\t\tif (i == 0) {\n\t\t\t\t\t// we need to break off the segment, since we can't change the starting point.\n\t\t\t\t\tdir = pts[0].getDirection(pts[1]);\n\t\t\t\t\tif (!startPadding) startPadding = this.MIN_BUFFER;\n\t\t\t\t\tl = Math.min(startPadding, pts[0].distance(pts[1]) / 2);\n\t\t\t\t\tpt = pts[0].getTranslated(dir.scale(l));\n\t\t\t\t\tpts.splice(1, 0, pt);\n\t\t\t\t\tthis._moveSegment(pts, i + 1, d);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (i == pts.length - 2) {\n\t\t\t\t\t// we need to break off the segment, since we can't change the end point.\n\t\t\t\t\tdir = pts[pts.length - 1].getDirection(pts[pts.length - 2]);\n\t\t\t\t\tif (!endPadding) endPadding = this.MIN_BUFFER;\n\t\t\t\t\tl = Math.min(endPadding, pts[pts.length - 1].distance(pts[pts.length - 2]) / 2);\n\t\t\t\t\tpt = pts[pts.length - 1].getTranslated(dir.scale(l));\n\t\t\t\t\tpts.splice(pts.length - 1, 0, pt);\n\t\t\t\t\tthis._moveSegment(pts, i, d);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tif (pts[i].y == pts[i + 1].y) {\n\t\t\t\t\tif (i > 0 && pts[i - 1].y == pts[i].y) {\n\t\t\t\t\t\tpts.splice(i + 1, 0, pts[i].clone());\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\t\t\t\t\tif (i < pts.length - 2 && pts[i + 1].y == pts[i + 2].y) pts.splice(i + 1, 0, pts[i + 1].clone());\n\t\t\t\t\tpts[i].y += d;\n\t\t\t\t\tpts[i + 1].y += d;\n\t\t\t\t} else {\n\t\t\t\t\tif (i > 0 && pts[i - 1].x == pts[i].x) {\n\t\t\t\t\t\tpts.splice(i + 1, 0, pts[i].clone());\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\t\t\t\t\tif (i < pts.length - 2 && pts[i + 1].x == pts[i + 2].x) pts.splice(i + 1, 0, pts[i + 1].clone());\n\t\t\t\t\tpts[i].x += d;\n\t\t\t\t\tpts[i + 1].x += d;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * This method will merge the redundant segments.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"points\",\n\t\t\tget: function get() {\n\t\t\t\tvar pos = Manhattan.route(this.start, this.end, this.startNormal, this.endNormal, this.MIN_BUFFER);\n\t\t\t\tif (this.autoRoute) {\n\t\t\t\t\tthis._mergeSegments(pos);\n\t\t\t\t\tvar boxes = [],\n\t\t\t\t\t    node,\n\t\t\t\t\t    startBox,\n\t\t\t\t\t    endBox;\n\t\t\t\t\tvar container = edge.source.getCommonAncestor(edge.target);\n\t\t\t\t\tvar childNodes = container.getDescendants();\n\t\t\t\t\tvar index = 0;\n\t\t\t\t\tfor (var i = 0; i < childNodes.length; i++) {\n\t\t\t\t\t\tnode = childNodes[i];\n\t\t\t\t\t\t// Do not include source or target ancestors in routing.\n\t\t\t\t\t\tif (node.excludeFromRouting(edge) || node.isAncestor(edge.source) || node.isAncestor(edge.target)) continue;\n\t\t\t\t\t\tif (node == edge.source) startBox = index;\n\t\t\t\t\t\tif (node == edge.target) endBox = index;\n\t\t\t\t\t\tboxes.push(node.getBounds(document));\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\t\t\t\t\tif (boxes.length > 1) this.autoRoute(pos, container.getBounds(document), boxes, startBox, endBox);\n\t\t\t\t}\n\t\t\t\tManhattan._mergeSegments(pos);\n\t\t\t\tif (this.randomNoise && pos.length > 3) {\n\t\t\t\t\tfor (var i = 1; i < pos.length - 2; i++) {\n\t\t\t\t\t\tvar range = this.randomNoise / this.step;\n\t\t\t\t\t\tvar randomNumber = Math.floor(Math.random() * range * 2 - range + 1) * this.step;\n\t\t\t\t\t\tthis._moveSegment(pos, i, randomNumber, 1, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn pos;\n\t\t\t}\n\t\n\t\t\t//New function for finding route\n\t\n\t\t}], [{\n\t\t\tkey: \"route\",\n\t\t\tvalue: function route(start, end, startNormal, endNormal, buffer) {\n\t\t\t\tvar startBuffer = new _Point2.default(start.x + startNormal.x * buffer, start.y + startNormal.y * buffer);\n\t\t\t\tvar endBuffer = new _Point2.default(end.x + endNormal.x * buffer, end.y + endNormal.y * buffer);\n\t\t\t\tvar startBufferNormal, endBufferNormal;\n\t\t\t\tvar pts;\n\t\t\t\tif (startNormal.x != 0) {\n\t\t\t\t\tif ((endBuffer.x - startBuffer.x) / startNormal.x > 0) {\n\t\t\t\t\t\tstartBufferNormal = startNormal;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstartBufferNormal = new _Point2.default(0, endBuffer.y >= startBuffer.y ? 1 : -1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ((endBuffer.y - startBuffer.y) / startNormal.y > 0) {\n\t\t\t\t\t\tstartBufferNormal = startNormal;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstartBufferNormal = new _Point2.default(endBuffer.x >= startBuffer.x ? 1 : -1, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (endNormal.x != 0) {\n\t\t\t\t\tif ((startBuffer.x - endBuffer.x) / endNormal.x > 0) {\n\t\t\t\t\t\tendBufferNormal = endNormal;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tendBufferNormal = new _Point2.default(0, startBuffer.y >= endBuffer.y ? 1 : -1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ((startBuffer.y - endBuffer.y) / endNormal.y > 0) {\n\t\t\t\t\t\tendBufferNormal = endNormal;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tendBufferNormal = new _Point2.default(startBuffer.x >= endBuffer.x ? 1 : -1, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (startBufferNormal.dotProduct(endBufferNormal) == 0) {\n\t\t\t\t\tvar middle = startBufferNormal.x == 0 ? new _Point2.default(startBuffer.x, endBuffer.y) : new _Point2.default(endBuffer.x, startBuffer.y);\n\t\t\t\t\tpts = [start, startBuffer, middle, endBuffer, end];\n\t\t\t\t} else if (startBufferNormal.dotProduct(endBufferNormal) < 0) {\n\t\t\t\t\tif (startBufferNormal.x == 0) {\n\t\t\t\t\t\tpts = [start, startBuffer, new _Point2.default(startBuffer.x, (start.y + end.y) / 2), new _Point2.default(endBuffer.x, (start.y + end.y) / 2), endBuffer, end];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpts = [start, startBuffer, new _Point2.default((start.x + end.x) / 2, startBuffer.y), new _Point2.default((start.x + end.x) / 2, endBuffer.y), endBuffer, end];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpts = [start, startBuffer, new _Point2.default(startBuffer.x + startBufferNormal.x * buffer, startBuffer.y + startBufferNormal.y * buffer), new _Point2.default(endBuffer.x + endBufferNormal.x * buffer, endBuffer.y + endBufferNormal.y * buffer), endBuffer, end];\n\t\t\t\t}\n\t\n\t\t\t\tvar prunePts = [];\n\t\t\t\tprunePts[0] = pts[0];\n\t\t\t\tfor (var i = 1; i < pts.length - 1; i++) {\n\t\t\t\t\tif (pts[i].x == pts[i - 1].x && pts[i].x == pts[i + 1].x || pts[i].y == pts[i - 1].y && pts[i].y == pts[i + 1].y) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tprunePts.push(pts[i]);\n\t\t\t\t}\n\t\t\t\tprunePts.push(pts[pts.length - 1]);\n\t\t\t\treturn prunePts;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_hasIntersection\",\n\t\t\tvalue: function _hasIntersection(pts, boxes) {\n\t\t\t\tfor (var i = 0; i < pts.length - 1; i++) {\n\t\t\t\t\tfor (var j = 0; j < boxes.length; j++) {\n\t\t\t\t\t\tif (boxes[j].detectIntersection(pts[i], pts[i + 1]) >= 0) return true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_getFirstIntersection\",\n\t\t\tvalue: function _getFirstIntersection(pts, i, boxes, startBox, endBox) {\n\t\t\t\tvar box,\n\t\t\t\t    side,\n\t\t\t\t    savedIndex = null,\n\t\t\t\t    savedSide = null;\n\t\t\t\tfor (var j = 0; j < boxes.length; j++) {\n\t\t\t\t\tif (i == 0 && j == startBox || i == pts.length - 2 && j == endBox) continue;\n\t\t\t\t\tbox = boxes[j];\n\t\t\t\t\tside = box.detectIntersection(pts[i], pts[i + 1]);\n\t\t\t\t\tif (side >= 0) {\n\t\t\t\t\t\tif (savedIndex == null) {\n\t\t\t\t\t\t\tsavedIndex = j;\n\t\t\t\t\t\t\tsavedSide = side;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (boxes[savedIndex].distance(pts[i]) > box.distance(pts[i])) {\n\t\t\t\t\t\t\t\tsavedIndex = j;\n\t\t\t\t\t\t\t\tsavedSide = side;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (savedIndex != null) return [savedIndex, savedSide];\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_getRouteDirection\",\n\t\t\tvalue: function _getRouteDirection(pt1, pt2) {\n\t\t\t\tif (pt1.x == pt2.x) {\n\t\t\t\t\tif (pt1.y < pt2.y) return _Point2.default.S;\n\t\t\t\t\treturn _Point2.default.N;\n\t\t\t\t} else if (pt1.y == pt2.y) {\n\t\t\t\t\tif (pt1.x < pt2.x) return _Point2.default.E;\n\t\t\t\t\treturn _Point2.default.W;\n\t\t\t\t} else if (pt1.x < pt2.x) {\n\t\t\t\t\tif (pt1.y < pt2.y) return _Point2.default.SE;\n\t\t\t\t\treturn _Point2.default.NE;\n\t\t\t\t} else {\n\t\t\t\t\tif (pt1.y < pt2.y) return _Point2.default.SW;\n\t\t\t\t\treturn _Point2.default.NW;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_mergeSegments\",\n\t\t\tvalue: function _mergeSegments(pts) {\n\t\t\t\tvar h1 = pts[pts.length - 1].y == pts[pts.length - 2].y;\n\t\t\t\tvar h2;\n\t\t\t\tfor (var i = pts.length - 2; i >= 1; i--) {\n\t\t\t\t\th2 = pts[i].y == pts[i - 1].y;\n\t\t\t\t\tif (h2 == h1 || pts[i].equals(pts[i - 1])) pts.splice(i, 1);else h1 = !h1;\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Manhattan;\n\t}(Link);\n\t\n\tlinkTypes['direct'] = DirectLink;\n\tlinkTypes['bezier'] = BezierLink;\n\tlinkTypes['entityRelations'] = EntityRelations;\n\tlinkTypes['manhattan'] = Manhattan;\n\t\n\texports.default = Link;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\t  * Bean - copyright (c) Jacob Thornton 2011-2012\n\t  * https://github.com/fat/bean\n\t  * MIT license\n\t  */\n\t(function (name, context, definition) {\n\t  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n\t  else if (true) !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\t  else context[name] = definition()\n\t})('bean', this, function (name, context) {\n\t  name    = name    || 'bean'\n\t  context = context || this\n\t\n\t  var win            = window\n\t    , old            = context[name]\n\t    , namespaceRegex = /[^\\.]*(?=\\..*)\\.|.*/\n\t    , nameRegex      = /\\..*/\n\t    , addEvent       = 'addEventListener'\n\t    , removeEvent    = 'removeEventListener'\n\t    , doc            = document || {}\n\t    , root           = doc.documentElement || {}\n\t    , W3C_MODEL      = root[addEvent]\n\t    , eventSupport   = W3C_MODEL ? addEvent : 'attachEvent'\n\t    , ONE            = {} // singleton for quick matching making add() do one()\n\t\n\t    , slice          = Array.prototype.slice\n\t    , str2arr        = function (s, d) { return s.split(d || ' ') }\n\t    , isString       = function (o) { return typeof o == 'string' }\n\t    , isFunction     = function (o) { return typeof o == 'function' }\n\t\n\t      // events that we consider to be 'native', anything not in this list will\n\t      // be treated as a custom event\n\t    , standardNativeEvents =\n\t        'click dblclick mouseup mousedown contextmenu '                  + // mouse buttons\n\t        'mousewheel mousemultiwheel DOMMouseScroll '                     + // mouse wheel\n\t        'mouseover mouseout mousemove selectstart selectend '            + // mouse movement\n\t        'keydown keypress keyup '                                        + // keyboard\n\t        'orientationchange '                                             + // mobile\n\t        'focus blur change reset select submit '                         + // form elements\n\t        'load unload beforeunload resize move DOMContentLoaded '         + // window\n\t        'readystatechange message '                                      + // window\n\t        'error abort scroll '                                              // misc\n\t      // element.fireEvent('onXYZ'... is not forgiving if we try to fire an event\n\t      // that doesn't actually exist, so make sure we only do these on newer browsers\n\t    , w3cNativeEvents =\n\t        'show '                                                          + // mouse buttons\n\t        'input invalid '                                                 + // form elements\n\t        'touchstart touchmove touchend touchcancel '                     + // touch\n\t        'gesturestart gesturechange gestureend '                         + // gesture\n\t        'textinput '                                                     + // TextEvent\n\t        'readystatechange pageshow pagehide popstate '                   + // window\n\t        'hashchange offline online '                                     + // window\n\t        'afterprint beforeprint '                                        + // printing\n\t        'dragstart dragenter dragover dragleave drag drop dragend '      + // dnd\n\t        'loadstart progress suspend emptied stalled loadmetadata '       + // media\n\t        'loadeddata canplay canplaythrough playing waiting seeking '     + // media\n\t        'seeked ended durationchange timeupdate play pause ratechange '  + // media\n\t        'volumechange cuechange '                                        + // media\n\t        'checking noupdate downloading cached updateready obsolete '       // appcache\n\t\n\t      // convert to a hash for quick lookups\n\t    , nativeEvents = (function (hash, events, i) {\n\t        for (i = 0; i < events.length; i++) events[i] && (hash[events[i]] = 1)\n\t        return hash\n\t      }({}, str2arr(standardNativeEvents + (W3C_MODEL ? w3cNativeEvents : ''))))\n\t\n\t      // custom events are events that we *fake*, they are not provided natively but\n\t      // we can use native events to generate them\n\t    , customEvents = (function () {\n\t        var isAncestor = 'compareDocumentPosition' in root\n\t              ? function (element, container) {\n\t                  return container.compareDocumentPosition && (container.compareDocumentPosition(element) & 16) === 16\n\t                }\n\t              : 'contains' in root\n\t                ? function (element, container) {\n\t                    container = container.nodeType === 9 || container === window ? root : container\n\t                    return container !== element && container.contains(element)\n\t                  }\n\t                : function (element, container) {\n\t                    while (element = element.parentNode) if (element === container) return 1\n\t                    return 0\n\t                  }\n\t          , check = function (event) {\n\t              var related = event.relatedTarget\n\t              return !related\n\t                ? related == null\n\t                : (related !== this && related.prefix !== 'xul' && !/document/.test(this.toString())\n\t                    && !isAncestor(related, this))\n\t            }\n\t\n\t        return {\n\t            mouseenter: { base: 'mouseover', condition: check }\n\t          , mouseleave: { base: 'mouseout', condition: check }\n\t          , mousewheel: { base: /Firefox/.test(navigator.userAgent) ? 'DOMMouseScroll' : 'mousewheel' }\n\t        }\n\t      }())\n\t\n\t      // we provide a consistent Event object across browsers by taking the actual DOM\n\t      // event object and generating a new one from its properties.\n\t    , Event = (function () {\n\t            // a whitelist of properties (for different event types) tells us what to check for and copy\n\t        var commonProps  = str2arr('altKey attrChange attrName bubbles cancelable ctrlKey currentTarget ' +\n\t              'detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey '  +\n\t              'srcElement target timeStamp type view which propertyName')\n\t          , mouseProps   = commonProps.concat(str2arr('button buttons clientX clientY dataTransfer '      +\n\t              'fromElement offsetX offsetY pageX pageY screenX screenY toElement'))\n\t          , mouseWheelProps = mouseProps.concat(str2arr('wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ ' +\n\t              'axis')) // 'axis' is FF specific\n\t          , keyProps     = commonProps.concat(str2arr('char charCode key keyCode keyIdentifier '          +\n\t              'keyLocation location'))\n\t          , textProps    = commonProps.concat(str2arr('data'))\n\t          , touchProps   = commonProps.concat(str2arr('touches targetTouches changedTouches scale rotation'))\n\t          , messageProps = commonProps.concat(str2arr('data origin source'))\n\t          , stateProps   = commonProps.concat(str2arr('state'))\n\t          , overOutRegex = /over|out/\n\t            // some event types need special handling and some need special properties, do that all here\n\t          , typeFixers   = [\n\t                { // key events\n\t                    reg: /key/i\n\t                  , fix: function (event, newEvent) {\n\t                      newEvent.keyCode = event.keyCode || event.which\n\t                      return keyProps\n\t                    }\n\t                }\n\t              , { // mouse events\n\t                    reg: /click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i\n\t                  , fix: function (event, newEvent, type) {\n\t                      newEvent.rightClick = event.which === 3 || event.button === 2\n\t                      newEvent.pos = { x: 0, y: 0 }\n\t                      if (event.pageX || event.pageY) {\n\t                        newEvent.clientX = event.pageX\n\t                        newEvent.clientY = event.pageY\n\t                      } else if (event.clientX || event.clientY) {\n\t                        newEvent.clientX = event.clientX + doc.body.scrollLeft + root.scrollLeft\n\t                        newEvent.clientY = event.clientY + doc.body.scrollTop + root.scrollTop\n\t                      }\n\t                      if (overOutRegex.test(type)) {\n\t                        newEvent.relatedTarget = event.relatedTarget\n\t                          || event[(type == 'mouseover' ? 'from' : 'to') + 'Element']\n\t                      }\n\t                      return mouseProps\n\t                    }\n\t                }\n\t              , { // mouse wheel events\n\t                    reg: /mouse.*(wheel|scroll)/i\n\t                  , fix: function () { return mouseWheelProps }\n\t                }\n\t              , { // TextEvent\n\t                    reg: /^text/i\n\t                  , fix: function () { return textProps }\n\t                }\n\t              , { // touch and gesture events\n\t                    reg: /^touch|^gesture/i\n\t                  , fix: function () { return touchProps }\n\t                }\n\t              , { // message events\n\t                    reg: /^message$/i\n\t                  , fix: function () { return messageProps }\n\t                }\n\t              , { // popstate events\n\t                    reg: /^popstate$/i\n\t                  , fix: function () { return stateProps }\n\t                }\n\t              , { // everything else\n\t                    reg: /.*/\n\t                  , fix: function () { return commonProps }\n\t                }\n\t            ]\n\t          , typeFixerMap = {} // used to map event types to fixer functions (above), a basic cache mechanism\n\t\n\t          , Event = function (event, element, isNative) {\n\t              if (!arguments.length) return\n\t              event = event || ((element.ownerDocument || element.document || element).parentWindow || win).event\n\t              this.originalEvent = event\n\t              this.isNative       = isNative\n\t              this.isBean         = true\n\t\n\t              if (!event) return\n\t\n\t              var type   = event.type\n\t                , target = event.target || event.srcElement\n\t                , i, l, p, props, fixer\n\t\n\t              this.target = target && target.nodeType === 3 ? target.parentNode : target\n\t\n\t              if (isNative) { // we only need basic augmentation on custom events, the rest expensive & pointless\n\t                fixer = typeFixerMap[type]\n\t                if (!fixer) { // haven't encountered this event type before, map a fixer function for it\n\t                  for (i = 0, l = typeFixers.length; i < l; i++) {\n\t                    if (typeFixers[i].reg.test(type)) { // guaranteed to match at least one, last is .*\n\t                      typeFixerMap[type] = fixer = typeFixers[i].fix\n\t                      break\n\t                    }\n\t                  }\n\t                }\n\t\n\t                props = fixer(event, this, type)\n\t                for (i = props.length; i--;) {\n\t                  if (!((p = props[i]) in this) && p in event) this[p] = event[p]\n\t                }\n\t              }\n\t            }\n\t\n\t        // preventDefault() and stopPropagation() are a consistent interface to those functions\n\t        // on the DOM, stop() is an alias for both of them together\n\t        Event.prototype.preventDefault = function () {\n\t          if (this.originalEvent.preventDefault) this.originalEvent.preventDefault()\n\t          else this.originalEvent.returnValue = false\n\t        }\n\t        Event.prototype.stopPropagation = function () {\n\t          if (this.originalEvent.stopPropagation) this.originalEvent.stopPropagation()\n\t          else this.originalEvent.cancelBubble = true\n\t        }\n\t        Event.prototype.stop = function () {\n\t          this.preventDefault()\n\t          this.stopPropagation()\n\t          this.stopped = true\n\t        }\n\t        // stopImmediatePropagation() has to be handled internally because we manage the event list for\n\t        // each element\n\t        // note that originalElement may be a Bean#Event object in some situations\n\t        Event.prototype.stopImmediatePropagation = function () {\n\t          if (this.originalEvent.stopImmediatePropagation) this.originalEvent.stopImmediatePropagation()\n\t          this.isImmediatePropagationStopped = function () { return true }\n\t        }\n\t        Event.prototype.isImmediatePropagationStopped = function () {\n\t          return this.originalEvent.isImmediatePropagationStopped && this.originalEvent.isImmediatePropagationStopped()\n\t        }\n\t        Event.prototype.clone = function (currentTarget) {\n\t          //TODO: this is ripe for optimisation, new events are *expensive*\n\t          // improving this will speed up delegated events\n\t          var ne = new Event(this, this.element, this.isNative)\n\t          ne.currentTarget = currentTarget\n\t          return ne\n\t        }\n\t\n\t        return Event\n\t      }())\n\t\n\t      // if we're in old IE we can't do onpropertychange on doc or win so we use doc.documentElement for both\n\t    , targetElement = function (element, isNative) {\n\t        return !W3C_MODEL && !isNative && (element === doc || element === win) ? root : element\n\t      }\n\t\n\t      /**\n\t        * Bean maintains an internal registry for event listeners. We don't touch elements, objects\n\t        * or functions to identify them, instead we store everything in the registry.\n\t        * Each event listener has a RegEntry object, we have one 'registry' for the whole instance.\n\t        */\n\t    , RegEntry = (function () {\n\t        // each handler is wrapped so we can handle delegation and custom events\n\t        var wrappedHandler = function (element, fn, condition, args) {\n\t            var call = function (event, eargs) {\n\t                  return fn.apply(element, args ? slice.call(eargs, event ? 0 : 1).concat(args) : eargs)\n\t                }\n\t              , findTarget = function (event, eventElement) {\n\t                  return fn.__beanDel ? fn.__beanDel.ft(event.target, element) : eventElement\n\t                }\n\t              , handler = condition\n\t                  ? function (event) {\n\t                      var target = findTarget(event, this) // deleated event\n\t                      if (condition.apply(target, arguments)) {\n\t                        if (event) event.currentTarget = target\n\t                        return call(event, arguments)\n\t                      }\n\t                    }\n\t                  : function (event) {\n\t                      if (fn.__beanDel) event = event.clone(findTarget(event)) // delegated event, fix the fix\n\t                      return call(event, arguments)\n\t                    }\n\t            handler.__beanDel = fn.__beanDel\n\t            return handler\n\t          }\n\t\n\t        , RegEntry = function (element, type, handler, original, namespaces, args, root) {\n\t            var customType     = customEvents[type]\n\t              , isNative\n\t\n\t            if (type == 'unload') {\n\t              // self clean-up\n\t              handler = once(removeListener, element, type, handler, original)\n\t            }\n\t\n\t            if (customType) {\n\t              if (customType.condition) {\n\t                handler = wrappedHandler(element, handler, customType.condition, args)\n\t              }\n\t              type = customType.base || type\n\t            }\n\t\n\t            this.isNative      = isNative = nativeEvents[type] && !!element[eventSupport]\n\t            this.customType    = !W3C_MODEL && !isNative && type\n\t            this.element       = element\n\t            this.type          = type\n\t            this.original      = original\n\t            this.namespaces    = namespaces\n\t            this.eventType     = W3C_MODEL || isNative ? type : 'propertychange'\n\t            this.target        = targetElement(element, isNative)\n\t            this[eventSupport] = !!this.target[eventSupport]\n\t            this.root          = root\n\t            this.handler       = wrappedHandler(element, handler, null, args)\n\t          }\n\t\n\t        // given a list of namespaces, is our entry in any of them?\n\t        RegEntry.prototype.inNamespaces = function (checkNamespaces) {\n\t          var i, j, c = 0\n\t          if (!checkNamespaces) return true\n\t          if (!this.namespaces) return false\n\t          for (i = checkNamespaces.length; i--;) {\n\t            for (j = this.namespaces.length; j--;) {\n\t              if (checkNamespaces[i] == this.namespaces[j]) c++\n\t            }\n\t          }\n\t          return checkNamespaces.length === c\n\t        }\n\t\n\t        // match by element, original fn (opt), handler fn (opt)\n\t        RegEntry.prototype.matches = function (checkElement, checkOriginal, checkHandler) {\n\t          return this.element === checkElement &&\n\t            (!checkOriginal || this.original === checkOriginal) &&\n\t            (!checkHandler || this.handler === checkHandler)\n\t        }\n\t\n\t        return RegEntry\n\t      }())\n\t\n\t    , registry = (function () {\n\t        // our map stores arrays by event type, just because it's better than storing\n\t        // everything in a single array.\n\t        // uses '$' as a prefix for the keys for safety and 'r' as a special prefix for\n\t        // rootListeners so we can look them up fast\n\t        var map = {}\n\t\n\t          // generic functional search of our registry for matching listeners,\n\t          // `fn` returns false to break out of the loop\n\t          , forAll = function (element, type, original, handler, root, fn) {\n\t              var pfx = root ? 'r' : '$'\n\t              if (!type || type == '*') {\n\t                // search the whole registry\n\t                for (var t in map) {\n\t                  if (t.charAt(0) == pfx) {\n\t                    forAll(element, t.substr(1), original, handler, root, fn)\n\t                  }\n\t                }\n\t              } else {\n\t                var i = 0, l, list = map[pfx + type], all = element == '*'\n\t                if (!list) return\n\t                for (l = list.length; i < l; i++) {\n\t                  if ((all || list[i].matches(element, original, handler)) && !fn(list[i], list, i, type)) return\n\t                }\n\t              }\n\t            }\n\t\n\t          , has = function (element, type, original, root) {\n\t              // we're not using forAll here simply because it's a bit slower and this\n\t              // needs to be fast\n\t              var i, list = map[(root ? 'r' : '$') + type]\n\t              if (list) {\n\t                for (i = list.length; i--;) {\n\t                  if (!list[i].root && list[i].matches(element, original, null)) return true\n\t                }\n\t              }\n\t              return false\n\t            }\n\t\n\t          , get = function (element, type, original, root) {\n\t              var entries = []\n\t              forAll(element, type, original, null, root, function (entry) {\n\t                return entries.push(entry)\n\t              })\n\t              return entries\n\t            }\n\t\n\t          , put = function (entry) {\n\t              var has = !entry.root && !this.has(entry.element, entry.type, null, false)\n\t                , key = (entry.root ? 'r' : '$') + entry.type\n\t              ;(map[key] || (map[key] = [])).push(entry)\n\t              return has\n\t            }\n\t\n\t          , del = function (entry) {\n\t              forAll(entry.element, entry.type, null, entry.handler, entry.root, function (entry, list, i) {\n\t                list.splice(i, 1)\n\t                entry.removed = true\n\t                if (list.length === 0) delete map[(entry.root ? 'r' : '$') + entry.type]\n\t                return false\n\t              })\n\t            }\n\t\n\t            // dump all entries, used for onunload\n\t          , entries = function () {\n\t              var t, entries = []\n\t              for (t in map) {\n\t                if (t.charAt(0) == '$') entries = entries.concat(map[t])\n\t              }\n\t              return entries\n\t            }\n\t\n\t        return { has: has, get: get, put: put, del: del, entries: entries }\n\t      }())\n\t\n\t      // we need a selector engine for delegated events, use querySelectorAll if it exists\n\t      // but for older browsers we need Qwery, Sizzle or similar\n\t    , selectorEngine\n\t    , setSelectorEngine = function (e) {\n\t        if (!arguments.length) {\n\t          selectorEngine = doc.querySelectorAll\n\t            ? function (s, r) {\n\t                return r.querySelectorAll(s)\n\t              }\n\t            : function () {\n\t                throw new Error('Bean: No selector engine installed') // eeek\n\t              }\n\t        } else {\n\t          selectorEngine = e\n\t        }\n\t      }\n\t\n\t      // we attach this listener to each DOM event that we need to listen to, only once\n\t      // per event type per DOM element\n\t    , rootListener = function (event, type) {\n\t        if (!W3C_MODEL && type && event && event.propertyName != '_on' + type) return\n\t\n\t        var listeners = registry.get(this, type || event.type, null, false)\n\t          , l = listeners.length\n\t          , i = 0\n\t\n\t        event = new Event(event, this, true)\n\t        if (type) event.type = type\n\t\n\t        // iterate through all handlers registered for this type, calling them unless they have\n\t        // been removed by a previous handler or stopImmediatePropagation() has been called\n\t        for (; i < l && !event.isImmediatePropagationStopped(); i++) {\n\t          if (!listeners[i].removed) listeners[i].handler.call(this, event)\n\t        }\n\t      }\n\t\n\t      // add and remove listeners to DOM elements\n\t    , listener = W3C_MODEL\n\t        ? function (element, type, add) {\n\t            // new browsers\n\t            element[add ? addEvent : removeEvent](type, rootListener, false)\n\t          }\n\t        : function (element, type, add, custom) {\n\t            // IE8 and below, use attachEvent/detachEvent and we have to piggy-back propertychange events\n\t            // to simulate event bubbling etc.\n\t            var entry\n\t            if (add) {\n\t              registry.put(entry = new RegEntry(\n\t                  element\n\t                , custom || type\n\t                , function (event) { // handler\n\t                    rootListener.call(element, event, custom)\n\t                  }\n\t                , rootListener\n\t                , null\n\t                , null\n\t                , true // is root\n\t              ))\n\t              if (custom && element['_on' + custom] == null) element['_on' + custom] = 0\n\t              entry.target.attachEvent('on' + entry.eventType, entry.handler)\n\t            } else {\n\t              entry = registry.get(element, custom || type, rootListener, true)[0]\n\t              if (entry) {\n\t                entry.target.detachEvent('on' + entry.eventType, entry.handler)\n\t                registry.del(entry)\n\t              }\n\t            }\n\t          }\n\t\n\t    , once = function (rm, element, type, fn, originalFn) {\n\t        // wrap the handler in a handler that does a remove as well\n\t        return function () {\n\t          fn.apply(this, arguments)\n\t          rm(element, type, originalFn)\n\t        }\n\t      }\n\t\n\t    , removeListener = function (element, orgType, handler, namespaces) {\n\t        var type     = orgType && orgType.replace(nameRegex, '')\n\t          , handlers = registry.get(element, type, null, false)\n\t          , removed  = {}\n\t          , i, l\n\t\n\t        for (i = 0, l = handlers.length; i < l; i++) {\n\t          if ((!handler || handlers[i].original === handler) && handlers[i].inNamespaces(namespaces)) {\n\t            // TODO: this is problematic, we have a registry.get() and registry.del() that\n\t            // both do registry searches so we waste cycles doing this. Needs to be rolled into\n\t            // a single registry.forAll(fn) that removes while finding, but the catch is that\n\t            // we'll be splicing the arrays that we're iterating over. Needs extra tests to\n\t            // make sure we don't screw it up. @rvagg\n\t            registry.del(handlers[i])\n\t            if (!removed[handlers[i].eventType] && handlers[i][eventSupport])\n\t              removed[handlers[i].eventType] = { t: handlers[i].eventType, c: handlers[i].type }\n\t          }\n\t        }\n\t        // check each type/element for removed listeners and remove the rootListener where it's no longer needed\n\t        for (i in removed) {\n\t          if (!registry.has(element, removed[i].t, null, false)) {\n\t            // last listener of this type, remove the rootListener\n\t            listener(element, removed[i].t, false, removed[i].c)\n\t          }\n\t        }\n\t      }\n\t\n\t      // set up a delegate helper using the given selector, wrap the handler function\n\t    , delegate = function (selector, fn) {\n\t        //TODO: findTarget (therefore $) is called twice, once for match and once for\n\t        // setting e.currentTarget, fix this so it's only needed once\n\t        var findTarget = function (target, root) {\n\t              var i, array = isString(selector) ? selectorEngine(selector, root) : selector\n\t              for (; target && target !== root; target = target.parentNode) {\n\t                for (i = array.length; i--;) {\n\t                  if (array[i] === target) return target\n\t                }\n\t              }\n\t            }\n\t          , handler = function (e) {\n\t              var match = findTarget(e.target, this)\n\t              if (match) fn.apply(match, arguments)\n\t            }\n\t\n\t        // __beanDel isn't pleasant but it's a private function, not exposed outside of Bean\n\t        handler.__beanDel = {\n\t            ft       : findTarget // attach it here for customEvents to use too\n\t          , selector : selector\n\t        }\n\t        return handler\n\t      }\n\t\n\t    , fireListener = W3C_MODEL ? function (isNative, type, element) {\n\t        // modern browsers, do a proper dispatchEvent()\n\t        var evt = doc.createEvent(isNative ? 'HTMLEvents' : 'UIEvents')\n\t        evt[isNative ? 'initEvent' : 'initUIEvent'](type, true, true, win, 1)\n\t        element.dispatchEvent(evt)\n\t      } : function (isNative, type, element) {\n\t        // old browser use onpropertychange, just increment a custom property to trigger the event\n\t        element = targetElement(element, isNative)\n\t        isNative ? element.fireEvent('on' + type, doc.createEventObject()) : element['_on' + type]++\n\t      }\n\t\n\t      /**\n\t        * Public API: off(), on(), add(), (remove()), one(), fire(), clone()\n\t        */\n\t\n\t      /**\n\t        * off(element[, eventType(s)[, handler ]])\n\t        */\n\t    , off = function (element, typeSpec, fn) {\n\t        var isTypeStr = isString(typeSpec)\n\t          , k, type, namespaces, i\n\t\n\t        if (isTypeStr && typeSpec.indexOf(' ') > 0) {\n\t          // off(el, 't1 t2 t3', fn) or off(el, 't1 t2 t3')\n\t          typeSpec = str2arr(typeSpec)\n\t          for (i = typeSpec.length; i--;)\n\t            off(element, typeSpec[i], fn)\n\t          return element\n\t        }\n\t\n\t        type = isTypeStr && typeSpec.replace(nameRegex, '')\n\t        if (type && customEvents[type]) type = customEvents[type].base\n\t\n\t        if (!typeSpec || isTypeStr) {\n\t          // off(el) or off(el, t1.ns) or off(el, .ns) or off(el, .ns1.ns2.ns3)\n\t          if (namespaces = isTypeStr && typeSpec.replace(namespaceRegex, '')) namespaces = str2arr(namespaces, '.')\n\t          removeListener(element, type, fn, namespaces)\n\t        } else if (isFunction(typeSpec)) {\n\t          // off(el, fn)\n\t          removeListener(element, null, typeSpec)\n\t        } else {\n\t          // off(el, { t1: fn1, t2, fn2 })\n\t          for (k in typeSpec) {\n\t            if (typeSpec.hasOwnProperty(k)) off(element, k, typeSpec[k])\n\t          }\n\t        }\n\t\n\t        return element\n\t      }\n\t\n\t      /**\n\t        * on(element, eventType(s)[, selector], handler[, args ])\n\t        */\n\t    , on = function(element, events, selector, fn) {\n\t        var originalFn, type, types, i, args, entry, first\n\t\n\t        //TODO: the undefined check means you can't pass an 'args' argument, fix this perhaps?\n\t        if (selector === undefined && typeof events == 'object') {\n\t          //TODO: this can't handle delegated events\n\t          for (type in events) {\n\t            if (events.hasOwnProperty(type)) {\n\t              on.call(this, element, type, events[type])\n\t            }\n\t          }\n\t          return\n\t        }\n\t\n\t        if (!isFunction(selector)) {\n\t          // delegated event\n\t          originalFn = fn\n\t          args       = slice.call(arguments, 4)\n\t          fn         = delegate(selector, originalFn, selectorEngine)\n\t        } else {\n\t          args       = slice.call(arguments, 3)\n\t          fn         = originalFn = selector\n\t        }\n\t\n\t        types = str2arr(events)\n\t\n\t        // special case for one(), wrap in a self-removing handler\n\t        if (this === ONE) {\n\t          fn = once(off, element, events, fn, originalFn)\n\t        }\n\t\n\t        for (i = types.length; i--;) {\n\t          // add new handler to the registry and check if it's the first for this element/type\n\t          first = registry.put(entry = new RegEntry(\n\t              element\n\t            , types[i].replace(nameRegex, '') // event type\n\t            , fn\n\t            , originalFn\n\t            , str2arr(types[i].replace(namespaceRegex, ''), '.') // namespaces\n\t            , args\n\t            , false // not root\n\t          ))\n\t          if (entry[eventSupport] && first) {\n\t            // first event of this type on this element, add root listener\n\t            listener(element, entry.eventType, true, entry.customType)\n\t          }\n\t        }\n\t\n\t        return element\n\t      }\n\t\n\t      /**\n\t        * add(element[, selector], eventType(s), handler[, args ])\n\t        *\n\t        * Deprecated: kept (for now) for backward-compatibility\n\t        */\n\t    , add = function (element, events, fn, delfn) {\n\t        return on.apply(\n\t            null\n\t          , !isString(fn)\n\t              ? slice.call(arguments)\n\t              : [ element, fn, events, delfn ].concat(arguments.length > 3 ? slice.call(arguments, 5) : [])\n\t        )\n\t      }\n\t\n\t      /**\n\t        * one(element, eventType(s)[, selector], handler[, args ])\n\t        */\n\t    , one = function () {\n\t        return on.apply(ONE, arguments)\n\t      }\n\t\n\t      /**\n\t        * fire(element, eventType(s)[, args ])\n\t        *\n\t        * The optional 'args' argument must be an array, if no 'args' argument is provided\n\t        * then we can use the browser's DOM event system, otherwise we trigger handlers manually\n\t        */\n\t    , fire = function (element, type, args) {\n\t        var types = str2arr(type)\n\t          , i, j, l, names, handlers\n\t\n\t        for (i = types.length; i--;) {\n\t          type = types[i].replace(nameRegex, '')\n\t          if (names = types[i].replace(namespaceRegex, '')) names = str2arr(names, '.')\n\t          if (!names && !args && element[eventSupport]) {\n\t            fireListener(nativeEvents[type], type, element)\n\t          } else {\n\t            // non-native event, either because of a namespace, arguments or a non DOM element\n\t            // iterate over all listeners and manually 'fire'\n\t            handlers = registry.get(element, type, null, false)\n\t            args = [false].concat(args)\n\t            for (j = 0, l = handlers.length; j < l; j++) {\n\t              if (handlers[j].inNamespaces(names)) {\n\t                handlers[j].handler.apply(element, args)\n\t              }\n\t            }\n\t          }\n\t        }\n\t        return element\n\t      }\n\t\n\t      /**\n\t        * clone(dstElement, srcElement[, eventType ])\n\t        *\n\t        * TODO: perhaps for consistency we should allow the same flexibility in type specifiers?\n\t        */\n\t    , clone = function (element, from, type) {\n\t        var handlers = registry.get(from, type, null, false)\n\t          , l = handlers.length\n\t          , i = 0\n\t          , args, beanDel\n\t\n\t        for (; i < l; i++) {\n\t          if (handlers[i].original) {\n\t            args = [ element, handlers[i].type ]\n\t            if (beanDel = handlers[i].handler.__beanDel) args.push(beanDel.selector)\n\t            args.push(handlers[i].original)\n\t            on.apply(null, args)\n\t          }\n\t        }\n\t        return element\n\t      }\n\t\n\t    , bean = {\n\t          'on'                : on\n\t        , 'add'               : add\n\t        , 'one'               : one\n\t        , 'off'               : off\n\t        , 'remove'            : off\n\t        , 'clone'             : clone\n\t        , 'fire'              : fire\n\t        , 'Event'             : Event\n\t        , 'setSelectorEngine' : setSelectorEngine\n\t        , 'noConflict'        : function () {\n\t            context[name] = old\n\t            return this\n\t          }\n\t      }\n\t\n\t  // for IE, clean up on unload to avoid leaks\n\t  if (win.attachEvent) {\n\t    var cleanup = function () {\n\t      var i, entries = registry.entries()\n\t      for (i in entries) {\n\t        if (entries[i].type && entries[i].type !== 'unload') off(entries[i].element, entries[i].type)\n\t      }\n\t      win.detachEvent('onunload', cleanup)\n\t      win.CollectGarbage && win.CollectGarbage()\n\t    }\n\t    win.attachEvent('onunload', cleanup)\n\t  }\n\t\n\t  // initialize selector engine to internal default (qSA or throw Error)\n\t  setSelectorEngine()\n\t\n\t  return bean\n\t});\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _bean = __webpack_require__(12);\n\t\n\tvar _bean2 = _interopRequireDefault(_bean);\n\t\n\tvar _KeyUtils = __webpack_require__(14);\n\t\n\tvar KeyUtils = _interopRequireWildcard(_KeyUtils);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _DomUtils = __webpack_require__(7);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar DEFAULTS = {\n\t\tstopPropagation: false\n\t};\n\t\n\tvar EventDispatcher = function () {\n\t\t/**\n\t  * Constructor\n\t  * @param root the root element that the manager will listen to.\n\t  * @param zoomScale\n\t  * @param config the configuraton for the event dispatcher.\n\t  */\n\t\n\t\tfunction EventDispatcher(root) {\n\t\t\tvar zoomScale = arguments.length <= 1 || arguments[1] === undefined ? [0, Infinity] : arguments[1];\n\t\t\tvar config = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\t\n\t\t\t_classCallCheck(this, EventDispatcher);\n\t\n\t\t\tthis.root = root;\n\t\t\tthis.rootNS = root.getAttribute('ns') || 'root';\n\t\t\tthis.zoomScale = zoomScale;\n\t\t\t_lodash2.default.assign(this, DEFAULTS, config);\n\t\t\tthis.scale = 1.0;\n\t\t\tthis.listeners = {};\n\t\t\tthis.dragging = false;\n\t\t\tthis.handler = _lodash2.default.bind(this.handleEvent, this);\n\t\t\tthis.started = false;\n\t\n\t\t\t// Simulate mouseenter/mouseleave events\n\t\t\tthis.enterStack = [];\n\t\t}\n\t\n\t\t/**\n\t  * Start listening for events.\n\t  */\n\t\n\t\n\t\t_createClass(EventDispatcher, [{\n\t\t\tkey: \"start\",\n\t\t\tvalue: function start() {\n\t\t\t\tif (this.started) return;\n\t\t\t\t_bean2.default.on(this.root, 'mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel', this.handler);\n\t\t\t\tthis.startKeys();\n\t\t\t\tthis.started = true;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Stop listening for events.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"stop\",\n\t\t\tvalue: function stop() {\n\t\t\t\tif (!this.started) return;\n\t\t\t\t_bean2.default.off(this.root, 'mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel', this.handler);\n\t\t\t\tthis.stopKeys();\n\t\t\t\tthis.started = false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"startKeys\",\n\t\t\tvalue: function startKeys() {\n\t\t\t\t_bean2.default.on(document, 'keydown keyup', this.handler);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"stopKeys\",\n\t\t\tvalue: function stopKeys() {\n\t\t\t\t_bean2.default.off(document, 'keydown keyup', this.handler);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"zoomIn\",\n\t\t\tvalue: function zoomIn() {\n\t\t\t\tthis.scale *= 1.25;\n\t\t\t\tthis.scale = Math.max(Math.min(this.zoomScale[1], this.scale), this.zoomScale[0]);\n\t\t\t\treturn this.scale;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"zoomOut\",\n\t\t\tvalue: function zoomOut() {\n\t\t\t\tthis.scale *= 0.8;\n\t\t\t\tthis.scale = Math.max(Math.min(this.zoomScale[1], this.scale), this.zoomScale[0]);\n\t\t\t\treturn this.scale;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getEventInfo\",\n\t\t\tvalue: function getEventInfo(event) {\n\t\t\t\tvar target = event.target;\n\t\t\t\tvar buf = new _StringBuffer2.default(),\n\t\t\t\t    ns = void 0,\n\t\t\t\t    stack = [],\n\t\t\t\t    isRoot = false;\n\t\t\t\twhile (!isRoot && target && target != document) {\n\t\t\t\t\tns = target.getAttribute('ns');\n\t\t\t\t\tif (ns) {\n\t\t\t\t\t\tisRoot = _lodash2.default.startsWith(ns, \"root.\");\n\t\t\t\t\t\tif (isRoot) {\n\t\t\t\t\t\t\tns = ns.substring(5);\n\t\t\t\t\t\t\tevent.rootTarget = target;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!event.nsTarget) event.nsTarget = target;\n\t\t\t\t\t\tstack.splice(0, 0, target);\n\t\t\t\t\t\tbuf.prepend(ns);\n\t\t\t\t\t}\n\t\t\t\t\ttarget = target.parentNode;\n\t\t\t\t}\n\t\t\t\tif (!isRoot) event.rootTarget = event.nsTarget;\n\t\n\t\t\t\t// target stack is a stack of all the ns targets up to the one with the data binding.\n\t\t\t\tevent.targetStack = stack;\n\t\t\t\tns = buf.toString('.');\n\t\t\t\tif (ns == '') ns = this.rootNS;\n\t\t\t\treturn { data: event.rootTarget, ns: ns };\n\t\t\t}\n\t\n\t\t\t/**\n\t   * The main event handler method, it processes event and generate relevant events to dispatch.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"handleEvent\",\n\t\t\tvalue: function handleEvent(event) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar type = event.type;\n\t\n\t\t\t\t// Do not dispatch other events if we are dragging.\n\t\t\t\tif (this.dragging || _DomUtils2.default.eventFromInput(event)) return;\n\t\n\t\t\t\tvar data = void 0,\n\t\t\t\t    ns = void 0,\n\t\t\t\t    pos = this.getPosition(event),\n\t\t\t\t    info = void 0,\n\t\t\t\t    isKeyEvent = type == 'keydown' || type == 'keyup';\n\t\t\t\tif (isKeyEvent) {\n\t\t\t\t\tdata = this.root;\n\t\t\t\t\tns = KeyUtils.getKeyEvent(event);\n\t\t\t\t} else {\n\t\t\t\t\tinfo = this.getEventInfo(event);\n\t\t\t\t\tif (!info) return;\n\t\t\t\t\tdata = info.data;\n\t\t\t\t\tns = info.ns;\n\t\t\t\t}\n\t\n\t\t\t\t//Utils.log('EventDispatcher', \"handleEvent - \" + type + ';ns=' + ns);\n\t\n\t\t\t\tif (type == 'mousewheel') {\n\t\t\t\t\tthis.scale *= Math.pow(2, event.wheelDelta * 0.002);\n\t\t\t\t\tthis.scale = Math.max(Math.min(this.zoomScale[1], this.scale), this.zoomScale[0]);\n\t\t\t\t\tevent.scale = this.scale;\n\t\t\t\t\ttype = 'zoom';\n\t\t\t\t}\n\t\n\t\t\t\t// See if we should create drag events\n\t\t\t\tif (type == 'mousedown' && event.button == 0 /*only drag on left click*/) {\n\t\t\t\t\t\t(function () {\n\t\t\t\t\t\t\t// Create drag object.\n\t\t\t\t\t\t\tvar dragObject = { data: data, pos: ns == 'root' ? EventDispatcher.mouse(_this.root, event) : pos };\n\t\t\t\t\t\t\t_this.dragging = false;\n\t\t\t\t\t\t\t// Start listening for mouse move.\n\t\t\t\t\t\t\tvar dragPos = void 0;\n\t\n\t\t\t\t\t\t\tvar mousemove = function mousemove(event) {\n\t\t\t\t\t\t\t\tvar currentPos = _this.getPosition(event);\n\t\t\t\t\t\t\t\tif (!_this.dragging) {\n\t\t\t\t\t\t\t\t\t// check if the mouse has moved. IE always fire mousemove after mousedown even if the mouse hasn't moved yet.\n\t\t\t\t\t\t\t\t\tif (dragObject.pos[0] == currentPos[0] && dragObject.pos[1] == currentPos[1]) return;\n\t\n\t\t\t\t\t\t\t\t\t// start dragging\n\t\t\t\t\t\t\t\t\t_this.dragging = true;\n\t\t\t\t\t\t\t\t\tevent.rootTarget = dragObject.data;\n\t\t\t\t\t\t\t\t\t_this.dispatch(event, 'dragstart', ns, dragObject.data, dragObject.pos);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (ns == \"root\") dragPos = EventDispatcher.mouse(_this.root, event);else dragPos = currentPos;\n\t\t\t\t\t\t\t\t_this.getEventInfo(event);\n\t\t\t\t\t\t\t\t_this.dispatch(event, 'drag', ns, dragObject.data, dragPos);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvar mouseup = function mouseup(event) {\n\t\t\t\t\t\t\t\tif (ns == \"root\") dragPos = EventDispatcher.mouse(_this.root, event);else dragPos = _this.getPosition(event);\n\t\n\t\t\t\t\t\t\t\tvar info = _this.getEventInfo(event);\n\t\t\t\t\t\t\t\tif (_this.dragging) {\n\t\t\t\t\t\t\t\t\t_this.dragging = false;\n\t\t\t\t\t\t\t\t\t_this.dispatch(event, 'dragend', ns, dragObject.data, dragPos);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t_this.dispatch(event, 'mouseup', ns, info.data, dragPos);\n\t\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\t\t_bean2.default.off(window, 'mousemove', mousemove);\n\t\t\t\t\t\t\t\t_bean2.default.off(window, 'mouseup', mouseup);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t_bean2.default.on(window, 'mousemove', mousemove);\n\t\t\t\t\t\t\t_bean2.default.on(window, 'mouseup', mouseup);\n\t\t\t\t\t\t})();\n\t\t\t\t\t}\n\t\n\t\t\t\tif (!isKeyEvent) this.simulateEnterLeave(event, type, ns, data, pos);\n\t\t\t\tthis.dispatch(event, type, ns, data, pos);\n\t\n\t\t\t\t// disable the default context menu\n\t\t\t\t//if (type == 'contextmenu')\n\t\t\t\t//\tevent.preventDefault();\n\t\t\t}\n\t\n\t\t\t/**\n\t   * try to simulate mouseenter/mouseleave events.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"simulateEnterLeave\",\n\t\t\tvalue: function simulateEnterLeave(event, type, ns, data, pos) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar last = void 0,\n\t\t\t\t    stack = void 0;\n\t\t\t\tvar clearEnterStack = function clearEnterStack(k) {\n\t\t\t\t\tk = k || 0;\n\t\t\t\t\t// Clear off the enter stack.\n\t\t\t\t\twhile (_this2.enterStack.length >= k + 1) {\n\t\t\t\t\t\tlast = _this2.enterStack.pop();\n\t\t\t\t\t\t_this2.dispatch(event, 'mouseleave', last.ns, last.data, pos);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tvar getNS = function getNS(index) {\n\t\t\t\t\tvar buf = new _StringBuffer2.default();\n\t\t\t\t\tfor (var i = 0; i <= index; i++) {\n\t\t\t\t\t\tvar val = stack[i].getAttribute(\"ns\");\n\t\t\t\t\t\tif (_lodash2.default.startsWith(val, \"root.\")) val = val.substring(5);\n\t\t\t\t\t\tbuf.append(val);\n\t\t\t\t\t}\n\t\t\t\t\treturn buf.toString('.');\n\t\t\t\t};\n\t\n\t\t\t\tif (ns && ns != this.rootNS) {\n\t\t\t\t\tif (type == 'mouseover') {\n\t\t\t\t\t\tstack = event.targetStack;\n\t\t\t\t\t\tvar item = void 0;\n\t\t\t\t\t\tfor (var i = 0; i < stack.length; i++) {\n\t\t\t\t\t\t\tif (i < this.enterStack.length) {\n\t\t\t\t\t\t\t\tif (this.enterStack[i].target != stack[i]) {\n\t\t\t\t\t\t\t\t\tclearEnterStack(i);\n\t\t\t\t\t\t\t\t} else continue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titem = { data: data, ns: getNS(i), target: stack[i] };\n\t\t\t\t\t\t\tthis.enterStack.push(item);\n\t\t\t\t\t\t\tthis.dispatch(event, 'mouseenter', item.ns, data, pos);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (stack.length < this.enterStack.length) clearEnterStack(stack.length);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (ns == this.rootNS && this.enterStack.length > 0) clearEnterStack();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"dispatch\",\n\t\t\tvalue: function dispatch(event, type, ns, data, pos) {\n\t\t\t\t//if (type != 'mouseover' && type != 'mouseout')\n\t\t\t\t//\tUtils.log('EventDispatcher', \"dispatch - \" + type + '.' + ns + ';' + pos + ';rootTarget=' + event.rootTarget + ';data=' + data);\n\t\t\t\tif (!this.started) return;\n\t\t\t\tvar nsType = ns ? type + '.' + ns : type;\n\t\t\t\t_lodash2.default.forEach(this.listeners, function (listeners, key) {\n\t\t\t\t\tif (EventDispatcher.match(nsType, listeners.regexp ? listeners.regexp : key)) {\n\t\t\t\t\t\t_lodash2.default.forEach(listeners, function (listener) {\n\t\t\t\t\t\t\tif (!listener.context) listener.callback.apply(window, [type, ns, data, pos, event]);else listener.callback.apply(listener.context, [type, ns, data, pos, event]);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\t// after dispatching, do not propagate.\n\t\t\t\tif (this.stopPropagation && event.stopPropagation) event.stopPropagation();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getPosition\",\n\t\t\tvalue: function getPosition(event) {\n\t\t\t\tvar pos = EventDispatcher.mouse(this.root, event);\n\t\t\t\tif (!_lodash2.default.isNaN(pos[0]) && !_lodash2.default.isNaN(pos[1])) this.lastPosition = pos;\n\t\t\t\treturn this.lastPosition;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Registers a key event handler\n\t   * // Key is object {ctrl, alt, shift, meta, code}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"registerKey\",\n\t\t\tvalue: function registerKey(type, key, callback, context) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tif (_lodash2.default.isArray(key)) {\n\t\t\t\t\t_lodash2.default.forEach(key, function (k) {\n\t\t\t\t\t\t_this3.registerKey(type, k, callback, context);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tkey = KeyUtils.getKeyData(key.ctrl, key.alt, key.shift, key.meta, key.code);\n\t\t\t\tif (!key.length) return;\n\t\t\t\tkey = new _StringBuffer2.default(type).append(key).toString('.');\n\t\n\t\t\t\tvar listener = { callback: callback, context: context };\n\t\t\t\tthis.listeners[key] || (this.listeners[key] = []);\n\t\t\t\tthis.listeners[key].push(listener);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"unregisterKey\",\n\t\t\tvalue: function unregisterKey(type, key, callback, context) {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\tif (_lodash2.default.isArray(key)) {\n\t\t\t\t\t_lodash2.default.forEach(key, function (k) {\n\t\t\t\t\t\t_this4.unregisterKey(type, k, callback, context);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tkey = KeyUtils.getKeyData(key.ctrl, key.alt, key.shift, key.meta, key.code);\n\t\t\t\tif (!key.length) return;\n\t\t\t\tkey = new _StringBuffer2.default(type).append(key).toString('.');\n\t\n\t\t\t\tvar listeners = this.listeners[key],\n\t\t\t\t    listener = void 0;\n\t\t\t\tif (!listeners) return;\n\t\t\t\tfor (var i = 0; i < listeners.length; i++) {\n\t\t\t\t\tlistener = listeners[i];\n\t\t\t\t\tif (listener.callback === callback && (!context || context === listener.context)) {\n\t\t\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Registers an event handler\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"register\",\n\t\t\tvalue: function register(type, callback, context, zIndex) {\n\t\t\t\tvar _this5 = this;\n\t\n\t\t\t\tif (_lodash2.default.isArray(type)) {\n\t\t\t\t\t_lodash2.default.forEach(type, function (t) {\n\t\t\t\t\t\t_this5.register(t, callback, context, zIndex);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar listener = { callback: callback, context: context, zIndex: zIndex };\n\t\t\t\tvar regexp = null;\n\t\t\t\tif (type instanceof RegExp) {\n\t\t\t\t\tregexp = type;\n\t\t\t\t\ttype = type + '';\n\t\t\t\t}\n\t\t\t\tthis.listeners[type] || (this.listeners[type] = []);\n\t\t\t\tif (regexp && !this.listeners[type].regexp) this.listeners[type].regexp = regexp;\n\t\t\t\tthis.listeners[type].push(listener);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"unregister\",\n\t\t\tvalue: function unregister(type, callback, context) {\n\t\t\t\tif (type instanceof RegExp) type = type + '';\n\t\t\t\tvar listeners = this.listeners[type],\n\t\t\t\t    listener = void 0;\n\t\t\t\tif (!listeners) return;\n\t\t\t\tfor (var i = 0; i < listeners.length; i++) {\n\t\t\t\t\tlistener = listeners[i];\n\t\t\t\t\tif (listener.callback === callback && (!context || context === listener.context)) {\n\t\t\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\tthis.stop();\n\t\t\t\tdelete this.root;\n\t\t\t\tdelete this.listeners;\n\t\t\t\tdelete this.enterStack;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Check if the registered event type matches the real event type. \"*\" is allowed as a wild card.\n\t   */\n\t\n\t\t}], [{\n\t\t\tkey: \"match\",\n\t\t\tvalue: function match(nsType, registeredType) {\n\t\t\t\tif (registeredType instanceof RegExp) return nsType.match(registeredType);\n\t\n\t\t\t\treturn nsType == registeredType;\n\t\t\t\t/*const arr = registeredType.split('*');\n\t   if (arr.length == 1)\n\t   \treturn nsType == registeredType;\n\t   \tlet substr, index = 0;\n\t   for (let i = 0; i < arr.length; i++) {\n\t   \tif (arr[i].length == 0) continue;\n\t   \tsubstr = nsType.slice(index);\n\t   \tindex = substr.indexOf(arr[i]);\n\t   \tif (index < 0)\n\t   \t\treturn false;\n\t   \tindex += arr[i].length;\n\t   }\n\t   return true;*/\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"mouse\",\n\t\t\tvalue: function mouse(container, e) {\n\t\t\t\tif (e.changedTouches) e = e.changedTouches[0];\n\t\t\t\tvar svg = container.ownerSVGElement || container;\n\t\t\t\tif (svg.createSVGPoint) {\n\t\t\t\t\tvar point = svg.createSVGPoint();\n\t\t\t\t\tpoint.x = e.clientX;point.y = e.clientY;\n\t\t\t\t\tpoint = point.matrixTransform(container.getScreenCTM().inverse());\n\t\t\t\t\treturn [point.x, point.y];\n\t\t\t\t}\n\t\t\t\tvar rect = container.getBoundingClientRect();\n\t\t\t\treturn [e.clientX - rect.left - container.clientLeft, e.clientY - rect.top - container.clientTop];\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn EventDispatcher;\n\t}();\n\t\n\texports.default = EventDispatcher;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.getKeyEvent = getKeyEvent;\n\texports.getKeyData = getKeyData;\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * KEY constant\n\t */\n\tvar KEY = {\n\t\tALT: 18,\n\t\tBACK_SPACE: 8,\n\t\tCAPS_LOCK: 20,\n\t\tCONTROL: 17,\n\t\tDELETE: 46,\n\t\tDOWN: 40,\n\t\tEND: 35,\n\t\tENTER: 13,\n\t\tESCAPE: 220,\n\t\tHOME: 36,\n\t\tLEFT: 37,\n\t\tMETA: 224,\n\t\tNUM_LOCK: 144,\n\t\tPAGE_DOWN: 34,\n\t\tPAGE_UP: 33,\n\t\tPAUSE: 19,\n\t\tPRINTSCREEN: 44,\n\t\tRIGHT: 39,\n\t\tSCROLL_LOCK: 145,\n\t\tSHIFT: 16,\n\t\tSPACE: 32,\n\t\tTAB: 9,\n\t\tUP: 38\n\t\t//ADD          : DomUtils.isFireFox ? 61  : 187,\n\t\t//SUBTRACT     : DomUtils.isFireFox ? 173 : 189\n\t}; ///////////////////////////////////////////////////////////////////////////////\n\t//                                                                           //\n\t//           The Key Utility CLass for the Event Dispatcher          \t     //\n\t//                                                                           //\n\t///////////////////////////////////////////////////////////////////////////////\n\t\n\tfunction getKeyEvent(event) {\n\t\tif (!event || !event instanceof KeyboardEvent) {\n\t\t\treturn null;\n\t\t}\n\t\n\t\tvar key = event.keyCode || event.which;\n\t\n\t\t// Need to find a way to avoid this\n\t\tif (key >= 16 && key <= 18) {\n\t\t\tkey = null;\n\t\t}\n\t\n\t\treturn getKeyData(event.ctrlKey, event.altKey, event.shiftKey, event.metaKey, key);\n\t}\n\t\n\tfunction getKeyData(ctrl, alt, shift, meta, key) {\n\t\tvar buf = new _StringBuffer2.default();\n\t\n\t\tif (ctrl) buf.append(\"CTRL\");\n\t\tif (alt) buf.append(\"ALT\");\n\t\tif (shift) buf.append(\"SHIFT\");\n\t\tif (meta) buf.append(\"META\");\n\t\tif (key) buf.append(key);\n\t\n\t\treturn buf.toString(\".\");\n\t}\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _Node = __webpack_require__(16);\n\t\n\tvar _Node2 = _interopRequireDefault(_Node);\n\t\n\tvar _Edge = __webpack_require__(20);\n\t\n\tvar _Edge2 = _interopRequireDefault(_Edge);\n\t\n\tvar _Marker = __webpack_require__(21);\n\t\n\tvar _Marker2 = _interopRequireDefault(_Marker);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar nodeDefaults = {\n\t\tname: 'Default',\n\t\trole: 'node',\n\t\tdraggable: true,\n\t\tselectable: true,\n\t\teditable: true,\n\t\tresizable: false,\n\t\tsourceable: true,\n\t\ttargetable: true,\n\t\tvisible: true\n\t};\n\t\n\tvar edgeDefaults = {\n\t\tname: 'Default',\n\t\trole: 'edge',\n\t\tselectable: true,\n\t\tvisible: true,\n\t\tstartMarker: null,\n\t\tendMarker: {\n\t\t\tid: 'Default_EndMarker',\n\t\t\ttype: 'arrow',\n\t\t\tsize: 10,\n\t\t\tcolor: '#0ea117'\n\t\t},\n\t\t/* start and end is only used if the edge is not connected to a node */\n\t\tstart: [0, 0],\n\t\tend: [400, 200]\n\t};\n\t\n\tvar Graph = function () {\n\t\tfunction Graph() {\n\t\t\tvar id = arguments.length <= 0 || arguments[0] === undefined ? _lodash2.default.uniqueId(\"G\") : arguments[0];\n\t\t\tvar config = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\t\tvar model = arguments[2];\n\t\n\t\t\t_classCallCheck(this, Graph);\n\t\n\t\t\tthis.id = id;\n\t\n\t\t\tthis.nodes = {};\n\t\t\tthis.edges = {};\n\t\n\t\t\tthis.selection = null;\n\t\t\tthis.destroyed = false;\n\t\n\t\t\t_Utils2.default.buildTypes(config.nodeTypes, \"Nodes\", nodeDefaults);\n\t\t\t_Utils2.default.buildTypes(config.edgeTypes, \"Edges\", edgeDefaults);\n\t\t\t// check for markers.\n\t\t\tthis.markers = [];\n\t\t\tvar edgeTypes = _Utils2.default.type(_Edge2.default.namespace),\n\t\t\t    marker = void 0,\n\t\t\t    markerConfig = void 0;\n\t\t\tedgeTypes.forEach(function (type) {\n\t\t\t\tmarkerConfig = type.prototype.startMarker;\n\t\t\t\tif (markerConfig) {\n\t\t\t\t\tmarker = _Marker2.default.getMarker(markerConfig, true);\n\t\t\t\t\tthis.markers.push(marker);\n\t\t\t\t}\n\t\t\t\tmarkerConfig = type.prototype.endMarker;\n\t\t\t\tif (markerConfig) {\n\t\t\t\t\tmarker = _Marker2.default.getMarker(markerConfig, false);\n\t\t\t\t\tthis.markers.push(marker);\n\t\t\t\t}\n\t\t\t}, this);\n\t\n\t\t\tdelete config.nodeTypes;\n\t\t\tdelete config.edgeTypes;\n\t\t\t_Utils2.default.initConfig(this, config);\n\t\t\tthis.root = null;\n\t\t\tif (model) this.loadModel(model);\n\t\t}\n\t\n\t\t_createClass(Graph, [{\n\t\t\tkey: \"addNode\",\n\t\n\t\n\t\t\t/**\n\t   * Create a new Node\n\t   */\n\t\t\tvalue: function addNode(config) {\n\t\t\t\tvar parent = arguments.length <= 1 || arguments[1] === undefined ? this.currentRoot : arguments[1];\n\t\t\t\tvar pos = arguments[2];\n\t\n\t\t\t\tvar NodeClass = Graph.getJSClass(config, _Node2.default);\n\t\t\t\tvar node = new NodeClass(this, config);\n\t\n\t\t\t\tif (parent) Graph.addChild(parent, node, pos);else {\n\t\t\t\t\tthis.root = node;\n\t\t\t\t\tthis.root.prop('role', 'root');\n\t\t\t\t}\n\t\n\t\t\t\tthis.nodes[node.id] = node;\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"addEdge\",\n\t\t\tvalue: function addEdge(config) {\n\t\t\t\tvar parent = arguments.length <= 1 || arguments[1] === undefined ? this.currentRoot : arguments[1];\n\t\t\t\tvar from = arguments[2];\n\t\t\t\tvar to = arguments[3];\n\t\n\t\t\t\tvar EdgeClass = Graph.getJSClass(config, _Edge2.default);\n\t\t\t\tvar edge = new EdgeClass(this, config, from, to);\n\t\n\t\t\t\tGraph.addChild(parent, edge);\n\t\t\t\tthis.edges[edge.id] = edge;\n\t\t\t\treturn edge;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"loadModel\",\n\t\t\tvalue: function loadModel(model) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar parent = arguments.length <= 1 || arguments[1] === undefined ? this.currentRoot : arguments[1];\n\t\n\t\t\t\tvar nodes = model.nodes;\n\t\t\t\tvar edges = model.edges;\n\t\t\t\tdelete model.nodes;\n\t\t\t\tdelete model.edges;\n\t\n\t\t\t\tvar node = this.addNode(model, parent);\n\t\t\t\tif (nodes) {\n\t\t\t\t\t_lodash2.default.forEach(nodes, function (child) {\n\t\t\t\t\t\t_this.loadModel(child, node);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (edges) {\n\t\t\t\t\t_lodash2.default.forEach(edges, function (edge) {\n\t\t\t\t\t\tvar from = void 0,\n\t\t\t\t\t\t    to = void 0;\n\t\t\t\t\t\tif (edge.from) from = _this.nodes[edge.from];\n\t\t\t\t\t\tif (edge.to) to = _this.nodes[edge.to];\n\t\t\t\t\t\t_this.addEdge(edge, node, from, to);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"reset\",\n\t\t\tvalue: function reset() {}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {}\n\t\t}, {\n\t\t\tkey: \"currentRoot\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.root;\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"getJSClass\",\n\t\t\tvalue: function getJSClass(config, defaultClass) {\n\t\t\t\tvar jsClass = null;\n\t\t\t\tif (config && config.type) {\n\t\t\t\t\t// See if we can get the js class from config.\n\t\t\t\t\tvar type = _Utils2.default.type(defaultClass.namespace, config.type);\n\t\t\t\t\tif (type) jsClass = type.jsClass;\n\t\t\t\t}\n\t\n\t\t\t\treturn _Utils2.default.getConstructor(jsClass, defaultClass);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"addChild\",\n\t\t\tvalue: function addChild(parent, child) {\n\t\t\t\tif (!parent.children) parent.children = [];\n\t\n\t\t\t\tif (child.parent != parent) {\n\t\t\t\t\tparent.children.push(child);\n\t\n\t\t\t\t\tif (child.parent && child.parent.children) child.parent.children = _lodash2.default.without(child.parent.children, child);\n\t\t\t\t}\n\t\t\t\tchild.parent = parent;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Graph;\n\t}();\n\t\n\tGraph.DEFAULTS = {\n\t\tallowDanglingEdges: true,\n\t\tmultiConnect: false,\n\t\treadOnly: false,\n\t\tviewOnly: false\n\t};\n\t\n\texports.default = Graph;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tvar _Cell2 = __webpack_require__(17);\n\t\n\tvar _Cell3 = _interopRequireDefault(_Cell2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Node = function (_Cell) {\n\t\t_inherits(Node, _Cell);\n\t\n\t\tfunction Node(graph) {\n\t\t\tvar config = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t\t\t_classCallCheck(this, Node);\n\t\n\t\t\tif (!config.id) config.id = _lodash2.default.uniqueId('N');\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Node).call(this, graph, config));\n\t\n\t\t\t_this.inEdges = [];\n\t\t\t_this.outEdges = [];\n\t\t\t_this.ports = null;\n\t\t\t_this.parent = null;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(Node, [{\n\t\t\tkey: \"isAncestor\",\n\t\t\tvalue: function isAncestor(n) {\n\t\t\t\t// TODO: should we move this to graph class ?\n\t\t\t\tvar node = n.parent;\n\t\t\t\twhile (node) {\n\t\t\t\t\tif (this == node) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.parent;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"removeEdge\",\n\t\t\tvalue: function removeEdge(edge) {\n\t\t\t\tvar edges = edge.source == this ? this.outEdges : this.inEdges;\n\t\t\t\tfor (var i = 0; i < edges.length; i++) {\n\t\t\t\t\tif (edge == edges[i]) {\n\t\t\t\t\t\tedges.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// Add a new incoming edge\n\t\n\t\t}, {\n\t\t\tkey: \"addInEdge\",\n\t\t\tvalue: function addInEdge(edge, pos) {\n\t\t\t\tif (pos == null || pos === undefined) this.inEdges.push(edge);else this.inEdges.splice(pos, 0, edge);\n\t\t\t}\n\t\n\t\t\t// Add a new outgoing edge\n\t\n\t\t}, {\n\t\t\tkey: \"addOutEdge\",\n\t\t\tvalue: function addOutEdge(edge, pos) {\n\t\t\t\tif (pos == null || pos === undefined || pos > edge.length - 1) this.outEdges.push(edge);else this.outEdges.splice(pos, 0, edge);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderChildren\",\n\t\t\tvalue: function renderChildren(view) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tif (this.children) {\n\t\t\t\t\tvar _ret = function () {\n\t\t\t\t\t\tvar buf = new _StringBuffer2.default();\n\t\t\t\t\t\t_lodash2.default.forEach(_this2.children, function (child) {\n\t\t\t\t\t\t\tbuf.append(child.render(view));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tv: buf.toString()\n\t\t\t\t\t\t};\n\t\t\t\t\t}();\n\t\n\t\t\t\t\tif ((typeof _ret === \"undefined\" ? \"undefined\" : _typeof(_ret)) === \"object\") return _ret.v;\n\t\t\t\t}\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getPort\",\n\t\t\tvalue: function getPort(key) {\n\t\t\t\tvar portName = arguments.length <= 1 || arguments[1] === undefined ? 'auto' : arguments[1];\n\t\t\t\tvar endPt = arguments[2];\n\t\t\t\tvar orthogonal = arguments[3];\n\t\n\t\t\t\tvar shape = this.getShape(key);\n\t\t\t\tif (portName == 'auto') {\n\t\t\t\t\treturn shape.getPerimeter(endPt, orthogonal);\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\tvar label = this.prop(\"label\") ? this.prop(\"label\") : \"undefined\";\n\t\t\t\tif (_lodash2.default.isArray(label)) label = label[0];\n\t\t\t\treturn 'Node:{id:' + this.id + ';label:' + label + ';type:' + this.props.constructor.typeName + '}';\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Node;\n\t}(_Cell3.default);\n\t\n\tNode.namespace = \"Nodes\";\n\t\n\texports.default = Node;\n\t\n\t/*\n\n\t/**\n\t * The DrillDownParent is the parent that displays the vertex when drilled down.\n\t *\n\tVertex.prototype.getDrillDownParent = function() {\n\t\treturn this.parent;\n\t};\n\n\tVertex.prototype.isLocked = function() {\n\t\tvar mode = this.getProperty(\"mode\") || 3;\n\t\treturn !(mode & Graph.ALLOW_INTERACTIONS);\n\t};\n\n\tVertex.prototype.getCrumbText = function() {\n\t\tif (this.isLocked())\n\t\t\treturn '<span><img src=\"webwb/pzreadonly.png\" /></span><span>&nbsp;' + this.getProperty(\"label\") + '</span>';\n\t\treturn this.getProperty(\"label\");\n\t};\n\n\tVertex.prototype.canEdit = function() {\n\t\treturn (!this.parent || !this.parent.isLocked()) && Vertex.superclass.canEdit.call(this);\n\t};\n\n\tVertex.prototype.isContainer = function() {\n\t\treturn this.getProperty(\"container\");\n\t};\n\n\t*/\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _Cache = __webpack_require__(18);\n\t\n\tvar _Cache2 = _interopRequireDefault(_Cache);\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tvar _Shape = __webpack_require__(6);\n\t\n\tvar _Shape2 = _interopRequireDefault(_Shape);\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _Label = __webpack_require__(19);\n\t\n\tvar _Label2 = _interopRequireDefault(_Label);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * The Cell is the common parent for Node and Edge.\n\t */\n\t\n\tvar Cell = function () {\n\t\tfunction Cell(graph) {\n\t\t\tvar config = arguments.length <= 1 || arguments[1] === undefined ? { id: _lodash2.default.uniqueId() } : arguments[1];\n\t\n\t\t\t_classCallCheck(this, Cell);\n\t\n\t\t\tthis.graph = graph;\n\t\t\tthis.id = config.id;\n\t\t\tdelete config.id;\n\t\n\t\t\t// Initialize decorators\n\t\t\tif (config.decorators) {\n\t\t\t\tthis.createDecorators(config.decorators);\n\t\t\t\tdelete config.decorators;\n\t\t\t}\n\t\n\t\t\t// Initialize View Properties\n\t\t\tif (config.views) {\n\t\t\t\tthis.viewProps = config.views;\n\t\t\t\tdelete config.views;\n\t\t\t}\n\t\n\t\t\t// Initialize type\n\t\t\tvar type = config.type || \"Default\";\n\t\t\ttype = _Utils2.default.type(this.constructor.namespace, type);\n\t\t\tif (!type) throw new Error(\"Type not found \" + config.type);\n\t\t\tdelete config.type;\n\t\t\tthis.props = new type(config);\n\t\t}\n\t\n\t\t_createClass(Cell, [{\n\t\t\tkey: \"prop\",\n\t\t\tvalue: function prop(name, value) {\n\t\t\t\tif (_lodash2.default.isUndefined(value)) return this.props[name];\n\t\t\t\tthis.props[name] = value;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Get/Set property stored by views.\n\t   * @param key\n\t   * @param name\n\t   * @param value\n\t   * @returns {*}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"viewProp\",\n\t\t\tvalue: function viewProp() {\n\t\t\t\tvar key = arguments.length <= 0 || arguments[0] === undefined ? 'default' : arguments[0];\n\t\t\t\tvar name = arguments[1];\n\t\t\t\tvar value = arguments[2];\n\t\n\t\t\t\tif (_lodash2.default.isUndefined(value)) {\n\t\t\t\t\tif (key == 'default') return this.prop(name, value);\n\t\t\t\t\treturn this.viewProps[key][name];\n\t\t\t\t}\n\t\t\t\tif (key == 'default') {\n\t\t\t\t\tthis.prop(name, value);\n\t\t\t\t} else {\n\t\t\t\t\tif (!this.viewProps[key]) this.viewProps[key] = {};\n\t\t\t\t\tthis.viewProps[key][name] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"createDecorators\",\n\t\t\tvalue: function createDecorators(decorators) {}\n\t\n\t\t\t/**\n\t   * Get properties needed for rendering this element\n\t   * @returns {{key: (string|*), className: *, namespace: *, bounds: *}}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getView\",\n\t\t\tvalue: function getView(key) {\n\t\t\t\tvar shape = this.getShape(key);\n\t\t\t\treturn _lodash2.default.assign({\n\t\t\t\t\tid: this.id,\n\t\t\t\t\tkey: key,\n\t\t\t\t\tclassName: this.computedClassName,\n\t\t\t\t\tstyle: this.viewProp(key, 'style'),\n\t\t\t\t\tnamespace: this.namespace\n\t\t\t\t}, shape);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getShape\",\n\t\t\tvalue: function getShape(key) {\n\t\t\t\tvar shape = _Cache2.default.get(this.id + \".shape\", key);\n\t\t\t\tif (shape) return shape;\n\t\n\t\t\t\tvar shapeConfig = this.viewProp(key, 'shape');\n\t\t\t\tvar shapeClass = shapeConfig ? _Shape2.default.getShape(shapeConfig.name) : _Shape2.default.getShape('Rectangle');\n\t\t\t\tvar x = this.viewProp(key, \"x\");\n\t\t\t\tvar y = this.viewProp(key, \"y\");\n\t\t\t\tvar width = this.viewProp(key, \"width\");\n\t\t\t\tvar height = this.viewProp(key, \"height\");\n\t\t\t\tshape = new shapeClass(x, y, width, height, shapeConfig);\n\t\t\t\t_Cache2.default.set(this.id + '.shape', shape, key);\n\t\t\t\treturn shape;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"render\",\n\t\t\tvalue: function render(view) {\n\t\t\t\tvar template = _Cache2.default.get(this.id + '.template', view.id);\n\t\t\t\tif (!template) {\n\t\t\t\t\t//create the template\n\t\t\t\t\tvar role = this.prop('role');\n\t\t\t\t\ttemplate = view.getTemplate('$' + role, null, this);\n\t\t\t\t\tif (_lodash2.default.isString(template)) template = _lodash2.default.template(template);\n\t\t\t\t\t_Cache2.default.set(this.id + '.template', template, view.id);\n\t\t\t\t}\n\t\t\t\treturn template(this.getView(view.id));\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderShape\",\n\t\t\tvalue: function renderShape(view) {\n\t\t\t\tvar shape = this.getShape(view.id);\n\t\t\t\tif (shape) return shape.render(view);\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderLabel\",\n\t\t\tvalue: function renderLabel(view) {\n\t\t\t\tif (this == this.graph.currentRoot) return null;\n\t\t\t\tvar box = this.getLabelBox(view.id);\n\t\t\t\tif (box) return view.renderLabel(box);\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getLabelBox\",\n\t\t\tvalue: function getLabelBox(key) {\n\t\t\t\tvar box = _Cache2.default.get(this.id + '.labelBox', key);\n\t\t\t\tif (box) return box;\n\t\t\t\tvar shape = this.getShape(key);\n\t\t\t\t// Just get the config will have a positive performance boost for IE11 and IE10.\n\t\t\t\tbox = _Label2.default.getLabelBox(this.prop('label'), this.viewProp(key, 'labelConfig'), shape.width, shape.height);\n\t\t\t\t_Cache2.default.set(this.id + '.labelBox', box, key);\n\t\t\t\treturn box;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\tdelete this.graph;\n\t\t\t\tdelete this.decorators;\n\t\t\t\tdelete this.props;\n\t\t\t\tdelete this.viewProps;\n\t\t\t\tthis.destroyed = true;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"computedClassName\",\n\t\t\tget: function get() {\n\t\t\t\tif (!this._computedClassName) {\n\t\t\t\t\tvar buf = new _StringBuffer2.default(this.prop(\"role\"));\n\t\t\t\t\tvar props = this.props;\n\t\t\t\t\tif (props.hasOwnProperty(\"className\")) buf.append(props[\"className\"]);\n\t\t\t\t\tprops = props.constructor.prototype;\n\t\t\t\t\twhile (props) {\n\t\t\t\t\t\tif (props.hasOwnProperty(\"className\")) buf.append(props[\"className\"]);\n\t\t\t\t\t\tprops = Object.getPrototypeOf(props);\n\t\t\t\t\t}\n\t\t\t\t\tthis._computedClassName = buf.toString(' ');\n\t\t\t\t}\n\t\t\t\treturn this._computedClassName;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"namespace\",\n\t\t\tget: function get() {\n\t\t\t\tif (this == this.graph.currentRoot) return '';\n\t\t\t\treturn \"root.\" + this.prop(\"role\");\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Cell;\n\t}();\n\t\n\t/*\n\t\n\tCell.prototype.move = function(x, y) {\n\t\tthis.setProperty(\"x\", Math.round(x));\n\t\tthis.setProperty(\"y\", Math.round(y));\n\t\tdelete this.bounds;\n\t};\n\t\n\tCell.prototype.resize = function(w, h) {\n\t\tthis.setProperty(\"width\", w);\n\t\tthis.setProperty(\"height\", h);\n\t\tdelete this.bounds;\n\t};\n\t\n\tCell.prototype.canEdit = function() {\n\t\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"editable\");\n\t};\n\t\n\tCell.prototype.canSelect = function() {\n\t\treturn (this.graph ? this.graph.canSelect() : true) && this.getProperty(\"selectable\");\n\t};\n\t\n\tCell.prototype.canMove = function() {\n\t\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"draggable\");\n\t};\n\t\n\tCell.prototype.canResize = function() {\n\t\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"resizable\");\n\t};\n\t\n\tCell.prototype.getTypeFromString = function(typeStr) {\n\t\treturn this.graph.getType(typeStr);\n\t};\n\t\n\tCell.prototype.createModifiers = function(modifiers) {\n\t\tthis.modifiers = null;\n\t\tvar modifierSettings = this.getProperty(\"modifierSettings\");\n\t\tif (modifierSettings) {\n\t\t\t_.each(modifiers, function(config) {\n\t\t\t\tconfig.type = this.graph.getModifierType(config.className);\n\t\t\t\tconfig.setting = modifierSettings[config.className];\n\t\t\t\tif (!config.type || !config.setting) return;\n\t\n\t\t\t\tthis.addModifier(config.className, new Modifier(this, config));\n\t\t\t}, this);\n\t\n\t\t\t// Check for showAlways settings\n\t\t\t_.each(modifierSettings, function(setting, name) {\n\t\t\t\tif (setting.showAlways && (!this.modifiers || !this.modifiers[name])) {\n\t\t\t\t\tvar config = {type: this.graph.getModifierType(name), setting: setting};\n\t\t\t\t\tif (!config.type) return;\n\t\t\t\t\tthis.addModifier(name, new Modifier(this, config));\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\t};\n\t\n\tCell.prototype.addModifier = function(name, modifier) {\n\t\tif (!this.modifiers)\n\t\t\tthis.modifiers = {};\n\t\n\t\tif (!modifier.hasOwnProperty(\"showHeader\"))\n\t\t\tmodifier.showHeader = true;\n\t\n\t\t// @hack preferably set it in configurations.\n\t\tif (modifier.name == \"HoverProcessModifier\" || modifier.name == \"HoverResults\")\n\t\t\tmodifier.showHeader = false;\n\t\n\t\tthis.modifiers[name] = modifier;\n\t};\n\t\n\tCell.prototype.getModifiers = function() {\n\t\tif (_.isUndefined(this.modifiers))\n\t\t\tthis.createModifiers();\n\t\treturn this.modifiers;\n\t};\n\t\n\tCell.prototype.getModifier = function(name) {\n\t\tvar modifiers = this.getModifiers();\n\t\tif (modifiers)\n\t\t\treturn modifiers[name];\n\t\treturn null;\n\t};\n\t\n\tCell.prototype.isVisible = function() {\n\t\treturn this.getProperty('visible');\n\t};\n\t\n\tCell.prototype.isContainer = function() {\n\t\treturn false;\n\t};\n\t*/\n\t\n\t\n\texports.default = Cell;\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t/**\n\t * Created by tong on 6/7/2016.\n\t */\n\t\n\tvar caches = {};\n\t\n\tvar Cache = {\n\t\tget: function get(key, namespace) {\n\t\t\treturn this.getCache(namespace)[key];\n\t\t},\n\t\n\t\tset: function set(key, value, namespace) {\n\t\t\tthis.getCache(namespace)[key] = value;\n\t\t},\n\t\n\t\tcontains: function contains(key, namespace) {\n\t\t\treturn key in this.getCache(namespace);\n\t\t},\n\t\n\t\tremove: function remove(key, namespace) {\n\t\t\tdelete this.getCache(namespace)[key];\n\t\t},\n\t\n\t\tclear: function clear(namesapce) {\n\t\t\tif (!namespace) caches = {};else if (caches[namespace]) caches[namespace] = {};\n\t\t},\n\t\n\t\tgetCache: function getCache() {\n\t\t\tvar namespace = arguments.length <= 0 || arguments[0] === undefined ? 'default' : arguments[0];\n\t\n\t\t\tif (!caches[namespace]) caches[namespace] = {};\n\t\t\treturn caches[namespace];\n\t\t}\n\t};\n\t\n\texports.default = Cache;\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _bean = __webpack_require__(12);\n\t\n\tvar _bean2 = _interopRequireDefault(_bean);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _DomUtils = __webpack_require__(7);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar FONT_BOLD = 1,\n\t    FONT_ITALIC = 2,\n\t    FONT_UNDERLINE = 4,\n\t    FONT_SHADOW = 8;\n\t\n\tvar defaultConfig = {\n\t\tfontSize: 11,\n\t\tfontFamily: \"Arial\",\n\t\tfontStyle: 0,\n\t\tfontColor: 'black',\n\t\tpadding: 0,\n\t\tlinePadding: 0,\n\t\talign: \"left\",\n\t\twidth: 0,\n\t\theight: 0,\n\t\trotation: null,\n\t\tgeometry: { x: 0, y: 0, anchorY: 0, offsetX: 0, offsetY: 0 }\n\t};\n\t\n\t/**\n\t * The label object handles label sizing/positioning\n\t */\n\t\n\texports.default = function () {\n\t\tvar stringMeasureEl = null,\n\t\t    measureDiv = void 0,\n\t\t    baselineDiv = void 0;\n\t\n\t\t/**\n\t  * Calculate the size of the string.\n\t  */\n\t\tvar getStringSize = _lodash2.default.memoize(function (str, fontSize, fontFamily, bold) {\n\t\t\tfontSize = fontSize || 11;\n\t\t\tfontFamily = fontFamily || 'Arial,Helvetica';\n\t\t\tbold = !_lodash2.default.isUndefined(bold) ? bold : false;\n\t\n\t\t\t// first check if there is a string-measuring div available, if not, create now.\n\t\t\tif (!stringMeasureEl) {\n\t\t\t\tstringMeasureEl = _DomUtils2.default.createElement('iframe', { id: \"_ComputeStylesIframe\" }, { position: \"absolute\", visibility: \"hidden\", width: \"auto\" });\n\t\t\t\tdocument.body.appendChild(stringMeasureEl);\n\t\t\t\tvar doc = stringMeasureEl.contentWindow.document;\n\t\t\t\tdoc.open();\n\t\t\t\tdoc.write('<html><body>\\\n\t\t\t\t\t<div id=\"baselineDiv\" style=\"height:100px;\"><span style=\"line-height:0\">T</span><span style=\"height:100%;display:inline-block;\"></span></div>\\\n\t\t\t\t\t<div id=\"measureDiv\" style=\"position:absolute;width:auto;height:auto;padding:0;white-space:pre-wrap;word-wrap:break-word;display:inline-block;\"></div>\\\n\t\t\t\t\t</body></html>');\n\t\t\t\tdoc.close();\n\t\t\t\tmeasureDiv = doc.getElementById(\"measureDiv\");\n\t\t\t\tbaselineDiv = doc.getElementById(\"baselineDiv\");\n\t\t\t}\n\t\t\tbaselineDiv.style.fontSize = measureDiv.style.fontSize = fontSize;\n\t\t\tbaselineDiv.style.fontFamily = measureDiv.style.fontFamily = fontFamily;\n\t\t\tbaselineDiv.style.fontWeight = measureDiv.style.fontWeight = bold ? 'bold' : 'normal';\n\t\t\tmeasureDiv.innerHTML = str;\n\t\n\t\t\tvar strut = baselineDiv.firstChild;\n\t\t\tvar baselineHeight = strut.offsetTop + strut.offsetHeight - baselineDiv.offsetHeight - baselineDiv.offsetTop;\n\t\n\t\t\treturn { width: measureDiv.offsetWidth, height: measureDiv.offsetHeight, baseline: baselineHeight };\n\t\t}, function (str, fontSize, fontFamily, bold) {\n\t\t\treturn str + ';' + fontSize + ';' + fontFamily + ';' + bold;\n\t\t});\n\t\n\t\t/**\n\t  * Create a wrapped text.\n\t  * @param {String} string the string to wrap.\n\t  * @param {maxWidth} the maximum width this string can take.\n\t  * @param {fontSize}\n\t  * @param {fontFamily}\n\t  * @param {bold}\n\t  */\n\t\tvar wrap = _lodash2.default.memoize(function (string, maxWidth, fontSize, fontFamily, bold) {\n\t\t\tmaxWidth = maxWidth || 0;\n\t\t\tfontSize = fontSize || 11;\n\t\t\tfontFamily = fontFamily || 'Arial,Helvetica';\n\t\t\tbold = !_lodash2.default.isUndefined(bold) ? bold : false;\n\t\n\t\t\tvar arr = [];\n\t\t\tvar spaceSize = getStringSize(\"&nbsp;\", fontSize, fontFamily, bold),\n\t\t\t    space = spaceSize.width;\n\t\t\tarr.lineHeight = spaceSize.height;\n\t\t\tarr.baseline = spaceSize.baseline;\n\t\n\t\t\tif (!maxWidth || !string || string == \"\") {\n\t\t\t\tarr.push(string);\n\t\t\t\tarr.width = !string || string == \"\" ? space : getStringSize(string, fontSize, fontFamily, bold).width;\n\t\t\t\tarr.height = arr.lineHeight;\n\t\t\t\treturn arr;\n\t\t\t}\n\t\n\t\t\tvar width = 0;\n\t\t\t//split the text by lines\n\t\t\tvar lines = string.split('\\n');\n\t\n\t\t\tvar buf = new _StringBuffer2.default();\n\t\n\t\t\tfor (var j = 0; j < lines.length; j++) {\n\t\t\t\t//split each line by word\n\t\t\t\tvar words = lines[j].split(/\\s/);\n\t\t\t\tvar line = \"\",\n\t\t\t\t    currentWidth = 0,\n\t\t\t\t    wordWidth = 0,\n\t\t\t\t    newLine = true,\n\t\t\t\t    word;\n\t\n\t\t\t\tfor (var i = 0; i < words.length; i++) {\n\t\t\t\t\tword = words[i];\n\t\t\t\t\twordWidth = getStringSize(word, fontSize, fontFamily, bold).width;\n\t\n\t\t\t\t\tif ((newLine ? wordWidth : currentWidth + space + wordWidth) > maxWidth) {\n\t\t\t\t\t\tif (newLine) {\n\t\t\t\t\t\t\tbuf.append(word);\n\t\t\t\t\t\t\twidth = Math.max(width, wordWidth);\n\t\t\t\t\t\t\tif (i < words.length - 1) {\n\t\t\t\t\t\t\t\tarr.push(buf.toString());\n\t\t\t\t\t\t\t\tbuf.clear();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tarr.push(buf.append(line).toString());\n\t\t\t\t\t\t\twidth = Math.max(width, currentWidth + space + wordWidth);\n\t\t\t\t\t\t\tbuf.clear();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline = \"\";\n\t\t\t\t\t\tcurrentWidth = 0;\n\t\t\t\t\t\tif (!newLine) i--; // move back one word.\n\t\t\t\t\t\tnewLine = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tline = newLine ? word : line + \" \" + word;\n\t\t\t\t\t\tcurrentWidth = newLine ? wordWidth : currentWidth + space + wordWidth;\n\t\t\t\t\t\twidth = Math.max(width, currentWidth);\n\t\t\t\t\t\tnewLine = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (line != \"\") buf.append(line);\n\t\t\t\tif (j < lines.length - 1) {\n\t\t\t\t\tarr.push(buf.toString());\n\t\t\t\t\tbuf.clear();\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tarr.push(buf.toString());\n\t\t\tarr.width = width;\n\t\t\tarr.height = arr.lineHeight * arr.length;\n\t\t\treturn arr;\n\t\t}, function (str, maxWidth, fontSize, fontFamily, bold) {\n\t\t\treturn str + ';' + maxWidth + ';' + fontSize + ';' + fontFamily + ';' + bold;\n\t\t});\n\t\n\t\t/**\n\t  *  Get the view information for how to display the label.\n\t  * @param label The string that needs to be displayed\n\t  * @param containerWidth The width of the parent container.\n\t  * @param containerHeight The height of the parent container.\n\t  * @param labelConfig The configuration on how to display label. It should be an object with the following parameters:\n\t  * {\n\t  *      fontSize, fontFamily, fontStyle, padding,\n\t  *      align: can be either \"left\", \"center\" or \"right\",\n\t  *      width: the maximum width of the label. if less than 1, then is treated as percentage. If 0, no wrapping will occur,\n\t  *      height,\n\t  *      geometry\n\t  * }\n\t  * @returns {*}\n\t  */\n\t\tfunction getLabelBox(label, labelConfig, containerWidth, containerHeight) {\n\t\t\treturn _getLabelBox.call(this, label, labelConfig, { width: containerWidth, height: containerHeight });\n\t\t}\n\t\n\t\tfunction getLabelBoxForLink(label, labelConfig, link) {\n\t\t\treturn _getLabelBox.call(this, label, labelConfig, link);\n\t\t}\n\t\n\t\tfunction _getLabelBox(label) {\n\t\t\tvar labelConfig = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\t\tvar context = arguments[2];\n\t\n\t\t\tlabelConfig = _lodash2.default.defaultsDeep(labelConfig, defaultConfig);\n\t\t\tvar fontSize = labelConfig.fontSize;\n\t\t\tvar fontFamily = labelConfig.fontFamily;\n\t\t\tvar fontStyle = labelConfig.fontStyle;\n\t\t\tvar bold = (fontStyle & FONT_BOLD) == FONT_BOLD;\n\t\t\tvar padding = labelConfig.padding;\n\t\t\tvar linePadding = labelConfig.linePadding;\n\t\t\tvar align = labelConfig.align;\n\t\n\t\t\tvar w = labelConfig.width,\n\t\t\t    h = labelConfig.height;\n\t\t\tif (context.width) {\n\t\t\t\tw = w <= 5 ? context.width * w : w;\n\t\t\t\th = h <= 5 ? context.height * h : h;\n\t\t\t}\n\t\t\tw -= 2 * padding;\n\t\t\th -= 2 * padding;\n\t\t\tw = Math.max(0, w);\n\t\t\th = Math.max(0, h);\n\t\n\t\t\tvar geometry = _lodash2.default.clone(labelConfig.geometry);\n\t\t\tvar wrappedLabel = this.wrap(label, w, fontSize, fontFamily, bold);\n\t\t\tgeometry.width = wrappedLabel.width + 2 * padding;\n\t\t\tgeometry.height = wrappedLabel.height + 2 * padding + (wrappedLabel.length - 1) * linePadding;\n\t\t\tvar anchor = \"start\",\n\t\t\t    dx = 0,\n\t\t\t    setAnchorX = !_lodash2.default.has(geometry, \"anchorX\");\n\t\t\tswitch (align) {\n\t\t\t\tcase \"center\":\n\t\t\t\t\tanchor = \"middle\";\n\t\t\t\t\tif (setAnchorX) geometry.anchorX = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tanchor = \"end\";\n\t\t\t\t\tdx = wrappedLabel.width / 2;\n\t\t\t\t\tif (setAnchorX) geometry.anchorX = -0.5;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"left\":\n\t\t\t\t\tdx = -wrappedLabel.width / 2;\n\t\t\t\t\tif (setAnchorX) geometry.anchorX = 0.5;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar pos = void 0;\n\t\t\tif (context.getRelativePosition) pos = context.getRelativePosition(geometry);else pos = _Utils2.default.getRelativePosition({ width: context.width, height: context.height }, geometry);\n\t\n\t\t\tvar bounds = new _Rectangle2.default(pos[0], pos[1], geometry.width, geometry.height);\n\t\t\t// the pivot is the center of rotation when the label has a rotation specified.\n\t\t\tvar pivot = align == 'center' ? [0, 0] : align == 'left' ? [-wrappedLabel.width / 2, 0] : [wrappedLabel.width / 2, 0];\n\t\n\t\t\t// the maximum bounds for the label, used to position inline editor\n\t\t\tgeometry.width = Math.max(w + 2 * padding, geometry.width);\n\t\t\tgeometry.height = Math.max(h + 2 * padding, geometry.height);\n\t\n\t\t\tif (context.getRelativePosition) pos = context.getRelativePosition(geometry);else pos = _Utils2.default.getRelativePosition({ width: context.width, height: context.height }, geometry);\n\t\n\t\t\tvar maxBounds = new _Rectangle2.default(pos[0], pos[1], geometry.width, geometry.height);\n\t\t\treturn {\n\t\t\t\tconfig: labelConfig, label: wrappedLabel, _label: label,\n\t\t\t\tbold: bold, underline: fontStyle & FONT_UNDERLINE, italic: fontStyle & FONT_ITALIC, shadow: fontStyle & FONT_SHADOW,\n\t\t\t\tdx: dx, dy: -geometry.height / 2 + padding + wrappedLabel.lineHeight - wrappedLabel.baseline, anchor: anchor, lineHeight: wrappedLabel.lineHeight + linePadding,\n\t\t\t\tpivot: pivot, bounds: bounds, maxBounds: maxBounds\n\t\t\t};\n\t\t}\n\t\n\t\tfunction render(view, box) {\n\t\t\treturn view.renderLabel(box);\n\t\t}\n\t\n\t\tvar editor = {\n\t\t\tstart: function start(key, container, box, refEl, textEl) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar scale = arguments.length <= 5 || arguments[5] === undefined ? 1.0 : arguments[5];\n\t\t\t\tvar singleLine = arguments.length <= 6 || arguments[6] === undefined ? true : arguments[6];\n\t\n\t\t\t\tif (this.input) {\n\t\t\t\t\tif (this.key != key) {\n\t\t\t\t\t\t// need to close the existing editor first\n\t\t\t\t\t\tthis.stop();\n\t\t\t\t\t} else return;\n\t\t\t\t}\n\t\t\t\tvar tag = singleLine ? 'input' : 'textarea';\n\t\t\t\tthis.input = _DomUtils2.default.createElement(tag, { id: \"inlineEditor\", unselectable: \"off\" }, { position: \"absolute\", overflow: \"hidden\", padding: \"0px\", margin: \"0px\", border: \"transparent\" });\n\t\t\t\tif (singleLine) {\n\t\t\t\t\t_bean2.default.on(this.input, 'keydown keyup', function (event) {\n\t\t\t\t\t\tif (event.keyCode == 13) {\n\t\t\t\t\t\t\t_bean2.default.off(_this.input, 'keydown keyup');\n\t\t\t\t\t\t\t_this.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcontainer.appendChild(this.input);\n\t\n\t\t\t\tthis.key = key;\n\t\t\t\tthis.box = box;\n\t\t\t\tthis.refEl = refEl;\n\t\t\t\tthis.textEl = textEl;\n\t\n\t\t\t\tvar labelConfig = box.config;\n\t\t\t\tvar maxBounds = new _Rectangle2.default(box.maxBounds.x, box.maxBounds.y, box.maxBounds.width * scale, box.maxBounds.height * scale);\n\t\t\t\tvar pos = _DomUtils2.default.getCenterPosition(refEl, container);\n\t\t\t\tpos = [pos[0] + maxBounds.left, pos[1] + maxBounds.top];\n\t\n\t\t\t\tif (textEl) textEl.style.visibility = 'hidden';\n\t\n\t\t\t\t_DomUtils2.default.setElement(this.input, null, {\n\t\t\t\t\tvisibility: 'visible',\n\t\t\t\t\tleft: pos[0] + \"px\",\n\t\t\t\t\ttop: pos[1] + \"px\",\n\t\t\t\t\twidth: maxBounds.width + 'px',\n\t\t\t\t\theight: maxBounds.height + 'px',\n\t\t\t\t\t\"font-family\": labelConfig.fontFamily,\n\t\t\t\t\t\"font-size\": labelConfig.fontSize * scale + 'px',\n\t\t\t\t\t\"font-weight\": (labelConfig.fontStyle & FONT_BOLD) == FONT_BOLD ? 'bold' : 'normal'\n\t\t\t\t\t/*\"color\": labelConfig.fontColor*/\n\t\t\t\t});\n\t\n\t\t\t\tthis.input.value = box._label;\n\t\t\t\tthis.input.focus();\n\t\t\t\tthis.input.select();\n\t\t\t\t_bean2.default.fire(this, 'editor.start', [this.key]);\n\t\t\t},\n\t\n\t\t\tstop: function stop(cancel) {\n\t\t\t\tif (!this.input) return;\n\t\n\t\t\t\tcancel = cancel || false;\n\t\t\t\tif (this.textEl) this.textEl.style.visibility = null;\n\t\n\t\t\t\tif (!cancel) _bean2.default.fire(this, 'editor.update', [this.key, this.input.value]);\n\t\n\t\t\t\t_bean2.default.fire(this, 'editor.stop', [this.key]);\n\t\n\t\t\t\t// remove the input\n\t\t\t\tthis.input.parentNode.removeChild(this.input);\n\t\t\t\tdelete this.input;\n\t\t\t\tdelete this.key;\n\t\t\t\tdelete this.box;\n\t\t\t\tdelete this.refEl;\n\t\t\t\tdelete this.textEl;\n\t\t\t}\n\t\t};\n\t\n\t\treturn {\n\t\t\tFONT_BOLD: FONT_BOLD,\n\t\t\tFONT_ITALIC: FONT_ITALIC,\n\t\t\tFONT_UNDERLINE: FONT_UNDERLINE,\n\t\t\tFONT_SHADOW: FONT_SHADOW,\n\t\t\tgetStringSize: getStringSize,\n\t\t\twrap: wrap,\n\t\t\tgetLabelBox: getLabelBox,\n\t\t\tgetLabelBoxForLink: getLabelBoxForLink,\n\t\t\trender: render,\n\t\t\teditor: editor\n\t\t};\n\t}();\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Cell2 = __webpack_require__(17);\n\t\n\tvar _Cell3 = _interopRequireDefault(_Cell2);\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _Link = __webpack_require__(11);\n\t\n\tvar _Link2 = _interopRequireDefault(_Link);\n\t\n\tvar _Label = __webpack_require__(19);\n\t\n\tvar _Label2 = _interopRequireDefault(_Label);\n\t\n\tvar _Cache = __webpack_require__(18);\n\t\n\tvar _Cache2 = _interopRequireDefault(_Cache);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Edge = function (_Cell) {\n\t\t_inherits(Edge, _Cell);\n\t\n\t\tfunction Edge(graph) {\n\t\t\tvar config = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\t\tvar source = arguments[2];\n\t\t\tvar target = arguments[3];\n\t\n\t\t\t_classCallCheck(this, Edge);\n\t\n\t\t\tif (!config.id) config.id = _lodash2.default.uniqueId('E');\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Edge).call(this, graph, config));\n\t\n\t\t\t_this.source = _this.target = null;\n\t\t\t_this.setSource(source, config.sourcePos);\n\t\t\t_this.setTarget(target, config.targetPos);\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(Edge, [{\n\t\t\tkey: \"setSource\",\n\t\t\tvalue: function setSource(node, pos) {\n\t\t\t\tthis.setTerminal(node, pos, 'source');\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"setTarget\",\n\t\t\tvalue: function setTarget(node, pos) {\n\t\t\t\tthis.setTerminal(node, pos, 'target');\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Internal methods to set either the source or target\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"setTerminal\",\n\t\t\tvalue: function setTerminal(node, pos, dir) {\n\t\t\t\tvar end = dir == 'source' ? this.source : this.target;\n\t\t\t\tif (end == node) {\n\t\t\t\t\t// simply change the position of the edge.\n\t\t\t\t\tif (node) node.setEdgeAt(this, pos);\n\t\t\t\t} else {\n\t\t\t\t\tif (end) {\n\t\t\t\t\t\t// first remove the edge from the current end\n\t\t\t\t\t\tend.removeEdge(this);\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (node) {\n\t\t\t\t\t\tif (dir == 'source') node.addOutEdge(this, pos);else node.addInEdge(this, pos);\n\t\t\t\t\t}\n\t\t\t\t\tif (dir == 'source') this.source = node;else this.target = node;\n\t\t\t\t\t//this.clearPoints();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getLabelBox\",\n\t\t\tvalue: function getLabelBox(key) {\n\t\t\t\tvar label = this.prop('label');\n\t\t\t\tif (label) return _Label2.default.getLabelBoxForLink(label, this.viewProp(key, 'labelConfig'), this.getShape(key));\n\t\t\t\treturn null;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Return a pair of points as reference to the calculation of start and end points.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getReferencePoints\",\n\t\t\tvalue: function getReferencePoints(key) {\n\t\t\t\tvar pts = [];\n\t\t\t\tif (this.source) pts.push(this.source.getShape(key).center);else pts.push(this.viewProp(key, 'start'));\n\t\n\t\t\t\tif (this.target) pts.push(this.target.getShape(key).center);else pts.push(this.viewProp(key, 'end'));\n\t\n\t\t\t\treturn pts;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getTerminalVisual\",\n\t\t\tvalue: function getTerminalVisual(key, orthogonal) {\n\t\t\t\tvar refPts = this.getReferencePoints(key);\n\t\t\t\tvar terminals = [];\n\t\n\t\t\t\tvar getBound = function getBound(pt) {\n\t\t\t\t\treturn new _Rectangle2.default(pt.x, pt.y, 3, 3);\n\t\t\t\t};\n\t\n\t\t\t\tif (this.source) {\n\t\t\t\t\tterminals.push(this.source.getPort(key, this.prop('sourcePort'), refPts[1], orthogonal));\n\t\t\t\t} else terminals.push({ point: refPts[0], direction: _Rectangle2.default.getDirection(getBound(refPts[0]), refPts[1], true) });\n\t\n\t\t\t\tif (this.target) {\n\t\t\t\t\tterminals.push(this.target.getPort(key, this.prop('targetPort'), refPts[0], orthogonal));\n\t\t\t\t} else terminals.push({ point: refPts[1], direction: _Rectangle2.default.getDirection(getBound(refPts[1]), refPts[0], true) });\n\t\t\t\treturn terminals;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getShape\",\n\t\t\tvalue: function getShape(key) {\n\t\t\t\tvar shape = _Cache2.default.get(this.id + \".shape\", key);\n\t\t\t\tif (shape) return shape;\n\t\n\t\t\t\tvar config = this.viewProp(key, 'shape');\n\t\t\t\tshape = _Link2.default.getLink(this.getTerminalVisual(key, config.orthogonal), config, this.prop('startMarker'), this.prop('endMarker'));\n\t\t\t\t_Cache2.default.set(this.id + '.shape', shape, key);\n\t\t\t\treturn shape;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Edge:{' + (!this.source ? 'null' : this.source.id) + '--' + (!this.target ? 'null' : this.target.id) + '}';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\t_get(Object.getPrototypeOf(Edge.prototype), \"destroy\", this).call(this);\n\t\t\t\tthis.setSource(null);\n\t\t\t\tthis.setTarget(null);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Edge;\n\t}(_Cell3.default);\n\t\n\tEdge.namespace = \"Edges\";\n\t\n\texports.default = Edge;\n\t\n\t/*\n\n\tEdge.prototype.isVisible = function() {\n\t\tif (this.graph.getProperty(\"allowDanglingEdges\")) {\n\t\t\treturn (this.source ? this.source.isVisible() : true) && (this.target ? this.target.isVisible() : true) && this.getProperty(\"visible\");\n\t\t} else\n\t\t\treturn this.source && this.target && this.getProperty('visible') && this.source.isVisible() && this.target.isVisible();\n\t};\n\n\t*/\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar registry = {};\n\t\n\tvar Marker = function () {\n\t\n\t\t/** Begin Standard Marker Type **/\n\t\tfunction arrow(size, source, styles) {\n\t\t\tvar sign = source ? -1 : 1;\n\t\t\tvar marker = {\n\t\t\t\tviewBox: new _Rectangle2.default(-5, -5, 10, 10),\n\t\t\t\tsize: size,\n\t\t\t\tref: [4 * sign, 0],\n\t\t\t\tfill: styles.color\n\t\t\t};\n\t\t\tmarker.shape = {\n\t\t\t\tname: 'Polygon',\n\t\t\t\tpoints: [[-2 * sign, 0], [-4 * sign, 4], [4 * sign, 0], [-4 * sign, -4]]\n\t\t\t};\n\t\t\treturn marker;\n\t\t}\n\t\n\t\tfunction triangle(size, source, styles) {\n\t\t\tvar sign = source ? -1 : 1;\n\t\t\tvar marker = {\n\t\t\t\tviewBox: new _Rectangle2.default(-5, -5, 10, 10),\n\t\t\t\tsize: size,\n\t\t\t\tref: [4 * sign, 0],\n\t\t\t\tfill: styles.color\n\t\t\t};\n\t\t\tmarker.shape = {\n\t\t\t\tname: 'Polygon',\n\t\t\t\tpoints: [[-5 * sign, -5], [-5 * sign, 5], [4 * sign, 0]]\n\t\t\t};\n\t\t\treturn marker;\n\t\t}\n\t\n\t\tfunction oval(size, source, styles) {\n\t\t\tvar r = size / 2;\n\t\t\tvar marker = {\n\t\t\t\tviewBox: new _Rectangle2.default(-r, -r, size, size),\n\t\t\t\tsize: size,\n\t\t\t\tref: [0, 0],\n\t\t\t\tfill: styles.color\n\t\t\t};\n\t\t\tmarker.shape = '<ellipse cx=\"0\" cy=\"0\" rx=\"' + r + '\" ry=\"' + r + '\"></ellipse>';\n\t\t\treturn marker;\n\t\t}\n\t\n\t\tfunction diamond(size, source, styles) {\n\t\t\tvar sign = source ? -1 : 1;\n\t\t\tvar marker = {\n\t\t\t\tviewBox: new _Rectangle2.default(-5, -5, 10, 10),\n\t\t\t\tsize: size,\n\t\t\t\tref: [4 * sign, 0],\n\t\t\t\tfill: styles.color\n\t\t\t};\n\t\t\tmarker.shape = '';\n\t\t\treturn marker;\n\t\t}\n\t\t/** End Standard Marker Type **/\n\t\tfunction getMarker(config, source) {\n\t\t\tvar factory = registry[config.type];\n\t\t\tvar marker = factory(config.size, source, config);\n\t\t\tmarker.id = config.id;\n\t\t\treturn marker;\n\t\t}\n\t\n\t\tregistry['arrow'] = arrow;\n\t\tregistry['triangle'] = triangle;\n\t\tregistry['oval'] = oval;\n\t\tregistry['diamond'] = diamond;\n\t\n\t\treturn {\n\t\t\tregistry: registry,\n\t\t\tgetMarker: getMarker\n\t\t};\n\t}();\n\t\n\texports.default = Marker;\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Layout = function () {\n\t\tfunction Layout() {\n\t\t\tvar config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t\t\t_classCallCheck(this, Layout);\n\t\n\t\t\tif (config.hasOwnProperty(\"orientation\") && _lodash2.default.isString(config.orientation)) {\n\t\t\t\tif (config.orientation.toUpperCase() == \"HORIZONTAL\") config.orientation = Layout.HORIZONTAL;else delete config.orientation;\n\t\t\t}\n\t\t\t_Utils2.default.initConfig(this, config);\n\t\t}\n\t\n\t\t_createClass(Layout, [{\n\t\t\tkey: \"layout\",\n\t\t\tvalue: function layout(root, bounds) {}\n\t\t}, {\n\t\t\tkey: \"reset\",\n\t\t\tvalue: function reset() {}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {}\n\t\t}]);\n\t\n\t\treturn Layout;\n\t}();\n\t\n\tLayout.VERTICAL = 0;\n\tLayout.HORIZONTAL = 1;\n\t\n\tLayout.DEFAULTS = {\n\t\torientation: Layout.VERTICAL\n\t};\n\t\n\texports.default = Layout;\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Layout2 = __webpack_require__(22);\n\t\n\tvar _Layout3 = _interopRequireDefault(_Layout2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar FlowLayout = function (_Layout) {\n\t\t_inherits(FlowLayout, _Layout);\n\t\n\t\tfunction FlowLayout() {\n\t\t\t_classCallCheck(this, FlowLayout);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(FlowLayout).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(FlowLayout, [{\n\t\t\tkey: \"layout\",\n\t\t\tvalue: function layout(root, bounds) {\n\t\t\t\tvar items;\n\t\t\t\tif (!root) items = this.owner.childNodes;else if (_.isArray(root)) items = root;else items = root.getLinkedNodes('target');\n\t\t\t\tif (!items || items.length == 0) return;\n\t\n\t\t\t\tvar x = 0,\n\t\t\t\t    y = 0,\n\t\t\t\t    h = 0,\n\t\t\t\t    node;\n\t\t\t\tvar p1 = 0,\n\t\t\t\t    p2 = 0;\n\t\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\t\tnode = items[i];\n\t\t\t\t\tif (x > 0 && x + this.hgap + node.getProperty(\"width\") > bounds.width) {\n\t\t\t\t\t\t// create new line\n\t\t\t\t\t\ty += h + this.vgap;\n\t\t\t\t\t\tx = 0;h = 0;p1 = 0;p2++;\n\t\t\t\t\t}\n\t\t\t\t\tnode._flPos = [p1, p2];\n\t\t\t\t\tnode.moveTo([bounds.x + x, bounds.y + y]);\n\t\t\t\t\tx += this.hgap + node.getProperty(\"width\");\n\t\t\t\t\tp1++;\n\t\t\t\t\th = h < node.getProperty(\"height\") ? node.getProperty(\"height\") : h;\n\t\t\t\t}\n\t\t\t\tthis.trigger(new Rectangle(bounds.x, bounds.y, bounds.width, y + h));\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn FlowLayout;\n\t}(_Layout3.default);\n\t\n\tFlowLayout.DEFAULTS = {\n\t\thgap: 10,\n\t\tvgap: 10\n\t};\n\t\n\texports.default = FlowLayout;\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _bean = __webpack_require__(12);\n\t\n\tvar _bean2 = _interopRequireDefault(_bean);\n\t\n\tvar _Utils = __webpack_require__(2);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _DomUtils = __webpack_require__(7);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _Layout = __webpack_require__(22);\n\t\n\tvar _Layout2 = _interopRequireDefault(_Layout);\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _EventDispatcher = __webpack_require__(13);\n\t\n\tvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\t\n\tvar _GraphBehavior = __webpack_require__(25);\n\t\n\tvar _GraphBehavior2 = _interopRequireDefault(_GraphBehavior);\n\t\n\tvar _SelectionBehavior = __webpack_require__(27);\n\t\n\tvar _SelectionBehavior2 = _interopRequireDefault(_SelectionBehavior);\n\t\n\tvar _Label = __webpack_require__(19);\n\t\n\tvar _Label2 = _interopRequireDefault(_Label);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Renderer = function () {\n\t\tfunction Renderer(id, container) {\n\t\t\tvar config = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\t\t\tvar graph = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];\n\t\n\t\t\t_classCallCheck(this, Renderer);\n\t\n\t\t\tthis.id = id;\n\t\t\tthis.box = _DomUtils2.default.createElement('div', { id: this.id, tabindex: 0, ns: 'graph' }, { overflow: \"hidden\", width: \"100%\", height: \"100%\", position: 'relative' });\n\t\t\tcontainer.appendChild(this.box);\n\t\t\tif (config.layout) {\n\t\t\t\tvar layoutClass = _Utils2.default.getConstructor(config.layout.jsClass, _Layout2.default);\n\t\t\t\tthis.layout = new layoutClass(config.layout.config);\n\t\t\t\tdelete config.layout;\n\t\t\t}\n\t\t\tthis.clear = true;\n\t\t\tthis._translate = [0, 0];\n\t\t\tthis._scale = 1.0;\n\t\t\tthis.graph = graph;\n\t\t\tthis.dispatcher = null;\n\t\t\tthis.graphBehavior = null;\n\t\t\tthis.selectionBehavior = null;\n\t\t\tthis.nodeBehavior = null;\n\t\t\tthis.edgeBehavior = null;\n\t\t\tthis.connectionBehavior = null;\n\t\t\t_Utils2.default.initConfig(this, config);\n\t\n\t\t\t_bean2.default.on(_Label2.default.editor, 'editor.update.*', function (key, value) {\n\t\t\t\tconsole.log(key + '=' + value);\n\t\t\t});\n\t\t}\n\t\n\t\t_createClass(Renderer, [{\n\t\t\tkey: \"viewport\",\n\t\t\tvalue: function viewport(scaled, _viewport) {\n\t\t\t\tif (_lodash2.default.isUndefined(scaled) || _lodash2.default.isNull(scaled)) scaled = false;\n\t\t\t\tif (!_viewport) {\n\t\t\t\t\tvar vp = new _Rectangle2.default(0, 0, this.box.offsetWidth, this.box.offsetHeight);\n\t\t\t\t\tif (scaled) return _Utils2.default.scale(this.translate, this.scale, vp);\n\t\t\t\t\treturn vp;\n\t\t\t\t}\n\t\t\t\tif (!scaled) _viewport = _Utils2.default.scale(this.translate, this.scale, _viewport);\n\t\t\t\tvar w = this.box.offsetWidth;\n\t\t\t\tvar scale = w / _viewport.width;\n\t\t\t\tthis.transform(-_viewport.x * scale, -_viewport.y * scale, scale);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"transform\",\n\t\t\tvalue: function transform() {\n\t\t\t\tvar x = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\t\t\t\tvar y = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\t\t\t\tvar scale = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\t\n\t\t\t\tvar graph = this.graph;\n\t\t\t\tvar root = graph ? graph.currentRoot : null;\n\t\t\t\tif (!_lodash2.default.isNull(x)) {\n\t\t\t\t\tthis._translate[0] = x;\n\t\t\t\t\tif (root) root.viewProp(this.id, 'x', x);\n\t\t\t\t}\n\t\t\t\tif (!_lodash2.default.isNull(y)) {\n\t\t\t\t\tthis._translate[1] = y;\n\t\t\t\t\tif (root) root.viewProp(this.id, 'y', y);\n\t\t\t\t}\n\t\t\t\tif (!_lodash2.default.isNull(scale)) {\n\t\t\t\t\tthis._scale = scale;\n\t\t\t\t\tif (root) root.viewProp(this.id, 'scale', scale);\n\t\t\t\t\t// sync the scale between the dispatcher and the graph\n\t\t\t\t\tvar s = this.dispatcher.scale;\n\t\t\t\t\tif (s != scale) this.dispatcher.scale = scale;\n\t\t\t\t}\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"render\",\n\t\t\tvalue: function render() {\n\t\t\t\tif (!this._graph) return false;\n\t\t\t\tif (this.layout) this.layout.layout(this._graph.currentRoot, this.viewport());\n\t\n\t\t\t\tthis.initializeBehaviors();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderLabel\",\n\t\t\tvalue: function renderLabel(box) {\n\t\t\t\treturn this.constructor.renderLabel(box);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderLink\",\n\t\t\tvalue: function renderLink(shape) {\n\t\t\t\treturn this.constructor.renderLink(shape);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderMarkers\",\n\t\t\tvalue: function renderMarkers(markers) {\n\t\t\t\treturn this.constructor.renderMarkers(markers);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"initializeBehaviors\",\n\t\t\tvalue: function initializeBehaviors() {\n\t\t\t\t// create the event dispatcher if necessary.\n\t\t\t\tif (!this.dispatcher) {\n\t\t\t\t\tthis.dispatcher = new _EventDispatcher2.default(this.box, [this.prop('minZoom'), this.prop('maxZoom')]);\n\t\t\t\t\tvar jsClass = void 0;\n\t\t\t\t\tif (this.prop('graphBehavior')) {\n\t\t\t\t\t\tjsClass = _Utils2.default.getConstructor(this.prop('graphBehavior'));\n\t\t\t\t\t\tthis.graphBehavior = new jsClass(this);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.prop('selectionBehavior')) {\n\t\t\t\t\t\tjsClass = _Utils2.default.getConstructor(this.prop('selectionBehavior'));\n\t\t\t\t\t\tthis.selectionBehavior = new jsClass(this);\n\t\t\t\t\t}\n\t\t\t\t\tthis.dispatcher.register('mouseup.node.label', function (type, ns, target, pos, event) {\n\t\t\t\t\t\tvar _this = this;\n\t\n\t\t\t\t\t\tvar node = this._graph.nodes[target.getAttribute('id')];\n\t\t\t\t\t\tif (!this.dispatcher.dragging && !node._firstSelection) {\n\t\t\t\t\t\t\t_Label2.default._delayEdit = _lodash2.default.delay(function () {\n\t\t\t\t\t\t\t\tif (_Label2.default._delayEdit) {\n\t\t\t\t\t\t\t\t\tdelete _Label2.default._delayEdit;\n\t\t\t\t\t\t\t\t\t_Label2.default.editor.start(node.id, _this.box, node.getLabelBox(_this.id), target, event.nsTarget, _this.scale);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, 250);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.dispatcher.register([/^mousedown/, /^zoom/], function (type, ns, target, pos, event) {\n\t\t\t\t\t\tif (!_DomUtils2.default.eventFromInput(event)) {\n\t\t\t\t\t\t\t_Label2.default.editor.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t\tthis.dispatcher.start();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"refresh\",\n\t\t\tvalue: function refresh() {}\n\t\n\t\t\t/**\n\t   * Get the template for the specified key.\n\t   * @param key\n\t   * @param config if the template is a function, this config will be passed as the argument.\n\t   * @param preprocessor if the template contains preprossing elements, such as #{shape}, the preprocessor will be\n\t   * used to render them.\n\t   * @returns {*}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getTemplate\",\n\t\t\tvalue: function getTemplate(key, config, preprocessor) {\n\t\t\t\tvar t = this.constructor.TEMPLATES[key];\n\t\t\t\tif (t && _lodash2.default.isFunction(t)) {\n\t\t\t\t\tt = t(config);\n\t\t\t\t}\n\t\t\t\t// check if there are any preprocessing tags.\n\t\t\t\tif (preprocessor) {\n\t\t\t\t\tvar parts = t.match(/(#{[^#]*})/g);\n\t\t\t\t\tvar obj = {};\n\t\t\t\t\tfor (var part in parts) {\n\t\t\t\t\t\tpart = parts[part];\n\t\t\t\t\t\tpart = part.substring(2, part.length - 1).trim();\n\t\t\t\t\t\tobj[part] = preprocessor[_lodash2.default.camelCase('render ' + part)](this);\n\t\t\t\t\t}\n\t\t\t\t\tt = _lodash2.default.template(t, { interpolate: /#{([\\s\\S]+?)}/g })(obj);\n\t\t\t\t}\n\t\t\t\treturn t;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"reset\",\n\t\t\tvalue: function reset() {}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\tdelete this._graph;\n\t\t\t\tdelete this.layout;\n\t\t\t\tif (this.dispatcher) {\n\t\t\t\t\tthis.dispatcher.stop();\n\t\t\t\t\tdelete this.dispatcher;\n\t\t\t\t}\n\t\t\t\tthis.box.innerHTML = '';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"graph\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._graph;\n\t\t\t},\n\t\t\tset: function set(graph) {\n\t\t\t\tthis._graph = graph;\n\t\t\t\tvar root = graph.currentRoot;\n\t\t\t\tif (root) {\n\t\t\t\t\tthis._translate = [root.viewProp(this.id, 'x') || 0, root.viewProp(this.id, 'y') || 0];\n\t\t\t\t\tthis._scale = root.viewProp(this.id, 'scale') || 1.0;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"translate\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._translate;\n\t\t\t},\n\t\t\tset: function set(t) {\n\t\t\t\tthis.transform(t[0], t[1]);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"scale\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._scale;\n\t\t\t},\n\t\t\tset: function set(k) {\n\t\t\t\tswitch (k) {\n\t\t\t\t\tcase \"in\":\n\t\t\t\t\t\tk = this.scale * this.prop(\"zoomFactor\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"out\":\n\t\t\t\t\t\tk = this.scale / this.prop(\"zoomFactor\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"actual\":\n\t\t\t\t\t\tk = 1.0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"fit\":\n\t\t\t\t\t\tvar gridSize = this.prop(\"gridSize\") * 2;\n\t\n\t\t\t\t\t\tvar gBounds = this.getBounds();\n\t\t\t\t\t\tvar vBounds = this.viewport();\n\t\n\t\t\t\t\t\tvBounds.width -= gridSize;\n\t\t\t\t\t\tvBounds.height -= gridSize;\n\t\n\t\t\t\t\t\t/* Do not zoom more than actual if graph already fits into the bounds */\n\t\t\t\t\t\tk = Math.min(vBounds.width / gBounds.width, vBounds.height / gBounds.height, 1.0);\n\t\n\t\t\t\t\t\t//TODO: Add centering code here or trigger an event for that\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (_lodash2.default.isString(k)) k = parseFloat(k);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.transform(null, null, k);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Renderer;\n\t}();\n\t\n\tRenderer.DEFAULTS = {\n\t\tdefaultClickMode: \"pan\",\n\t\thideOutline: false,\n\t\tsingleSelect: true,\n\t\tdraggable: true,\n\t\tgridEnabled: false,\n\t\tguidesEnabled: true,\n\t\tgridSize: 30,\n\t\tmaxZoom: 4.0,\n\t\tminZoom: 0.2,\n\t\tzoomFactor: 1.2,\n\t\tmaskOpacity: 0.5,\n\t\tgraphBehavior: _GraphBehavior2.default,\n\t\tselectionBehavior: _SelectionBehavior2.default\n\t};\n\t\n\texports.default = Renderer;\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Behavior2 = __webpack_require__(26);\n\t\n\tvar _Behavior3 = _interopRequireDefault(_Behavior2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by tong on 6/28/2016.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t\n\t/**\n\t * Graph handler handles Panning and Zoom and rubber band selection\n\t */\n\t\n\tvar GraphBehavior = function (_Behavior) {\n\t\t_inherits(GraphBehavior, _Behavior);\n\t\n\t\tfunction GraphBehavior(renderer) {\n\t\t\t_classCallCheck(this, GraphBehavior);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(GraphBehavior).call(this, renderer));\n\t\n\t\t\tvar dispatcher = renderer.dispatcher;\n\t\t\tvar f = function f(type, ns, graph, pos, event) {\n\t\t\t\t//Cursor.updateCursor(type, ns, graph, event);\n\t\t\t};\n\t\t\tdispatcher.register(/^drag.*\\.graph$/, _this.handleDrag, _this);\n\t\t\tdispatcher.register(/^zoom/, _this.handleZoom, _this);\n\t\t\t//dispatcher.register(['mousedown.graph', 'mouseenter.graph', 'mouseleave.graph'], f);\n\t\t\t_this.offset = null;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(GraphBehavior, [{\n\t\t\tkey: \"handleZoom\",\n\t\t\tvalue: function handleZoom(type, ns, graph, pos, event) {\n\t\t\t\tthis.renderer.transform(null, null, event.scale);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"handleDrag\",\n\t\t\tvalue: function handleDrag(type, ns, graph, pos, event) {\n\t\t\t\tif (type == 'dragstart') {\n\t\t\t\t\tvar pan = this.renderer.prop(\"defaultClickMode\") == \"pan\" ^ (event.ctrlKey || event.shiftKey);\n\t\t\t\t\tif (!pan) return;\n\t\t\t\t\tvar t = this.renderer.translate;\n\t\t\t\t\tthis.offset = [t[0] - pos[0], t[1] - pos[1]];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!this.offset) return;\n\t\t\t\tthis.renderer.transform(pos[0] + this.offset[0], pos[1] + this.offset[1]);\n\t\t\t\tif (type == 'dragend') {\n\t\t\t\t\t//Cursor.updateCursor('mouseup', ns, graph, event);\n\t\t\t\t\tdelete this.offset;\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn GraphBehavior;\n\t}(_Behavior3.default);\n\t\n\texports.default = GraphBehavior;\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Behavior = function () {\n\t\tfunction Behavior(renderer) {\n\t\t\t_classCallCheck(this, Behavior);\n\t\n\t\t\tthis.renderer = renderer;\n\t\t}\n\t\n\t\t_createClass(Behavior, [{\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\tdelete this.renderer;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Behavior;\n\t}();\n\t\n\texports.default = Behavior;\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _Rectangle = __webpack_require__(4);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _Cell = __webpack_require__(17);\n\t\n\tvar _Cell2 = _interopRequireDefault(_Cell);\n\t\n\tvar _Behavior2 = __webpack_require__(26);\n\t\n\tvar _Behavior3 = _interopRequireDefault(_Behavior2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar SelectionBehavior = function (_Behavior) {\n\t\t_inherits(SelectionBehavior, _Behavior);\n\t\n\t\tfunction SelectionBehavior(renderer) {\n\t\t\t_classCallCheck(this, SelectionBehavior);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(SelectionBehavior).call(this, renderer));\n\t\n\t\t\tvar dispatcher = renderer.dispatcher;\n\t\t\tdispatcher.register('mousedown.*', _this.selectCell, _this);\n\t\t\tdispatcher.register('mouseup.*', _this.unselectCell, _this);\n\t\t\tdispatcher.register('drag*.graph', _this.handleMultiSelect, _this);\n\t\t\t//graph.on(Graph.EVENT_TYPES.SELECTION_CHANGE, this.updateSelections, this);\n\t\t\t_this.selectedNodes = null;\n\t\t\t_this.selectedLinks = null;\n\t\t\t_this.attachedLinks = null;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(SelectionBehavior, [{\n\t\t\tkey: \"updateSelections\",\n\t\t\tvalue: function updateSelections() {\n\t\t\t\tif (this.selectedNodes) this.selectedNodes.classed('selected', false);\n\t\t\t\tif (this.selectedLinks) this.selectedLinks.classed('selected', false);\n\t\n\t\t\t\tthis.selectedNodes = null;\n\t\t\t\tthis.selectedLinks = null;\n\t\t\t\tthis.attachedLinks = null;\n\t\n\t\t\t\tif (this.graph.selectedVertices && this.graph.selectedVertices.length > 0) {\n\t\t\t\t\tthis.selectedNodes = this.graph.renderer.getShapes(this.graph.selectedVertices);\n\t\t\t\t\tthis.attachedLinks = this.graph.renderer.getShapes(this.graph.getAttachedEdges());\n\t\t\t\t\tthis.selectedNodes.classed('selected', true);\n\t\t\t\t}\n\t\n\t\t\t\tif (this.graph.selectedEdges && this.graph.selectedEdges.length > 0) {\n\t\t\t\t\tthis.selectedLinks = this.graph.renderer.getShapes(this.graph.selectedEdges);\n\t\t\t\t\tthis.selectedLinks.classed('selected', true);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"selectCell\",\n\t\t\tvalue: function selectCell(type, ns, data, pos, event) {\n\t\t\t\tvar cell = data == this.graph ? null : data;\n\t\t\t\tif (cell && !(cell instanceof _Cell2.default)) return;\n\t\t\t\tvar toggle = event.ctrlKey || event.shiftKey;\n\t\t\t\tif (cell && cell instanceof _Cell2.default) {\n\t\t\t\t\tif (!this.graph.isSelected(cell)) delete cell._firstSelection;else cell._firstSelection = true;\n\t\n\t\t\t\t\td3.select(event.dataTarget).moveToFront();\n\t\t\t\t\tthis.graph.setSelection(cell, toggle);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"unselectCell\",\n\t\t\tvalue: function unselectCell(type, ns, data, pos, event) {\n\t\t\t\tvar cell = data == this.graph ? null : data;\n\t\t\t\tif (cell && !(cell instanceof _Cell2.default)) return;\n\t\t\t\tvar ctrlKey = event.ctrlKey || event.shiftKey;\n\t\t\t\tif (!cell) {\n\t\t\t\t\tthis.graph.setSelection(cell, ctrlKey);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"handleMultiSelect\",\n\t\t\tvalue: function handleMultiSelect(type, ns, data, pos, event) {\n\t\t\t\tpos = util.scale(this.graph, pos);\n\t\n\t\t\t\tif (type == 'dragstart') {\n\t\t\t\t\tvar select = this.graph.getProperty(\"defaultClickMode\") == \"select\" ^ (event.ctrlKey || event.shiftKey);\n\t\t\t\t\tif (!select) return;\n\t\t\t\t\tthis.startPt = new Point(pos[0], pos[1]);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!this.startPt) return;\n\t\t\t\tvar rect = _Rectangle2.default.getBoundingRectangle([new Point(pos[0], pos[1]), this.startPt]);\n\t\t\t\tvar renderer = this.graph.renderer;\n\t\t\t\tif (!this.rubberband) {\n\t\t\t\t\tthis.rubberband = d3.select(renderer.appendNode(renderer.getCellLayer(), {\n\t\t\t\t\t\ttemplate: _.template('<g><rect x=\"0\" y=\"0\" width=\"100\" height=\"100\" stroke=\"#000000\" fill=\"none\" stroke-dasharray=\"3 3\"/></g>')\n\t\t\t\t\t}, false));\n\t\t\t\t}\n\t\t\t\tif (type == 'dragend') {\n\t\t\t\t\tvar cells = this.graph.getCurrentRoot().children;\n\t\t\t\t\t// TODO: Define if we want to select vertexes / edges or both\n\t\t\t\t\tcells = _.filter(cells, function (cell) {\n\t\t\t\t\t\tvar box = cell.getBounds();\n\t\t\t\t\t\tif (rect.contains(box)) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t\t// TODO: Set selection\n\t\t\t\t\tthis.graph.setSelection(cells, event.ctrlKey);\n\t\n\t\t\t\t\tthis.rubberband.remove();\n\t\t\t\t\tdelete this.startPt;\n\t\t\t\t\tdelete this.rubberband;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.rubberband.select(\"rect\").attr({ x: rect.x, y: rect.y, width: rect.width, height: rect.height });\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\t_get(Object.getPrototypeOf(SelectionBehavior.prototype), \"destroy\", this).call(this);\n\t\t\t\tdelete this.selectedNodes;\n\t\t\t\tdelete this.selectedLinks;\n\t\t\t\tdelete this.attachedLinks;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn SelectionBehavior;\n\t}(_Behavior3.default);\n\t\n\texports.default = SelectionBehavior;\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _lodash = __webpack_require__(5);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _base = __webpack_require__(1);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tvar _DomUtils = __webpack_require__(7);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _Renderer2 = __webpack_require__(24);\n\t\n\tvar _Renderer3 = _interopRequireDefault(_Renderer2);\n\t\n\tvar _StringBuffer = __webpack_require__(8);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar NS = 'http://www.w3.org/2000/svg';\n\tif (typeof SVGElement != \"undefined\") {\n\t\tvar svg = document.createElementNS(NS, \"svg\");\n\t\tsvg.innerHTML = '<circle/>';\n\t\tif (svg.firstChild !== \"[object SVGCircleElement]\") {\n\t\t\tObject.defineProperties(SVGElement.prototype, {\n\t\t\t\t\"outerHTML\": {\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tget: function get() {\n\t\t\t\t\t\tvar $node, $temp;\n\t\t\t\t\t\t$temp = document.createElement('div');\n\t\t\t\t\t\t$node = this.cloneNode(true);\n\t\t\t\t\t\t$temp.appendChild($node);\n\t\t\t\t\t\treturn $temp.innerHTML;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"innerHTML\": {\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tget: function get() {\n\t\t\t\t\t\tvar s = this.outerHTML;\n\t\t\t\t\t\tvar ropen = new RegExp(\"<\" + this.nodeName + '\\\\b(?:([\"\\'])[^\"]*?(\\\\1)|[^>])*>', \"i\");\n\t\t\t\t\t\tvar rclose = new RegExp(\"<\\/\" + this.nodeName + \">$\", \"i\");\n\t\t\t\t\t\treturn s.replace(ropen, \"\").replace(rclose, \"\");\n\t\t\t\t\t},\n\t\t\t\t\tset: function set(markup) {\n\t\t\t\t\t\t// empty el first.\n\t\t\t\t\t\tvar child = void 0;\n\t\t\t\t\t\twhile (child = this.lastChild) {\n\t\t\t\t\t\t\tthis.removeChild(child);\n\t\t\t\t\t\t}var buf = new _StringBuffer2.default();\n\t\t\t\t\t\tbuf.append('<svg>').append(markup).append('</svg');\n\t\t\t\t\t\tvar $temp = _DomUtils2.default.createElement('div', null, null, buf.toString()).firstElementChild;\n\t\t\t\t\t\twhile ($temp.firstChild) {\n\t\t\t\t\t\t\tthis.appendChild($temp.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// Define the toDataURL for SVG\n\t\tSVGElement.prototype.toDataURL = function (type) {\n\t\t\tvar options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t\t\tvar _svg = this;\n\t\n\t\t\tvar debug = function debug(msg) {};\n\t\n\t\t\tif (options['debug'] == true && typeof console != 'undefined') debug = function debug(msg) {\n\t\t\t\tconsole.log(\"SVG.toDataURL:\", msg);\n\t\t\t};\n\t\n\t\t\tfunction exportSVG() {\n\t\t\t\tvar svg_xml = _svg.outerHTML;\n\t\t\t\tvar svg_dataurl = base64dataURLencode(svg_xml);\n\t\t\t\tdebug(type + \" length: \" + svg_dataurl.length);\n\t\n\t\t\t\t// NOTE double data carrier\n\t\t\t\tif (options.callback) options.callback(svg_dataurl);\n\t\t\t\treturn svg_dataurl;\n\t\t\t}\n\t\n\t\t\tfunction base64dataURLencode(s) {\n\t\t\t\tvar b64 = \"data:image/svg+xml;base64,\";\n\t\n\t\t\t\t// https://developer.mozilla.org/en/DOM/window.btoa\n\t\t\t\tif (window.btoa) {\n\t\t\t\t\tdebug(\"using window.btoa for base64 encoding\");\n\t\t\t\t\tb64 += btoa(s);\n\t\t\t\t} else {\n\t\t\t\t\tdebug(\"using custom base64 encoder\");\n\t\t\t\t\tb64 += _base2.default.encode(s);\n\t\t\t\t}\n\t\n\t\t\t\treturn b64;\n\t\t\t}\n\t\n\t\t\t// Native export doesn't work very well. should use canvg instead.\n\t\t\tfunction exportImage(type) {\n\t\t\t\tvar canvas = document.createElement(\"canvas\");\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\t\n\t\t\t\t// TODO: if (options.keepOutsideViewport), do some translation magic?\n\t\n\t\t\t\tvar svg_img = new Image();\n\t\t\t\tvar svg_xml = _svg.outerHTML;\n\t\t\t\tsvg_img.src = base64dataURLencode(svg_xml);\n\t\n\t\t\t\tsvg_img.onload = function () {\n\t\t\t\t\tdebug(\"exported image size: \" + [svg_img.width, svg_img.height]);\n\t\t\t\t\tcanvas.width = svg_img.width;\n\t\t\t\t\tcanvas.height = svg_img.height;\n\t\t\t\t\tctx.drawImage(svg_img, 0, 0);\n\t\n\t\t\t\t\t// SECURITY_ERR WILL HAPPEN NOW\n\t\t\t\t\tvar image_dataurl = canvas.toDataURL(type);\n\t\t\t\t\tdebug(type + \" length: \" + image_dataurl.length);\n\t\n\t\t\t\t\tif (options.callback) options.callback(image_dataurl);else debug(\"WARNING: no callback set, so nothing happens.\");\n\t\t\t\t};\n\t\n\t\t\t\tsvg_img.onerror = function () {\n\t\t\t\t\tdebug(\"Can't export! Maybe your browser doesn't support \" + \"SVG in img element or SVG input for Canvas drawImage?\\n\" + \"http://en.wikipedia.org/wiki/SVG#Native_support\");\n\t\t\t\t};\n\t\n\t\t\t\t// NOTE: will not return anything\n\t\t\t}\n\t\n\t\t\tfunction exportImageCanvg(type) {\n\t\t\t\tif (!canvg) return null;\n\t\t\t\tvar canvas = _DomUtils2.default.createElement('canvas', null, { display: \"none\" });\n\t\t\t\tdocument.body.appendChild(canvas);\n\t\t\t\tif (type == 'javascript') {\n\t\t\t\t\tvar xcanvas = new jsCanvas('jscanvastest');\n\t\t\t\t\txcanvas.canvas.style.display = 'none';\n\t\t\t\t\t//xcanvas.canvas = canvas;\n\t\t\t\t}\n\t\n\t\t\t\tif (!options.keepOutsideViewport) {\n\t\t\t\t\tcanvg(canvas, _svg.outerHTML);\n\t\t\t\t} else {\n\t\t\t\t\tvar padding = options.padding || 0;\n\t\t\t\t\tvar scale = 1.0;\n\t\t\t\t\tvar translate = [0, 0];\n\t\t\t\t\tvar bbox = _svg.getBBox();\n\t\t\t\t\tdebug(\"detected svg dimensions \" + [bbox.x, bbox.y, bbox.width, bbox.height]);\n\t\t\t\t\tvar transform = _svg.firstElementChild.getAttribute('transform');\n\t\t\t\t\tif (transform) {\n\t\t\t\t\t\tdebug('detected svg transform ' + transform);\n\t\t\t\t\t\ttransform = SVGRenderer.transform(transform);\n\t\t\t\t\t\ttranslate = transform.translate;\n\t\t\t\t\t\tscale = transform.scale;\n\t\t\t\t\t}\n\t\t\t\t\tvar buf = new _StringBuffer2.default();\n\t\t\t\t\tbuf.append('<svg width=\"').append(bbox.width + 2 * padding).append('px\" height=\"').append(bbox.height + 2 * padding).append('px\"><g transform=\"translate(').append(-bbox.x + translate[0] + padding).append(',').append(-bbox.y + translate[1] + padding).append(')scale(').append(scale).append(')\">').append(_svg.firstElementChild.innerHTML).append('</g></svg>');\n\t\t\t\t\tif (type == 'javascript') {\n\t\t\t\t\t\txcanvas.compile(buf.toString(), function () {\n\t\t\t\t\t\t\tif (options.callback) options.callback(xcanvas.toString());\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else canvg(canvas, buf.toString());\n\t\t\t\t}\n\t\t\t\tvar image_dataurl = canvas.toDataURL(type);\n\t\t\t\tif (options.callback) options.callback(image_dataurl);\n\t\t\t\tcanvas.parentNode.removeChild(canvas);\n\t\t\t\treturn image_dataurl;\n\t\t\t}\n\t\n\t\t\tif (!type) type = \"image/svg+xml\";\n\t\n\t\t\tif (options.keepNonSafe) debug(\"NOTE: keepNonSafe is NOT supported and will be ignored!\");\n\t\t\tif (options.keepOutsideViewport) debug(\"NOTE: keepOutsideViewport is only supported with canvg exporter.\");\n\t\n\t\t\tswitch (type) {\n\t\t\t\tcase \"image/svg+xml\":\n\t\t\t\t\treturn exportSVG();\n\t\t\t\tcase \"image/png\":\n\t\t\t\tcase \"image/jpeg\":\n\t\t\t\tcase \"javascript\":\n\t\t\t\t\tif (!options.renderer) {\n\t\t\t\t\t\tif (window.canvg) options.renderer = \"canvg\";else options.renderer = \"native\";\n\t\t\t\t\t}\n\t\t\t\t\tswitch (options.renderer) {\n\t\t\t\t\t\tcase \"canvg\":\n\t\t\t\t\t\t\tdebug(\"using canvg renderer for \" + type + \" image export\");\n\t\t\t\t\t\t\treturn exportImageCanvg(type);\n\t\t\t\t\t\tcase \"native\":\n\t\t\t\t\t\t\tdebug(\"using native renderer for \" + type + \" export. THIS MIGHT FAIL.\");\n\t\t\t\t\t\t\treturn exportImage(type);\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tdebug(\"unknown image renderer given, doing noting (\" + options.renderer + \")\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tdebug(\"Sorry! Exporting as '\" + type + \"' is not supported!\");\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t}\n\t\n\tvar SVGRenderer = function (_Renderer) {\n\t\t_inherits(SVGRenderer, _Renderer);\n\t\n\t\tfunction SVGRenderer() {\n\t\t\t_classCallCheck(this, SVGRenderer);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(SVGRenderer).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(SVGRenderer, [{\n\t\t\tkey: \"render\",\n\t\t\tvalue: function render() {\n\t\t\t\tvar result = _get(Object.getPrototypeOf(SVGRenderer.prototype), \"render\", this).call(this);\n\t\t\t\tif (result) {\n\t\t\t\t\tvar root = this.graph.currentRoot;\n\t\t\t\t\tvar buf = new _StringBuffer2.default('<svg width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">');\n\t\t\t\t\tvar t = this.translate;\n\t\t\t\t\tbuf.append('<g transform=\"translate(').append(t[0]).append(',').append(t[1]).append(')scale(').append(this.scale).append(')\">');\n\t\t\t\t\tbuf.append(this.renderDefs());\n\t\t\t\t\tbuf.append(root.render(this));\n\t\t\t\t\tbuf.append('</g></svg>');\n\t\t\t\t\tthis.box.innerHTML = buf.toString();\n\t\t\t\t\tthis.svg = this.box.firstElementChild;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderDefs\",\n\t\t\tvalue: function renderDefs() {\n\t\t\t\tvar buf = new _StringBuffer2.default('<defs>');\n\t\t\t\tbuf.append(this.getTemplate('Grid', this.prop(\"gridSize\")));\n\t\t\t\tvar markers = this.graph.markers;\n\t\t\t\tif (markers.length > 0) buf.append(SVGRenderer.renderMarkers(markers));\n\t\t\t\tbuf.append('</defs>');\n\t\t\t\treturn buf.toString();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"refresh\",\n\t\t\tvalue: function refresh() {\n\t\t\t\tif (!this.svg) return;\n\t\t\t\tvar g = this.svg.querySelector('g');\n\t\t\t\tvar t = this.translate;\n\t\t\t\tg.setAttribute('transform', 'translate(' + t[0] + ',' + t[1] + ')scale(' + this.scale + ')');\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"renderMarkers\",\n\t\t\tvalue: function renderMarkers(markers) {\n\t\t\t\tvar buf = new _StringBuffer2.default(),\n\t\t\t\t    str1 = void 0,\n\t\t\t\t    str2 = void 0;\n\t\t\t\tmarkers.forEach(function (marker) {\n\t\t\t\t\tstr1 = this.TEMPLATES['Marker'](marker);\n\t\t\t\t\tstr2 = marker.shape;\n\t\t\t\t\tif (!_lodash2.default.isString(str2)) str2 = this.renderShape(str2);\n\t\t\t\t\tstr1 = str1.replace(/\\#\\{shape\\}/, str2);\n\t\t\t\t\tbuf.append(str1);\n\t\t\t\t}, this);\n\t\t\t\treturn buf.toString();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderLabel\",\n\t\t\tvalue: function renderLabel(box) {\n\t\t\t\treturn this.TEMPLATES['Label'](box);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderShape\",\n\t\t\tvalue: function renderShape(shape) {\n\t\t\t\tvar template = this.TEMPLATES[shape.name];\n\t\t\t\tif (_lodash2.default.isString(template)) template = _lodash2.default.template(template);\n\t\t\t\treturn template(shape);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getPathData\",\n\t\t\tvalue: function getPathData(shape) {\n\t\t\t\tvar points = shape.points;\n\t\t\t\tvar controlPts = shape.controlPts;\n\t\t\t\tif (!points || points.length == 0) return '';\n\t\n\t\t\t\tif (!controlPts && shape.round) {\n\t\t\t\t\t// render rounded line joins.\n\t\t\t\t\tvar newPts = [];\n\t\t\t\t\tcontrolPts = [];\n\t\t\t\t\tvar prev = points[0],\n\t\t\t\t\t    next = void 0,\n\t\t\t\t\t    d1 = void 0,\n\t\t\t\t\t    d2 = void 0,\n\t\t\t\t\t    corner = void 0;\n\t\t\t\t\tnewPts.push(prev);\n\t\t\t\t\tfor (var i = 1; i < points.length - 1; i++) {\n\t\t\t\t\t\tnext = points[i];\n\t\t\t\t\t\t// set the control point first.\n\t\t\t\t\t\tcontrolPts[2 * i] = [next, next];\n\t\t\t\t\t\t// check the size of the corner.\n\t\t\t\t\t\td1 = prev.distance(next);\n\t\t\t\t\t\td2 = next.distance(points[i + 1]);\n\t\t\t\t\t\tcorner = Math.min(shape.round, d1 / 2, d2 / 2);\n\t\t\t\t\t\t// split the point into two.\n\t\t\t\t\t\tnewPts.push(next.getDirection(prev).scale(corner).translate(next));\n\t\t\t\t\t\tnewPts.push(next.getDirection(points[i + 1]).scale(corner).translate(next));\n\t\t\t\t\t\tprev = next;\n\t\t\t\t\t}\n\t\t\t\t\tnewPts.push(points[points.length - 1]);\n\t\t\t\t\tpoints = newPts;\n\t\t\t\t}\n\t\t\t\tvar buf = new _StringBuffer2.default('M'),\n\t\t\t\t    point = void 0;\n\t\t\t\tfor (var _i = 0; _i < points.length; _i++) {\n\t\t\t\t\tpoint = points[_i];\n\t\t\t\t\tif (_i == 0) buf.append(point);else {\n\t\t\t\t\t\tif (controlPts && controlPts[_i]) {\n\t\t\t\t\t\t\tbuf.append(' C ');\n\t\t\t\t\t\t\tfor (var j = 0; j < controlPts[_i].length; j++) {\n\t\t\t\t\t\t\t\tbuf.append(controlPts[_i][j]).append(' ');\n\t\t\t\t\t\t\t}buf.append(point);\n\t\t\t\t\t\t} else buf.append(' L ').append(point);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn buf.toString();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderLink\",\n\t\t\tvalue: function renderLink(shape) {\n\t\t\t\tvar buf = new _StringBuffer2.default();\n\t\t\t\tvar d = SVGRenderer.getPathData(shape);\n\t\t\t\tif (shape.showGauge) buf.append('<path style=\"stroke: white; stroke-width: 9; visibility: hidden; pointer-events: stroke;\" d=\"').append(d).append('\"/>');\n\t\t\t\tbuf.append('<path d=\"').append(d).append('\"');\n\t\t\t\tif (shape.startMarker || shape.endMarker) {\n\t\t\t\t\tbuf.append(' style=\"');\n\t\t\t\t\tif (shape.startMarker) buf.append('marker-start: url(#').append(_lodash2.default.isString(shape.startMarker) ? shape.startMarker : shape.startMarker.id).append(');');\n\t\t\t\t\tif (shape.endMarker) buf.append('marker-end: url(#').append(_lodash2.default.isString(shape.endMarker) ? shape.endMarker : shape.endMarker.id).append(');');\n\t\t\t\t\tbuf.append('\"');\n\t\t\t\t}\n\t\t\t\tbuf.append('/>');\n\t\t\t\treturn buf.toString();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"appendContent\",\n\t\t\tvalue: function appendContent(el, content) {\n\t\t\t\tvar buf = new _StringBuffer2.default();\n\t\t\t\tbuf.append('<svg>').append(content).append('</svg');\n\t\t\t\tvar temp = _DomUtils2.default.createElement('div', null, null, buf.toString()).firstElementChild;\n\t\n\t\t\t\twhile (temp.firstChild) {\n\t\t\t\t\tel.appendChild(temp.firstChild);\n\t\t\t\t}return el;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"transform\",\n\t\t\tvalue: function transform(_transform) {\n\t\t\t\tvar translate = [0, 0],\n\t\t\t\t    scale = 1.0;\n\t\t\t\t//\n\t\t\t\tvar parts = _transform.match(/translate\\(\\s*([^)]+)/);\n\t\t\t\tif (parts) {\n\t\t\t\t\tvar m = parts[1].trim().match(/([\\d.-]+)[ ,]([\\d.-]+)/);\n\t\t\t\t\tif (m) {\n\t\t\t\t\t\ttranslate[0] = parseFloat(m[1]) || 0;\n\t\t\t\t\t\ttranslate[1] = parseFloat(m[2]) || 0;\n\t\t\t\t\t} else translate[0] = translate[1] = parseFloat(parts[1]);\n\t\t\t\t}\n\t\t\t\tparts = _transform.match(/scale\\(\\s*([^)]+)/);\n\t\t\t\tif (parts) scale = parseFloat(parts[1]) || 1.0;\n\t\n\t\t\t\treturn { translate: translate, scale: scale };\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn SVGRenderer;\n\t}(_Renderer3.default);\n\t\n\tSVGRenderer.TEMPLATES = {\n\t\t$root: '<g id=\"${id}\" class=\"${className}\">#{children}</g>',\n\t\t$node: '<g id=\"${id}\" class=\"${className}\" style=\"${style}\" ns=\"${namespace}\" transform=\"translate(${x},${y})\">#{shape}#{label}</g>',\n\t\t$edge: '<g id=\"${id}\" class=\"${className}\" style=\"${style}\" ns=\"${namespace}\">#{shape}#{label}</g>',\n\t\tEllipse: '<ellipse cx=\"0\" cy=\"0\" rx=\"${width/2}\" ry=\"${height/2}\"/>',\n\t\tRectangle: '<rect x=\"${-width/2}\" y=\"${-height/2}\" width=\"${width}\" height=\"${height}\" rx=\"9\" ry=\"9\"/>',\n\t\tTriangle: '<polygon points=\"${-width/2},${-height/2} ${width/2},${-height/2} 0,${height/2}\"/>',\n\t\tRhombus: '<polygon points=\"0,${-height/2} ${width/2},0 0,${height/2} ${-width/2},0\"/>',\n\t\tHexagon: function Hexagon(config) {\n\t\t\tvar vertical = config.direction == 'north' || config.direction == 'south';\n\t\t\tif (vertical) return '<polygon points=\"0,${-height/2} ${width/2},${-height/4} ${width/2},${height/4} 0,${height/2} ${-width/2},${height/4} ${-width/2},${-height/4}\"/>';else return '<polygon points=\"${-width/2},0 ${width/4},${-height/2} ${width/4},${-height/2} ${width/2},0 ${width/4},${height/2} ${-width/4},${height/2}\"/>';\n\t\t},\n\t\tPolygon: function Polygon(shape) {\n\t\t\tvar buf = new _StringBuffer2.default('<polygon points=\"');\n\t\t\tshape.points.forEach(function (pt) {\n\t\t\t\tbuf.append(pt[0]).append(',').append(pt[1]).append(' ');\n\t\t\t});\n\t\t\tbuf.removeLast();\n\t\t\tbuf.append('\"/>');\n\t\t\treturn buf.toString();\n\t\t},\n\t\tImage: function Image(config) {\n\t\t\treturn '<image x=\"${-width/2}\" y=\"${-height/2}\" width=\"${width}\" height=\"${height}\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"' + config.image + '\"/>';\n\t\t},\n\t\tMarker: function Marker(marker) {\n\t\t\treturn (\"\\n<marker id=\\\"\" + marker.id + \"\\\" markerWidth=\\\"\" + marker.size + \"\\\" markerHeight=\\\"\" + marker.size + \"\\\" refx=\\\"\" + marker.ref[0] + \"\\\" \\nrefy=\\\"\" + marker.ref[1] + \"\\\" orient=\\\"auto\\\" viewbox=\\\"\" + marker.viewBox.x + \" \" + marker.viewBox.y + \" \" + marker.viewBox.width + \" \" + marker.viewBox.height + \"\\\"\\nmarkerUnits=\\\"userSpaceOnUse\\\" \" + (marker.fill ? \"style=\\\"stroke: \" + marker.fill + \";fill:\" + marker.fill + \"\\\"\" : '') + \">#{shape}</marker>\\n\").trim();\n\t\t},\n\t\tGrid: function Grid(size) {\n\t\t\treturn (\"\\n<pattern id=\\\"GridPattern\\\" width=\\\"\" + size + \"\\\" height=\\\"\" + size + \"\\\" patternUnits=\\\"userSpaceOnUse\\\">\\n\\t<ellipse cx=\\\"0\\\" cy=\\\"0\\\" rx=\\\"1\\\" ry=\\\"1\\\" fill=\\\"#999999\\\"/>\\n\\t<ellipse cx=\\\"0\\\" cy=\\\"\" + size + \"\\\" rx=\\\"1\\\" ry=\\\"1\\\" fill=\\\"#999999\\\"/>\\n\\t<ellipse cx=\\\"\" + size + \"\\\" cy=\\\"0\\\" rx=\\\"1\\\" ry=\\\"1\\\" fill=\\\"#999999\\\"/>\\n\\t<ellipse cx=\\\"\" + size + \"\\\" cy=\\\"\" + size + \"\\\" rx=\\\"1\\\" ry=\\\"1\\\" fill=\\\"#999999\\\"/>\\n</pattern>\").trim();\n\t\t},\n\t\tLabel: _lodash2.default.template(\"\\n<% var box = _.has(data, \\\"dx\\\") ? data : (data.getLabelBox ? data.getLabelBox() : null); \\n   if (box) {%>\\n\\t<g <% if (box.config && box.config.class) {%>class=\\\"<%=box.config.class%>\\\"<%}%>\\t\\t<% if (box.config && box.config.ns) {%>ns=\\\"<%=box.config.ns%>\\\"<%}%>\\t\\t<% if (box.config && box.config.inlineStyle) {%>\\t\\t\\tfont-size=\\\"<%=box.config.fontSize%>\\\"\\t\\t\\tfont-family=\\\"<%=box.config.fontFamily%>\\\"\\t\\t\\tfont-weight=\\\"<% if (box.bold) {%>bold<%} else {%>normal<%}%>\\\"\\t\\t\\t<% if (box.underline) {%>text-decoration=\\\"underline\\\"<%}%>\\t\\t\\t<% if (box.italic) {%>font-style=\\\"italic\\\"<%}%>\\t\\t<%}%>\\t\\ttext-anchor=\\\"<%=box.anchor%>\\\"\\t\\ttransform=\\\"translate(<%=box.bounds.x%>,<%=box.bounds.y%>)<% if (box.config && box.config.rotation) {%>rotate(<%=box.config.rotation%> <%=box.pivot[0]%> <%=box.pivot[1]%>)<%}%>\\\">\\n\\t<% if (box.config.backgroundStyle) {%>\\n\\t\\t<rect x=\\\"<%=-box.bounds.width/2%>\\\" y=\\\"<%=-box.bounds.height/2%>\\\" width=\\\"<%=box.bounds.width%>\\\" height=\\\"<%=box.bounds.height%>\\\" style=\\\"<%=box.config.backgroundStyle%>\\\"/>\\n\\t<% } if (_.isArray(box.label)) { \\n\\t\\t_.each(box.label, function(value, line) {%>\\n\\t\\t\\t<text <% if (box.config && box.config.textStyle) {%>style=\\\"<%=box.config.textStyle%>\\\"<%}%>\\t\\t\\t\\tdx=\\\"<%=box.dx%>\\\" dy=\\\"<%=box.dy + box.lineHeight * line%>\\\"><%=value%></text>\\n\\t\\t<%});} else { %>\\n\\t\\t\\t<text><%=box.label%></text>\\n\\t\\t<%}%>\\n\\t\\t<% if (box.config.title) {%>\\n\\t\\t\\t<title><%=box.config.title%></title>\\n\\t\\t<%}%>\\n\\t</g>\\n<%}%>\\n\".trim(), { variable: \"data\" }) //TODO add more inline text styles.\n\t};\n\t\n\texports.default = SVGRenderer;\n\n/***/ }\n/******/ ])\n});\n;\n"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3d3198c62e0845f10ff8\n **/","import Base64 from \"./util/base64\";\nimport Cache from \"./util/Utils\";\nimport Utils from \"./util/Utils\";\nimport DomUtils from \"./util/DomUtils\";\nimport StringBuffer from \"./util/StringBuffer\";\nimport Point from \"./geometry/Point\";\nimport Line from \"./geometry/Line\";\nimport Shape from \"./geometry/Shape\";\nimport Rectangle from \"./geometry/Rectangle\";\nimport Ellipse from \"./geometry/Ellipse\";\nimport Link from \"./geometry/Link\";\nimport Events from \"bean\";\nimport EventDispatcher from \"./event/EventDispatcher\";\nimport Graph from \"./graph/Graph\";\nimport Cell from \"./graph/Cell\";\nimport Node from \"./graph/Node\";\nimport Edge from \"./graph/Edge\";\nimport Layout from \"./layout/Layout\";\nimport FlowLayout from \"./layout/FlowLayout\";\nimport Label from \"./view/Label\";\nimport Marker from \"./view/Marker\";\nimport Renderer from \"./view/Renderer\";\nimport SVGRenderer from \"./view/SVGRenderer\";\nimport GraphBehavior from \"./behavior/GraphBehavior\";\nimport SelectionBehavior from \"./behavior/SelectionBehavior\";\n\nShape.addShape(\"Rectangle\", Rectangle);\nShape.addShape(\"Ellipse\", Ellipse);\n\nexport default {\n\tEvents,\n\tBase64,\n\tCache,\n\tUtils,\n\tDomUtils,\n\tStringBuffer,\n\tPoint,\n\tLine,\n\tShape,\n\tRectangle,\n\tEllipse,\n\tLink,\n\tEventDispatcher,\n\tLabel,\n\tMarker,\n\tGraph,\n\tCell,\n\tNode,\n\tEdge,\n\tLayout,\n\tFlowLayout,\n\tRenderer,\n\tSVGRenderer,\n\tGraphBehavior,\n\tSelectionBehavior\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","// http://www.webtoolkit.info/javascript-base64.html\n\nvar Base64 = {\n\n\t// private property\n\t_keyStr : \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n\n\t// public method for encoding\n\tencode : function (input) {\n\t\tvar output = \"\";\n\t\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n\t\tvar i = 0;\n\n\t\tinput = Base64._utf8_encode(input);\n\n\t\twhile (i < input.length) {\n\n\t\t\tchr1 = input.charCodeAt(i++);\n\t\t\tchr2 = input.charCodeAt(i++);\n\t\t\tchr3 = input.charCodeAt(i++);\n\n\t\t\tenc1 = chr1 >> 2;\n\t\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n\t\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n\t\t\tenc4 = chr3 & 63;\n\n\t\t\tif (isNaN(chr2)) {\n\t\t\t\tenc3 = enc4 = 64;\n\t\t\t} else if (isNaN(chr3)) {\n\t\t\t\tenc4 = 64;\n\t\t\t}\n\n\t\t\toutput = output +\n\t\t\tthis._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\n\t\t\tthis._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\n\n\t\t}\n\n\t\treturn output;\n\t},\n\n\t// public method for decoding\n\tdecode : function (input) {\n\t\tvar output = \"\";\n\t\tvar chr1, chr2, chr3;\n\t\tvar enc1, enc2, enc3, enc4;\n\t\tvar i = 0;\n\n\t\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n\t\twhile (i < input.length) {\n\n\t\t\tenc1 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\tenc2 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\tenc3 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\tenc4 = this._keyStr.indexOf(input.charAt(i++));\n\n\t\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\n\t\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n\t\t\tchr3 = ((enc3 & 3) << 6) | enc4;\n\n\t\t\toutput = output + String.fromCharCode(chr1);\n\n\t\t\tif (enc3 != 64) {\n\t\t\t\toutput = output + String.fromCharCode(chr2);\n\t\t\t}\n\t\t\tif (enc4 != 64) {\n\t\t\t\toutput = output + String.fromCharCode(chr3);\n\t\t\t}\n\n\t\t}\n\n\t\toutput = Base64._utf8_decode(output);\n\n\t\treturn output;\n\n\t},\n\n\t// private method for UTF-8 encoding\n\t_utf8_encode : function (string) {\n\t\tstring = string.replace(/\\r\\n/g,\"\\n\");\n\t\tvar utftext = \"\";\n\n\t\tfor (var n = 0; n < string.length; n++) {\n\n\t\t\tvar c = string.charCodeAt(n);\n\n\t\t\tif (c < 128) {\n\t\t\t\tutftext += String.fromCharCode(c);\n\t\t\t}\n\t\t\telse if((c > 127) && (c < 2048)) {\n\t\t\t\tutftext += String.fromCharCode((c >> 6) | 192);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tutftext += String.fromCharCode((c >> 12) | 224);\n\t\t\t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t}\n\n\t\t}\n\n\t\treturn utftext;\n\t},\n\n\t// private method for UTF-8 decoding\n\t_utf8_decode : function (utftext) {\n\t\tvar string = \"\";\n\t\tvar i = 0;\n\t\tvar c = c1 = c2 = 0;\n\n\t\twhile ( i < utftext.length ) {\n\n\t\t\tc = utftext.charCodeAt(i);\n\n\t\t\tif (c < 128) {\n\t\t\t\tstring += String.fromCharCode(c);\n\t\t\t\ti++;\n\t\t\t}\n\t\t\telse if((c > 191) && (c < 224)) {\n\t\t\t\tc2 = utftext.charCodeAt(i+1);\n\t\t\t\tstring += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n\t\t\t\ti += 2;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tc2 = utftext.charCodeAt(i+1);\n\t\t\t\tc3 = utftext.charCodeAt(i+2);\n\t\t\t\tstring += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n\t\t\t\ti += 3;\n\t\t\t}\n\n\t\t}\n\n\t\treturn string;\n\t}\n\n};\n\nexport default Base64;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/base64.js\n **/","import Point from \"../geometry/Point\";\nimport Rectangle from \"../geometry/Rectangle\";\n\n// bean requires the existence of window\nif (typeof window === 'undefined' && typeof global !== 'undefined') {\n\tglobal.window = { addEventHandler: function() {} };\n\tglobal.document = {};\n\tglobal.navigator = {};\n}\n\n// util variables\nlet _debugging = [], _debugAll = false, typeRegistry = {}, splice = Array.splice;\n\n/**\n * Utility functions\n */\nexport default {\n\ttype: function (namespace, name, type) {\n\t\tif (!typeRegistry[namespace])\n\t\t\ttypeRegistry[namespace] = new Map();\n\t\tif (!name)\n\t\t\treturn typeRegistry[namespace];\n\t\tif (!type)\n\t\t\treturn typeRegistry[namespace].get(name);\n\t\ttypeRegistry[namespace].set(name, type);\n\t},\n\n\tcreateType: function (namespace, props, defaultType) {\n\t\tlet name = props.name;\n\n\t\t// first check if type exists\n\t\tlet type = this.type(namespace, name);\n\t\tif (!type) {\n\t\t\tlet extend = props.extends ? this.type(namespace, props.extends) : null;\n\t\t\tif (!extend && defaultType)\n\t\t\t\textend = defaultType;\n\t\t\tif (extend)\n\t\t\t\ttype = class extends extend {\n\t\t\t\t};\n\t\t\telse {\n\t\t\t\ttype = class {\n\t\t\t\t\tconstructor(config) {\n\t\t\t\t\t\t_.assign(this, config);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\tdelete props.name;\n\t\t\tdelete props.extends;\n\t\t\t_.assign(type.prototype, props);\n\t\t\ttype.typeName = name;\n\t\t\tthis.type(namespace, name, type);\n\t\t\tthis.log('Utils', 'Utils.createType - ' + namespace + '.' + name);\n\t\t}\n\t\treturn type;\n\t},\n\n\tbuildTypes: function (types, namespace, defaultType) {\n\t\tthis.log('Utils', 'Utils.buildTypes - ' + namespace);\n\n\t\tif (!types && defaultType) {\n\t\t\tthis.createType(namespace, defaultType);\n\t\t\tthis.log('Utils', 'Utils.buildTypes end');\n\t\t\treturn;\n\t\t}\n\t\tif (defaultType) {\n\t\t\tlet type = _.remove(types, {name: defaultType.name});\n\t\t\ttype = type.length > 0 ? type[0] : null;\n\t\t\tif (type)\n\t\t\t\tdefaultType = this.createType(namespace, _.defaultsDeep(type, defaultType));\n\t\t\telse\n\t\t\t\tdefaultType = this.createType(namespace, defaultType);\n\t\t}\n\n\t\t_.forEach(types, (type) => {\n\t\t\tthis.createType(namespace, type, defaultType);\n\t\t});\n\t\tthis.log('Utils', 'Utils.buildTypes end');\n\t},\n\n\t// Helper function to correctly set up the prototype chain, for subclasses.\n\t// Similar to `goog.inherits`, but uses a hash of prototype properties and\n\t// class properties to be extended.\n\textend: function (child, parent, protoProps, staticProps) {\n\t\t// Add static properties to the constructor function, if supplied.\n\t\t_.extend(child, parent, staticProps);\n\n\t\t// Set the prototype chain to inherit from `parent`, without calling\n\t\t// `parent`'s constructor function.\n\t\tvar Surrogate = function () {\n\t\t\tthis.constructor = child;\n\t\t};\n\t\tSurrogate.prototype = parent.prototype;\n\t\tchild.prototype = new Surrogate;\n\n\t\t// Add prototype properties (instance properties) to the subclass,\n\t\t// if supplied.\n\t\tif (protoProps) _.extend(child.prototype, protoProps);\n\n\t\t// Set a convenience property in case the parent's prototype is needed later.\n\t\tchild.superclass = parent.prototype;\n\n\t\treturn child;\n\t},\n\n\tinitConfig: function (obj, config) {\n\t\tlet props = {}, c = obj.constructor, cArr = [c];\n\t\twhile (c) {\n\t\t\tif (c.super) {\n\t\t\t\tc = c.super.constructor;\n\t\t\t\tsplice.apply(cArr, [0, 0, c]);\n\t\t\t} else\n\t\t\t\tc = null;\n\t\t}\n\n\t\tfor (let i = 0; i < cArr.length; i++) {\n\t\t\tc = cArr[i];\n\t\t\tif (c.DEFAULTS)\n\t\t\t\t_.assign(props, c.DEFAULTS);\n\t\t}\n\t\tobj.props = _.assign(props, config);\n\t\tc.prototype.prop = function (name, value) {\n\t\t\tif (!value)\n\t\t\t\treturn this.props[name];\n\t\t\tthis.props[name] = value;\n\t\t};\n\t},\n\n\t/**\n\t * Gets the JS class constructor.\n\t * @param {Object} jsClass\n\t * @param {Object} defaultClass\n\t */\n\tgetConstructor: function (jsClass, defaultClass) {\n\t\tif (!jsClass)\n\t\t\tjsClass = defaultClass;\n\n\t\tif (_.isString(jsClass))\n\t\t\tjsClass = eval(jsClass);\n\t\treturn jsClass;\n\t},\n\n\tdebug: function (moduleName) {\n\t\tif (moduleName) {\n\t\t\t_debugging.push(moduleName);\n\t\t} else {\n\t\t\t_debugAll = true;\n\t\t}\n\t},\n\n\tlog: function (name, message) {\n\t\tif (!window.console) {\n\t\t\treturn;\n\t\t}\n\t\tvar debug = _debugAll;\n\t\tif (!_debugAll) {\n\t\t\tdebug = false;\n\t\t\tfor (var i = 0; i < _debugging.length; i++) {\n\t\t\t\tif (_debugging[i] == name) debug = true;\n\t\t\t}\n\t\t}\n\t\tif (!debug) {\n\t\t\treturn;\n\t\t}\n\t\twhile (name.length < 10) {\n\t\t\tname = name + ' ';\n\t\t}\n\t\tname = name.substring(0, 10) + \" - \";\n\t\tconsole.info(name, message);\n\t},\n\n\t/**\n\t * Get the relative position of sub shapes within a parent share.\n\t * @param bounds\n\t * @param geometry The geometry information, the format of Geometry is:\n\t * {\n\t *      x: \"x coordinate of ref point, if less than 1, will be treated as the percentage of the parent width.\",\n\t *      y: \"y coordinate of ref point.\",\n\t *      anchorX: \"x pos of child relative to the ref point\",\n\t *      anchorY: \"y pos of child relative to the ref point\",\n\t *      offsetX: \"the offset in the x direction.\",\n\t *      offsetY: \"the offset in the y direction.\",\n\t *      width: \"the width of the child element\",\n\t *      height: \"the height of the child element\"\n\t * }\n\t * @returns {*[]}\n\t */\n\tgetRelativePosition: function (bounds, geometry) {\n\t\tlet x = Math.abs(geometry.x) <= 1 ? bounds.width * geometry.x : geometry.x;\n\t\tlet y = Math.abs(geometry.y) <= 1 ? bounds.height * geometry.y : geometry.y;\n\t\treturn this.offsetPosition([x, y], geometry);\n\t},\n\n\toffsetPosition: function (pos, geometry) {\n\t\treturn [pos[0] + geometry.width * geometry.anchorX + geometry.offsetX, pos[1] + geometry.height * geometry.anchorY + geometry.offsetY];\n\t},\n\n\t/**\n\t * Get the position relative to the graph that's unscaled, i.e., absolute position without considering translation and scale.\n\t * @param t the current translate\n\t * @param scale the current scale\n\t * @param o can be either a Point or a Rectangle or a Point array.\n\t */\n\tunscale: function (t, scale, o) {\n\t\tif (o instanceof Rectangle)\n\t\t\treturn new Rectangle(o.x * scale + t[0], o.y * scale + t[1], o.width * scale, o.height * scale);\n\t\telse if (o instanceof Point)\n\t\t\treturn new Point(o.x * scale + t[0], o.y * scale + t[1]);\n\t\telse\n\t\t\treturn [o[0] * scale + t[0], o[1] * scale + t[1]];\n\t},\n\n\t/**\n\t * Get the position relative to the graph that's scaled, i.e., relative position considering translation and scale.\n\t * @param t the current translation\n\t * @param scale the current scale\n\t * @param o can be either a Point or a Rectangle or a Point array.\n\t */\n\tscale: function (t, scale, o) {\n\t\tif (o instanceof Rectangle)\n\t\t\treturn new Rectangle((o.x - t[0]) / scale, (o.y - t[1]) / scale, o.width / scale, o.height / scale);\n\t\telse if (o instanceof Point)\n\t\t\treturn new Point((o.x - t[0]) / scale, (o.y - t[1]) / scale);\n\t\telse\n\t\t\treturn [(o[0] - t[0]) / scale, (o[1] - t[1]) / scale];\n\t},\n\n\t/**\n\t * Convenience method.\n\t */\n\tgetProperty: function (obj, prop) {\n\t\tif (!obj)\n\t\t\treturn null;\n\t\tif (_.has(obj, prop))\n\t\t\treturn obj[prop];\n\t\tif (obj.prop && _.isFunction(obj.prop))\n\t\t\treturn obj.prop(prop);\n\t\treturn null;\n\t}\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/Utils.js\n **/","class Point {\n\tconstructor(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\t/**\n\t * Make a clone of this point\n\t */\n\tclone() {\n\t\treturn new Point(this.x, this.y);\n\t}\n\n\t/**\n\t * Calculate the distance from this pt to the other pt.\n\t * @param aPt\n\t * @returns {number}\n\t */\n\tdistance(aPt) {\n\t\treturn Math.sqrt((this.x - aPt.x) * (this.x - aPt.x) + (this.y - aPt.y) * (this.y - aPt.y));\n\t}\n\n\t/**\n\t * Translate this point\n \t */\n\ttranslate(p2) {\n\t\tthis.x += p2.x;\n\t\tthis.y += p2.y;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Scale this vector\n \t */\n\tscale(scale) {\n\t\tthis.x *= scale;\n\t\tthis.y *= scale;\n\t\treturn this;\n\t}\n\n\tgetScaled(scale) {\n\t\treturn new Point(this.x * scale, this.y * scale);\n\t}\n\n\tgetTranslated(p2) {\n\t\treturn new Point(this.x + p2.x, this.y + p2.y);\n\t}\n\n\t/**\n\t * Get the direction vector from this point to p2.\n\t * @param p2\n\t * @returns {Point}\n\t */\n\tgetDirection(p2) {\n\t\tvar dist = this.distance(p2);\n\t\treturn new Point((p2.x - this.x) / dist, (p2.y - this.y) / dist);\n\t}\n\n\t/**\n\t * rotate the point about the origin. With the specified angle.\n\t * @param angle the angle to rotate\n\t */\n\trotate(angle) {\n\t\tvar cos = Math.cos(angle * Math.PI / 180);\n\t\tvar sin = Math.sin(angle * Math.PI / 180);\n\t\tvar x = this.x, y = this.y;\n\t\tthis.x = x * cos - y * sin;\n\t\tthis.y = x * sin + y * cos;\n\t\treturn this;\n\t}\n\n\tgetRotated(angle) {\n\t\treturn this.clone().rotate(angle);\n\t}\n\n\t/**\n\t * Calculate the dot product, treating this and p2 as vectors.\n\t */\n\tdotProduct(p2) {\n\t\treturn this.x * p2.x + this.y * p2.y;\n\t}\n\n\t/**\n\t * Get the mid point between this and p2.\n \t */\n\tgetMidPoint(p2) {\n\t\treturn new Point((this.x + p2.x) / 2, (this.y + p2.y) / 2);\n\t}\n\n\treverse() {\n\t\tthis.x = -this.x;\n\t\tthis.y = -this.y;\n\t\treturn this;\n\t}\n\n\tequals(p2) {\n\t\tif (!p2 || p2.constructor != Point) return false;\n\n\t\treturn (this.x == p2.x && this.y == p2.y);\n\t}\n\n\t/**\n\t * Reflect this point w.r.t. the rectangle.\n\t * If vertical is true, it will reflect the point cross the vertical\n\t * central line of the rectangle, otherwise reflect cross the horizontal\n\t * central line.\n\t *\n\t * @param rect the rectangle\n\t * @param vertical whether is vertical reflection or horizontal reflection.\n\t */\n\treflect(rect, vertical) {\n\t\tif (vertical)\n\t\t\tthis.x = 2 * rect.x - this.x;\n\t\telse\n\t\t\tthis.y = 2 * rect.y - this.y;\n\t\treturn this;\n\t}\n\n\ttoString() {\n\t\treturn this.x + \",\" + this.y;\n\t}\n}\n\nPoint.W = new Point(-1, 0);\nPoint.N = new Point(0, -1);\nPoint.S = new Point(0, 1);\nPoint.E = new Point(1, 0);\nPoint.NE = new Point(1, -1);\nPoint.NW = new Point(-1, -1);\nPoint.SE = new Point(1, 1);\nPoint.SW = new Point(-1, 1);\n\nexport default Point;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Point.js\n **/","import _ from \"lodash\";\r\nimport Point from \"./Point\";\r\nimport Shape from \"./Shape\";\r\n\r\nexport default class Rectangle extends Shape {\r\n\t/**\r\n\t * Checks whether this rectangle contains a given point of a given rectangle\r\n\t */\r\n\tcontains(el) {\r\n\t\tlet w = el.width || 0;\r\n\t\tlet h = el.height || 0;\r\n\t\tlet left = el.x - w/2;\r\n\t\tlet right = el.x + w/2;\r\n\t\tlet top = el.y - h/2;\r\n\t\tlet bottom = el.y + h/2;\r\n\t\treturn (right <= this.right) && (left >= this.left) &&\r\n\t\t\t(top >= this.top) && (bottom <= this.bottom);\r\n\t}\r\n\r\n\t/**\r\n\t * Calcualte the distance to a point. 0 if this rectangle contains the point.\r\n\t */\r\n\tdistance(pt) {\r\n\t\tif (this.contains(pt)) return 0;\r\n\r\n\t\tif (pt.x < this.left) {\r\n\t\t\tif (pt.y < this.top)\r\n\t\t\t\treturn pt.distance(new Point(this.left, this.top));\r\n\t\t\tif (pt.y <= this.bottom)\r\n\t\t\t\treturn this.left - pt.x;\r\n\t\t\treturn pt.distance(new Point(this.left, this.bottom));\r\n\t\t}\r\n\t\tif (pt.x <= this.right) {\r\n\t\t\tif (pt.y <= this.top)\r\n\t\t\t\treturn this.top - pt.y;\r\n\t\t\treturn pt.y - this.bottom;\r\n\t\t}\r\n\t\tif (pt.y < this.top)\r\n\t\t\treturn pt.distance(new Point(this.right, this.top));\r\n\t\tif (pt.y <= this.bottom)\r\n\t\t\treturn pt.x - this.right;\r\n\t\treturn pt.distance(new Point(this.right, this.bottom));\r\n\t}\r\n\r\n\t/**\r\n\t * Given two points, we want to detect whether the line joining the pts intersect\r\n\t * with the rectangle or not. We assume only horizontal or vertical line segments.\r\n\t *\r\n\t * @return int the side of the intersection: -1: no intersection, 0: left, 1: top, 2: right, 3: bottom, 4: containment.\r\n\t */\r\n\tdetectIntersection(pt1, pt2) {\r\n\t\tlet horizontal = pt1.y == pt2.y;\r\n\t\tlet contains1 = this.contains(pt1);\r\n\t\tlet contains2 = this.contains(pt2);\r\n\t\tif (contains1 && contains2) return 4;\r\n\t\tif (!contains1 && !contains2) {\r\n\t\t\tif (horizontal && (pt1.y >= this.top && pt1.y <= this.bottom)) {\r\n\t\t\t\tif (pt1.x < this.left && pt2.x > this.right)\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\tif (pt1.x > this.right && pt2.x < this.left)\r\n\t\t\t\t\treturn 2;\r\n\t\t\t}\r\n\t\t\tif (!horizontal && (pt1.x >= this.left && pt1.x <= this.right)) {\r\n\t\t\t\tif (pt1.y < this.top && pt2.y > this.bottom)\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\tif (pt1.y > this.bottom && pt2.y < this.top)\r\n\t\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tlet outPt = contains1 ? pt2 : pt1;\r\n\t\tif (horizontal) {\r\n\t\t\tif (outPt.x > this.right)\r\n\t\t\t\treturn 2;\r\n\t\t\treturn 0;\r\n\t\t} else {\r\n\t\t\tif (outPt.y < this.top)\r\n\t\t\t\treturn 1;\r\n\t\t\treturn 3;\r\n\t\t}\r\n\t}\r\n\r\n\ttoString() {\r\n\t\treturn 'Rectangle:{x=' + this.x + ';y=' + this.y + ';width=' + this.width + ';height=' + this.height + '}';\r\n\t}\r\n\r\n\tstatic getPerimeter(rect, pt, orthogonal = false) {\r\n\t\tlet x = rect.x;\r\n\t\tlet y = rect.y;\r\n\t\tlet dx = pt.x - x;\r\n\t\tlet dy = pt.y - y;\r\n\t\tlet alpha = Math.atan2(dy, dx);\r\n\t\tlet p = new Point(0, 0);\r\n\t\tlet pi = Math.PI;\r\n\t\tlet pi2 = Math.PI/2;\r\n\t\tlet beta = pi2 - alpha;\r\n\t\tlet t = Math.atan2(rect.height, rect.width);\r\n\r\n\t\tif (alpha < -pi + t || alpha > pi - t) {\r\n\t\t\t// Left edge\r\n\t\t\tp.x = rect.left;\r\n\t\t\tp.y = y - rect.width * Math.tan(alpha) / 2;\r\n\t\t} else if (alpha < -t) {\r\n\t\t\t// Top Edge\r\n\t\t\tp.y = rect.top;\r\n\t\t\tp.x = x - rect.height * Math.tan(beta) / 2;\r\n\t\t} else if (alpha < t) {\r\n\t\t\t// Right Edge\r\n\t\t\tp.x = rect.right;\r\n\t\t\tp.y = y + rect.width * Math.tan(alpha) / 2;\r\n\t\t} else {\r\n\t\t\t// Bottom Edge\r\n\t\t\tp.y = rect.bottom;\r\n\t\t\tp.x = x + rect.height * Math.tan(beta) / 2;\r\n\t\t}\r\n\r\n\t\tif (orthogonal) {\r\n\t\t\tif (alpha < -pi + t || alpha > pi - t) {\r\n\t\t\t\t// Left edge\r\n\t\t\t\tp.x = rect.left;\r\n\t\t\t\tp.y = y;\r\n\t\t\t} else if (alpha < -t) {\r\n\t\t\t\t// Top Edge\r\n\t\t\t\tp.y = rect.top;\r\n\t\t\t\tp.x = x;\r\n\t\t\t} else if (alpha < t) {\r\n\t\t\t\t// Right Edge\r\n\t\t\t\tp.x = rect.right;\r\n\t\t\t\tp.y = y;\r\n\t\t\t} else {\r\n\t\t\t\t// Bottom Edge\r\n\t\t\t\tp.y = rect.bottom;\r\n\t\t\t\tp.x = x;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet dir = Rectangle.getDirection(rect, p, orthogonal);\r\n\t\treturn {point: p, direction: dir};\r\n\t}\r\n\r\n\t/**\r\n\t * Return the bounding rectangle that contains p1 and p2\r\n\t */\r\n\tstatic getBoundingRectangle(pts, margin) {\r\n\t\tif (!pts || pts.length == 0) return null;\r\n\t\tmargin = margin || [0, 0, 0, 0];\r\n\t\tif (!_.isArray(margin))\r\n\t\t\tmargin = [margin, margin, margin, margin];\r\n\t\tlet min = [pts[0].x, pts[0].y];\r\n\t\tlet max = [pts[0].x, pts[0].y];\r\n\t\tfor (let i = 1; i < pts.length; i++) {\r\n\t\t\tlet p = pts[i];\r\n\t\t\tif (p.x < min[0]) {\r\n\t\t\t\tmin[0] = p.x;\r\n\t\t\t}\r\n\t\t\tif (p.y < min[1]) {\r\n\t\t\t\tmin[1] = p.y;\r\n\t\t\t}\r\n\t\t\tif (p.x > max[0]) {\r\n\t\t\t\tmax[0] = p.x;\r\n\t\t\t}\r\n\t\t\tif (p.y > max[1]) {\r\n\t\t\t\tmax[1] = p.y;\r\n\t\t\t}\r\n\t\t}\r\n\t\tmin[0] = min[0] - margin[0];\r\n\t\tmin[1] = min[1] - margin[1];\r\n\t\tmax[0] = max[0] + margin[2];\r\n\t\tmax[1] = max[1] + margin[3];\r\n\t\tlet w = Math.abs(max[0] - min[0]);\r\n\t\tlet h = Math.abs(max[1] - min[1]);\r\n\t\treturn new Rectangle(min[0] + w/2, min[1] + h/2, w, h);\r\n\t}\r\n\r\n\t/**\r\n\t * Create a union of all the rectangles.\r\n\t * @param rects\r\n\t */\r\n\tstatic union(rects) {\r\n\t\tlet minx = null, miny = null, maxx = -Infinity, maxy = -Infinity;\r\n\t\t_.each(rects, function (rect) {\r\n\t\t\tminx = minx || rect.x;\r\n\t\t\tminy = miny || rect.y;\r\n\t\t\tminx = Math.min(minx, rect.x);\r\n\t\t\tminy = Math.min(miny, rect.y);\r\n\t\t\tmaxx = Math.max(maxx, rect.right());\r\n\t\t\tmaxy = Math.max(maxy, rect.bottom());\r\n\t\t});\r\n\t\tminx = minx || 0;\r\n\t\tminy = miny || 0;\r\n\t\treturn new Rectangle(minx, miny, maxx - minx, maxy - miny);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the direction the point <i>p</i> is in relation to the given rectangle.\r\n\t * Possible values are WEST (-1,0), EAST (1,0), NORTH (0,-1) and SOUTH (0,1) if orthogonal is true, otherwise return\r\n\t * the direction connection the center of r and p.\r\n\t * @param r\r\n\t * @param p\r\n\t * @param orthogonal\r\n\t * @returns {Point|*}\r\n\t */\r\n\tstatic getDirection(r, p, orthogonal = false) {\r\n\t\tif (!orthogonal)\r\n\t\t\treturn new Point(r.x, r.y).getDirection(new Point(p.x, p.y));\r\n\r\n\t\tlet i, distance = Math.abs(r.left - p.x), direction = Point.W;\r\n\r\n\t\ti = Math.abs(r.top - p.y);\r\n\t\tif (i <= distance) {\r\n\t\t\tdistance = i;\r\n\t\t\tdirection = Point.N;\r\n\t\t}\r\n\r\n\t\ti = Math.abs(r.bottom - p.y);\r\n\t\tif (i <= distance) {\r\n\t\t\tdistance = i;\r\n\t\t\tdirection = Point.S;\r\n\t\t}\r\n\r\n\t\ti = Math.abs(r.right - p.x);\r\n\t\tif (i < distance) {\r\n\t\t\tdirection = Point.E;\r\n\t\t}\r\n\r\n\t\treturn direction;\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Rectangle.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}\n ** module id = 5\n ** module chunks = 0\n **/","import _ from \"lodash\";\nimport Point from \"./Point\";\nimport Rectangle from \"./Rectangle\";\n\nlet registry = {};\n\nclass Shape {\n\tconstructor(x, y, width, height, config) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\t_.defaults(this, config, {x: 0, y: 0, width: 0, height: 0});\n\t}\n\n\t/**\n\t * Return the y-coord of the top side of this rectangle\n\t */\n\tget top() { return this.y - this.height/2; }\n\n\t/**\n\t * Returns the y-coordinate of the bottom of this Rectangle.\n\t */\n\tget bottom() { return this.y + this.height/2; }\n\n\t/**\n\t * Return the x-coord of left side of this rectangle\n\t */\n\tget left() { return this.x - this.width/2; }\n\n\t/**\n\t * Returns the x-coordinate of the right side of this Rectangle.\n\t */\n\tget right() { return this.x + this.width/2; }\n\n\tget center() { return new Point(this.x, this.y); }\n\n\tget bounds() { return new Rectangle(this.x, this.y, this.width, this.height); }\n\n\tcontains(el) { return false; }\n\n\t/**\n\t * This will generate n ports on the shape.\n\t */\n\tgetRegularPoints(n) {return null;}\n\n\t/**\n\t * Get the intersection between boundary of this shape and the line connecting (x,y) with the refPt.\n\t * @param refPt\n\t * @returns {null}\n\t */\n\tgetPerimeter(refPt, orthogonal = false) {\n\t\treturn this.constructor.getPerimeter(this, refPt, orthogonal);\n\t}\n\n\trender(view) {\n\t\tlet template = _.template(view.getTemplate(this.name, this));\n\t\treturn template(this);\n\t}\n\n\tstatic getShape(name) {\n\t\treturn registry[name];\n\t}\n\n\tstatic addShape(name, c) {\n\t\tregistry[name] = c;\n\t}\n\n\tstatic removeShape(name) {\n\t\tdelete registry[name];\n\t}\n}\n\nexport default Shape;\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Shape.js\n **/","import _ from \"lodash\";\n\n/**\n * dom Utility functions\n */\nexport default {\n\tisIE: (function () {\n\t\tif (!window || !window.navigator || !navigator) return false;\n\t\tvar sAgent = window.navigator.userAgent;\n\t\tvar Idx = sAgent.indexOf(\"MSIE\");\n\n\t\t// If IE, return version number.\n\t\tif (Idx > 0)\n\t\t\treturn parseInt(sAgent.substring(Idx + 5, sAgent.indexOf(\".\", Idx)));\n\n\t\t// If IE 11 then look for Updated user agent string.\n\t\telse if (!!navigator.userAgent.match(/Trident\\/7\\./))\n\t\t\treturn 11;\n\t\telse if (!!navigator.userAgent.match(/Edge\\//))\n\t\t\treturn \"Edge\";\n\t\telse\n\t\t\treturn false;\n\t})(),\n\n\tisFireFox : (function(){\n\t\t// InstallTrigger: Firefox's API to install add-ons\n\t\treturn typeof InstallTrigger !== 'undefined';\n\t})(),\n\n\tisChrome: (function() {\n\t\tif (!window || !window.navigator || !navigator || navigator.userAgent.indexOf('Edge') >= 0) return false;\n\t\tvar raw = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n\t\treturn raw ? parseInt(raw[2], 10) : false;\n\t})(),\n\n\tisMac: (function() {\n\t\tif (!window || !window.navigator || !navigator) return false;\n\t\treturn navigator.platform.toUpperCase().indexOf('MAC') >= 0;\n\t})(),\n\n\tisWindows: (function() {\n\t\tif (!window || !window.navigator || !navigator) return false;\n\t\treturn navigator.appVersion.indexOf(\"Windows\") >= 0;\n\t})(),\n\n\tisLinux: (function() {\n\t\tif (!window || !window.navigator || !navigator) return false;\n\t\treturn navigator.appVersion.indexOf(\"Linux\") >= 0;\n\t})(),\n\n\tcreateElement: function (tag, attribs, styles, html) {\n\t\tlet el = document.createElement(tag);\n\t\tthis.setElement(el, attribs, styles);\n\t\tif (html)\n\t\t\tel.innerHTML = html;\n\t\treturn el;\n\t},\n\n\tcreateElementByString: function(str) {\n\t\tlet temp = this.createElement('div', null, null, str);\n\t\treturn temp.childNodes;\n\t},\n\n\tsetElement: function (el, attribs, styles) {\n\t\tif (attribs) {\n\t\t\t_.forEach(attribs, function(value, key) {\n\t\t\t    el.setAttribute(key, value);\n\t\t\t });\n\t\t}\n\t\tif (styles) {\n\t\t\t_.forEach(styles, function(value, key) {\n\t\t\t\tel.style[key] = value;\n\t\t\t});\n\t\t}\n\t},\n\n\ttestElement: function(node, method) {\n\t\treturn node && node.nodeType == 1 && ( !method || method(node) );\n\t},\n\n\tgetAncestorBy: function(node, method) {\n\t\twhile (node = node.parentNode)\n\t\t\tif (this.testElement(node, method) )\n\t\t\t\treturn node;\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Get the position of element relative to the context.\n\t * @param el the element\n\t * @param context\n\t * @returns {*[]}\n\t */\n\tgetPosition(el, context) {\n\t\tif (!context) context = document.body;\n\t\tlet elRect = el.getBoundingClientRect();\n\t\tlet contextRect = context.getBoundingClientRect();\n\n\t\treturn [elRect.left - contextRect.left, elRect.top - contextRect.top];\n\t},\n\n\tgetCenterPosition(el, context) {\n\t\tif (!context) context = document.body;\n\t\tlet elRect = el.getBoundingClientRect();\n\t\tlet contextRect = context.getBoundingClientRect();\n\t\tlet w = elRect.right - elRect.left;\n\t\tlet h = elRect.bottom - elRect.top;\n\n\t\treturn [elRect.left - contextRect.left + w/2, elRect.top - contextRect.top + h/2];\n\t},\n\n\tmove: function(el, x, y) {\n\t\tif (x) el.style.left = x + 'px';\n\t\tif (y) el.style.top = y + 'px';\n\t},\n\n\tgetSize: function(el) {\n\t\tvar w = parseInt(el.style.offsetWidth, 10);\n\t\tvar h = parseInt(el.style.offsetHeight, 10);\n\t\treturn [w, h];\n\t},\n\n\tresize: function(el, w, h) {\n\t\tif (w) el.style.width = w + \"px\";\n\t\tif (h) el.style.height = h + 'px';\n\t},\n\n\tpreloadImages: function(array) {\n\t\tif (!this.preloadImages.list) this.preloadImages.list = [];\n\t\tif (!this.preloadImages.loaded) this.preloadImages.loaded = {};\n\n\t\tvar list = this.preloadImages.list;\n\t\tvar img, that = this;\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\timg = new Image();\n\t\t\timg.onload = function() {\n\t\t\t\tvar index = list.indexOf(this);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthat.preloadImages.loaded[this.name] = {width: this.width, height: this.height};\n\t\t\t\t\t// remove image from the array once it's loaded\n\t\t\t\t\t// for memory consumption reasons\n\t\t\t\t\tlist.splice(index, 1);\n\t\t\t\t}\n\t\t\t};\n\t\t\tlist.push(img);\n\t\t\timg.src = array[i];\n\t\t\timg.name = array[i];\n\t\t}\n\t},\n\n\t/**\n\t * Get's the image's information given the url. Must be preloaded by calling the preloadImage function.\n\t * @param src\n\t */\n\tgetImageInfo: function(src) {\n\t\tif (this.preloadImages.loaded) {\n\t\t\treturn this.preloadImages.loaded[src];\n\t\t}\n\t\treturn null;\n\t},\n\n\tdownloadFile: function(name, data) {\n\t\tif (!data) return;\n\t\tlet mime = data.match(/^data:([^;,]*)/)[1];\n\t\tif (name.indexOf('.') < 0) {\n\t\t\tif (!mime) mime = 'text/plain';\n\t\t\tif (mime == 'text/plain')\n\t\t\t\tname = name + '.txt';\n\t\t\telse {\n\t\t\t\tlet type = mime.split('/')[1];\n\t\t\t\tif (type.indexOf('+') > 0) type = type.split('+')[0];\n\t\t\t\tname = name + '.' + type;\n\t\t\t}\n\t\t}\n\t\tif (this.isIE) {\n\t\t\tlet encoded = data.indexOf(';base64') >= 0;\n\t\t\tif (encoded)\n\t\t\t\tdata = atob(data.replace('data:' + mime + ';base64,', ''));\n\t\t\telse\n\t\t\t\tdata = decodeURI(data.replace('data:' + mime + ',', ''));\n\t\t\tdata = this.GetBlob(data, mime);\n\t\t\tnavigator.msSaveBlob(data, name);\n\t\t} else {\n\t\t\tlet link = this.createElement('a', {href: data, download: name}, {display: \"none\"});\n\t\t\tdocument.body.appendChild(link);\n\t\t\tlink.click();\n\t\t\tlink.parentNode.removeChild(link);\n\t\t}\n\t},\n\n\t/**\n\t * Convert b54 to blob. IE only\n\t */\n\tGetBlob: function (data, contentType, sliceSize) {\n\t\tcontentType = contentType || '';\n\t\tsliceSize = sliceSize || 512;\n\n\t\tvar byteArrays = [];\n\n\t\tfor (var offset = 0; offset < data.length; offset += sliceSize) {\n\t\t\tvar slice = data.slice(offset, offset + sliceSize);\n\n\t\t\tvar byteNumbers = new Array(slice.length);\n\t\t\tfor (var i = 0; i < slice.length; i++) {\n\t\t\t\tbyteNumbers[i] = slice.charCodeAt(i);\n\t\t\t}\n\t\t\tvar byteArray = new Uint8Array(byteNumbers);\n\t\t\tbyteArrays.push(byteArray);\n\t\t}\n\t\treturn new Blob(byteArrays, {type: contentType});\n\t},\n\n\topenImage: function(name, image) {\n\t\tvar myWindow = window.open(\"\", \"_blank\", \"toolbar=yes, scrollbars=yes, resizable=yes, width=500, height=500\");\n\t\tvar myDocument = myWindow.document;\n\t\tvar img = myDocument.createElement(\"img\");\n\t\tthis.setElement(img, {src: image, name: name});\n\t\tmyDocument.body.appendChild(img);\n\t},\n\n\t/**\n\t * Check whether the key event is from input, textarea or select.\n\t * @param e  input event\n\t */\n\teventFromInput: function(e){\n\t\tvar tagName = e.target.tagName;\n\t\treturn (tagName == 'INPUT' || tagName == 'TEXTAREA' || tagName == 'SELECT');\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/DomUtils.js\n **/","import _ from \"lodash\";\n\n/**\n * A string buffer for fast string manipulation\n */\nexport default class StringBuffer {\n\tconstructor(str) {\n\t\tthis.buffer = [];\n\t\tif (str)\n\t\t\tthis.buffer.push(str);\n\t}\n\n\tappend(stuff) {\n\t\tif (_.isString(stuff))\n\t\t\tthis.buffer.push(stuff);\n\t\telse if (_.isArray(stuff))\n\t\t\tthis.buffer = this.buffer.concat(stuff);\n\t\telse\n\t\t\tthis.buffer.push(\"\" + stuff);\n\t\treturn this;\n\t}\n\n\tprepend(stuff) {\n\t\tif (_.isString(stuff))\n\t\t\tthis.buffer.splice(0, 0, stuff);\n\t\telse if (_.isArray(stuff))\n\t\t\tthis.buffer = stuff.concat(this.buffer);\n\t\telse\n\t\t\tthis.buffer.splice(0, 0, \"\" + stuff);\n\t\treturn this;\n\t}\n\n\tclear() {\n\t\tthis.buffer = [];\n\t}\n\n\tremoveLast() {\n\t\tthis.buffer.pop();\n\t\treturn this;\n\t}\n\n\ttoString(sep) {\n\t\tif (!sep) sep = '';\n\t\treturn this.buffer.join(sep);\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/StringBuffer.js\n **/","import Point from \"./Point\";\n\nexport default class Line {\n\tconstructor(start, end) {\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t}\n\n\t/**\n\t * Calculate the length of this line\n\t */\n\tlength() {\n\t\treturn this.start.distance(this.end);\n\t}\n\n\t/**\n\t * Calculate the distance of this line to the point.\n\t */\n\tdistance(pt) {\n\t\tvar x = this.start.distance(pt);\n\t\tif (x == 0) return 0;\n\n\t\tvar l = this.length();\n\t\tvar cosa = new Point((this.end.x - this.start.x) / l, (this.end.y - this.start.y) / l).dotProduct(\n\t\t\tnew Point(pt.x / x, pt.y / x));\n\n\t\treturn x * Math.sqrt(1 - cosa * cosa);\n\t}\n\n\t/**\n\t * Function: intersection\n\t *\n\t * Returns the intersection of two lines as an <mxPoint>.\n\t *\n\t * Parameters:\n\t *\n\t * x0 - X-coordinate of the first line's startpoint.\n\t * y0 - X-coordinate of the first line's startpoint.\n\t * x1 - X-coordinate of the first line's endpoint.\n\t * y1 - Y-coordinate of the first line's endpoint.\n\t * x2 - X-coordinate of the second line's startpoint.\n\t * y2 - Y-coordinate of the second line's startpoint.\n\t * x3 - X-coordinate of the second line's endpoint.\n\t * y3 - Y-coordinate of the second line's endpoint.\n\t */\n\tstatic intersection(x0, y0, x1, y1, x2, y2, x3, y3) {\n\t\tvar denom = ((y3 - y2) * (x1 - x0)) - ((x3 - x2) * (y1 - y0));\n\t\tvar nume_a = ((x3 - x2) * (y0 - y2)) - ((y3 - y2) * (x0 - x2));\n\t\tvar nume_b = ((x1 - x0) * (y0 - y2)) - ((y1 - y0) * (x0 - x2));\n\n\t\tvar ua = nume_a / denom;\n\t\tvar ub = nume_b / denom;\n\n\t\tif (ua >= 0.0 && ua <= 1.0 && ub >= 0.0 && ub <= 1.0) {\n\t\t\t// Get the intersection point\n\t\t\tvar intersectionX = x0 + ua * (x1 - x0);\n\t\t\tvar intersectionY = y0 + ua * (y1 - y0);\n\n\t\t\treturn new Point(intersectionX, intersectionY);\n\t\t}\n\n\t\t// No intersection\n\t\treturn null;\n\t}\n\n\ttoString() {\n\t\treturn 'Line:{start=' + this.start + ';end=' + this.end + '}';\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Line.js\n **/","import Shape from \"./Shape\";\r\nimport Point from \"./Point\";\r\nimport Rectangle from \"./Rectangle\";\r\n\r\nexport default class Ellipse extends Shape {\r\n\ttoString() {\r\n\t\treturn 'Ellipse:{x=' + this.x + ';y=' + this.y + ';width=' + this.width + ';height=' + this.height + '}';\r\n\t}\r\n\r\n\tstatic getPerimeter(rect, pt, orthogonal = false) {\r\n\t\tvar a = rect.width / 2;\r\n\t\tvar b = rect.height / 2;\r\n\t\tvar cx = rect.x;\r\n\t\tvar cy = rect.y;\r\n\t\tvar px = pt.x;\r\n\t\tvar py = pt.y;\r\n\r\n\t\t// Calculates straight line equation through\r\n\t\t// point and ellipse center y = d * x + h\r\n\t\tvar dx = parseInt(px - cx);\r\n\t\tvar dy = parseInt(py - cy);\r\n\r\n\t\tvar tx, ty;\r\n\r\n\t\tif (dx == 0 && dy != 0) {\r\n\t\t\treturn new Point(cx, cy + b * dy / Math.abs(dy));\r\n\t\t} else if (dx == 0 && dy == 0) {\r\n\t\t\treturn new Point(px, py);\r\n\t\t}\r\n\r\n\t\t// Calculates intersection\r\n\t\tvar d = dy / dx;\r\n\t\tvar h = cy - d * cx;\r\n\t\tvar e = a * a * d * d + b * b;\r\n\t\tvar f = -2 * cx * e;\r\n\t\tvar g = a * a * d * d * cx * cx + b * b * cx * cx - a * a * b * b;\r\n\t\tvar det = Math.sqrt(f * f - 4 * e * g);\r\n\r\n\t\t// Two solutions (perimeter points)\r\n\t\tvar xout1 = (-f + det) / (2 * e);\r\n\t\tvar xout2 = (-f - det) / (2 * e);\r\n\t\tvar yout1 = d * xout1 + h;\r\n\t\tvar yout2 = d * xout2 + h;\r\n\t\tvar dist1 = Math.sqrt(Math.pow((xout1 - px), 2) + Math.pow((yout1 - py), 2));\r\n\t\tvar dist2 = Math.sqrt(Math.pow((xout2 - px), 2) + Math.pow((yout2 - py), 2));\r\n\r\n\t\t// Correct solution\r\n\t\tvar xout = 0;\r\n\t\tvar yout = 0;\r\n\r\n\t\tif (dist1 < dist2) {\r\n\t\t\txout = xout1;\r\n\t\t\tyout = yout1;\r\n\t\t} else {\r\n\t\t\txout = xout2;\r\n\t\t\tyout = yout2;\r\n\t\t}\r\n\r\n\t\tlet p = new Point(xout, yout);\r\n\t\tlet dir = Rectangle.getDirection(rect, p, orthogonal);\r\n\t\tif (orthogonal) {\r\n\t\t\tif (dir.x == -1) {\r\n\t\t\t\treturn {point: new Point(cx - a, cy), direction: dir};\r\n\t\t\t}\r\n\t\t\tif (dir.x == 1) {\r\n\t\t\t\treturn {point: new Point(cx + a, cy), direction: dir};\r\n\t\t\t}\r\n\t\t\tif (dir.y == -1) {\r\n\t\t\t\treturn {point: new Point(cx, cy - b), direction: dir};\r\n\t\t\t}\r\n\t\t\tif (dir.y == 1) {\r\n\t\t\t\treturn {point: new Point(cx, cy + b), direction: dir};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {point: p, direction: dir};\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Ellipse.js\n **/","import _ from \"lodash\";\r\nimport Point from \"./Point\";\r\nimport Utils from \"../util/Utils\";\r\n\r\nlet defaultConfig = {\r\n\ttype: \"direct\",\r\n\tshowGauge: true,\r\n\torthogonal: false\r\n};\r\n\r\nlet defaultGeometry = {\r\n\twidth: 0,\r\n\theight: 0,\r\n\tanchorX: 0,\r\n\tanchorY: 0,\r\n\toffsetX: 0,\r\n\toffsetY: 0\r\n};\r\n\r\nlet linkTypes = {};\r\n\r\nclass Link {\r\n\tconstructor(terminalVisual, shapeConfig = {}, startMarker = null, endMarker = null) {\r\n\t\tthis.start = terminalVisual[0].point;\r\n\t\tthis.end = terminalVisual[1].point;\r\n\t\tthis.startNormal = terminalVisual[0].direction;\r\n\t\tthis.endNormal = terminalVisual[1].direction;\r\n\t\tthis.startMarker = startMarker;\r\n\t\tthis.endMarker = endMarker;\r\n\t\t_.assign(this, shapeConfig);\r\n\t}\r\n\r\n\trender(view) {\r\n\t\treturn view.renderLink(this);\r\n\t}\r\n\r\n\tget points() { return null; }\r\n\tget controlPts() { return null; }\r\n\tget length() {\r\n\t\tlet points = this.points;\r\n\t\tlet i, l = 0;\r\n\t\tfor (i = 0; i < points.length - 1; i++)\r\n\t\t\tl += points[i].distance(points[i+1]);\r\n\t\treturn l;\r\n\t}\r\n\r\n\t/**\r\n\t * Calculate the position where to put modifiers or label..\r\n\t *\r\n\t * @param geometry: defines how far along the edge should the point be placed.\r\n\t * @return *[] the relative position.\r\n\t */\r\n\tgetRelativePosition(geometry) {\r\n\t\tif (_.isNumber(geometry))\r\n\t\t\tgeometry = {x: geometry};\r\n\t\tgeometry = _.defaults(geometry, defaultGeometry);\r\n\t\tlet p = geometry.x, l = this.length;\r\n\t\tif (Math.abs(p) <= 1) p *= l;\r\n\t\tif (p < 0) p = l + p;\r\n\t\tif (p > l) p = l;\r\n\r\n\t\tlet points = this.points, d, point, dir;\r\n\t\tfor (let i = 0; i < points.length - 1; i++) {\r\n\t\t\td = points[i].distance(points[i+1]);\r\n\t\t\tif (p <= d) {\r\n\t\t\t\t// we've located the line segment.\r\n\t\t\t\tpoint = points[i].clone();\r\n\t\t\t\tdir = point.getDirection(points[i+1]);\r\n\t\t\t\tpoint.translate(dir.getScaled(p));\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tp -= d;\r\n\t\t}\r\n\r\n\t\t// return the last point.\r\n\t\tif (!point)\r\n\t\t\tpoint = points[points.length - 1];\r\n\t\treturn Utils.offsetPosition([point.x, point.y], geometry);\r\n\t}\r\n\r\n\ttoString() {\r\n\t\treturn 'Link';\r\n\t}\r\n\r\n\tstatic getLink(terminalVisual, shapeConfig = {}, startMarker = null, endMarker = null) {\r\n\t\tshapeConfig = _.defaultsDeep(shapeConfig, defaultConfig);\r\n\t\tlet linkClass = linkTypes[shapeConfig.type];\r\n\t\tif (linkClass)\r\n\t\t\treturn new linkClass(terminalVisual, shapeConfig, startMarker, endMarker);\r\n\t\tconsole.log('link type not supported: ' + shapeConfig.type);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nclass DirectLink extends Link {\r\n\tget points() {\r\n\t\treturn [this.start, this.end];\r\n\t}\r\n}\r\n\r\nclass BezierLink extends Link {\r\n\tget points() {\r\n\t\treturn [this.start, this.end];\r\n\t}\r\n\r\n\tget controlPts() {\r\n\t\tlet s = this.points[0], e = this.points[1];\r\n\t\tlet pts = [];\r\n\t\tpts[0] = null;\r\n\t\tpts[1] = [];\r\n\t\tif (this.startNormal.x == 0) {\r\n\t\t\tpts[1][0] = new Point(s.x, (s.y + e.y)/2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tpts[1][0] = new Point((s.x + e.x)/2, s.y);\r\n\t\t}\r\n\t\tif (this.endNormal.x == 0) {\r\n\t\t\tpts[1][1] = new Point(e.x, (s.y + e.y)/2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tpts[1][1] = new Point((s.x + e.x)/2, e.y);\r\n\t\t}\r\n\t\treturn pts;\r\n\t}\r\n\r\n\tgetRelativePosition(geometry) {\r\n\t\tif (_.isNumber(geometry))\r\n\t\t\tgeometry = {x: geometry};\r\n\t\tgeometry = _.defaults(geometry, defaultGeometry);\r\n\t\tlet p = geometry.x, l = this.length;\r\n\t\tif (Math.abs(p) > 1) p /= l;\r\n\t\tif (p < 0) p++;\r\n\t\tif (p > 1) p--;\r\n\r\n\t\tlet pts = this.points;\r\n\t\tlet ctrlpts = this.controlPts;\r\n\t\tlet p1 = pts[0];\r\n\t\tlet p2 = ctrlpts[1][0];\r\n\t\tlet p3 = ctrlpts[1][1];\r\n\t\tlet p4 = pts[1];\r\n\r\n\t\tlet point = [(1-p)*(1-p)*(1-p) * p1.x + 3*p*(1-p)*(1-p) * p2.x + 3*p*p*(1-p) * p3.x + p*p*p * p4.x, (1-p)*(1-p)*(1-p) * p1.y + 3*p*(1-p)*(1-p) * p2.y + 3*p*p*(1-p) * p3.y + p*p*p * p4.y];\r\n\t\treturn Utils.offsetPosition([point.x, point.y], geometry);\r\n\t}\r\n}\r\n\r\nclass EntityRelations extends Link {\r\n\tget points() {\r\n\t\tvar source = Port.getBounds(edge, true);\r\n\t\tvar target = Port.getBounds(edge, false);\r\n\t\tvar isSourceLeft = target.right() < source.x;\r\n\t\tvar isTargetLeft = source.right() < target.x;\r\n\t\tvar result = [];\r\n\r\n\t\tvar x0 = (isSourceLeft) ? source.x : source.x + source.width;\r\n\t\tvar y0 = source.getCenterY();\r\n\t\tresult.push(new Point(x0, y0));\r\n\r\n\t\tvar xe = (isTargetLeft) ? target.x : target.x + target.width;\r\n\t\tvar ye = target.getCenterY();\r\n\r\n\t\tvar seg = this.segment;\r\n\r\n\t\tvar dx = (isSourceLeft) ? -seg : seg;\r\n\t\tvar dep = new Point(x0 + dx, y0);\r\n\r\n\t\tdx = (isTargetLeft) ? -seg : seg;\r\n\t\tvar arr = new Point(xe + dx, ye);\r\n\r\n\t\t// Adds intermediate points if both go out on same side\r\n\t\tif (isSourceLeft == isTargetLeft)\r\n\t\t{\r\n\t\t\tvar x = (isSourceLeft) ?\r\n\t\t\tMath.min(x0, xe)-seg :\r\n\t\t\tMath.max(x0, xe)+seg;\r\n\r\n\t\t\tresult.push(new Point(x, y0));\r\n\t\t\tresult.push(new Point(x, ye));\r\n\t\t}\r\n\t\telse if ((dep.x < arr.x) == isSourceLeft)\r\n\t\t{\r\n\t\t\tvar midY = y0 + (ye - y0) / 2;\r\n\r\n\t\t\tresult.push(dep);\r\n\t\t\tresult.push(new Point(dep.x, midY));\r\n\t\t\tresult.push(new Point(arr.x, midY));\r\n\t\t\tresult.push(arr);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tresult.push(dep);\r\n\t\t\tresult.push(arr);\r\n\t\t}\r\n\r\n\t\tresult.push(new Point(xe, ye));\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nclass Manhattan extends Link {\r\n\tconstructor(terminalVisual, shapeConfig, startMarker, endMarker) {\r\n\t\tshapeConfig = _.defaults(shapeConfig, {\r\n\t\t\tMIN_BUFFER: 10,\r\n\t\t\tautoRoute: false,\r\n\t\t\trandomNoise: 0,\r\n\t\t\tstep: 1,\r\n\t\t\tmaxChannelWidth: 100\r\n\t\t});\r\n\t\tsuper(terminalVisual, shapeConfig, startMarker, endMarker);\r\n\t}\r\n\r\n\tget points() {\r\n\t\tlet pos = Manhattan.route(this.start, this.end, this.startNormal, this.endNormal, this.MIN_BUFFER);\r\n\t\tif (this.autoRoute) {\r\n\t\t\tthis._mergeSegments(pos);\r\n\t\t\tvar boxes = [], node, startBox, endBox;\r\n\t\t\tvar container = edge.source.getCommonAncestor(edge.target);\r\n\t\t\tvar childNodes = container.getDescendants();\r\n\t\t\tvar index = 0;\r\n\t\t\tfor (var i = 0; i < childNodes.length; i++) {\r\n\t\t\t\tnode = childNodes[i];\r\n\t\t\t\t// Do not include source or target ancestors in routing.\r\n\t\t\t\tif (node.excludeFromRouting(edge) || node.isAncestor(edge.source) || node.isAncestor(edge.target)) continue;\r\n\t\t\t\tif (node == edge.source)\r\n\t\t\t\tstartBox = index;\r\n\t\t\t\tif (node == edge.target)\r\n\t\t\t\tendBox = index;\r\n\t\t\t\tboxes.push(node.getBounds(document));\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\tif (boxes.length > 1)\r\n\t\t\t\tthis.autoRoute(pos, container.getBounds(document), boxes, startBox, endBox);\r\n\t\t}\r\n\t\tManhattan._mergeSegments(pos);\r\n\t\tif (this.randomNoise && pos.length > 3) {\r\n\t\t\tfor (var i = 1; i < pos.length - 2; i++) {\r\n\t\t\t\tvar range = this.randomNoise / this.step;\r\n\t\t\t\tvar randomNumber = Math.floor(Math.random() * range * 2 - range + 1) * this.step;\r\n\t\t\t\tthis._moveSegment(pos, i, randomNumber, 1, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn pos;\r\n\t}\r\n\r\n\t//New function for finding route\r\n\tstatic route(start, end, startNormal, endNormal, buffer) {\r\n\t\tvar startBuffer = new Point(start.x + startNormal.x * buffer, start.y + startNormal.y * buffer);\r\n\t\tvar endBuffer = new Point(end.x + endNormal.x * buffer, end.y + endNormal.y * buffer);\r\n\t\tvar startBufferNormal, endBufferNormal;\r\n\t\tvar pts;\r\n\t\tif (startNormal.x != 0) {\r\n\t\t\tif ((endBuffer.x - startBuffer.x) / startNormal.x > 0) {\r\n\t\t\t\tstartBufferNormal = startNormal;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tstartBufferNormal = new Point(0, (endBuffer.y >= startBuffer.y) ? 1 : -1);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif ((endBuffer.y - startBuffer.y) / startNormal.y > 0) {\r\n\t\t\t\tstartBufferNormal = startNormal;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tstartBufferNormal = new Point((endBuffer.x >= startBuffer.x) ? 1 : -1, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (endNormal.x != 0) {\r\n\t\t\tif ((startBuffer.x - endBuffer.x) / endNormal.x > 0) {\r\n\t\t\t\tendBufferNormal = endNormal;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tendBufferNormal = new Point(0, (startBuffer.y >= endBuffer.y) ? 1 : -1);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif ((startBuffer.y - endBuffer.y) / endNormal.y > 0) {\r\n\t\t\t\tendBufferNormal = endNormal;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tendBufferNormal = new Point((startBuffer.x >= endBuffer.x) ? 1 : -1, 0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (startBufferNormal.dotProduct(endBufferNormal) == 0) {\r\n\t\t\tvar middle = (startBufferNormal.x == 0) ? new Point(startBuffer.x, endBuffer.y) : new Point(endBuffer.x, startBuffer.y);\r\n\t\t\tpts = [start, startBuffer, middle, endBuffer, end];\r\n\t\t}\r\n\t\telse if (startBufferNormal.dotProduct(endBufferNormal) < 0) {\r\n\t\t\tif (startBufferNormal.x == 0) {\r\n\t\t\t\tpts = [start, startBuffer, new Point(startBuffer.x, (start.y + end.y) / 2), new Point(endBuffer.x, (start.y + end.y) / 2), endBuffer, end];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tpts = [start, startBuffer, new Point((start.x + end.x) / 2, startBuffer.y), new Point((start.x + end.x) / 2, endBuffer.y), endBuffer, end];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tpts = [start, startBuffer, new Point(startBuffer.x + startBufferNormal.x * buffer, startBuffer.y + startBufferNormal.y * buffer), new Point(endBuffer.x + endBufferNormal.x * buffer, endBuffer.y + endBufferNormal.y * buffer), endBuffer, end];\r\n\t\t}\r\n\r\n\t\tvar prunePts = [];\r\n\t\tprunePts[0] = pts[0];\r\n\t\tfor (var i = 1; i < pts.length - 1; i++) {\r\n\t\t\tif ((pts[i].x == pts[i-1].x && pts[i].x == pts[i+1].x) || (pts[i].y == pts[i-1].y && pts[i].y == pts[i+1].y)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tprunePts.push(pts[i]);\r\n\t\t}\r\n\t\tprunePts.push(pts[pts.length - 1]);\r\n\t\treturn prunePts;\r\n\t}\r\n\r\n\t/**\r\n\t * Automatically route the connection to avoid intersections with other vertices.\r\n\t */\r\n\tautoRoute(pts, container, boxes, startBox, endBox) {\r\n\t\tvar side, side2, d, box, intersect, j;\r\n\t\tvar channel, channel2, pt, dir;\r\n\r\n\t\tvar startPadding = 0, endPadding;\r\n\t\t// first get the start and end channel\r\n\t\tbox = boxes[endBox];\r\n\t\tpt = pts[pts.length - 2];\r\n\t\tif (pt.y < box.y)\r\n\t\t\tside = 1;\r\n\t\telse if (pt.y > box.y + box.height)\r\n\t\t\tside = 3;\r\n\t\telse if (pt.x < box.x)\r\n\t\t\tside = 0;\r\n\t\telse\r\n\t\t\tside = 2;\r\n\t\tchannel = _getChannel(container, endBox, boxes, side);\r\n\t\tendPadding = channel.horizontal ? (channel.right - channel.left)/2 : (channel.bottom - channel.top)/2;\r\n\r\n\t\tfor (var i = 0; i < pts.length - 1; i++) {\r\n\t\t\tif (pts[i+1].x == pts[i].x && pts[i+1].y == pts[i].y) continue;\r\n\t\t\tintersect = _getFirstIntersection(pts, i, boxes, startBox, endBox);\r\n\t\t\tif (!intersect) continue;\r\n\t\t\tj = intersect[0];\r\n\t\t\tside = intersect[1];\r\n\t\t\tbox = boxes[j];\r\n\t\t\tchannel = _getChannel(container, j, boxes, side);\r\n\t\t\tswitch(side) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tpt = new Point((channel.right + channel.left)/2, pts[i].y);\r\n\t\t\t\t\tdir = _getRouteTendency(pts, i, pt, box, side);\r\n\t\t\t\t\tside2 = dir < 0 ? 1 : 3;\r\n\t\t\t\t\tchannel2 = _getChannel(container, j, boxes, side2);\r\n\t\t\t\t\t// if the previous point is in the channel2, use that point instead of center of the channel.\r\n\t\t\t\t\tif (i > 1 && (pts[i-2].y == pts[i-1].y) && (pts[i-1].y > channel2.top && pts[i-1].y < channel2.bottom))\r\n\t\t\t\t\t\td = pts[i-1].y - pt.y;\r\n\t\t\t\t\telse if (i < pts.length - 3 && (pts[i+2].y == pts[i+3].y) && (pts[i+2].y > channel2.top && pts[i+2].y < channel2.bottom))\r\n\t\t\t\t\t\td = pts[i+2].y - pt.y;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\td = (channel2.bottom + channel2.top)/2 - pt.y;\r\n\t\t\t\t\t// check if we need this pt.\r\n\t\t\t\t\tif ((side == 0 && pt.x <= pts[i].x) || (side == 2 && pt.x >= pts[i].x))\r\n\t\t\t\t\t\tpt = null;\r\n\t\t\t\t\telse if (i > 0) {\r\n\t\t\t\t\t\t// see if we can push the line out to where we started.\r\n\t\t\t\t\t\tif (!_hasIntersection(\r\n\t\t\t\t\t\t\t\t[new Point(pts[i].x, pts[i].y), new Point(pts[i].x, pts[i].y + d), new Point(pt.x, pt.y + d)],\r\n\t\t\t\t\t\t\t\tboxes))\r\n\t\t\t\t\t\t\tpt = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tpt = new Point(pts[i].x, (channel.bottom + channel.top)/2);\r\n\t\t\t\t\tdir = _getRouteTendency(pts, i, pt, box, side);\r\n\t\t\t\t\tside2 = dir < 0 ? 0 : 2;\r\n\t\t\t\t\tchannel2 = _getChannel(container, j, boxes, side2);\r\n\t\t\t\t\t// if the previous point is in the channel2, use that point instead of center of the channel.\r\n\t\t\t\t\tif (i > 1 && (pts[i-2].x == pts[i-1].x) && (pts[i-1].x > channel2.left && pts[i-1].x < channel2.right))\r\n\t\t\t\t\t\td = pts[i-1].x - pt.x;\r\n\t\t\t\t\telse if (i < pts.length - 3 && (pts[i+2].x == pts[i+3].x) && (pts[i+2].x > channel2.left && pts[i+2].x < channel2.right))\r\n\t\t\t\t\t\td = pts[i+2].x - pt.x;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\td = (channel2.right + channel2.left)/2 - pt.x;\r\n\t\t\t\t\t// check if we need this pt.\r\n\t\t\t\t\tif ((side == 1 && pt.y <= pts[i].y) || (side == 3 && pt.y >= pts[i].y))\r\n\t\t\t\t\t\tpt = null;\r\n\t\t\t\t\telse if (i > 0) {\r\n\t\t\t\t\t\t// see if we can push the line out to where we started.\r\n\t\t\t\t\t\tif (!_hasIntersection(\r\n\t\t\t\t\t\t\t\t[new Point(pts[i].x, pts[i].y), new Point(pts[i].x + d, pts[i].y), new Point(pt.x + d, pt.y)],\r\n\t\t\t\t\t\t\t\tboxes))\r\n\t\t\t\t\t\t\tpt = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t// max points.\r\n\t\t\tif (i > 20) return;\r\n\t\t\tif (pt && (pt.x != pts[i].x || pt.y != pts[i].y)) {\r\n\t\t\t\tpts.splice(i+1, 0, pt);\r\n\t\t\t\t_moveSegment(pts, i+1, d, startPadding, endPadding);\r\n\t\t\t\ti++;\r\n\t\t\t} else\r\n\t\t\t\t_moveSegment(pts, i, d, startPadding, endPadding);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic _hasIntersection(pts, boxes) {\r\n\t\tfor (var i = 0; i < pts.length - 1; i++) {\r\n\t\t\tfor (var j = 0; j < boxes.length; j++) {\r\n\t\t\t\tif (boxes[j].detectIntersection(pts[i], pts[i+1]) >= 0)\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tstatic _getFirstIntersection(pts, i, boxes, startBox, endBox) {\r\n\t\tvar box, side, savedIndex = null, savedSide = null;\r\n\t\tfor (var j = 0; j < boxes.length; j++) {\r\n\t\t\tif ((i == 0 && j == startBox) || (i == pts.length - 2 && j == endBox))\r\n\t\t\t\tcontinue;\r\n\t\t\tbox = boxes[j];\r\n\t\t\tside = box.detectIntersection(pts[i], pts[i+1]);\r\n\t\t\tif (side >= 0) {\r\n\t\t\t\tif (savedIndex == null) {\r\n\t\t\t\t\tsavedIndex = j;\r\n\t\t\t\t\tsavedSide = side;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (boxes[savedIndex].distance(pts[i]) > box.distance(pts[i])) {\r\n\t\t\t\t\t\tsavedIndex = j;\r\n\t\t\t\t\t\tsavedSide = side;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (savedIndex != null)\r\n\t\t\treturn [savedIndex, savedSide];\r\n\t\treturn null;\r\n\t}\r\n\r\n\t_getRouteTendency(pts, i, breakPt, box, side) {\r\n\t\tvar dir;\r\n\t\tvar p;\r\n\t\tswitch (side) {\r\n\t\t\tcase 0:\r\n\t\t\tcase 2:\r\n\t\t\t\tp = \"y\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\tcase 3:\r\n\t\t\t\tp = \"x\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t//first try the breakpt.\r\n\t\tdir = _getRouteDirection(breakPt, pts[pts.length - 1])[p];\r\n\t\tif (dir == 0) {\r\n\t\t\tdir = -_getRouteDirection(pts[0], pts[pts.length - 1])[p];\r\n\t\t\tif (dir == 0) {\r\n\t\t\t\tif (breakPt[p] < box.getCenter()[p])\r\n\t\t\t\t\tdir = -1;\r\n\t\t\t\telse\r\n\t\t\t\t\tdir = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn dir;\r\n\t}\r\n\r\n\tstatic _getRouteDirection(pt1, pt2) {\r\n\t\tif (pt1.x == pt2.x) {\r\n\t\t\tif (pt1.y < pt2.y) return Point.S;\r\n\t\t\treturn Point.N;\r\n\t\t} else if (pt1.y == pt2.y) {\r\n\t\t\tif (pt1.x < pt2.x) return Point.E;\r\n\t\t\treturn Point.W;\r\n\t\t} else if (pt1.x < pt2.x) {\r\n\t\t\tif (pt1.y < pt2.y) return Point.SE;\r\n\t\t\treturn Point.NE;\r\n\t\t} else {\r\n\t\t\tif (pt1.y < pt2.y) return Point.SW;\r\n\t\t\treturn Point.NW;\r\n\t\t}\r\n\t}\r\n\r\n\t_getChannel(container, index, boxes, side) {\r\n\t\tvar maxChannelWidth = this.maxChannelWidth;\r\n\t\tvar box1 = boxes[index], box2;\r\n\t\tvar pt, i;\r\n\t\tvar channel = {}, l, t, b, r;\r\n\t\tswitch (side) {\r\n\t\t\tcase 0:\r\n\t\t\t\tpt = box1.getLeft();\r\n\t\t\t\tchannel.right = pt.x;\r\n\t\t\t\tchannel.horizontal = false;\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tr = boxes[i].getRight().x;\r\n\t\t\t\t\tif (r >= pt.x) continue;\r\n\t\t\t\t\tif (!channel.left || channel.left < r)\r\n\t\t\t\t\t\tchannel.left = r;\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.left) {\r\n\t\t\t\t\tchannel.left = container.getLeft().x;\r\n\t\t\t\t\tif (channel.right - channel.left > maxChannelWidth)\r\n\t\t\t\t\t\tchannel.left = channel.right - maxChannelWidth;\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tbox2 = boxes[i];\r\n\t\t\t\t\tb = box2.getBottom().y;\r\n\t\t\t\t\tt = box2.getTop().y;\r\n\t\t\t\t\tif (b < pt.y && (box2.getRight() > channel.left && box2.getLeft() < channel.right)) {\r\n\t\t\t\t\t\tif (!channel.top || channel.top < b)\r\n\t\t\t\t\t\t\tchannel.top = b;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (t > pt.y && (box2.getRight() > channel.left && box2.getLeft() < channel.right)) {\r\n\t\t\t\t\t\tif (!channel.bottom || channel.bottom > t)\r\n\t\t\t\t\t\t\tchannel.bottom = t;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.top) channel.top = container.getTop().y;\r\n\t\t\t\tif (!channel.bottom) channel.bottom = container.getBottom().y;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tpt = box1.getTop();\r\n\t\t\t\tchannel.horizontal = true;\r\n\t\t\t\tchannel.bottom = pt.y;\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tb = boxes[i].getBottom().y;\r\n\t\t\t\t\tif (b >= pt.y) continue;\r\n\t\t\t\t\tif (!channel.top || channel.top < b)\r\n\t\t\t\t\t\tchannel.top = b;\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.top) {\r\n\t\t\t\t\tchannel.top = container.getTop().y;\r\n\t\t\t\t\tif (channel.bottom - channel.top > maxChannelWidth)\r\n\t\t\t\t\t\tchannel.top = channel.bottom - maxChannelWidth;\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tbox2 = boxes[i];\r\n\t\t\t\t\tl = box2.getLeft().x;\r\n\t\t\t\t\tr = box2.getRight().x;\r\n\t\t\t\t\tif (r < pt.x && (box2.getBottom() > channel.top && box2.getTop() < channel.bottom)) {\r\n\t\t\t\t\t\tif (!channel.left || channel.left < r)\r\n\t\t\t\t\t\t\tchannel.left = r;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (l > pt.x && (box2.getBottom() > channel.top && box2.getTop() < channel.bottom)) {\r\n\t\t\t\t\t\tif (!channel.right || channel.right > l)\r\n\t\t\t\t\t\t\tchannel.right = l;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.left) channel.left = container.getLeft().x;\r\n\t\t\t\tif (!channel.right) channel.right = container.getRight().x;\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tpt = box1.getRight();\r\n\t\t\t\tchannel.horizontal = false;\r\n\t\t\t\tchannel.left = pt.x;\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tl = boxes[i].getLeft().x;\r\n\t\t\t\t\tif (l <= pt.x) continue;\r\n\t\t\t\t\tif (!channel.right || channel.right > l)\r\n\t\t\t\t\t\tchannel.right = l;\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.right) {\r\n\t\t\t\t\tchannel.right = container.getRight().x;\r\n\t\t\t\t\tif (channel.right - channel.left > maxChannelWidth)\r\n\t\t\t\t\t\tchannel.right = channel.left + maxChannelWidth;\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tbox2 = boxes[i];\r\n\t\t\t\t\tb = box2.getBottom().y;\r\n\t\t\t\t\tt = box2.getTop().y;\r\n\t\t\t\t\tif (b < pt.y && (box2.getRight() > channel.left && box2.getLeft() < channel.right)) {\r\n\t\t\t\t\t\tif (!channel.top || channel.top < b)\r\n\t\t\t\t\t\t\tchannel.top = b;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (t > pt.y && (box2.getRight() > channel.left && box2.getLeft() < channel.right)) {\r\n\t\t\t\t\t\tif (!channel.bottom || channel.bottom > t)\r\n\t\t\t\t\t\t\tchannel.bottom = t;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.top) channel.top = container.getTop().y;\r\n\t\t\t\tif (!channel.bottom) channel.bottom = container.getBottom().y;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tpt = box1.getBottom();\r\n\t\t\t\tchannel.horizontal = true;\r\n\t\t\t\tchannel.top = pt.y;\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tbox2 = boxes[i];\r\n\t\t\t\t\tif (box2.getTop().y <= pt.y) continue;\r\n\t\t\t\t\tif (!channel.bottom || channel.bottom > box2.getTop().y)\r\n\t\t\t\t\t\tchannel.bottom = box2.getTop().y;\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.bottom) {\r\n\t\t\t\t\tchannel.bottom = container.getBottom().y;\r\n\t\t\t\t\tif (channel.bottom - channel.top > maxChannelWidth)\r\n\t\t\t\t\t\tchannel.bottom = channel.top + maxChannelWidth;\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tbox2 = boxes[i];\r\n\t\t\t\t\tl = box2.getLeft().x;\r\n\t\t\t\t\tr = box2.getRight().x;\r\n\t\t\t\t\tif (r < pt.x && (box2.getBottom() > channel.top && box2.getTop() < channel.bottom)) {\r\n\t\t\t\t\t\tif (!channel.left || channel.left < r)\r\n\t\t\t\t\t\t\tchannel.left = r;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (l > pt.x && (box2.getBottom() > channel.top && box2.getTop() < channel.bottom)) {\r\n\t\t\t\t\t\tif (!channel.right || channel.right > l)\r\n\t\t\t\t\t\t\tchannel.right = l;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.left) channel.left = container.getLeft().x;\r\n\t\t\t\tif (!channel.right) channel.right = container.getRight().x;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn channel;\r\n\t}\r\n\r\n\t/**\r\n\t * Move a line segment by a specified distance.\r\n\t *\r\n\t * @param pts the list of points.\r\n\t * @param i the index of the segment.\r\n\t * @param d the distance to move.\r\n\t * @param startPadding\r\n\t * @param endPadding\r\n\t */\r\n\t_moveSegment(pts, i, d, startPadding, endPadding) {\r\n\t\t// first check if we need to add new line segments.\r\n\t\tvar dir, l, pt;\r\n\t\tif (i == 0) {\r\n\t\t\t// we need to break off the segment, since we can't change the starting point.\r\n\t\t\tdir = pts[0].getDirection(pts[1]);\r\n\t\t\tif (!startPadding)\r\n\t\t\t\tstartPadding = this.MIN_BUFFER;\r\n\t\t\tl = Math.min(startPadding, pts[0].distance(pts[1])/2);\r\n\t\t\tpt = pts[0].getTranslated(dir.scale(l));\r\n\t\t\tpts.splice(1, 0, pt);\r\n\t\t\tthis._moveSegment(pts, i+1, d);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (i == pts.length - 2) {\r\n\t\t\t// we need to break off the segment, since we can't change the end point.\r\n\t\t\tdir = pts[pts.length-1].getDirection(pts[pts.length-2]);\r\n\t\t\tif (!endPadding)\r\n\t\t\t\tendPadding = this.MIN_BUFFER;\r\n\t\t\tl = Math.min(endPadding, pts[pts.length-1].distance(pts[pts.length-2])/2);\r\n\t\t\tpt = pts[pts.length - 1].getTranslated(dir.scale(l));\r\n\t\t\tpts.splice(pts.length - 1, 0, pt);\r\n\t\t\tthis._moveSegment(pts, i, d);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (pts[i].y == pts[i+1].y) {\r\n\t\t\tif (i > 0 && pts[i - 1].y == pts[i].y) {\r\n\t\t\t\tpts.splice(i + 1, 0, pts[i].clone());\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tif (i < pts.length - 2 && pts[i+1].y == pts[i+2].y)\r\n\t\t\t\tpts.splice(i + 1, 0, pts[i+1].clone());\r\n\t\t\tpts[i].y += d;\r\n\t\t\tpts[i+1].y += d;\r\n\t\t} else {\r\n\t\t\tif (i > 0 && pts[i - 1].x == pts[i].x) {\r\n\t\t\t\tpts.splice(i + 1, 0, pts[i].clone());\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tif (i < pts.length - 2 && pts[i+1].x == pts[i+2].x)\r\n\t\t\t\tpts.splice(i + 1, 0, pts[i+1].clone());\r\n\t\t\tpts[i].x += d;\r\n\t\t\tpts[i+1].x += d;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * This method will merge the redundant segments.\r\n\t */\r\n\tstatic _mergeSegments(pts) {\r\n\t\tvar h1 = pts[pts.length-1].y == pts[pts.length-2].y;\r\n\t\tvar h2;\r\n\t\tfor (var i = pts.length - 2; i >= 1; i--) {\r\n\t\t\th2 = pts[i].y == pts[i-1].y;\r\n\t\t\tif (h2 == h1 || (pts[i].equals(pts[i-1])))\r\n\t\t\t\tpts.splice(i, 1);\r\n\t\t\telse\r\n\t\t\t\th1 = !h1;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nlinkTypes['direct'] = DirectLink;\r\nlinkTypes['bezier'] = BezierLink;\r\nlinkTypes['entityRelations'] = EntityRelations;\r\nlinkTypes['manhattan'] = Manhattan;\r\n\r\nexport default Link;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Link.js\n **/","/*!\n  * Bean - copyright (c) Jacob Thornton 2011-2012\n  * https://github.com/fat/bean\n  * MIT license\n  */\n(function (name, context, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else context[name] = definition()\n})('bean', this, function (name, context) {\n  name    = name    || 'bean'\n  context = context || this\n\n  var win            = window\n    , old            = context[name]\n    , namespaceRegex = /[^\\.]*(?=\\..*)\\.|.*/\n    , nameRegex      = /\\..*/\n    , addEvent       = 'addEventListener'\n    , removeEvent    = 'removeEventListener'\n    , doc            = document || {}\n    , root           = doc.documentElement || {}\n    , W3C_MODEL      = root[addEvent]\n    , eventSupport   = W3C_MODEL ? addEvent : 'attachEvent'\n    , ONE            = {} // singleton for quick matching making add() do one()\n\n    , slice          = Array.prototype.slice\n    , str2arr        = function (s, d) { return s.split(d || ' ') }\n    , isString       = function (o) { return typeof o == 'string' }\n    , isFunction     = function (o) { return typeof o == 'function' }\n\n      // events that we consider to be 'native', anything not in this list will\n      // be treated as a custom event\n    , standardNativeEvents =\n        'click dblclick mouseup mousedown contextmenu '                  + // mouse buttons\n        'mousewheel mousemultiwheel DOMMouseScroll '                     + // mouse wheel\n        'mouseover mouseout mousemove selectstart selectend '            + // mouse movement\n        'keydown keypress keyup '                                        + // keyboard\n        'orientationchange '                                             + // mobile\n        'focus blur change reset select submit '                         + // form elements\n        'load unload beforeunload resize move DOMContentLoaded '         + // window\n        'readystatechange message '                                      + // window\n        'error abort scroll '                                              // misc\n      // element.fireEvent('onXYZ'... is not forgiving if we try to fire an event\n      // that doesn't actually exist, so make sure we only do these on newer browsers\n    , w3cNativeEvents =\n        'show '                                                          + // mouse buttons\n        'input invalid '                                                 + // form elements\n        'touchstart touchmove touchend touchcancel '                     + // touch\n        'gesturestart gesturechange gestureend '                         + // gesture\n        'textinput '                                                     + // TextEvent\n        'readystatechange pageshow pagehide popstate '                   + // window\n        'hashchange offline online '                                     + // window\n        'afterprint beforeprint '                                        + // printing\n        'dragstart dragenter dragover dragleave drag drop dragend '      + // dnd\n        'loadstart progress suspend emptied stalled loadmetadata '       + // media\n        'loadeddata canplay canplaythrough playing waiting seeking '     + // media\n        'seeked ended durationchange timeupdate play pause ratechange '  + // media\n        'volumechange cuechange '                                        + // media\n        'checking noupdate downloading cached updateready obsolete '       // appcache\n\n      // convert to a hash for quick lookups\n    , nativeEvents = (function (hash, events, i) {\n        for (i = 0; i < events.length; i++) events[i] && (hash[events[i]] = 1)\n        return hash\n      }({}, str2arr(standardNativeEvents + (W3C_MODEL ? w3cNativeEvents : ''))))\n\n      // custom events are events that we *fake*, they are not provided natively but\n      // we can use native events to generate them\n    , customEvents = (function () {\n        var isAncestor = 'compareDocumentPosition' in root\n              ? function (element, container) {\n                  return container.compareDocumentPosition && (container.compareDocumentPosition(element) & 16) === 16\n                }\n              : 'contains' in root\n                ? function (element, container) {\n                    container = container.nodeType === 9 || container === window ? root : container\n                    return container !== element && container.contains(element)\n                  }\n                : function (element, container) {\n                    while (element = element.parentNode) if (element === container) return 1\n                    return 0\n                  }\n          , check = function (event) {\n              var related = event.relatedTarget\n              return !related\n                ? related == null\n                : (related !== this && related.prefix !== 'xul' && !/document/.test(this.toString())\n                    && !isAncestor(related, this))\n            }\n\n        return {\n            mouseenter: { base: 'mouseover', condition: check }\n          , mouseleave: { base: 'mouseout', condition: check }\n          , mousewheel: { base: /Firefox/.test(navigator.userAgent) ? 'DOMMouseScroll' : 'mousewheel' }\n        }\n      }())\n\n      // we provide a consistent Event object across browsers by taking the actual DOM\n      // event object and generating a new one from its properties.\n    , Event = (function () {\n            // a whitelist of properties (for different event types) tells us what to check for and copy\n        var commonProps  = str2arr('altKey attrChange attrName bubbles cancelable ctrlKey currentTarget ' +\n              'detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey '  +\n              'srcElement target timeStamp type view which propertyName')\n          , mouseProps   = commonProps.concat(str2arr('button buttons clientX clientY dataTransfer '      +\n              'fromElement offsetX offsetY pageX pageY screenX screenY toElement'))\n          , mouseWheelProps = mouseProps.concat(str2arr('wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ ' +\n              'axis')) // 'axis' is FF specific\n          , keyProps     = commonProps.concat(str2arr('char charCode key keyCode keyIdentifier '          +\n              'keyLocation location'))\n          , textProps    = commonProps.concat(str2arr('data'))\n          , touchProps   = commonProps.concat(str2arr('touches targetTouches changedTouches scale rotation'))\n          , messageProps = commonProps.concat(str2arr('data origin source'))\n          , stateProps   = commonProps.concat(str2arr('state'))\n          , overOutRegex = /over|out/\n            // some event types need special handling and some need special properties, do that all here\n          , typeFixers   = [\n                { // key events\n                    reg: /key/i\n                  , fix: function (event, newEvent) {\n                      newEvent.keyCode = event.keyCode || event.which\n                      return keyProps\n                    }\n                }\n              , { // mouse events\n                    reg: /click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i\n                  , fix: function (event, newEvent, type) {\n                      newEvent.rightClick = event.which === 3 || event.button === 2\n                      newEvent.pos = { x: 0, y: 0 }\n                      if (event.pageX || event.pageY) {\n                        newEvent.clientX = event.pageX\n                        newEvent.clientY = event.pageY\n                      } else if (event.clientX || event.clientY) {\n                        newEvent.clientX = event.clientX + doc.body.scrollLeft + root.scrollLeft\n                        newEvent.clientY = event.clientY + doc.body.scrollTop + root.scrollTop\n                      }\n                      if (overOutRegex.test(type)) {\n                        newEvent.relatedTarget = event.relatedTarget\n                          || event[(type == 'mouseover' ? 'from' : 'to') + 'Element']\n                      }\n                      return mouseProps\n                    }\n                }\n              , { // mouse wheel events\n                    reg: /mouse.*(wheel|scroll)/i\n                  , fix: function () { return mouseWheelProps }\n                }\n              , { // TextEvent\n                    reg: /^text/i\n                  , fix: function () { return textProps }\n                }\n              , { // touch and gesture events\n                    reg: /^touch|^gesture/i\n                  , fix: function () { return touchProps }\n                }\n              , { // message events\n                    reg: /^message$/i\n                  , fix: function () { return messageProps }\n                }\n              , { // popstate events\n                    reg: /^popstate$/i\n                  , fix: function () { return stateProps }\n                }\n              , { // everything else\n                    reg: /.*/\n                  , fix: function () { return commonProps }\n                }\n            ]\n          , typeFixerMap = {} // used to map event types to fixer functions (above), a basic cache mechanism\n\n          , Event = function (event, element, isNative) {\n              if (!arguments.length) return\n              event = event || ((element.ownerDocument || element.document || element).parentWindow || win).event\n              this.originalEvent = event\n              this.isNative       = isNative\n              this.isBean         = true\n\n              if (!event) return\n\n              var type   = event.type\n                , target = event.target || event.srcElement\n                , i, l, p, props, fixer\n\n              this.target = target && target.nodeType === 3 ? target.parentNode : target\n\n              if (isNative) { // we only need basic augmentation on custom events, the rest expensive & pointless\n                fixer = typeFixerMap[type]\n                if (!fixer) { // haven't encountered this event type before, map a fixer function for it\n                  for (i = 0, l = typeFixers.length; i < l; i++) {\n                    if (typeFixers[i].reg.test(type)) { // guaranteed to match at least one, last is .*\n                      typeFixerMap[type] = fixer = typeFixers[i].fix\n                      break\n                    }\n                  }\n                }\n\n                props = fixer(event, this, type)\n                for (i = props.length; i--;) {\n                  if (!((p = props[i]) in this) && p in event) this[p] = event[p]\n                }\n              }\n            }\n\n        // preventDefault() and stopPropagation() are a consistent interface to those functions\n        // on the DOM, stop() is an alias for both of them together\n        Event.prototype.preventDefault = function () {\n          if (this.originalEvent.preventDefault) this.originalEvent.preventDefault()\n          else this.originalEvent.returnValue = false\n        }\n        Event.prototype.stopPropagation = function () {\n          if (this.originalEvent.stopPropagation) this.originalEvent.stopPropagation()\n          else this.originalEvent.cancelBubble = true\n        }\n        Event.prototype.stop = function () {\n          this.preventDefault()\n          this.stopPropagation()\n          this.stopped = true\n        }\n        // stopImmediatePropagation() has to be handled internally because we manage the event list for\n        // each element\n        // note that originalElement may be a Bean#Event object in some situations\n        Event.prototype.stopImmediatePropagation = function () {\n          if (this.originalEvent.stopImmediatePropagation) this.originalEvent.stopImmediatePropagation()\n          this.isImmediatePropagationStopped = function () { return true }\n        }\n        Event.prototype.isImmediatePropagationStopped = function () {\n          return this.originalEvent.isImmediatePropagationStopped && this.originalEvent.isImmediatePropagationStopped()\n        }\n        Event.prototype.clone = function (currentTarget) {\n          //TODO: this is ripe for optimisation, new events are *expensive*\n          // improving this will speed up delegated events\n          var ne = new Event(this, this.element, this.isNative)\n          ne.currentTarget = currentTarget\n          return ne\n        }\n\n        return Event\n      }())\n\n      // if we're in old IE we can't do onpropertychange on doc or win so we use doc.documentElement for both\n    , targetElement = function (element, isNative) {\n        return !W3C_MODEL && !isNative && (element === doc || element === win) ? root : element\n      }\n\n      /**\n        * Bean maintains an internal registry for event listeners. We don't touch elements, objects\n        * or functions to identify them, instead we store everything in the registry.\n        * Each event listener has a RegEntry object, we have one 'registry' for the whole instance.\n        */\n    , RegEntry = (function () {\n        // each handler is wrapped so we can handle delegation and custom events\n        var wrappedHandler = function (element, fn, condition, args) {\n            var call = function (event, eargs) {\n                  return fn.apply(element, args ? slice.call(eargs, event ? 0 : 1).concat(args) : eargs)\n                }\n              , findTarget = function (event, eventElement) {\n                  return fn.__beanDel ? fn.__beanDel.ft(event.target, element) : eventElement\n                }\n              , handler = condition\n                  ? function (event) {\n                      var target = findTarget(event, this) // deleated event\n                      if (condition.apply(target, arguments)) {\n                        if (event) event.currentTarget = target\n                        return call(event, arguments)\n                      }\n                    }\n                  : function (event) {\n                      if (fn.__beanDel) event = event.clone(findTarget(event)) // delegated event, fix the fix\n                      return call(event, arguments)\n                    }\n            handler.__beanDel = fn.__beanDel\n            return handler\n          }\n\n        , RegEntry = function (element, type, handler, original, namespaces, args, root) {\n            var customType     = customEvents[type]\n              , isNative\n\n            if (type == 'unload') {\n              // self clean-up\n              handler = once(removeListener, element, type, handler, original)\n            }\n\n            if (customType) {\n              if (customType.condition) {\n                handler = wrappedHandler(element, handler, customType.condition, args)\n              }\n              type = customType.base || type\n            }\n\n            this.isNative      = isNative = nativeEvents[type] && !!element[eventSupport]\n            this.customType    = !W3C_MODEL && !isNative && type\n            this.element       = element\n            this.type          = type\n            this.original      = original\n            this.namespaces    = namespaces\n            this.eventType     = W3C_MODEL || isNative ? type : 'propertychange'\n            this.target        = targetElement(element, isNative)\n            this[eventSupport] = !!this.target[eventSupport]\n            this.root          = root\n            this.handler       = wrappedHandler(element, handler, null, args)\n          }\n\n        // given a list of namespaces, is our entry in any of them?\n        RegEntry.prototype.inNamespaces = function (checkNamespaces) {\n          var i, j, c = 0\n          if (!checkNamespaces) return true\n          if (!this.namespaces) return false\n          for (i = checkNamespaces.length; i--;) {\n            for (j = this.namespaces.length; j--;) {\n              if (checkNamespaces[i] == this.namespaces[j]) c++\n            }\n          }\n          return checkNamespaces.length === c\n        }\n\n        // match by element, original fn (opt), handler fn (opt)\n        RegEntry.prototype.matches = function (checkElement, checkOriginal, checkHandler) {\n          return this.element === checkElement &&\n            (!checkOriginal || this.original === checkOriginal) &&\n            (!checkHandler || this.handler === checkHandler)\n        }\n\n        return RegEntry\n      }())\n\n    , registry = (function () {\n        // our map stores arrays by event type, just because it's better than storing\n        // everything in a single array.\n        // uses '$' as a prefix for the keys for safety and 'r' as a special prefix for\n        // rootListeners so we can look them up fast\n        var map = {}\n\n          // generic functional search of our registry for matching listeners,\n          // `fn` returns false to break out of the loop\n          , forAll = function (element, type, original, handler, root, fn) {\n              var pfx = root ? 'r' : '$'\n              if (!type || type == '*') {\n                // search the whole registry\n                for (var t in map) {\n                  if (t.charAt(0) == pfx) {\n                    forAll(element, t.substr(1), original, handler, root, fn)\n                  }\n                }\n              } else {\n                var i = 0, l, list = map[pfx + type], all = element == '*'\n                if (!list) return\n                for (l = list.length; i < l; i++) {\n                  if ((all || list[i].matches(element, original, handler)) && !fn(list[i], list, i, type)) return\n                }\n              }\n            }\n\n          , has = function (element, type, original, root) {\n              // we're not using forAll here simply because it's a bit slower and this\n              // needs to be fast\n              var i, list = map[(root ? 'r' : '$') + type]\n              if (list) {\n                for (i = list.length; i--;) {\n                  if (!list[i].root && list[i].matches(element, original, null)) return true\n                }\n              }\n              return false\n            }\n\n          , get = function (element, type, original, root) {\n              var entries = []\n              forAll(element, type, original, null, root, function (entry) {\n                return entries.push(entry)\n              })\n              return entries\n            }\n\n          , put = function (entry) {\n              var has = !entry.root && !this.has(entry.element, entry.type, null, false)\n                , key = (entry.root ? 'r' : '$') + entry.type\n              ;(map[key] || (map[key] = [])).push(entry)\n              return has\n            }\n\n          , del = function (entry) {\n              forAll(entry.element, entry.type, null, entry.handler, entry.root, function (entry, list, i) {\n                list.splice(i, 1)\n                entry.removed = true\n                if (list.length === 0) delete map[(entry.root ? 'r' : '$') + entry.type]\n                return false\n              })\n            }\n\n            // dump all entries, used for onunload\n          , entries = function () {\n              var t, entries = []\n              for (t in map) {\n                if (t.charAt(0) == '$') entries = entries.concat(map[t])\n              }\n              return entries\n            }\n\n        return { has: has, get: get, put: put, del: del, entries: entries }\n      }())\n\n      // we need a selector engine for delegated events, use querySelectorAll if it exists\n      // but for older browsers we need Qwery, Sizzle or similar\n    , selectorEngine\n    , setSelectorEngine = function (e) {\n        if (!arguments.length) {\n          selectorEngine = doc.querySelectorAll\n            ? function (s, r) {\n                return r.querySelectorAll(s)\n              }\n            : function () {\n                throw new Error('Bean: No selector engine installed') // eeek\n              }\n        } else {\n          selectorEngine = e\n        }\n      }\n\n      // we attach this listener to each DOM event that we need to listen to, only once\n      // per event type per DOM element\n    , rootListener = function (event, type) {\n        if (!W3C_MODEL && type && event && event.propertyName != '_on' + type) return\n\n        var listeners = registry.get(this, type || event.type, null, false)\n          , l = listeners.length\n          , i = 0\n\n        event = new Event(event, this, true)\n        if (type) event.type = type\n\n        // iterate through all handlers registered for this type, calling them unless they have\n        // been removed by a previous handler or stopImmediatePropagation() has been called\n        for (; i < l && !event.isImmediatePropagationStopped(); i++) {\n          if (!listeners[i].removed) listeners[i].handler.call(this, event)\n        }\n      }\n\n      // add and remove listeners to DOM elements\n    , listener = W3C_MODEL\n        ? function (element, type, add) {\n            // new browsers\n            element[add ? addEvent : removeEvent](type, rootListener, false)\n          }\n        : function (element, type, add, custom) {\n            // IE8 and below, use attachEvent/detachEvent and we have to piggy-back propertychange events\n            // to simulate event bubbling etc.\n            var entry\n            if (add) {\n              registry.put(entry = new RegEntry(\n                  element\n                , custom || type\n                , function (event) { // handler\n                    rootListener.call(element, event, custom)\n                  }\n                , rootListener\n                , null\n                , null\n                , true // is root\n              ))\n              if (custom && element['_on' + custom] == null) element['_on' + custom] = 0\n              entry.target.attachEvent('on' + entry.eventType, entry.handler)\n            } else {\n              entry = registry.get(element, custom || type, rootListener, true)[0]\n              if (entry) {\n                entry.target.detachEvent('on' + entry.eventType, entry.handler)\n                registry.del(entry)\n              }\n            }\n          }\n\n    , once = function (rm, element, type, fn, originalFn) {\n        // wrap the handler in a handler that does a remove as well\n        return function () {\n          fn.apply(this, arguments)\n          rm(element, type, originalFn)\n        }\n      }\n\n    , removeListener = function (element, orgType, handler, namespaces) {\n        var type     = orgType && orgType.replace(nameRegex, '')\n          , handlers = registry.get(element, type, null, false)\n          , removed  = {}\n          , i, l\n\n        for (i = 0, l = handlers.length; i < l; i++) {\n          if ((!handler || handlers[i].original === handler) && handlers[i].inNamespaces(namespaces)) {\n            // TODO: this is problematic, we have a registry.get() and registry.del() that\n            // both do registry searches so we waste cycles doing this. Needs to be rolled into\n            // a single registry.forAll(fn) that removes while finding, but the catch is that\n            // we'll be splicing the arrays that we're iterating over. Needs extra tests to\n            // make sure we don't screw it up. @rvagg\n            registry.del(handlers[i])\n            if (!removed[handlers[i].eventType] && handlers[i][eventSupport])\n              removed[handlers[i].eventType] = { t: handlers[i].eventType, c: handlers[i].type }\n          }\n        }\n        // check each type/element for removed listeners and remove the rootListener where it's no longer needed\n        for (i in removed) {\n          if (!registry.has(element, removed[i].t, null, false)) {\n            // last listener of this type, remove the rootListener\n            listener(element, removed[i].t, false, removed[i].c)\n          }\n        }\n      }\n\n      // set up a delegate helper using the given selector, wrap the handler function\n    , delegate = function (selector, fn) {\n        //TODO: findTarget (therefore $) is called twice, once for match and once for\n        // setting e.currentTarget, fix this so it's only needed once\n        var findTarget = function (target, root) {\n              var i, array = isString(selector) ? selectorEngine(selector, root) : selector\n              for (; target && target !== root; target = target.parentNode) {\n                for (i = array.length; i--;) {\n                  if (array[i] === target) return target\n                }\n              }\n            }\n          , handler = function (e) {\n              var match = findTarget(e.target, this)\n              if (match) fn.apply(match, arguments)\n            }\n\n        // __beanDel isn't pleasant but it's a private function, not exposed outside of Bean\n        handler.__beanDel = {\n            ft       : findTarget // attach it here for customEvents to use too\n          , selector : selector\n        }\n        return handler\n      }\n\n    , fireListener = W3C_MODEL ? function (isNative, type, element) {\n        // modern browsers, do a proper dispatchEvent()\n        var evt = doc.createEvent(isNative ? 'HTMLEvents' : 'UIEvents')\n        evt[isNative ? 'initEvent' : 'initUIEvent'](type, true, true, win, 1)\n        element.dispatchEvent(evt)\n      } : function (isNative, type, element) {\n        // old browser use onpropertychange, just increment a custom property to trigger the event\n        element = targetElement(element, isNative)\n        isNative ? element.fireEvent('on' + type, doc.createEventObject()) : element['_on' + type]++\n      }\n\n      /**\n        * Public API: off(), on(), add(), (remove()), one(), fire(), clone()\n        */\n\n      /**\n        * off(element[, eventType(s)[, handler ]])\n        */\n    , off = function (element, typeSpec, fn) {\n        var isTypeStr = isString(typeSpec)\n          , k, type, namespaces, i\n\n        if (isTypeStr && typeSpec.indexOf(' ') > 0) {\n          // off(el, 't1 t2 t3', fn) or off(el, 't1 t2 t3')\n          typeSpec = str2arr(typeSpec)\n          for (i = typeSpec.length; i--;)\n            off(element, typeSpec[i], fn)\n          return element\n        }\n\n        type = isTypeStr && typeSpec.replace(nameRegex, '')\n        if (type && customEvents[type]) type = customEvents[type].base\n\n        if (!typeSpec || isTypeStr) {\n          // off(el) or off(el, t1.ns) or off(el, .ns) or off(el, .ns1.ns2.ns3)\n          if (namespaces = isTypeStr && typeSpec.replace(namespaceRegex, '')) namespaces = str2arr(namespaces, '.')\n          removeListener(element, type, fn, namespaces)\n        } else if (isFunction(typeSpec)) {\n          // off(el, fn)\n          removeListener(element, null, typeSpec)\n        } else {\n          // off(el, { t1: fn1, t2, fn2 })\n          for (k in typeSpec) {\n            if (typeSpec.hasOwnProperty(k)) off(element, k, typeSpec[k])\n          }\n        }\n\n        return element\n      }\n\n      /**\n        * on(element, eventType(s)[, selector], handler[, args ])\n        */\n    , on = function(element, events, selector, fn) {\n        var originalFn, type, types, i, args, entry, first\n\n        //TODO: the undefined check means you can't pass an 'args' argument, fix this perhaps?\n        if (selector === undefined && typeof events == 'object') {\n          //TODO: this can't handle delegated events\n          for (type in events) {\n            if (events.hasOwnProperty(type)) {\n              on.call(this, element, type, events[type])\n            }\n          }\n          return\n        }\n\n        if (!isFunction(selector)) {\n          // delegated event\n          originalFn = fn\n          args       = slice.call(arguments, 4)\n          fn         = delegate(selector, originalFn, selectorEngine)\n        } else {\n          args       = slice.call(arguments, 3)\n          fn         = originalFn = selector\n        }\n\n        types = str2arr(events)\n\n        // special case for one(), wrap in a self-removing handler\n        if (this === ONE) {\n          fn = once(off, element, events, fn, originalFn)\n        }\n\n        for (i = types.length; i--;) {\n          // add new handler to the registry and check if it's the first for this element/type\n          first = registry.put(entry = new RegEntry(\n              element\n            , types[i].replace(nameRegex, '') // event type\n            , fn\n            , originalFn\n            , str2arr(types[i].replace(namespaceRegex, ''), '.') // namespaces\n            , args\n            , false // not root\n          ))\n          if (entry[eventSupport] && first) {\n            // first event of this type on this element, add root listener\n            listener(element, entry.eventType, true, entry.customType)\n          }\n        }\n\n        return element\n      }\n\n      /**\n        * add(element[, selector], eventType(s), handler[, args ])\n        *\n        * Deprecated: kept (for now) for backward-compatibility\n        */\n    , add = function (element, events, fn, delfn) {\n        return on.apply(\n            null\n          , !isString(fn)\n              ? slice.call(arguments)\n              : [ element, fn, events, delfn ].concat(arguments.length > 3 ? slice.call(arguments, 5) : [])\n        )\n      }\n\n      /**\n        * one(element, eventType(s)[, selector], handler[, args ])\n        */\n    , one = function () {\n        return on.apply(ONE, arguments)\n      }\n\n      /**\n        * fire(element, eventType(s)[, args ])\n        *\n        * The optional 'args' argument must be an array, if no 'args' argument is provided\n        * then we can use the browser's DOM event system, otherwise we trigger handlers manually\n        */\n    , fire = function (element, type, args) {\n        var types = str2arr(type)\n          , i, j, l, names, handlers\n\n        for (i = types.length; i--;) {\n          type = types[i].replace(nameRegex, '')\n          if (names = types[i].replace(namespaceRegex, '')) names = str2arr(names, '.')\n          if (!names && !args && element[eventSupport]) {\n            fireListener(nativeEvents[type], type, element)\n          } else {\n            // non-native event, either because of a namespace, arguments or a non DOM element\n            // iterate over all listeners and manually 'fire'\n            handlers = registry.get(element, type, null, false)\n            args = [false].concat(args)\n            for (j = 0, l = handlers.length; j < l; j++) {\n              if (handlers[j].inNamespaces(names)) {\n                handlers[j].handler.apply(element, args)\n              }\n            }\n          }\n        }\n        return element\n      }\n\n      /**\n        * clone(dstElement, srcElement[, eventType ])\n        *\n        * TODO: perhaps for consistency we should allow the same flexibility in type specifiers?\n        */\n    , clone = function (element, from, type) {\n        var handlers = registry.get(from, type, null, false)\n          , l = handlers.length\n          , i = 0\n          , args, beanDel\n\n        for (; i < l; i++) {\n          if (handlers[i].original) {\n            args = [ element, handlers[i].type ]\n            if (beanDel = handlers[i].handler.__beanDel) args.push(beanDel.selector)\n            args.push(handlers[i].original)\n            on.apply(null, args)\n          }\n        }\n        return element\n      }\n\n    , bean = {\n          'on'                : on\n        , 'add'               : add\n        , 'one'               : one\n        , 'off'               : off\n        , 'remove'            : off\n        , 'clone'             : clone\n        , 'fire'              : fire\n        , 'Event'             : Event\n        , 'setSelectorEngine' : setSelectorEngine\n        , 'noConflict'        : function () {\n            context[name] = old\n            return this\n          }\n      }\n\n  // for IE, clean up on unload to avoid leaks\n  if (win.attachEvent) {\n    var cleanup = function () {\n      var i, entries = registry.entries()\n      for (i in entries) {\n        if (entries[i].type && entries[i].type !== 'unload') off(entries[i].element, entries[i].type)\n      }\n      win.detachEvent('onunload', cleanup)\n      win.CollectGarbage && win.CollectGarbage()\n    }\n    win.attachEvent('onunload', cleanup)\n  }\n\n  // initialize selector engine to internal default (qSA or throw Error)\n  setSelectorEngine()\n\n  return bean\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/bean/bean.js\n ** module id = 12\n ** module chunks = 0\n **/","import _ from \"lodash\";\nimport Events from \"bean\";\nimport * as KeyUtils from \"./KeyUtils\";\nimport Utils from \"../util/Utils\";\nimport DomUtils from \"../util/DomUtils\";\nimport StringBuffer from \"./../util/StringBuffer\";\n\nconst DEFAULTS = {\n\tstopPropagation: false\n};\n\nexport default class EventDispatcher {\n\t/**\n\t * Constructor\n\t * @param root the root element that the manager will listen to.\n\t * @param zoomScale\n\t * @param config the configuraton for the event dispatcher.\n\t */\n\tconstructor(root, zoomScale = [0, Infinity], config = {}) {\n\t\tthis.root = root;\n\t\tthis.rootNS = root.getAttribute('ns') || 'root';\n\t\tthis.zoomScale = zoomScale;\n\t\t_.assign(this, DEFAULTS, config);\n\t\tthis.scale = 1.0;\n\t\tthis.listeners = {};\n\t\tthis.dragging = false;\n\t\tthis.handler = _.bind(this.handleEvent, this);\n\t\tthis.started = false;\n\n\t\t// Simulate mouseenter/mouseleave events\n\t\tthis.enterStack = [];\n\t}\n\n\t/**\n\t * Start listening for events.\n\t */\n\tstart() {\n\t\tif (this.started) return;\n\t\tEvents.on(this.root, 'mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel', this.handler);\n\t\tthis.startKeys();\n\t\tthis.started = true;\n\t}\n\n\t/**\n\t * Stop listening for events.\n\t */\n\tstop() {\n\t\tif (!this.started) return;\n\t\tEvents.off(this.root, 'mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel', this.handler);\n\t\tthis.stopKeys();\n\t\tthis.started = false;\n\t}\n\n\tstartKeys() {\n\t\tEvents.on(document, 'keydown keyup', this.handler);\n\t}\n\n\tstopKeys() {\n\t\tEvents.off(document, 'keydown keyup', this.handler);\n\t}\n\n\tzoomIn() {\n\t\tthis.scale *= 1.25;\n\t\tthis.scale = Math.max(Math.min(this.zoomScale[1], this.scale), this.zoomScale[0]);\n\t\treturn this.scale;\n\t}\n\n\tzoomOut() {\n\t\tthis.scale *= 0.8;\n\t\tthis.scale = Math.max(Math.min(this.zoomScale[1], this.scale), this.zoomScale[0]);\n\t\treturn this.scale;\n\t}\n\n\tgetEventInfo(event) {\n\t\tlet target = event.target;\n\t\tlet buf = new StringBuffer(), ns, stack = [], isRoot = false;\n\t\twhile (!isRoot && target && target != document) {\n\t\t\tns = target.getAttribute('ns');\n\t\t\tif (ns) {\n\t\t\t\tisRoot = _.startsWith(ns, \"root.\");\n\t\t\t\tif (isRoot) {\n\t\t\t\t\tns = ns.substring(5);\n\t\t\t\t\tevent.rootTarget = target;\n\t\t\t\t}\n\t\t\t\tif (!event.nsTarget) event.nsTarget = target;\n\t\t\t\tstack.splice(0, 0, target);\n\t\t\t\tbuf.prepend(ns);\n\t\t\t}\n\t\t\ttarget = target.parentNode;\n\t\t}\n\t\tif (!isRoot)\n\t\t\tevent.rootTarget = event.nsTarget;\n\n\t\t// target stack is a stack of all the ns targets up to the one with the data binding.\n\t\tevent.targetStack = stack;\n\t\tns = buf.toString('.');\n\t\tif (ns == '') ns = this.rootNS;\n\t\treturn {data: event.rootTarget, ns: ns};\n\t}\n\n\t/**\n\t * The main event handler method, it processes event and generate relevant events to dispatch.\n\t */\n\thandleEvent(event) {\n\t\tlet type = event.type;\n\n\t\t// Do not dispatch other events if we are dragging.\n\t\tif (this.dragging || DomUtils.eventFromInput(event)) return;\n\n\t\tlet data, ns, pos = this.getPosition(event), info, isKeyEvent = (type == 'keydown' || type =='keyup');\n\t\tif (isKeyEvent) {\n\t\t\tdata = this.root;\n\t\t\tns = KeyUtils.getKeyEvent(event);\n\t\t} else {\n\t\t\tinfo = this.getEventInfo(event);\n\t\t\tif (!info) return;\n\t\t\tdata = info.data;\n\t\t\tns = info.ns;\n\t\t}\n\n\t\t//Utils.log('EventDispatcher', \"handleEvent - \" + type + ';ns=' + ns);\n\n\t\tif (type == 'mousewheel') {\n\t\t\tthis.scale *= Math.pow(2, event.wheelDelta * 0.002);\n\t\t\tthis.scale = Math.max(Math.min(this.zoomScale[1], this.scale), this.zoomScale[0]);\n\t\t\tevent.scale = this.scale;\n\t\t\ttype = 'zoom';\n\t\t}\n\n\t\t// See if we should create drag events\n\t\tif (type == 'mousedown' && event.button == 0 /*only drag on left click*/) {\n\t\t\t// Create drag object.\n\t\t\tconst dragObject = {data: data, pos: ns == 'root' ? EventDispatcher.mouse(this.root, event) : pos};\n\t\t\tthis.dragging = false;\n\t\t\t// Start listening for mouse move.\n\t\t\tlet dragPos;\n\n\t\t\tconst mousemove = (event) => {\n\t\t\t\tlet currentPos = this.getPosition(event);\n\t\t\t\tif (!this.dragging) {\n\t\t\t\t\t// check if the mouse has moved. IE always fire mousemove after mousedown even if the mouse hasn't moved yet.\n\t\t\t\t\tif (dragObject.pos[0] == currentPos[0] && dragObject.pos[1] == currentPos[1]) return;\n\n\t\t\t\t\t// start dragging\n\t\t\t\t\tthis.dragging = true;\n\t\t\t\t\tevent.rootTarget = dragObject.data;\n\t\t\t\t\tthis.dispatch(event, 'dragstart', ns, dragObject.data, dragObject.pos);\n\t\t\t\t}\n\t\t\t\tif (ns == \"root\")\n\t\t\t\t\tdragPos = EventDispatcher.mouse(this.root, event);\n\t\t\t\telse\n\t\t\t\t\tdragPos = currentPos;\n\t\t\t\tthis.getEventInfo(event);\n\t\t\t\tthis.dispatch(event, 'drag', ns, dragObject.data, dragPos);\n\t\t\t};\n\t\t\tconst mouseup = (event) => {\n\t\t\t\tif (ns == \"root\")\n\t\t\t\t\tdragPos = EventDispatcher.mouse(this.root, event);\n\t\t\t\telse\n\t\t\t\t\tdragPos = this.getPosition(event);\n\n\t\t\t\tlet info = this.getEventInfo(event);\n\t\t\t\tif (this.dragging) {\n\t\t\t\t\tthis.dragging = false;\n\t\t\t\t\tthis.dispatch(event, 'dragend', ns, dragObject.data, dragPos);\n\t\t\t\t} else {\n\t\t\t\t\tthis.dispatch(event, 'mouseup', ns, info.data, dragPos);\n\t\t\t\t}\n\n\t\t\t\tEvents.off(window, 'mousemove', mousemove);\n\t\t\t\tEvents.off(window, 'mouseup', mouseup);\n\t\t\t};\n\t\t\tevent.preventDefault();\n\t\t\tEvents.on(window, 'mousemove', mousemove);\n\t\t\tEvents.on(window, 'mouseup', mouseup);\n\t\t}\n\n\t\tif (!isKeyEvent)\n\t\t\tthis.simulateEnterLeave(event, type, ns, data, pos);\n\t\tthis.dispatch(event, type, ns, data, pos);\n\n\t\t// disable the default context menu\n\t\t//if (type == 'contextmenu')\n\t\t//\tevent.preventDefault();\n\t}\n\n\t/**\n\t * try to simulate mouseenter/mouseleave events.\n\t */\n\tsimulateEnterLeave(event, type, ns, data, pos) {\n\t\tlet last, stack;\n\t\tconst clearEnterStack = (k) => {\n\t\t\tk = k || 0;\n\t\t\t// Clear off the enter stack.\n\t\t\twhile (this.enterStack.length >= k + 1) {\n\t\t\t\tlast = this.enterStack.pop();\n\t\t\t\tthis.dispatch(event, 'mouseleave', last.ns, last.data, pos);\n\t\t\t}\n\t\t};\n\t\tconst getNS = function(index) {\n\t\t\tlet buf = new StringBuffer();\n\t\t\tfor (let i = 0; i <= index; i++) {\n\t\t\t\tvar val = stack[i].getAttribute(\"ns\");\n\t\t\t\tif (_.startsWith(val, \"root.\"))\n\t\t\t\t\tval = val.substring(5);\n\t\t\t\tbuf.append(val);\n\t\t\t}\n\t\t\treturn buf.toString('.');\n\t\t};\n\n\t\tif (ns && ns != this.rootNS) {\n\t\t\tif (type == 'mouseover') {\n\t\t\t\tstack = event.targetStack;\n\t\t\t\tlet item;\n\t\t\t\tfor (let i = 0; i < stack.length; i++) {\n\t\t\t\t\tif (i < this.enterStack.length) {\n\t\t\t\t\t\tif (this.enterStack[i].target != stack[i]) {\n\t\t\t\t\t\t\tclearEnterStack(i);\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\titem = {data: data, ns: getNS(i), target: stack[i]};\n\t\t\t\t\tthis.enterStack.push(item);\n\t\t\t\t\tthis.dispatch(event, 'mouseenter', item.ns, data, pos);\n\t\t\t\t}\n\t\t\t\tif (stack.length < this.enterStack.length)\n\t\t\t\t\tclearEnterStack(stack.length);\n\t\t\t}\n\t\t}\n\t\tif (ns == this.rootNS && this.enterStack.length > 0)\n\t\t\tclearEnterStack();\n\t}\n\n\tdispatch(event, type, ns, data, pos) {\n\t\t//if (type != 'mouseover' && type != 'mouseout')\n\t\t//\tUtils.log('EventDispatcher', \"dispatch - \" + type + '.' + ns + ';' + pos + ';rootTarget=' + event.rootTarget + ';data=' + data);\n\t\tif (!this.started) return;\n\t\tconst nsType = ns ? type + '.' + ns : type;\n\t\t_.forEach(this.listeners, (listeners, key) => {\n\t\t\tif (EventDispatcher.match(nsType, listeners.regexp ? listeners.regexp : key)) {\n\t\t\t\t_.forEach(listeners, (listener) => {\n\t\t\t\t\tif (!listener.context)\n\t\t\t\t\t\tlistener.callback.apply(window, [type, ns, data, pos, event]);\n\t\t\t\t\telse\n\t\t\t\t\t\tlistener.callback.apply(listener.context, [type, ns, data, pos, event]);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// after dispatching, do not propagate.\n\t\tif (this.stopPropagation && event.stopPropagation)\n\t\t\tevent.stopPropagation();\n\t}\n\n\tgetPosition(event) {\n\t\tconst pos = EventDispatcher.mouse(this.root, event);\n\t\tif(! _.isNaN(pos[0]) && ! _.isNaN(pos[1]))\n\t\t\tthis.lastPosition = pos;\n\t\treturn this.lastPosition;\n\t}\n\n\t/**\n\t * Registers a key event handler\n\t * // Key is object {ctrl, alt, shift, meta, code}\n\t */\n\tregisterKey(type, key, callback, context) {\n\t\tif (_.isArray(key)) {\n\t\t\t_.forEach(key, (k) => {\n\t\t\t\tthis.registerKey(type, k, callback, context);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tkey = KeyUtils.getKeyData(key.ctrl, key.alt, key.shift, key.meta, key.code);\n\t\tif(!key.length) return;\n\t\tkey = new StringBuffer(type).append(key).toString('.');\n\n\t\tconst listener = {callback: callback, context: context};\n\t\tthis.listeners[key] || (this.listeners[key] = []);\n\t\tthis.listeners[key].push(listener);\n\t}\n\n\tunregisterKey(type, key, callback, context) {\n\t\tif (_.isArray(key)) {\n\t\t\t_.forEach(key, (k) => {\n\t\t\t\tthis.unregisterKey(type, k, callback, context);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tkey = KeyUtils.getKeyData(key.ctrl, key.alt, key.shift, key.meta, key.code);\n\t\tif(!key.length) return;\n\t\tkey = new StringBuffer(type).append(key).toString('.');\n\n\t\tlet listeners = this.listeners[key], listener;\n\t\tif (!listeners) return;\n\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\tlistener = listeners[i];\n\t\t\tif (listener.callback === callback && (!context || context === listener.context)) {\n\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Registers an event handler\n\t */\n\tregister(type, callback, context, zIndex) {\n\t\tif (_.isArray(type)) {\n\t\t\t_.forEach(type, (t) => {\n\t\t\t\tthis.register(t, callback, context, zIndex);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tconst listener = {callback: callback, context: context, zIndex: zIndex};\n\t\tvar regexp = null;\n\t\tif (type instanceof RegExp) {\n\t\t\tregexp = type;\n\t\t\ttype = type + '';\n\t\t}\n\t\tthis.listeners[type] || (this.listeners[type] = []);\n\t\tif (regexp && !this.listeners[type].regexp)\n\t\t\tthis.listeners[type].regexp = regexp;\n\t\tthis.listeners[type].push(listener);\n\t}\n\n\tunregister(type, callback, context) {\n\t\tif (type instanceof RegExp)\n\t\t\ttype = type + '';\n\t\tlet listeners = this.listeners[type], listener;\n\t\tif (!listeners) return;\n\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\tlistener = listeners[i];\n\t\t\tif (listener.callback === callback && (!context || context === listener.context)) {\n\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.stop();\n\t\tdelete this.root;\n\t\tdelete this.listeners;\n\t\tdelete this.enterStack;\n\t}\n\n\t/**\n\t * Check if the registered event type matches the real event type. \"*\" is allowed as a wild card.\n\t */\n\tstatic match(nsType, registeredType) {\n\t\tif (registeredType instanceof RegExp)\n\t\t\treturn nsType.match(registeredType);\n\n\t\treturn nsType == registeredType;\n\t\t/*const arr = registeredType.split('*');\n\t\tif (arr.length == 1)\n\t\t\treturn nsType == registeredType;\n\n\t\tlet substr, index = 0;\n\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\tif (arr[i].length == 0) continue;\n\t\t\tsubstr = nsType.slice(index);\n\t\t\tindex = substr.indexOf(arr[i]);\n\t\t\tif (index < 0)\n\t\t\t\treturn false;\n\t\t\tindex += arr[i].length;\n\t\t}\n\t\treturn true;*/\n\t}\n\n\tstatic mouse(container, e) {\n\t\tif (e.changedTouches) e = e.changedTouches[0];\n\t\tvar svg = container.ownerSVGElement || container;\n\t\tif (svg.createSVGPoint) {\n\t\t\tvar point = svg.createSVGPoint();\n\t\t\tpoint.x = e.clientX; point.y = e.clientY;\n\t\t\tpoint = point.matrixTransform(container.getScreenCTM().inverse());\n\t\t\treturn [point.x, point.y];\n\t\t}\n\t\tvar rect = container.getBoundingClientRect();\n\t\treturn [e.clientX - rect.left - container.clientLeft, e.clientY - rect.top - container.clientTop];\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/event/EventDispatcher.js\n **/","///////////////////////////////////////////////////////////////////////////////\n//                                                                           //\n//           The Key Utility CLass for the Event Dispatcher          \t     //\n//                                                                           //\n///////////////////////////////////////////////////////////////////////////////\n\nimport StringBuffer from \"./../util/StringBuffer\";\n\n/**\n * KEY constant\n */\nconst KEY = {\n\tALT          : 18,\n\tBACK_SPACE   : 8,\n\tCAPS_LOCK    : 20,\n\tCONTROL      : 17,\n\tDELETE       : 46,\n\tDOWN         : 40,\n\tEND          : 35,\n\tENTER        : 13,\n\tESCAPE       : 220,\n\tHOME         : 36,\n\tLEFT         : 37,\n\tMETA         : 224,\n\tNUM_LOCK     : 144,\n\tPAGE_DOWN    : 34,\n\tPAGE_UP      : 33,\n\tPAUSE        : 19,\n\tPRINTSCREEN  : 44,\n\tRIGHT        : 39,\n\tSCROLL_LOCK  : 145,\n\tSHIFT        : 16,\n\tSPACE        : 32,\n\tTAB          : 9,\n\tUP           : 38\n\t//ADD          : DomUtils.isFireFox ? 61  : 187,\n\t//SUBTRACT     : DomUtils.isFireFox ? 173 : 189\n};\n\nexport function getKeyEvent(event) {\n\tif (!event || !event instanceof KeyboardEvent) {\n\t\treturn null;\n\t}\n\n\tvar key = event.keyCode || event.which;\n\n\t// Need to find a way to avoid this\n\tif (key >= 16 && key <= 18) {\n\t\tkey = null;\n\t}\n\n\treturn getKeyData(event.ctrlKey, event.altKey, event.shiftKey, event.metaKey, key);\n}\n\nexport function getKeyData(ctrl, alt, shift, meta, key) {\n\tvar buf = new StringBuffer();\n\n\tif (ctrl) buf.append(\"CTRL\");\n\tif (alt) buf.append(\"ALT\");\n\tif (shift) buf.append(\"SHIFT\");\n\tif (meta) buf.append(\"META\");\n\tif (key) buf.append(key);\n\n\treturn buf.toString(\".\");\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/event/KeyUtils.js\n **/","import _ from \"lodash\";\nimport Utils from \"../util/Utils\";\nimport Node from \"./Node\";\nimport Edge from \"./Edge\";\nimport Marker from \"../view/Marker\";\n\nconst nodeDefaults = {\n\tname: 'Default',\n\trole: 'node',\n\tdraggable: true,\n\tselectable: true,\n\teditable: true,\n\tresizable: false,\n\tsourceable: true,\n\ttargetable: true,\n\tvisible: true\n};\n\nconst edgeDefaults = {\n\tname: 'Default',\n\trole: 'edge',\n\tselectable: true,\n\tvisible: true,\n\tstartMarker: null,\n\tendMarker: {\n\t\tid: 'Default_EndMarker',\n\t\ttype: 'arrow',\n\t\tsize: 10,\n\t\tcolor: '#0ea117'\n\t},\n\t/* start and end is only used if the edge is not connected to a node */\n\tstart: [0, 0],\n\tend: [400, 200]\n};\n\nclass Graph {\n\tconstructor(id = _.uniqueId(\"G\"), config = {}, model) {\n\t\tthis.id = id;\n\n\t\tthis.nodes = {};\n\t\tthis.edges = {};\n\n\t\tthis.selection = null;\n\t\tthis.destroyed = false;\n\n\t\tUtils.buildTypes(config.nodeTypes, \"Nodes\", nodeDefaults);\n\t\tUtils.buildTypes(config.edgeTypes, \"Edges\", edgeDefaults);\n\t\t// check for markers.\n\t\tthis.markers = [];\n\t\tlet edgeTypes = Utils.type(Edge.namespace), marker, markerConfig;\n\t\tedgeTypes.forEach(function(type) {\n\t\t\tmarkerConfig = type.prototype.startMarker;\n\t\t\tif (markerConfig) {\n\t\t\t\tmarker = Marker.getMarker(markerConfig, true);\n\t\t\t\tthis.markers.push(marker);\n\t\t\t}\n\t\t\tmarkerConfig = type.prototype.endMarker;\n\t\t\tif (markerConfig) {\n\t\t\t\tmarker = Marker.getMarker(markerConfig, false);\n\t\t\t\tthis.markers.push(marker);\n\t\t\t}\n\t\t}, this);\n\n\t\tdelete config.nodeTypes;\n\t\tdelete config.edgeTypes;\n\t\tUtils.initConfig(this, config);\n\t\tthis.root = null;\n\t\tif (model)\n\t\t\tthis.loadModel(model);\n\t}\n\n\tstatic getJSClass(config, defaultClass) {\n\t\tvar jsClass = null;\n\t\tif (config && config.type) {\n\t\t\t// See if we can get the js class from config.\n\t\t\tvar type = Utils.type(defaultClass.namespace, config.type);\n\t\t\tif (type)\n\t\t\t\tjsClass = type.jsClass;\n\t\t}\n\n\t\treturn Utils.getConstructor(jsClass, defaultClass);\n\t}\n\n\t/**\n\t * Create a new Node\n\t */\n\taddNode(config, parent = this.currentRoot, pos) {\n\t\tlet NodeClass = Graph.getJSClass(config, Node);\n\t\tlet node = new NodeClass(this, config);\n\n\t\tif (parent)\n\t\t\tGraph.addChild(parent, node, pos);\n\t\telse {\n\t\t\tthis.root = node;\n\t\t\tthis.root.prop('role', 'root');\n\t\t}\n\n\t\tthis.nodes[node.id] = node;\n\t\treturn node;\n\t}\n\n\taddEdge(config, parent = this.currentRoot, from, to) {\n\t\tlet EdgeClass = Graph.getJSClass(config, Edge);\n\t\tlet edge = new EdgeClass(this, config, from, to);\n\n\t\tGraph.addChild(parent, edge);\n\t\tthis.edges[edge.id] = edge;\n\t\treturn edge;\n\t}\n\n\tstatic addChild(parent, child) {\n\t\tif (!parent.children)\n\t\t\tparent.children = [];\n\n\t\tif (child.parent != parent) {\n\t\t\tparent.children.push(child);\n\n\t\t\tif (child.parent && child.parent.children)\n\t\t\t\tchild.parent.children = _.without(child.parent.children, child);\n\t\t}\n\t\tchild.parent = parent;\n\t}\n\n\tloadModel(model, parent = this.currentRoot) {\n\t\tvar nodes = model.nodes;\n\t\tvar edges = model.edges;\n\t\tdelete model.nodes;\n\t\tdelete model.edges;\n\n\t\tvar node = this.addNode(model, parent);\n\t\tif (nodes) {\n\t\t\t_.forEach(nodes, (child) => {\n\t\t\t\tthis.loadModel(child, node);\n\t\t\t});\n\t\t}\n\t\tif (edges) {\n\t\t\t_.forEach(edges, (edge) => {\n\t\t\t\tlet from, to;\n\t\t\t\tif (edge.from)\n\t\t\t\t\tfrom = this.nodes[edge.from];\n\t\t\t\tif (edge.to)\n\t\t\t\t\tto = this.nodes[edge.to];\n\t\t\t\tthis.addEdge(edge, node, from, to);\n\t\t\t});\n\t\t}\n\t}\n\n\tget currentRoot() {\n\t\treturn this.root;\n\t}\n\n\treset() {}\n\tdestroy() {}\n}\n\nGraph.DEFAULTS = {\n\tallowDanglingEdges: true,\n\tmultiConnect: false,\n\treadOnly: false,\n\tviewOnly: false\n};\n\nexport default Graph;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/graph/Graph.js\n **/","import _ from \"lodash\";\nimport StringBuffer from \"../util/StringBuffer\";\nimport Cell from \"./Cell\";\n\nclass Node extends Cell {\n\tconstructor(graph, config = {}) {\n\t\tif (!config.id) config.id = _.uniqueId('N');\n\t\tsuper(graph, config);\n\n\t\tthis.inEdges = [];\n\t\tthis.outEdges = [];\n\t\tthis.ports = null;\n\t\tthis.parent = null;\n\t}\n\n\tisAncestor(n) {\n\t\t// TODO: should we move this to graph class ?\n\t\tvar node = n.parent;\n\t\twhile (node) {\n\t\t\tif (this == node) { return true; }\n\t\t\tnode = node.parent;\n\t\t}\n\t\treturn false;\n\t}\n\n\tremoveEdge(edge) {\n\t\tvar edges = edge.source == this ? this.outEdges : this.inEdges;\n\t\tfor (var i = 0; i < edges.length; i++) {\n\t\t\tif (edge == edges[i]) {\n\t\t\t\tedges.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Add a new incoming edge\n\taddInEdge(edge, pos) {\n\t\tif (pos == null || pos === undefined)\n\t\t\tthis.inEdges.push(edge);\n\t\telse\n\t\t\tthis.inEdges.splice(pos, 0, edge);\n\t}\n\n\t// Add a new outgoing edge\n\taddOutEdge(edge, pos) {\n\t\tif (pos == null || pos === undefined || pos > edge.length - 1)\n\t\t\tthis.outEdges.push(edge);\n\t\telse\n\t\t\tthis.outEdges.splice(pos, 0, edge);\n\t}\n\n\trenderChildren(view) {\n\t\tif (this.children) {\n\t\t\tlet buf = new StringBuffer();\n\t\t\t_.forEach(this.children, (child) => {\n\t\t\t\tbuf.append(child.render(view));\n\t\t\t});\n\t\t\treturn buf.toString();\n\t\t}\n\t\treturn '';\n\t}\n\n\tgetPort(key, portName = 'auto', endPt, orthogonal) {\n\t\tlet shape = this.getShape(key);\n\t\tif (portName == 'auto') {\n\t\t\treturn shape.getPerimeter(endPt, orthogonal);\n\t\t}\n\t\treturn null;\n\t}\n\n\ttoString() {\n\t\tvar label = this.prop(\"label\") ? this.prop(\"label\") : \"undefined\";\n\t\tif (_.isArray(label))\n\t\t\tlabel = label[0];\n\t\treturn 'Node:{id:' + this.id + ';label:' + label + ';type:' + this.props.constructor.typeName + '}';\n\t}\n}\nNode.namespace = \"Nodes\";\n\nexport default Node;\n\n/*\n\n/**\n * The DrillDownParent is the parent that displays the vertex when drilled down.\n *\nVertex.prototype.getDrillDownParent = function() {\n\treturn this.parent;\n};\n\nVertex.prototype.isLocked = function() {\n\tvar mode = this.getProperty(\"mode\") || 3;\n\treturn !(mode & Graph.ALLOW_INTERACTIONS);\n};\n\nVertex.prototype.getCrumbText = function() {\n\tif (this.isLocked())\n\t\treturn '<span><img src=\"webwb/pzreadonly.png\" /></span><span>&nbsp;' + this.getProperty(\"label\") + '</span>';\n\treturn this.getProperty(\"label\");\n};\n\nVertex.prototype.canEdit = function() {\n\treturn (!this.parent || !this.parent.isLocked()) && Vertex.superclass.canEdit.call(this);\n};\n\nVertex.prototype.isContainer = function() {\n\treturn this.getProperty(\"container\");\n};\n\n*/\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/graph/Node.js\n **/","import _ from \"lodash\";\nimport Utils from \"../util/Utils\";\nimport Cache from \"../util/Cache\";\nimport StringBuffer from \"../util/StringBuffer\";\nimport Shape from \"../geometry/Shape\";\nimport Rectangle from \"../geometry/Rectangle\";\nimport Label from \"../view/Label\";\n\n/**\n * The Cell is the common parent for Node and Edge.\n */\nexport default class Cell {\n\tconstructor(graph, config = {id: _.uniqueId()}) {\n\t\tthis.graph = graph;\n\t\tthis.id = config.id;\n\t\tdelete config.id;\n\n\t\t// Initialize decorators\n\t\tif (config.decorators) {\n\t\t\tthis.createDecorators(config.decorators);\n\t\t\tdelete config.decorators;\n\t\t}\n\n\t\t// Initialize View Properties\n\t\tif (config.views) {\n\t\t\tthis.viewProps = config.views;\n\t\t\tdelete config.views;\n\t\t}\n\n\t\t// Initialize type\n\t\tvar type = config.type || \"Default\";\n\t\ttype = Utils.type(this.constructor.namespace, type);\n\t\tif (!type)\n\t\t\tthrow new Error(\"Type not found \" + config.type);\n\t\tdelete config.type;\n\t\tthis.props = new type(config);\n\t}\n\n\tprop(name, value) {\n\t\tif (_.isUndefined(value))\n\t\t\treturn this.props[name];\n\t\tthis.props[name] = value;\n\t}\n\n\t/**\n\t * Get/Set property stored by views.\n\t * @param key\n\t * @param name\n\t * @param value\n\t * @returns {*}\n\t */\n\tviewProp(key = 'default', name, value) {\n\t\tif (_.isUndefined(value)) {\n\t\t\tif (key == 'default')\n\t\t\t\treturn this.prop(name, value);\n\t\t\treturn this.viewProps[key][name];\n\t\t}\n\t\tif (key == 'default') {\n\t\t\tthis.prop(name, value);\n\t\t} else {\n\t\t\tif (!this.viewProps[key])\n\t\t\t\tthis.viewProps[key] = {};\n\t\t\tthis.viewProps[key][name] = value;\n\t\t}\n\t}\n\n\tcreateDecorators(decorators) {}\n\n\t/**\n\t * Get properties needed for rendering this element\n\t * @returns {{key: (string|*), className: *, namespace: *, bounds: *}}\n\t */\n\tgetView(key) {\n\t\tlet shape = this.getShape(key);\n\t\treturn _.assign({\n\t\t\tid: this.id,\n\t\t\tkey: key,\n\t\t\tclassName: this.computedClassName,\n\t\t\tstyle: this.viewProp(key, 'style'),\n\t\t\tnamespace: this.namespace\n\t\t}, shape);\n\t}\n\n\tgetShape(key) {\n\t\tlet shape = Cache.get(this.id + \".shape\", key);\n\t\tif (shape) return shape;\n\n\t\tlet shapeConfig = this.viewProp(key, 'shape');\n\t\tlet shapeClass = shapeConfig ? Shape.getShape(shapeConfig.name) : Shape.getShape('Rectangle');\n\t\tlet x = this.viewProp(key, \"x\");\n\t\tlet y = this.viewProp(key, \"y\");\n\t\tlet width = this.viewProp(key, \"width\");\n\t\tlet height = this.viewProp(key, \"height\");\n\t\tshape = new shapeClass(x, y, width, height, shapeConfig);\n\t\tCache.set(this.id + '.shape', shape, key);\n\t\treturn shape;\n\t}\n\n\trender(view) {\n\t\tlet template = Cache.get(this.id + '.template', view.id);\n\t\tif (!template) {\n\t\t\t//create the template\n\t\t\tlet role = this.prop('role');\n\t\t\ttemplate = view.getTemplate('$' + role, null, this);\n\t\t\tif (_.isString(template))\n\t\t\t\ttemplate = _.template(template);\n\t\t\tCache.set(this.id + '.template', template, view.id);\n\t\t}\n\t\treturn template(this.getView(view.id));\n\t}\n\n\trenderShape(view) {\n\t\tlet shape = this.getShape(view.id);\n\t\tif (shape)\n\t\t\treturn shape.render(view);\n\t\treturn '';\n\t}\n\n\trenderLabel(view) {\n\t\tif (this == this.graph.currentRoot)\n\t\t\treturn null;\n\t\tlet box = this.getLabelBox(view.id);\n\t\tif (box)\n\t\t\treturn view.renderLabel(box);\n\t\treturn '';\n\t}\n\n\tgetLabelBox(key) {\n\t\tlet box = Cache.get(this.id + '.labelBox', key);\n\t\tif (box) return box;\n\t\tlet shape = this.getShape(key);\n\t\t// Just get the config will have a positive performance boost for IE11 and IE10.\n\t\tbox = Label.getLabelBox(this.prop('label'), this.viewProp(key, 'labelConfig'), shape.width, shape.height);\n\t\tCache.set(this.id + '.labelBox', box, key);\n\t\treturn box;\n\t}\n\n\tget computedClassName() {\n\t\tif (!this._computedClassName) {\n\t\t\tvar buf = new StringBuffer(this.prop(\"role\"));\n\t\t\tlet props = this.props;\n\t\t\tif (props.hasOwnProperty(\"className\"))\n\t\t\t\tbuf.append(props[\"className\"]);\n\t\t\tprops = props.constructor.prototype;\n\t\t\twhile (props) {\n\t\t\t\tif (props.hasOwnProperty(\"className\"))\n\t\t\t\t\tbuf.append(props[\"className\"]);\n\t\t\t\tprops = Object.getPrototypeOf(props);\n\t\t\t}\n\t\t\tthis._computedClassName = buf.toString(' ');\n\t\t}\n\t\treturn this._computedClassName;\n\t}\n\n\tget namespace() {\n\t\tif (this == this.graph.currentRoot) return '';\n\t\treturn \"root.\" + this.prop(\"role\");\n\t}\n\n\tdestroy() {\n\t\tdelete this.graph;\n\t\tdelete this.decorators;\n\t\tdelete this.props;\n\t\tdelete this.viewProps;\n\t\tthis.destroyed = true;\n\t}\n}\n\n/*\n\nCell.prototype.move = function(x, y) {\n\tthis.setProperty(\"x\", Math.round(x));\n\tthis.setProperty(\"y\", Math.round(y));\n\tdelete this.bounds;\n};\n\nCell.prototype.resize = function(w, h) {\n\tthis.setProperty(\"width\", w);\n\tthis.setProperty(\"height\", h);\n\tdelete this.bounds;\n};\n\nCell.prototype.canEdit = function() {\n\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"editable\");\n};\n\nCell.prototype.canSelect = function() {\n\treturn (this.graph ? this.graph.canSelect() : true) && this.getProperty(\"selectable\");\n};\n\nCell.prototype.canMove = function() {\n\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"draggable\");\n};\n\nCell.prototype.canResize = function() {\n\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"resizable\");\n};\n\nCell.prototype.getTypeFromString = function(typeStr) {\n\treturn this.graph.getType(typeStr);\n};\n\nCell.prototype.createModifiers = function(modifiers) {\n\tthis.modifiers = null;\n\tvar modifierSettings = this.getProperty(\"modifierSettings\");\n\tif (modifierSettings) {\n\t\t_.each(modifiers, function(config) {\n\t\t\tconfig.type = this.graph.getModifierType(config.className);\n\t\t\tconfig.setting = modifierSettings[config.className];\n\t\t\tif (!config.type || !config.setting) return;\n\n\t\t\tthis.addModifier(config.className, new Modifier(this, config));\n\t\t}, this);\n\n\t\t// Check for showAlways settings\n\t\t_.each(modifierSettings, function(setting, name) {\n\t\t\tif (setting.showAlways && (!this.modifiers || !this.modifiers[name])) {\n\t\t\t\tvar config = {type: this.graph.getModifierType(name), setting: setting};\n\t\t\t\tif (!config.type) return;\n\t\t\t\tthis.addModifier(name, new Modifier(this, config));\n\t\t\t}\n\t\t}, this);\n\t}\n};\n\nCell.prototype.addModifier = function(name, modifier) {\n\tif (!this.modifiers)\n\t\tthis.modifiers = {};\n\n\tif (!modifier.hasOwnProperty(\"showHeader\"))\n\t\tmodifier.showHeader = true;\n\n\t// @hack preferably set it in configurations.\n\tif (modifier.name == \"HoverProcessModifier\" || modifier.name == \"HoverResults\")\n\t\tmodifier.showHeader = false;\n\n\tthis.modifiers[name] = modifier;\n};\n\nCell.prototype.getModifiers = function() {\n\tif (_.isUndefined(this.modifiers))\n\t\tthis.createModifiers();\n\treturn this.modifiers;\n};\n\nCell.prototype.getModifier = function(name) {\n\tvar modifiers = this.getModifiers();\n\tif (modifiers)\n\t\treturn modifiers[name];\n\treturn null;\n};\n\nCell.prototype.isVisible = function() {\n\treturn this.getProperty('visible');\n};\n\nCell.prototype.isContainer = function() {\n\treturn false;\n};\n*/\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/graph/Cell.js\n **/","/**\n * Created by tong on 6/7/2016.\n */\n\nlet caches = {};\n\nlet Cache = {\n\tget: function(key, namespace) {\n\t\treturn this.getCache(namespace)[key];\n\t},\n\n\tset: function(key, value, namespace) {\n\t\tthis.getCache(namespace)[key] = value;\n\t},\n\n\tcontains: function(key, namespace) {\n\t\treturn key in this.getCache(namespace);\n\t},\n\n\tremove: function(key, namespace) {\n\t\tdelete this.getCache(namespace)[key];\n\t},\n\n\tclear: function(namesapce) {\n\t\tif (!namespace)\n\t\t\tcaches = {};\n\t\telse if (caches[namespace])\n\t\t\tcaches[namespace] = {};\n\t},\n\n\tgetCache: function(namespace = 'default') {\n\t\tif (!caches[namespace])\n\t\t\tcaches[namespace] = {};\n\t\treturn caches[namespace];\n\t}\n};\n\nexport default Cache;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/Cache.js\n **/","import _ from \"lodash\";\nimport Events from \"bean\";\nimport Utils from \"../util/Utils\";\nimport DomUtils from \"../util/DomUtils\";\nimport StringBuffer from \"../util/StringBuffer\";\nimport Rectangle from \"../geometry/Rectangle\";\n\nconst FONT_BOLD = 1, FONT_ITALIC = 2, FONT_UNDERLINE = 4, FONT_SHADOW = 8;\n\nlet defaultConfig = {\n\tfontSize: 11,\n\tfontFamily: \"Arial\",\n\tfontStyle: 0,\n\tfontColor: 'black',\n\tpadding: 0,\n\tlinePadding: 0,\n\talign: \"left\",\n\twidth: 0,\n\theight: 0,\n\trotation: null,\n\tgeometry: {x: 0, y: 0, anchorY: 0, offsetX: 0, offsetY: 0}\n};\n\n/**\n * The label object handles label sizing/positioning\n */\nexport default (function() {\n\tlet stringMeasureEl = null, measureDiv, baselineDiv;\n\n\t/**\n\t * Calculate the size of the string.\n\t */\n\tlet getStringSize = _.memoize(function(str, fontSize, fontFamily, bold) {\n\t\tfontSize = fontSize || 11;\n\t\tfontFamily = fontFamily || 'Arial,Helvetica';\n\t\tbold = !_.isUndefined(bold) ? bold: false;\n\n\t\t// first check if there is a string-measuring div available, if not, create now.\n\t\tif (!stringMeasureEl) {\n\t\t\tstringMeasureEl = DomUtils.createElement('iframe', {id:\"_ComputeStylesIframe\"}, {position:\"absolute\", visibility:\"hidden\", width:\"auto\"});\n\t\t\tdocument.body.appendChild(stringMeasureEl);\n\t\t\tvar doc = stringMeasureEl.contentWindow.document;\n\t\t\tdoc.open();\n\t\t\tdoc.write('<html><body>\\\n\t\t\t\t<div id=\"baselineDiv\" style=\"height:100px;\"><span style=\"line-height:0\">T</span><span style=\"height:100%;display:inline-block;\"></span></div>\\\n\t\t\t\t<div id=\"measureDiv\" style=\"position:absolute;width:auto;height:auto;padding:0;white-space:pre-wrap;word-wrap:break-word;display:inline-block;\"></div>\\\n\t\t\t\t</body></html>');\n\t\t\tdoc.close();\n\t\t\tmeasureDiv = doc.getElementById(\"measureDiv\");\n\t\t\tbaselineDiv = doc.getElementById(\"baselineDiv\");\n\t\t}\n\t\tbaselineDiv.style.fontSize = measureDiv.style.fontSize = fontSize;\n\t\tbaselineDiv.style.fontFamily = measureDiv.style.fontFamily = fontFamily;\n\t\tbaselineDiv.style.fontWeight = measureDiv.style.fontWeight = bold ? 'bold' : 'normal';\n\t\tmeasureDiv.innerHTML = str;\n\n\t\tlet strut = baselineDiv.firstChild;\n\t\tlet baselineHeight = strut.offsetTop + strut.offsetHeight - baselineDiv.offsetHeight - baselineDiv.offsetTop;\n\n\t\treturn {width: measureDiv.offsetWidth, height: measureDiv.offsetHeight, baseline: baselineHeight};\n\t}, function(str, fontSize, fontFamily, bold) { return str + ';' + fontSize + ';' + fontFamily + ';' + bold; });\n\n\t/**\n\t * Create a wrapped text.\n\t * @param {String} string the string to wrap.\n\t * @param {maxWidth} the maximum width this string can take.\n\t * @param {fontSize}\n\t * @param {fontFamily}\n\t * @param {bold}\n\t */\n\tlet wrap = _.memoize(function(string, maxWidth, fontSize, fontFamily, bold) {\n\t\tmaxWidth = maxWidth || 0;\n\t\tfontSize = fontSize || 11;\n\t\tfontFamily = fontFamily || 'Arial,Helvetica';\n\t\tbold = !_.isUndefined(bold) ? bold: false;\n\n\t\tlet arr = [];\n\t\tlet spaceSize = getStringSize(\"&nbsp;\", fontSize, fontFamily, bold), space = spaceSize.width;\n\t\tarr.lineHeight = spaceSize.height;\n\t\tarr.baseline = spaceSize.baseline;\n\n\t\tif (!maxWidth || !string || string == \"\") {\n\t\t\tarr.push(string);\n\t\t\tarr.width = (!string || string == \"\") ? space : getStringSize(string, fontSize, fontFamily, bold).width;\n\t\t\tarr.height = arr.lineHeight;\n\t\t\treturn arr;\n\t\t}\n\n\t\tvar width = 0;\n\t\t//split the text by lines\n\t\tvar lines = string.split('\\n');\n\n\t\tvar buf = new StringBuffer();\n\n\t\tfor (var j = 0; j < lines.length; j++) {\n\t\t\t//split each line by word\n\t\t\tvar words = lines[j].split(/\\s/);\n\t\t\tvar line = \"\", currentWidth = 0, wordWidth = 0, newLine = true, word;\n\n\t\t\tfor (var i = 0; i < words.length; i++) {\n\t\t\t\tword = words[i];\n\t\t\t\twordWidth = getStringSize(word, fontSize, fontFamily, bold).width;\n\n\t\t\t\tif ((newLine ? wordWidth : currentWidth + space + wordWidth) > maxWidth) {\n\t\t\t\t\tif (newLine) {\n\t\t\t\t\t\tbuf.append(word);\n\t\t\t\t\t\twidth = Math.max(width, wordWidth);\n\t\t\t\t\t\tif (i < words.length - 1) {\n\t\t\t\t\t\t\tarr.push(buf.toString());\n\t\t\t\t\t\t\tbuf.clear();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tarr.push(buf.append(line).toString());\n\t\t\t\t\t\twidth = Math.max(width, currentWidth + space + wordWidth);\n\t\t\t\t\t\tbuf.clear();\n\t\t\t\t\t}\n\t\t\t\t\tline = \"\";\n\t\t\t\t\tcurrentWidth = 0;\n\t\t\t\t\tif (!newLine)\n\t\t\t\t\t\ti--; // move back one word.\n\t\t\t\t\tnewLine = true;\n\t\t\t\t} else {\n\t\t\t\t\tline = newLine ? word : line + \" \" + word;\n\t\t\t\t\tcurrentWidth = newLine ? wordWidth : currentWidth + space + wordWidth;\n\t\t\t\t\twidth = Math.max(width, currentWidth);\n\t\t\t\t\tnewLine = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (line != \"\")\n\t\t\t\tbuf.append(line);\n\t\t\tif (j < lines.length - 1) {\n\t\t\t\tarr.push(buf.toString());\n\t\t\t\tbuf.clear();\n\t\t\t}\n\t\t}\n\n\t\tarr.push(buf.toString());\n\t\tarr.width = width;\n\t\tarr.height = arr.lineHeight * arr.length;\n\t\treturn arr;\n\t}, function(str, maxWidth, fontSize, fontFamily, bold) { return str + ';' + maxWidth + ';' + fontSize + ';' + fontFamily + ';' + bold; });\n\n\t/**\n\t *  Get the view information for how to display the label.\n\t * @param label The string that needs to be displayed\n\t * @param containerWidth The width of the parent container.\n\t * @param containerHeight The height of the parent container.\n\t * @param labelConfig The configuration on how to display label. It should be an object with the following parameters:\n\t * {\n\t *      fontSize, fontFamily, fontStyle, padding,\n\t *      align: can be either \"left\", \"center\" or \"right\",\n\t *      width: the maximum width of the label. if less than 1, then is treated as percentage. If 0, no wrapping will occur,\n\t *      height,\n\t *      geometry\n\t * }\n\t * @returns {*}\n\t */\n\tfunction getLabelBox(label, labelConfig, containerWidth, containerHeight) {\n\t\treturn _getLabelBox.call(this, label, labelConfig, {width: containerWidth, height: containerHeight});\n\t}\n\n\tfunction getLabelBoxForLink(label, labelConfig, link) {\n\t\treturn _getLabelBox.call(this, label, labelConfig, link);\n\t}\n\n\tfunction _getLabelBox(label, labelConfig = {}, context) {\n\t\tlabelConfig = _.defaultsDeep(labelConfig, defaultConfig);\n\t\tlet fontSize = labelConfig.fontSize;\n\t\tlet fontFamily = labelConfig.fontFamily;\n\t\tlet fontStyle = labelConfig.fontStyle;\n\t\tlet bold = (fontStyle & FONT_BOLD) == FONT_BOLD;\n\t\tlet padding = labelConfig.padding;\n\t\tlet linePadding = labelConfig.linePadding;\n\t\tlet align = labelConfig.align;\n\n\t\tlet w = labelConfig.width, h = labelConfig.height;\n\t\tif (context.width) {\n\t\t\tw = w <= 5 ? context.width * w : w;\n\t\t\th = h <= 5 ? context.height * h : h;\n\t\t}\n\t\tw -= 2 * padding;\n\t\th -= 2 * padding;\n\t\tw = Math.max(0, w);\n\t\th = Math.max(0, h);\n\n\t\tlet geometry = _.clone(labelConfig.geometry);\n\t\tlet wrappedLabel = this.wrap(label, w, fontSize, fontFamily, bold);\n\t\tgeometry.width = wrappedLabel.width + 2 * padding;\n\t\tgeometry.height = wrappedLabel.height + 2 * padding + (wrappedLabel.length - 1) * linePadding;\n\t\tlet anchor = \"start\", dx = 0, setAnchorX = !_.has(geometry, \"anchorX\");\n\t\tswitch (align) {\n\t\t\tcase \"center\":\n\t\t\t\tanchor = \"middle\";\n\t\t\t\tif (setAnchorX) geometry.anchorX = 0;\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tanchor = \"end\";\n\t\t\t\tdx = wrappedLabel.width/2;\n\t\t\t\tif (setAnchorX) geometry.anchorX = -0.5;\n\t\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\t\tdx = -wrappedLabel.width/2;\n\t\t\t\tif (setAnchorX) geometry.anchorX = 0.5;\n\t\t\t\tbreak;\n\t\t}\n\t\tlet pos;\n\t\tif (context.getRelativePosition)\n\t\t\tpos = context.getRelativePosition(geometry);\n\t\telse\n\t\t\tpos = Utils.getRelativePosition({width: context.width, height: context.height}, geometry);\n\n\t\tlet bounds = new Rectangle(pos[0], pos[1], geometry.width, geometry.height);\n\t\t// the pivot is the center of rotation when the label has a rotation specified.\n\t\tlet pivot = align == 'center' ? [0, 0] : (align == 'left' ? [-wrappedLabel.width/2, 0] : [wrappedLabel.width/2, 0]);\n\n\t\t// the maximum bounds for the label, used to position inline editor\n\t\tgeometry.width = Math.max(w + 2 * padding, geometry.width);\n\t\tgeometry.height = Math.max(h + 2 * padding, geometry.height);\n\n\t\tif (context.getRelativePosition)\n\t\t\tpos = context.getRelativePosition(geometry);\n\t\telse\n\t\t\tpos = Utils.getRelativePosition({width: context.width, height: context.height}, geometry);\n\n\t\tlet maxBounds = new Rectangle(pos[0], pos[1], geometry.width, geometry.height);\n\t\treturn {\n\t\t\tconfig: labelConfig, label: wrappedLabel, _label: label,\n\t\t\tbold, underline: fontStyle & FONT_UNDERLINE, italic: fontStyle & FONT_ITALIC, shadow: fontStyle & FONT_SHADOW,\n\t\t\tdx, dy: -geometry.height/2 + padding + wrappedLabel.lineHeight - wrappedLabel.baseline, anchor, lineHeight: wrappedLabel.lineHeight + linePadding,\n\t\t\tpivot, bounds, maxBounds\n\t\t};\n\t}\n\n\tfunction render(view, box) {\n\t\treturn view.renderLabel(box);\n\t}\n\n\tlet editor = {\n\t\tstart: function(key, container, box, refEl, textEl, scale = 1.0, singleLine = true) {\n\t\t\tif (this.input) {\n\t\t\t\tif (this.key != key) {\n\t\t\t\t\t// need to close the existing editor first\n\t\t\t\t\tthis.stop();\n\t\t\t\t} else\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar tag = singleLine ? 'input' : 'textarea';\n\t\t\tthis.input = DomUtils.createElement(tag, {id:\"inlineEditor\", unselectable:\"off\"}, {position:\"absolute\", overflow:\"hidden\", padding:\"0px\", margin:\"0px\", border:\"transparent\"});\n\t\t\tif (singleLine) {\n\t\t\t\tEvents.on(this.input, 'keydown keyup', (event) => {\n\t\t\t\t\tif (event.keyCode == 13) {\n\t\t\t\t\t\tEvents.off(this.input, 'keydown keyup');\n\t\t\t\t\t\tthis.stop();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tcontainer.appendChild(this.input);\n\n\t\t\tthis.key = key;\n\t\t\tthis.box = box;\n\t\t\tthis.refEl = refEl;\n\t\t\tthis.textEl = textEl;\n\n\t\t\tlet labelConfig = box.config;\n\t\t\tlet maxBounds = new Rectangle(box.maxBounds.x, box.maxBounds.y, box.maxBounds.width * scale, box.maxBounds.height * scale);\n\t\t\tlet pos = DomUtils.getCenterPosition(refEl, container);\n\t\t\tpos = [pos[0] + maxBounds.left, pos[1] + maxBounds.top];\n\n\t\t\tif (textEl)\n\t\t\t\ttextEl.style.visibility = 'hidden';\n\n\t\t\tDomUtils.setElement(this.input, null, {\n\t\t\t\tvisibility: 'visible',\n\t\t\t\tleft: pos[0] + \"px\",\n\t\t\t\ttop: pos[1] + \"px\",\n\t\t\t\twidth: maxBounds.width + 'px',\n\t\t\t\theight: maxBounds.height + 'px',\n\t\t\t\t\"font-family\": labelConfig.fontFamily,\n\t\t\t\t\"font-size\": (labelConfig.fontSize * scale) + 'px',\n\t\t\t\t\"font-weight\": (labelConfig.fontStyle & FONT_BOLD) == FONT_BOLD ? 'bold' : 'normal'\n\t\t\t\t/*\"color\": labelConfig.fontColor*/\n\t\t\t});\n\n\t\t\tthis.input.value = box._label;\n\t\t\tthis.input.focus();\n\t\t\tthis.input.select();\n\t\t\tEvents.fire(this, 'editor.start', [this.key]);\n\t\t},\n\n\t\tstop: function(cancel) {\n\t\t\tif (!this.input) return;\n\n\t\t\tcancel = cancel || false;\n\t\t\tif (this.textEl)\n\t\t\t\tthis.textEl.style.visibility = null;\n\n\t\t\tif (!cancel)\n\t\t\t\tEvents.fire(this, 'editor.update', [this.key, this.input.value]);\n\n\t\t\tEvents.fire(this, 'editor.stop', [this.key]);\n\n\t\t\t// remove the input\n\t\t\tthis.input.parentNode.removeChild(this.input);\n\t\t\tdelete this.input;\n\t\t\tdelete this.key;\n\t\t\tdelete this.box;\n\t\t\tdelete this.refEl;\n\t\t\tdelete this.textEl;\n\t\t}\n\t};\n\n\treturn {\n\t\tFONT_BOLD,\n\t\tFONT_ITALIC,\n\t\tFONT_UNDERLINE,\n\t\tFONT_SHADOW,\n\t\tgetStringSize,\n\t\twrap,\n\t\tgetLabelBox,\n\t\tgetLabelBoxForLink,\n\t\trender,\n\t\teditor\n\t};\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/Label.js\n **/","import _ from \"lodash\";\nimport Cell from \"./Cell\";\nimport Rectangle from \"../geometry/Rectangle\";\nimport Link from \"../geometry/Link\";\nimport Label from \"../view/Label\";\nimport Cache from \"../util/Cache\";\n\nclass Edge extends Cell {\n\tconstructor(graph, config = {}, source, target) {\n\t\tif (!config.id) config.id = _.uniqueId('E');\n\t\tsuper(graph, config);\n\n\t\tthis.source = this.target = null;\n\t\tthis.setSource(source, config.sourcePos);\n\t\tthis.setTarget(target, config.targetPos);\n\t}\n\n\tsetSource(node, pos) {\n\t\tthis.setTerminal(node, pos, 'source');\n\t}\n\n\tsetTarget(node, pos) {\n\t\tthis.setTerminal(node, pos, 'target');\n\t}\n\n\t/**\n\t * Internal methods to set either the source or target\n\t */\n\t setTerminal(node, pos, dir) {\n\t\tvar end = dir == 'source' ? this.source : this.target;\n\t\tif (end == node) {\n\t\t\t// simply change the position of the edge.\n\t\t\tif (node)\n\t\t\t\tnode.setEdgeAt(this, pos);\n\t\t} else {\n\t\t\tif (end) {\n\t\t\t\t// first remove the edge from the current end\n\t\t\t\tend.removeEdge(this);\n\t\t\t}\n\n\t\t\tif (node) {\n\t\t\t\tif (dir == 'source')\n\t\t\t\t\tnode.addOutEdge(this, pos);\n\t\t\t\telse\n\t\t\t\t\tnode.addInEdge(this, pos);\n\t\t\t}\n\t\t\tif (dir == 'source')\n\t\t\t\tthis.source = node;\n\t\t\telse\n\t\t\t\tthis.target = node;\n\t\t\t//this.clearPoints();\n\t\t}\n\t}\n\n\tgetLabelBox(key) {\n\t\tvar label = this.prop('label');\n\t\tif (label)\n\t\t\treturn Label.getLabelBoxForLink(label, this.viewProp(key, 'labelConfig'), this.getShape(key));\n\t\treturn null;\n\t}\n\n\t/**\n\t * Return a pair of points as reference to the calculation of start and end points.\n\t */\n\tgetReferencePoints(key) {\n\t\tlet pts = [];\n\t\tif (this.source)\n\t\t\tpts.push(this.source.getShape(key).center);\n\t\telse\n\t\t\tpts.push(this.viewProp(key, 'start'));\n\n\t\tif (this.target)\n\t\t\tpts.push(this.target.getShape(key).center);\n\t\telse\n\t\t\tpts.push(this.viewProp(key, 'end'));\n\n\t\treturn pts;\n\t}\n\n\tgetTerminalVisual(key, orthogonal) {\n\t\tlet refPts = this.getReferencePoints(key);\n\t\tlet terminals = [];\n\n\t\tlet getBound = function(pt) {\n\t\t\treturn new Rectangle(pt.x, pt.y, 3, 3);\n\t\t};\n\n\t\tif (this.source) {\n\t\t\tterminals.push(this.source.getPort(key, this.prop('sourcePort'), refPts[1], orthogonal));\n\t\t} else\n\t\t\tterminals.push({point: refPts[0], direction: Rectangle.getDirection(getBound(refPts[0]), refPts[1], true)});\n\n\t\tif (this.target) {\n\t\t\tterminals.push(this.target.getPort(key, this.prop('targetPort'), refPts[0], orthogonal));\n\t\t} else\n\t\t\tterminals.push({point: refPts[1], direction: Rectangle.getDirection(getBound(refPts[1]), refPts[0], true)});\n\t\treturn terminals;\n\t}\n\n\tgetShape(key) {\n\t\tlet shape = Cache.get(this.id + \".shape\", key);\n\t\tif (shape) return shape;\n\n\t\tlet config = this.viewProp(key, 'shape');\n\t\tshape = Link.getLink(this.getTerminalVisual(key, config.orthogonal), config, this.prop('startMarker'), this.prop('endMarker'));\n\t\tCache.set(this.id + '.shape', shape, key);\n\t\treturn shape;\n\t}\n\n\ttoString() {\n\t\treturn 'Edge:{' + (!this.source ? 'null' : this.source.id) + '--' + (!this.target ? 'null' : this.target.id) + '}';\n\t}\n\n\tdestroy() {\n\t\tsuper.destroy();\n\t\tthis.setSource(null);\n\t\tthis.setTarget(null);\n\t}\n}\nEdge.namespace = \"Edges\";\n\nexport default Edge;\n\n/*\n\nEdge.prototype.isVisible = function() {\n\tif (this.graph.getProperty(\"allowDanglingEdges\")) {\n\t\treturn (this.source ? this.source.isVisible() : true) && (this.target ? this.target.isVisible() : true) && this.getProperty(\"visible\");\n\t} else\n\t\treturn this.source && this.target && this.getProperty('visible') && this.source.isVisible() && this.target.isVisible();\n};\n\n*/\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/graph/Edge.js\n **/","import Rectangle from \"../geometry/Rectangle\";\n\nlet registry = {};\n\nlet Marker = (function() {\n\n\t/** Begin Standard Marker Type **/\n\tfunction arrow(size, source, styles) {\n\t\tvar sign = source ? -1 : 1;\n\t\tvar marker = {\n\t\t\tviewBox: new Rectangle(-5, -5, 10, 10),\n\t\t\tsize: size,\n\t\t\tref: [4*sign, 0],\n\t\t\tfill: styles.color\n\t\t};\n\t\tmarker.shape = {\n\t\t\tname: 'Polygon',\n\t\t\tpoints: [[-2*sign, 0], [-4*sign, 4], [4*sign, 0], [-4*sign, -4]]\n\t\t};\n\t\treturn marker;\n\t}\n\n\tfunction triangle(size, source, styles) {\n\t\tvar sign = source ? -1 : 1;\n\t\tvar marker = {\n\t\t\tviewBox: new Rectangle(-5, -5, 10, 10),\n\t\t\tsize: size,\n\t\t\tref: [4*sign, 0],\n\t\t\tfill: styles.color\n\t\t};\n\t\tmarker.shape = {\n\t\t\tname: 'Polygon',\n\t\t\tpoints: [[-5*sign, -5], [-5*sign, 5], [4*sign, 0]]\n\t\t};\n\t\treturn marker;\n\t}\n\n\tfunction oval(size, source, styles) {\n\t\tvar r = size / 2;\n\t\tvar marker = {\n\t\t\tviewBox: new Rectangle(-r, -r, size, size),\n\t\t\tsize: size,\n\t\t\tref: [0, 0],\n\t\t\tfill: styles.color\n\t\t};\n\t\tmarker.shape = '<ellipse cx=\"0\" cy=\"0\" rx=\"' + r + '\" ry=\"' + r + '\"></ellipse>';\n\t\treturn marker;\n\t}\n\n\tfunction diamond(size, source, styles) {\n\t\tvar sign = source ? -1 : 1;\n\t\tvar marker = {\n\t\t\tviewBox: new Rectangle(-5, -5, 10, 10),\n\t\t\tsize: size,\n\t\t\tref: [4*sign, 0],\n\t\t\tfill: styles.color\n\t\t};\n\t\tmarker.shape = '';\n\t\treturn marker;\n\t}\n\t/** End Standard Marker Type **/\n\tfunction getMarker(config, source) {\n\t\tvar factory = registry[config.type];\n\t\tvar marker = factory(config.size, source, config);\n\t\tmarker.id = config.id;\n\t\treturn marker;\n\t}\n\n\tregistry['arrow'] = arrow;\n\tregistry['triangle'] = triangle;\n\tregistry['oval'] = oval;\n\tregistry['diamond'] = diamond;\n\n\treturn {\n\t\tregistry: registry,\n\t\tgetMarker: getMarker\n\t};\n})();\n\nexport default Marker;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/Marker.js\n **/","import _ from \"lodash\";\nimport Utils from \"../util/Utils\";\n\nclass Layout {\n\tconstructor(config={}) {\n\t\tif (config.hasOwnProperty(\"orientation\") && _.isString(config.orientation)) {\n\t\t\tif (config.orientation.toUpperCase() == \"HORIZONTAL\")\n\t\t\t\tconfig.orientation = Layout.HORIZONTAL;\n\t\t\telse\n\t\t\t\tdelete config.orientation;\n\t\t}\n\t\tUtils.initConfig(this, config);\n\t}\n\n\tlayout(root, bounds) {}\n\treset() {}\n\tdestroy() {}\n}\nLayout.VERTICAL = 0;\nLayout.HORIZONTAL = 1;\n\nLayout.DEFAULTS = {\n\torientation: Layout.VERTICAL\n};\n\nexport default Layout;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/layout/Layout.js\n **/","import Layout from \"./Layout\";\n\nclass FlowLayout extends Layout {\n\tlayout(root, bounds) {\n\t\tvar items;\n\t\tif (!root)\n\t\t\titems = this.owner.childNodes;\n\t\telse if (_.isArray(root))\n\t\t\titems = root;\n\t\telse\n\t\t\titems = root.getLinkedNodes('target');\n\t\tif (!items || items.length == 0) return;\n\n\t\tvar x = 0, y = 0, h = 0, node;\n\t\tvar p1 = 0, p2 = 0;\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\tnode = items[i];\n\t\t\tif (x > 0 && x + this.hgap + node.getProperty(\"width\") > bounds.width) {\n\t\t\t\t// create new line\n\t\t\t\ty += h + this.vgap;\n\t\t\t\tx = 0;h = 0;p1 = 0;p2++;\n\t\t\t}\n\t\t\tnode._flPos = [p1, p2];\n\t\t\tnode.moveTo([bounds.x + x, bounds.y + y]);\n\t\t\tx += this.hgap + node.getProperty(\"width\");\n\t\t\tp1++;\n\t\t\th = h < node.getProperty(\"height\") ? node.getProperty(\"height\") : h;\n\t\t}\n\t\tthis.trigger(new Rectangle(bounds.x, bounds.y, bounds.width, y + h));\n\t}\n}\n\nFlowLayout.DEFAULTS = {\n\thgap: 10,\n\tvgap: 10\n};\n\nexport default FlowLayout;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/layout/FlowLayout.js\n **/","import _ from \"lodash\";\nimport Events from \"bean\";\nimport Utils from \"../util/Utils\";\nimport DomUtils from \"../util/DomUtils\";\nimport Layout from \"../layout/Layout\";\nimport Rectangle from \"../geometry/Rectangle\";\nimport EventDispatcher from \"../event/EventDispatcher\";\nimport GraphBehavior from \"../behavior/GraphBehavior\";\nimport SelectionBehavior from \"../behavior/SelectionBehavior\";\nimport Label from \"./Label\";\n\nclass Renderer {\n\tconstructor(id, container, config = {}, graph = null) {\n\t\tthis.id = id;\n\t\tthis.box = DomUtils.createElement('div', {id: this.id, tabindex: 0, ns: 'graph'}, {overflow: \"hidden\", width: \"100%\", height: \"100%\", position: 'relative'});\n\t\tcontainer.appendChild(this.box);\n\t\tif (config.layout) {\n\t\t\tlet layoutClass = Utils.getConstructor(config.layout.jsClass, Layout);\n\t\t\tthis.layout = new layoutClass(config.layout.config);\n\t\t\tdelete config.layout;\n\t\t}\n\t\tthis.clear = true;\n\t\tthis._translate = [0, 0];\n\t\tthis._scale = 1.0;\n\t\tthis.graph = graph;\n\t\tthis.dispatcher = null;\n\t\tthis.graphBehavior = null;\n\t\tthis.selectionBehavior = null;\n\t\tthis.nodeBehavior = null;\n\t\tthis.edgeBehavior = null;\n\t\tthis.connectionBehavior = null;\n\t\tUtils.initConfig(this, config);\n\n\t\tEvents.on(Label.editor, 'editor.update.*', function(key, value) {\n\t\t\tconsole.log(key + '=' + value);\n\t\t});\n\t}\n\n\tget graph() {\n\t\treturn this._graph;\n\t}\n\n\tset graph(graph) {\n\t\tthis._graph = graph;\n\t\tlet root = graph.currentRoot;\n\t\tif (root) {\n\t\t\tthis._translate = [root.viewProp(this.id, 'x') || 0, root.viewProp(this.id, 'y') || 0];\n\t\t\tthis._scale = root.viewProp(this.id, 'scale') || 1.0;\n\t\t}\n\t}\n\n\tviewport(scaled, viewport) {\n\t\tif (_.isUndefined(scaled) || _.isNull(scaled)) scaled = false;\n\t\tif (!viewport) {\n\t\t\tvar vp = new Rectangle(0, 0, this.box.offsetWidth, this.box.offsetHeight);\n\t\t\tif (scaled)\n\t\t\t\treturn Utils.scale(this.translate, this.scale, vp);\n\t\t\treturn vp;\n\t\t}\n\t\tif (!scaled) viewport = Utils.scale(this.translate, this.scale, viewport);\n\t\tvar w = this.box.offsetWidth;\n\t\tvar scale = w / viewport.width;\n\t\tthis.transform(-viewport.x*scale, -viewport.y*scale, scale);\n\t}\n\n\tget translate() { return this._translate; }\n\tset translate(t) { this.transform(t[0], t[1]); }\n\tget scale() { return this._scale; }\n\tset scale(k) {\n\t\tswitch (k) {\n\t\t\tcase \"in\":\n\t\t\t\tk = this.scale * this.prop(\"zoomFactor\");\n\t\t\t\tbreak;\n\t\t\tcase \"out\":\n\t\t\t\tk = this.scale / this.prop(\"zoomFactor\");\n\t\t\t\tbreak;\n\t\t\tcase \"actual\":\n\t\t\t\tk = 1.0;\n\t\t\t\tbreak;\n\t\t\tcase \"fit\":\n\t\t\t\tvar gridSize = this.prop(\"gridSize\") * 2;\n\n\t\t\t\tvar gBounds = this.getBounds();\n\t\t\t\tvar vBounds = this.viewport();\n\n\t\t\t\tvBounds.width -= gridSize;\n\t\t\t\tvBounds.height -= gridSize;\n\n\t\t\t\t/* Do not zoom more than actual if graph already fits into the bounds */\n\t\t\t\tk = Math.min((vBounds.width / gBounds.width), (vBounds.height /gBounds.height), 1.0);\n\n\t\t\t\t//TODO: Add centering code here or trigger an event for that\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif (_.isString(k)) k = parseFloat(k);\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.transform(null, null, k);\n\t}\n\n\ttransform(x = null, y = null, scale = null) {\n\t\tlet graph = this.graph;\n\t\tlet root = graph ? graph.currentRoot : null;\n\t\tif (!_.isNull(x)) {\n\t\t\tthis._translate[0] = x;\n\t\t\tif (root)\n\t\t\t\troot.viewProp(this.id, 'x', x);\n\t\t}\n\t\tif (!_.isNull(y)) {\n\t\t\tthis._translate[1] = y;\n\t\t\tif (root)\n\t\t\t\troot.viewProp(this.id, 'y', y);\n\t\t}\n\t\tif (!_.isNull(scale)) {\n\t\t\tthis._scale = scale;\n\t\t\tif (root)\n\t\t\t\troot.viewProp(this.id, 'scale', scale);\n\t\t\t// sync the scale between the dispatcher and the graph\n\t\t\tlet s = this.dispatcher.scale;\n\t\t\tif (s != scale)\n\t\t\t\tthis.dispatcher.scale = scale;\n\t\t}\n\t\tthis.refresh();\n\t}\n\n\trender() {\n\t\tif (!this._graph) return false;\n\t\tif (this.layout)\n\t\t\tthis.layout.layout(this._graph.currentRoot, this.viewport());\n\n\t\tthis.initializeBehaviors();\n\t\treturn true;\n\t}\n\n\trenderLabel(box) {\n\t\treturn this.constructor.renderLabel(box);\n\t}\n\n\trenderLink(shape) {\n\t\treturn this.constructor.renderLink(shape);\n\t}\n\n\trenderMarkers(markers) {\n\t\treturn this.constructor.renderMarkers(markers);\n\t}\n\n\tinitializeBehaviors() {\n\t\t// create the event dispatcher if necessary.\n\t\tif (!this.dispatcher) {\n\t\t\tthis.dispatcher = new EventDispatcher(this.box, [this.prop('minZoom'), this.prop('maxZoom')]);\n\t\t\tlet jsClass;\n\t\t\tif (this.prop('graphBehavior')) {\n\t\t\t\tjsClass = Utils.getConstructor(this.prop('graphBehavior'));\n\t\t\t\tthis.graphBehavior = new jsClass(this);\n\t\t\t}\n\t\t\tif (this.prop('selectionBehavior')) {\n\t\t\t\tjsClass = Utils.getConstructor(this.prop('selectionBehavior'));\n\t\t\t\tthis.selectionBehavior = new jsClass(this);\n\t\t\t}\n\t\t\tthis.dispatcher.register('mouseup.node.label', function(type, ns, target, pos, event) {\n\t\t\t\tlet node = this._graph.nodes[target.getAttribute('id')];\n\t\t\t\tif (!this.dispatcher.dragging && !node._firstSelection) {\n\t\t\t\t\tLabel._delayEdit = _.delay(() => {\n\t\t\t\t\t\tif (Label._delayEdit) {\n\t\t\t\t\t\t\tdelete Label._delayEdit;\n\t\t\t\t\t\t\tLabel.editor.start(node.id, this.box, node.getLabelBox(this.id), target, event.nsTarget, this.scale);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 250);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t\tthis.dispatcher.register([/^mousedown/, /^zoom/], function(type, ns, target, pos, event) {\n\t\t\t\tif (!DomUtils.eventFromInput(event)) {\n\t\t\t\t\tLabel.editor.stop();\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\t\tthis.dispatcher.start();\n\t}\n\n\trefresh() {}\n\n\t/**\n\t * Get the template for the specified key.\n\t * @param key\n\t * @param config if the template is a function, this config will be passed as the argument.\n\t * @param preprocessor if the template contains preprossing elements, such as #{shape}, the preprocessor will be\n\t * used to render them.\n\t * @returns {*}\n\t */\n\tgetTemplate(key, config, preprocessor) {\n\t\tvar t = this.constructor.TEMPLATES[key];\n\t\tif (t && _.isFunction(t)) {\n\t\t\tt = t(config);\n\t\t}\n\t\t// check if there are any preprocessing tags.\n\t\tif (preprocessor) {\n\t\t\tvar parts = t.match(/(#{[^#]*})/g);\n\t\t\tvar obj = {};\n\t\t\tfor (let part in parts) {\n\t\t\t\tpart = parts[part];\n\t\t\t\tpart = part.substring(2, part.length -1).trim();\n\t\t\t\tobj[part] = preprocessor[_.camelCase('render ' + part)](this);\n\t\t\t}\n\t\t\tt = _.template(t, {interpolate: /#{([\\s\\S]+?)}/g})(obj);\n\t\t}\n\t\treturn t;\n\t}\n\n\treset() {}\n\n\tdestroy() {\n\t\tdelete this._graph;\n\t\tdelete this.layout;\n\t\tif (this.dispatcher) {\n\t\t\tthis.dispatcher.stop();\n\t\t\tdelete this.dispatcher;\n\t\t}\n\t\tthis.box.innerHTML = '';\n\t}\n}\nRenderer.DEFAULTS = {\n\tdefaultClickMode: \"pan\",\n\thideOutline: false,\n\tsingleSelect: true,\n\tdraggable: true,\n\tgridEnabled: false,\n\tguidesEnabled: true,\n\tgridSize: 30,\n\tmaxZoom: 4.0,\n\tminZoom: 0.2,\n\tzoomFactor: 1.2,\n\tmaskOpacity: 0.5,\n\tgraphBehavior: GraphBehavior,\n\tselectionBehavior: SelectionBehavior\n};\n\nexport default Renderer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/Renderer.js\n **/","/**\n * Created by tong on 6/28/2016.\n */\nimport Behavior from \"./Behavior\";\n\n/**\n * Graph handler handles Panning and Zoom and rubber band selection\n */\nclass GraphBehavior extends Behavior {\n\tconstructor(renderer) {\n\t\tsuper(renderer);\n\t\tlet dispatcher = renderer.dispatcher;\n\t\tlet f = function(type, ns, graph, pos, event) {\n\t\t\t//Cursor.updateCursor(type, ns, graph, event);\n\t\t};\n\t\tdispatcher.register(/^drag.*\\.graph$/, this.handleDrag, this);\n\t\tdispatcher.register(/^zoom/, this.handleZoom, this);\n\t\t//dispatcher.register(['mousedown.graph', 'mouseenter.graph', 'mouseleave.graph'], f);\n\t\tthis.offset = null;\n\t}\n\n\thandleZoom(type, ns, graph, pos, event) {\n\t\tthis.renderer.transform(null, null, event.scale);\n\t}\n\n\thandleDrag(type, ns, graph, pos, event) {\n\t\tif (type == 'dragstart') {\n\t\t\tlet pan = (this.renderer.prop(\"defaultClickMode\") == \"pan\") ^ (event.ctrlKey || event.shiftKey);\n\t\t\tif (!pan) return;\n\t\t\tlet t = this.renderer.translate;\n\t\t\tthis.offset = [t[0] - pos[0], t[1] - pos[1]];\n\t\t\treturn;\n\t\t}\n\t\tif (!this.offset) return;\n\t\tthis.renderer.transform(pos[0] + this.offset[0], pos[1] + this.offset[1]);\n\t\tif (type == 'dragend') {\n\t\t\t//Cursor.updateCursor('mouseup', ns, graph, event);\n\t\t\tdelete this.offset;\n\t\t}\n\t}\n}\n\nexport default GraphBehavior;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/behavior/GraphBehavior.js\n **/","export default class Behavior {\n\tconstructor(renderer) {\n\t\tthis.renderer = renderer;\n\t}\n\n\tdestroy() {\n\t\tdelete this.renderer;\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/behavior/Behavior.js\n **/","import Rectangle from \"../geometry/Rectangle\";\nimport Cell from \"../graph/Cell\";\nimport Behavior from \"./Behavior\";\n\nclass SelectionBehavior extends Behavior {\n\tconstructor(renderer) {\n\t\tsuper(renderer);\n\t\tlet dispatcher = renderer.dispatcher;\n\t\tdispatcher.register('mousedown.*', this.selectCell, this);\n\t\tdispatcher.register('mouseup.*', this.unselectCell, this);\n\t\tdispatcher.register('drag*.graph', this.handleMultiSelect, this);\n\t\t//graph.on(Graph.EVENT_TYPES.SELECTION_CHANGE, this.updateSelections, this);\n\t\tthis.selectedNodes = null;\n\t\tthis.selectedLinks = null;\n\t\tthis.attachedLinks = null;\n\t}\n\n\tupdateSelections() {\n\t\tif (this.selectedNodes)\n\t\t\tthis.selectedNodes.classed('selected', false);\n\t\tif (this.selectedLinks)\n\t\t\tthis.selectedLinks.classed('selected', false);\n\n\t\tthis.selectedNodes = null;\n\t\tthis.selectedLinks = null;\n\t\tthis.attachedLinks = null;\n\n\t\tif (this.graph.selectedVertices && this.graph.selectedVertices.length > 0) {\n\t\t\tthis.selectedNodes = this.graph.renderer.getShapes(this.graph.selectedVertices);\n\t\t\tthis.attachedLinks = this.graph.renderer.getShapes(this.graph.getAttachedEdges());\n\t\t\tthis.selectedNodes.classed('selected', true);\n\t\t}\n\n\t\tif (this.graph.selectedEdges && this.graph.selectedEdges.length > 0) {\n\t\t\tthis.selectedLinks = this.graph.renderer.getShapes(this.graph.selectedEdges);\n\t\t\tthis.selectedLinks.classed('selected', true);\n\t\t}\n\t}\n\n\tselectCell(type, ns, data, pos, event) {\n\t\tvar cell = data == this.graph ? null : data;\n\t\tif (cell && !(cell instanceof Cell)) return;\n\t\tvar toggle = event.ctrlKey || event.shiftKey;\n\t\tif (cell && (cell instanceof Cell)) {\n\t\t\tif (!this.graph.isSelected(cell))\n\t\t\t\tdelete cell._firstSelection;\n\t\t\telse\n\t\t\t\tcell._firstSelection = true;\n\n\t\t\td3.select(event.dataTarget).moveToFront();\n\t\t\tthis.graph.setSelection(cell, toggle);\n\t\t}\n\t}\n\n\tunselectCell(type, ns, data, pos, event) {\n\t\tvar cell = data == this.graph ? null : data;\n\t\tif (cell && !(cell instanceof Cell)) return;\n\t\tvar ctrlKey = event.ctrlKey || event.shiftKey;\n\t\tif (!cell) {\n\t\t\tthis.graph.setSelection(cell, ctrlKey);\n\t\t}\n\t}\n\n\thandleMultiSelect(type, ns, data, pos, event) {\n\t\tpos = util.scale(this.graph, pos);\n\n\t\tif (type == 'dragstart') {\n\t\t\tvar select = (this.graph.getProperty(\"defaultClickMode\") == \"select\") ^ (event.ctrlKey || event.shiftKey);\n\t\t\tif (!select) return;\n\t\t\tthis.startPt = new Point(pos[0], pos[1]);\n\t\t\treturn;\n\t\t}\n\t\tif (!this.startPt) return;\n\t\tvar rect = Rectangle.getBoundingRectangle([new Point(pos[0], pos[1]), this.startPt]);\n\t\tvar renderer = this.graph.renderer;\n\t\tif (!this.rubberband) {\n\t\t\tthis.rubberband = d3.select(renderer.appendNode(renderer.getCellLayer(), {\n\t\t\t\ttemplate: _.template('<g><rect x=\"0\" y=\"0\" width=\"100\" height=\"100\" stroke=\"#000000\" fill=\"none\" stroke-dasharray=\"3 3\"/></g>')\n\t\t\t}, false));\n\t\t}\n\t\tif (type == 'dragend') {\n\t\t\tvar cells = this.graph.getCurrentRoot().children;\n\t\t\t// TODO: Define if we want to select vertexes / edges or both\n\t\t\tcells = _.filter(cells, function (cell) {\n\t\t\t\tvar box = cell.getBounds();\n\t\t\t\tif (rect.contains(box)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t// TODO: Set selection\n\t\t\tthis.graph.setSelection(cells, event.ctrlKey);\n\n\t\t\tthis.rubberband.remove();\n\t\t\tdelete this.startPt;\n\t\t\tdelete this.rubberband;\n\t\t\treturn;\n\t\t}\n\t\tthis.rubberband.select(\"rect\").attr({x: rect.x, y: rect.y, width: rect.width, height: rect.height});\n\t}\n\n\tdestroy() {\n\t\tsuper.destroy();\n\t\tdelete this.selectedNodes;\n\t\tdelete this.selectedLinks;\n\t\tdelete this.attachedLinks;\n\t}\n}\n\nexport default SelectionBehavior;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/behavior/SelectionBehavior.js\n **/","import _ from \"lodash\";\r\nimport Base64 from \"../util/base64\";\r\nimport DomUtils from \"../util/DomUtils\";\r\nimport Renderer from \"./Renderer\";\r\nimport StringBuffer from \"../util/StringBuffer\";\r\n\r\nconst NS = 'http://www.w3.org/2000/svg';\r\nif (typeof (SVGElement) != \"undefined\") {\r\n\tvar svg = document.createElementNS(NS, \"svg\");\r\n\tsvg.innerHTML = '<circle/>';\r\n\tif (svg.firstChild !== \"[object SVGCircleElement]\") {\r\n\t\tObject.defineProperties(SVGElement.prototype, {\r\n\t\t\t\"outerHTML\": {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tget: function() {\r\n\t\t\t\t\tvar $node, $temp;\r\n\t\t\t\t\t$temp = document.createElement('div');\r\n\t\t\t\t\t$node = this.cloneNode(true);\r\n\t\t\t\t\t$temp.appendChild($node);\r\n\t\t\t\t\treturn $temp.innerHTML;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"innerHTML\": {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tget: function() {\r\n\t\t\t\t\tvar s = this.outerHTML;\r\n\t\t\t\t\tvar ropen = new RegExp(\"<\" + this.nodeName + '\\\\b(?:([\"\\'])[^\"]*?(\\\\1)|[^>])*>', \"i\");\r\n\t\t\t\t\tvar rclose = new RegExp(\"<\\/\" + this.nodeName + \">$\", \"i\");\r\n\t\t\t\t\treturn  s.replace(ropen, \"\").replace(rclose, \"\");\r\n\t\t\t\t},\r\n\t\t\t\tset: function(markup) {\r\n\t\t\t\t\t// empty el first.\r\n\t\t\t\t\tlet child;\r\n\t\t\t\t\twhile (child = this.lastChild)\r\n\t\t\t\t\t\tthis.removeChild(child);\r\n\t\t\t\t\tlet buf = new StringBuffer();\r\n\t\t\t\t\tbuf.append('<svg>').append(markup).append('</svg');\r\n\t\t\t\t\tlet $temp = DomUtils.createElement('div', null, null, buf.toString()).firstElementChild;\r\n\t\t\t\t\twhile ($temp.firstChild)\r\n\t\t\t\t\t\tthis.appendChild($temp.firstChild);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t// Define the toDataURL for SVG\r\n\tSVGElement.prototype.toDataURL = function(type, options = {}) {\r\n\t\tlet _svg = this;\r\n\r\n\t\tlet debug = function(msg) {};\r\n\r\n\t\tif (options['debug'] == true && typeof(console) != 'undefined')\r\n\t\t\tdebug = function(msg) { console.log(\"SVG.toDataURL:\", msg); };\r\n\r\n\t\tfunction exportSVG() {\r\n\t\t\tvar svg_xml = _svg.outerHTML;\r\n\t\t\tvar svg_dataurl = base64dataURLencode(svg_xml);\r\n\t\t\tdebug(type + \" length: \" + svg_dataurl.length);\r\n\r\n\t\t\t// NOTE double data carrier\r\n\t\t\tif (options.callback) options.callback(svg_dataurl);\r\n\t\t\treturn svg_dataurl;\r\n\t\t}\r\n\r\n\t\tfunction base64dataURLencode(s) {\r\n\t\t\tvar b64 = \"data:image/svg+xml;base64,\";\r\n\r\n\t\t\t// https://developer.mozilla.org/en/DOM/window.btoa\r\n\t\t\tif (window.btoa) {\r\n\t\t\t\tdebug(\"using window.btoa for base64 encoding\");\r\n\t\t\t\tb64 += btoa(s);\r\n\t\t\t} else {\r\n\t\t\t\tdebug(\"using custom base64 encoder\");\r\n\t\t\t\tb64 += Base64.encode(s);\r\n\t\t\t}\r\n\r\n\t\t\treturn b64;\r\n\t\t}\r\n\r\n\t\t// Native export doesn't work very well. should use canvg instead.\r\n\t\tfunction exportImage(type) {\r\n\t\t\tvar canvas = document.createElement(\"canvas\");\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\t// TODO: if (options.keepOutsideViewport), do some translation magic?\r\n\r\n\t\t\tvar svg_img = new Image();\r\n\t\t\tvar svg_xml = _svg.outerHTML;\r\n\t\t\tsvg_img.src = base64dataURLencode(svg_xml);\r\n\r\n\t\t\tsvg_img.onload = function() {\r\n\t\t\t\tdebug(\"exported image size: \" + [svg_img.width, svg_img.height]);\r\n\t\t\t\tcanvas.width = svg_img.width;\r\n\t\t\t\tcanvas.height = svg_img.height;\r\n\t\t\t\tctx.drawImage(svg_img, 0, 0);\r\n\r\n\t\t\t\t// SECURITY_ERR WILL HAPPEN NOW\r\n\t\t\t\tvar image_dataurl = canvas.toDataURL(type);\r\n\t\t\t\tdebug(type + \" length: \" + image_dataurl.length);\r\n\r\n\t\t\t\tif (options.callback) options.callback( image_dataurl );\r\n\t\t\t\telse debug(\"WARNING: no callback set, so nothing happens.\");\r\n\t\t\t};\r\n\r\n\t\t\tsvg_img.onerror = function() {\r\n\t\t\t\tdebug(\r\n\t\t\t\t\t\"Can't export! Maybe your browser doesn't support \" +\r\n\t\t\t\t\t\"SVG in img element or SVG input for Canvas drawImage?\\n\" +\r\n\t\t\t\t\t\"http://en.wikipedia.org/wiki/SVG#Native_support\"\r\n\t\t\t\t);\r\n\t\t\t};\r\n\r\n\t\t\t// NOTE: will not return anything\r\n\t\t}\r\n\r\n\t\tfunction exportImageCanvg(type) {\r\n\t\t\tif (!canvg) return null;\r\n\t\t\tlet canvas = DomUtils.createElement('canvas', null, {display: \"none\"});\r\n\t\t\tdocument.body.appendChild(canvas);\r\n\t\t\tif (type == 'javascript') {\r\n\t\t\t\tvar xcanvas = new jsCanvas ('jscanvastest');\r\n\t\t\t\txcanvas.canvas.style.display = 'none';\r\n\t\t\t\t//xcanvas.canvas = canvas;\r\n\t\t\t}\r\n\r\n\t\t\tif (!options.keepOutsideViewport) {\r\n\t\t\t\tcanvg(canvas, _svg.outerHTML);\r\n\t\t\t} else {\r\n\t\t\t\tlet padding = options.padding || 0;\r\n\t\t\t\tlet scale = 1.0;\r\n\t\t\t\tlet translate = [0, 0];\r\n\t\t\t\tlet bbox = _svg.getBBox();\r\n\t\t\t\tdebug(\"detected svg dimensions \" + [bbox.x, bbox.y, bbox.width, bbox.height]);\r\n\t\t\t\tlet transform = _svg.firstElementChild.getAttribute('transform');\r\n\t\t\t\tif (transform) {\r\n\t\t\t\t\tdebug('detected svg transform ' + transform);\r\n\t\t\t\t\ttransform = SVGRenderer.transform(transform);\r\n\t\t\t\t\ttranslate = transform.translate;\r\n\t\t\t\t\tscale = transform.scale;\r\n\t\t\t\t}\r\n\t\t\t\tlet buf = new StringBuffer();\r\n\t\t\t\tbuf.append('<svg width=\"').append(bbox.width + 2*padding).append('px\" height=\"').append(bbox.height + 2*padding).append('px\"><g transform=\"translate(')\r\n\t\t\t\t\t.append(-bbox.x+translate[0]+padding).append(',').append(-bbox.y+translate[1]+padding).append(')scale(').append(scale).append(')\">')\r\n\t\t\t\t\t.append(_svg.firstElementChild.innerHTML).append('</g></svg>');\r\n\t\t\t\tif (type == 'javascript') {\r\n\t\t\t\t\txcanvas.compile(buf.toString(), function () {\r\n\t\t\t\t\t\tif (options.callback) options.callback(xcanvas.toString());\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else\r\n\t\t\t\t\tcanvg(canvas, buf.toString());\r\n\t\t\t}\r\n\t\t\tvar image_dataurl = canvas.toDataURL(type);\r\n\t\t\tif (options.callback) options.callback( image_dataurl );\r\n\t\t\tcanvas.parentNode.removeChild(canvas);\r\n\t\t\treturn image_dataurl;\r\n\t\t}\r\n\r\n\t\tif (!type) type = \"image/svg+xml\";\r\n\r\n\t\tif (options.keepNonSafe) debug(\"NOTE: keepNonSafe is NOT supported and will be ignored!\");\r\n\t\tif (options.keepOutsideViewport) debug(\"NOTE: keepOutsideViewport is only supported with canvg exporter.\");\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase \"image/svg+xml\":\r\n\t\t\t\treturn exportSVG();\r\n\t\t\tcase \"image/png\":\r\n\t\t\tcase \"image/jpeg\":\r\n\t\t\tcase \"javascript\":\r\n\t\t\t\tif (!options.renderer) {\r\n\t\t\t\t\tif (window.canvg) options.renderer = \"canvg\";\r\n\t\t\t\t\telse options.renderer=\"native\";\r\n\t\t\t\t}\r\n\t\t\t\tswitch (options.renderer) {\r\n\t\t\t\t\tcase \"canvg\":\r\n\t\t\t\t\t\tdebug(\"using canvg renderer for \" + type + \" image export\");\r\n\t\t\t\t\t\treturn exportImageCanvg(type);\r\n\t\t\t\t\tcase \"native\":\r\n\t\t\t\t\t\tdebug(\"using native renderer for \" + type + \" export. THIS MIGHT FAIL.\");\r\n\t\t\t\t\t\treturn exportImage(type);\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tdebug(\"unknown image renderer given, doing noting (\" + options.renderer + \")\");\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tdebug(\"Sorry! Exporting as '\" + type + \"' is not supported!\");\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nclass SVGRenderer extends Renderer {\r\n\trender() {\r\n\t\tlet result = super.render();\r\n\t\tif (result) {\r\n\t\t\tlet root = this.graph.currentRoot;\r\n\t\t\tlet buf = new StringBuffer('<svg width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">');\r\n\t\t\tlet t = this.translate;\r\n\t\t\tbuf.append('<g transform=\"translate(').append(t[0]).append(',').append(t[1]).append(')scale(').append(this.scale).append(')\">');\r\n\t\t\tbuf.append(this.renderDefs());\r\n\t\t\tbuf.append(root.render(this));\r\n\t\t\tbuf.append('</g></svg>');\r\n\t\t\tthis.box.innerHTML = buf.toString();\r\n\t\t\tthis.svg = this.box.firstElementChild;\r\n\t\t}\r\n\t}\r\n\r\n\trenderDefs() {\r\n\t\tlet buf = new StringBuffer('<defs>');\r\n\t\tbuf.append(this.getTemplate('Grid', this.prop(\"gridSize\")));\r\n\t\tlet markers = this.graph.markers;\r\n\t\tif (markers.length > 0)\r\n\t\t\tbuf.append(SVGRenderer.renderMarkers(markers));\r\n\t\tbuf.append('</defs>');\r\n\t\treturn buf.toString();\r\n\t}\r\n\r\n\trefresh() {\r\n\t\tif (!this.svg) return;\r\n\t\tlet g = this.svg.querySelector('g');\r\n\t\tlet t = this.translate;\r\n\t\tg.setAttribute('transform', 'translate(' + t[0] + ',' + t[1] + ')scale(' + this.scale + ')');\r\n\t}\r\n\r\n\tstatic renderMarkers(markers) {\r\n\t\tlet buf = new StringBuffer(), str1, str2;\r\n\t\tmarkers.forEach(function(marker) {\r\n\t\t\tstr1 = this.TEMPLATES['Marker'](marker);\r\n\t\t\tstr2 = marker.shape;\r\n\t\t\tif (!_.isString(str2))\r\n\t\t\t\tstr2 = this.renderShape(str2);\r\n\t\t\tstr1 = str1.replace(/\\#\\{shape\\}/, str2);\r\n\t\t\tbuf.append(str1);\r\n\t\t}, this);\r\n\t\treturn buf.toString();\r\n\t}\r\n\r\n\tstatic renderLabel(box) {\r\n\t\treturn this.TEMPLATES['Label'](box);\r\n\t}\r\n\r\n\tstatic renderShape(shape) {\r\n\t\tlet template = this.TEMPLATES[shape.name];\r\n\t\tif (_.isString(template))\r\n\t\t\ttemplate = _.template(template);\r\n\t\treturn template(shape);\r\n\t}\r\n\r\n\tstatic getPathData(shape) {\r\n\t\tlet points = shape.points;\r\n\t\tlet controlPts = shape.controlPts;\r\n\t\tif (!points || points.length == 0) return '';\r\n\r\n\t\tif (!controlPts && shape.round) {\r\n\t\t\t// render rounded line joins.\r\n\t\t\tlet newPts = [];\r\n\t\t\tcontrolPts = [];\r\n\t\t\tlet prev = points[0], next, d1, d2, corner;\r\n\t\t\tnewPts.push(prev);\r\n\t\t\tfor (let i = 1; i < points.length - 1; i++) {\r\n\t\t\t\tnext = points[i];\r\n\t\t\t\t// set the control point first.\r\n\t\t\t\tcontrolPts[2*i] = [next, next];\r\n\t\t\t\t// check the size of the corner.\r\n\t\t\t\td1 = prev.distance(next);\r\n\t\t\t\td2 = next.distance(points[i+1]);\r\n\t\t\t\tcorner = Math.min(shape.round, d1/2, d2/2);\r\n\t\t\t\t// split the point into two.\r\n\t\t\t\tnewPts.push(next.getDirection(prev).scale(corner).translate(next));\r\n\t\t\t\tnewPts.push(next.getDirection(points[i+1]).scale(corner).translate(next));\r\n\t\t\t\tprev = next;\r\n\t\t\t}\r\n\t\t\tnewPts.push(points[points.length - 1]);\r\n\t\t\tpoints = newPts;\r\n\t\t}\r\n\t\tlet buf = new StringBuffer('M'), point;\r\n\t\tfor (let i = 0; i < points.length; i++) {\r\n\t\t\tpoint = points[i];\r\n\t\t\tif (i == 0)\r\n\t\t\t\tbuf.append(point);\r\n\t\t\telse {\r\n\t\t\t\tif (controlPts && controlPts[i]) {\r\n\t\t\t\t\tbuf.append(' C ');\r\n\t\t\t\t\tfor (let j = 0; j < controlPts[i].length; j++)\r\n\t\t\t\t\t\tbuf.append(controlPts[i][j]).append(' ');\r\n\t\t\t\t\tbuf.append(point);\r\n\t\t\t\t} else\r\n\t\t\t\t\tbuf.append(' L ').append(point);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn buf.toString();\r\n\t}\r\n\r\n\tstatic renderLink(shape) {\r\n\t\tlet buf = new StringBuffer();\r\n\t\tlet d = SVGRenderer.getPathData(shape);\r\n\t\tif (shape.showGauge)\r\n\t\t\tbuf.append('<path style=\"stroke: white; stroke-width: 9; visibility: hidden; pointer-events: stroke;\" d=\"')\r\n\t\t\t\t.append(d).append('\"/>');\r\n\t\tbuf.append('<path d=\"').append(d).append('\"');\r\n\t\tif (shape.startMarker || shape.endMarker) {\r\n\t\t\tbuf.append(' style=\"');\r\n\t\t\tif (shape.startMarker)\r\n\t\t\t\tbuf.append('marker-start: url(#').append(_.isString(shape.startMarker) ? shape.startMarker : shape.startMarker.id).append(');');\r\n\t\t\tif (shape.endMarker)\r\n\t\t\t\tbuf.append('marker-end: url(#').append(_.isString(shape.endMarker) ? shape.endMarker : shape.endMarker.id).append(');');\r\n\t\t\tbuf.append('\"');\r\n\t\t}\r\n\t\tbuf.append('/>');\r\n\t\treturn buf.toString();\r\n\t}\r\n\r\n\tstatic appendContent(el, content) {\r\n\t\tlet buf = new StringBuffer();\r\n\t\tbuf.append('<svg>').append(content).append('</svg');\r\n\t\tlet temp = DomUtils.createElement('div', null, null, buf.toString()).firstElementChild;\r\n\r\n\t\twhile (temp.firstChild)\r\n\t\t\tel.appendChild(temp.firstChild);\r\n\t\treturn el;\r\n\t}\r\n\r\n\tstatic transform(transform) {\r\n\t\tlet translate = [0, 0], scale = 1.0;\r\n\t\t//\r\n\t\tlet parts = transform.match(/translate\\(\\s*([^)]+)/);\r\n\t\tif (parts) {\r\n\t\t\tlet m = parts[1].trim().match(/([\\d.-]+)[ ,]([\\d.-]+)/);\r\n\t\t\tif (m) {\r\n\t\t\t\ttranslate[0] = parseFloat(m[1]) || 0;\r\n\t\t\t\ttranslate[1] = parseFloat(m[2]) || 0;\r\n\t\t\t} else\r\n\t\t\t\ttranslate[0] = translate[1] = parseFloat(parts[1]);\r\n\t\t}\r\n\t\tparts = transform.match(/scale\\(\\s*([^)]+)/);\r\n\t\tif (parts)\r\n\t\t\tscale = parseFloat(parts[1]) || 1.0;\r\n\r\n\t\treturn {translate, scale};\r\n\t}\r\n}\r\nSVGRenderer.TEMPLATES = {\r\n\t$root: '<g id=\"${id}\" class=\"${className}\">#{children}</g>',\r\n\t$node: '<g id=\"${id}\" class=\"${className}\" style=\"${style}\" ns=\"${namespace}\" transform=\"translate(${x},${y})\">#{shape}#{label}</g>',\r\n\t$edge: '<g id=\"${id}\" class=\"${className}\" style=\"${style}\" ns=\"${namespace}\">#{shape}#{label}</g>',\r\n\tEllipse: '<ellipse cx=\"0\" cy=\"0\" rx=\"${width/2}\" ry=\"${height/2}\"/>',\r\n\tRectangle: '<rect x=\"${-width/2}\" y=\"${-height/2}\" width=\"${width}\" height=\"${height}\" rx=\"9\" ry=\"9\"/>',\r\n\tTriangle: '<polygon points=\"${-width/2},${-height/2} ${width/2},${-height/2} 0,${height/2}\"/>',\r\n\tRhombus: '<polygon points=\"0,${-height/2} ${width/2},0 0,${height/2} ${-width/2},0\"/>',\r\n\tHexagon: function(config) {\r\n\t\tvar vertical = config.direction == 'north' || config.direction == 'south';\r\n\t\tif (vertical)\r\n\t\t\treturn '<polygon points=\"0,${-height/2} ${width/2},${-height/4} ${width/2},${height/4} 0,${height/2} ${-width/2},${height/4} ${-width/2},${-height/4}\"/>';\r\n\t\telse\r\n\t\t\treturn '<polygon points=\"${-width/2},0 ${width/4},${-height/2} ${width/4},${-height/2} ${width/2},0 ${width/4},${height/2} ${-width/4},${height/2}\"/>';\r\n\t},\r\n\tPolygon: function(shape) {\r\n\t\tlet buf = new StringBuffer('<polygon points=\"');\r\n\t\tshape.points.forEach(function(pt){\r\n\t\t\tbuf.append(pt[0]).append(',').append(pt[1]).append(' ');\r\n\t\t});\r\n\t\tbuf.removeLast();\r\n\t\tbuf.append('\"/>');\r\n\t\treturn buf.toString();\r\n\t},\r\n\tImage: function(config) {\r\n\t\treturn '<image x=\"${-width/2}\" y=\"${-height/2}\" width=\"${width}\" height=\"${height}\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"' + config.image + '\"/>';\r\n\t},\r\n\tMarker: function(marker) {\r\n\t\treturn `\r\n<marker id=\"${marker.id}\" markerWidth=\"${marker.size}\" markerHeight=\"${marker.size}\" refx=\"${marker.ref[0]}\" \r\nrefy=\"${marker.ref[1]}\" orient=\"auto\" viewbox=\"${marker.viewBox.x} ${marker.viewBox.y} ${marker.viewBox.width} ${marker.viewBox.height}\"\r\nmarkerUnits=\"userSpaceOnUse\" ${marker.fill ? `style=\"stroke: ${marker.fill};fill:${marker.fill}\"` : ''}>#{shape}</marker>\r\n`.trim();\r\n\t},\r\n\tGrid: function(size) {\r\n\t\treturn `\r\n<pattern id=\"GridPattern\" width=\"${size}\" height=\"${size}\" patternUnits=\"userSpaceOnUse\">\r\n\t<ellipse cx=\"0\" cy=\"0\" rx=\"1\" ry=\"1\" fill=\"#999999\"/>\r\n\t<ellipse cx=\"0\" cy=\"${size}\" rx=\"1\" ry=\"1\" fill=\"#999999\"/>\r\n\t<ellipse cx=\"${size}\" cy=\"0\" rx=\"1\" ry=\"1\" fill=\"#999999\"/>\r\n\t<ellipse cx=\"${size}\" cy=\"${size}\" rx=\"1\" ry=\"1\" fill=\"#999999\"/>\r\n</pattern>`.trim();\r\n\t},\r\n\tLabel: _.template(`\r\n<% var box = _.has(data, \"dx\") ? data : (data.getLabelBox ? data.getLabelBox() : null); \r\n   if (box) {%>\r\n\t<g <% if (box.config && box.config.class) {%>class=\"<%=box.config.class%>\"<%}%>\\\r\n\t\t<% if (box.config && box.config.ns) {%>ns=\"<%=box.config.ns%>\"<%}%>\\\r\n\t\t<% if (box.config && box.config.inlineStyle) {%>\\\r\n\t\t\tfont-size=\"<%=box.config.fontSize%>\"\\\r\n\t\t\tfont-family=\"<%=box.config.fontFamily%>\"\\\r\n\t\t\tfont-weight=\"<% if (box.bold) {%>bold<%} else {%>normal<%}%>\"\\\r\n\t\t\t<% if (box.underline) {%>text-decoration=\"underline\"<%}%>\\\r\n\t\t\t<% if (box.italic) {%>font-style=\"italic\"<%}%>\\\r\n\t\t<%}%>\\\r\n\t\ttext-anchor=\"<%=box.anchor%>\"\\\r\n\t\ttransform=\"translate(<%=box.bounds.x%>,<%=box.bounds.y%>)<% if (box.config && box.config.rotation) {%>rotate(<%=box.config.rotation%> <%=box.pivot[0]%> <%=box.pivot[1]%>)<%}%>\">\r\n\t<% if (box.config.backgroundStyle) {%>\r\n\t\t<rect x=\"<%=-box.bounds.width/2%>\" y=\"<%=-box.bounds.height/2%>\" width=\"<%=box.bounds.width%>\" height=\"<%=box.bounds.height%>\" style=\"<%=box.config.backgroundStyle%>\"/>\r\n\t<% } if (_.isArray(box.label)) { \r\n\t\t_.each(box.label, function(value, line) {%>\r\n\t\t\t<text <% if (box.config && box.config.textStyle) {%>style=\"<%=box.config.textStyle%>\"<%}%>\\\r\n\t\t\t\tdx=\"<%=box.dx%>\" dy=\"<%=box.dy + box.lineHeight * line%>\"><%=value%></text>\r\n\t\t<%});} else { %>\r\n\t\t\t<text><%=box.label%></text>\r\n\t\t<%}%>\r\n\t\t<% if (box.config.title) {%>\r\n\t\t\t<title><%=box.config.title%></title>\r\n\t\t<%}%>\r\n\t</g>\r\n<%}%>\r\n`.trim(), {variable: \"data\"})   //TODO add more inline text styles.\r\n};\r\n\r\nexport default SVGRenderer;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/SVGRenderer.js\n **/"],"sourceRoot":"/source/"}