{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","qgraph.js","webpack:/webpack/bootstrap e07ff498019e95851416","webpack:///src/index.js","webpack:///~/bean/bean.js","webpack:///src/util/base64.js","webpack:///src/util/Utils.js","webpack:///src/geometry/Point.js","webpack:///src/geometry/Rectangle.js","webpack:/external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}","webpack:///src/geometry/Shape.js","webpack:///src/util/DomUtils.js","webpack:///src/util/StringBuffer.js","webpack:///src/geometry/Line.js","webpack:///src/geometry/Ellipse.js","webpack:///src/geometry/Link.js","webpack:///src/event/EventDispatcher.js","webpack:///src/event/KeyUtils.js","webpack:///src/graph/Graph.js","webpack:///src/graph/Node.js","webpack:///src/graph/Cell.js","webpack:///src/util/Cache.js","webpack:///src/view/Label.js","webpack:///src/graph/Edge.js","webpack:///src/view/Marker.js","webpack:///src/layout/Layout.js","webpack:///src/layout/FlowLayout.js","webpack:///src/view/Renderer.js","webpack:///src/behavior/GraphBehavior.js","webpack:///src/behavior/Behavior.js","webpack:///src/view/SVGRenderer.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_6__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_bean","_bean2","_base","_base2","_Utils","_Utils2","_DomUtils","_DomUtils2","_StringBuffer","_StringBuffer2","_Point","_Point2","_Line","_Line2","_Shape","_Shape2","_Rectangle","_Rectangle2","_Ellipse","_Ellipse2","_Link","_Link2","_EventDispatcher","_EventDispatcher2","_Graph","_Graph2","_Cell","_Cell2","_Node","_Node2","_Edge","_Edge2","_Layout","_Layout2","_FlowLayout","_FlowLayout2","_Label","_Label2","_Marker","_Marker2","_Renderer","_Renderer2","_SVGRenderer","_SVGRenderer2","_GraphBehavior","_GraphBehavior2","addShape","Events","Base64","Cache","Utils","DomUtils","StringBuffer","Point","Line","Shape","Rectangle","Ellipse","Link","EventDispatcher","Label","Marker","Graph","Cell","Node","Edge","Layout","FlowLayout","Renderer","SVGRenderer","GraphBehavior","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","name","context","definition","undefined","selectorEngine","win","window","old","namespaceRegex","nameRegex","addEvent","removeEvent","doc","document","documentElement","W3C_MODEL","eventSupport","ONE","slice","Array","prototype","str2arr","s","d","split","isString","o","isFunction","standardNativeEvents","w3cNativeEvents","nativeEvents","hash","events","i","length","customEvents","isAncestor","element","container","compareDocumentPosition","nodeType","contains","parentNode","check","event","related","relatedTarget","prefix","test","toString","mouseenter","base","condition","mouseleave","mousewheel","navigator","userAgent","Event","commonProps","mouseProps","concat","mouseWheelProps","keyProps","textProps","touchProps","messageProps","stateProps","overOutRegex","typeFixers","reg","fix","newEvent","keyCode","which","type","rightClick","button","pos","x","y","pageX","pageY","clientX","clientY","body","scrollLeft","scrollTop","typeFixerMap","isNative","arguments","ownerDocument","parentWindow","originalEvent","isBean","l","props","fixer","target","srcElement","preventDefault","returnValue","stopPropagation","cancelBubble","stop","stopped","stopImmediatePropagation","isImmediatePropagationStopped","clone","currentTarget","ne","targetElement","RegEntry","wrappedHandler","fn","args","eargs","apply","findTarget","eventElement","__beanDel","ft","handler","original","namespaces","customType","once","removeListener","eventType","inNamespaces","checkNamespaces","j","matches","checkElement","checkOriginal","checkHandler","registry","map","forAll","pfx","list","all","t","charAt","substr","has","get","entries","entry","push","put","key","del","splice","removed","setSelectorEngine","e","querySelectorAll","r","Error","rootListener","propertyName","listeners","listener","add","custom","attachEvent","detachEvent","rm","originalFn","orgType","replace","handlers","delegate","selector","array","match","fireListener","evt","createEvent","dispatchEvent","fireEvent","createEventObject","off","typeSpec","k","isTypeStr","indexOf","hasOwnProperty","on","types","first","delfn","one","fire","names","from","beanDel","bean","remove","noConflict","cleanup","CollectGarbage","_keyStr","encode","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","_utf8_encode","charCodeAt","isNaN","decode","String","fromCharCode","_utf8_decode","string","utftext","n","c1","c2","c3","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_debugging","_debugAll","typeRegistry","namespace","_type","Map","set","createType","defaultType","extend","_extend","getPrototypeOf","config","_","assign","typeName","log","buildTypes","_this2","forEach","child","parent","protoProps","staticProps","Surrogate","superclass","initConfig","cArr","DEFAULTS","prop","getConstructor","jsClass","defaultClass","eval","debug","moduleName","message","console","substring","info","getRelativePosition","bounds","geometry","Math","abs","width","height","offsetPosition","anchorX","offsetX","anchorY","offsetY","unscale","scale","_scale","getProperty","_createClass","defineProperties","descriptor","aPt","sqrt","p2","dist","distance","angle","cos","PI","sin","rotate","rect","vertical","W","N","S","E","NE","NW","SE","SW","_lodash","_lodash2","_Shape3","el","w","h","left","right","top","bottom","pt","pt1","pt2","horizontal","contains1","contains2","outPt","orthogonal","dx","dy","alpha","atan2","pi","pi2","beta","tan","dir","getDirection","point","direction","pts","margin","isArray","min","max","rects","minx","miny","maxx","Infinity","maxy","each","defaults","refPt","getPerimeter","view","template","getTemplate","isIE","sAgent","Idx","parseInt","isFireFox","InstallTrigger","createElement","tag","attribs","styles","html","setElement","innerHTML","createElementByString","str","temp","childNodes","setAttribute","style","testElement","node","method","getAncestorBy","getPosition","elRect","getBoundingClientRect","contextRect","getCenterPosition","move","getSize","offsetWidth","offsetHeight","resize","preloadImages","img","that","Image","onload","index","src","getImageInfo","downloadImage","image","mime","b64toBlob","msSaveBlob","link","href","download","display","appendChild","click","removeChild","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","offset","byteNumbers","byteArray","Uint8Array","Blob","openImage","myWindow","open","myDocument","eventFromInput","tagName","buffer","stuff","pop","sep","join","start","end","cosa","dotProduct","x0","y0","x1","y1","x2","y2","x3","y3","denom","nume_a","nume_b","ua","ub","intersectionX","intersectionY","a","b","cx","cy","px","py","f","g","det","xout1","xout2","yout1","yout2","dist1","pow","dist2","xout","yout","defaultConfig","showGauge","defaultGeometry","linkTypes","terminalVisual","shapeConfig","startMarker","endMarker","startNormal","endNormal","renderLink","isNumber","points","translate","getScaled","defaultsDeep","linkClass","DirectLink","BezierLink","ctrlpts","controlPts","p1","p3","p4","EntityRelations","_Link3","source","Port","getBounds","edge","isSourceLeft","isTargetLeft","result","getCenterY","xe","ye","seg","segment","dep","arr","midY","Manhattan","_Link4","MIN_BUFFER","autoRoute","maxChannelWidth","boxes","startBox","endBox","side","side2","box","intersect","channel","channel2","endPadding","startPadding","_getChannel","_getFirstIntersection","_getRouteTendency","_hasIntersection","_moveSegment","detectIntersection","savedIndex","savedSide","breakPt","_getRouteDirection","getCenter","box2","box1","getLeft","getRight","getBottom","getTop","_moveSegment2","_x7","_x8","_x9","_x10","_x11","getTranslated","h2","h1","equals","findPositions","_mergeSegments","getCommonAncestor","getDescendants","excludeFromRouting","startBufferNormal","endBufferNormal","startBuffer","endBuffer","middle","prunePts","average","getMidPoint","startPositive","endPositive","positions","current","prev","_interopRequireWildcard","newObj","_KeyUtils","KeyUtils","zoomScale","rootNS","getAttribute","dragging","bind","handleEvent","started","enterStack","startKeys","stopKeys","buf","ns","stack","isRoot","startsWith","rootTarget","nsTarget","prepend","targetStack","data","_this","isKeyEvent","getKeyEvent","getEventInfo","wheelDelta","dragObject","mouse","dragPos","mousemove","currentPos","dispatch","mouseup","simulateEnterLeave","last","clearEnterStack","getNS","val","append","item","nsType","callback","lastPosition","_this3","registerKey","getKeyData","ctrl","alt","shift","meta","code","_this4","unregisterKey","zIndex","_this5","register","registeredType","changedTouches","svg","ownerSVGElement","createSVGPoint","matrixTransform","getScreenCTM","inverse","clientLeft","clientTop","KeyboardEvent","ctrlKey","altKey","shiftKey","metaKey","nodeDefaults","role","draggable","selectable","editable","resizable","sourceable","targetable","visible","edgeDefaults","size","color","uniqueId","model","nodes","edges","selection","destroyed","nodeTypes","edgeTypes","markers","marker","markerConfig","getMarker","loadModel","currentRoot","NodeClass","getJSClass","addChild","to","EdgeClass","addNode","addEdge","children","without","allowDanglingEdges","multiConnect","readOnly","viewOnly","_typeof","Symbol","iterator","_Cell3","graph","inEdges","outEdges","ports","_ret","render","v","portName","endPt","shape","getShape","label","_Cache","_Cache2","decorators","createDecorators","views","viewProps","isUndefined","className","computedClassName","viewProp","shapeClass","getView","getLabelBox","renderLabel","_computedClassName","caches","getCache","clear","namesapce","FONT_BOLD","FONT_ITALIC","FONT_UNDERLINE","FONT_SHADOW","fontSize","fontFamily","fontStyle","padding","linePadding","align","rotation","labelConfig","containerWidth","containerHeight","_getLabelBox","getLabelBoxForLink","bold","wrappedLabel","wrap","anchor","setAnchorX","pivot","maxBounds","_label","lineHeight","baseline","stringMeasureEl","measureDiv","baselineDiv","getStringSize","memoize","position","visibility","contentWindow","write","close","getElementById","fontWeight","strut","firstChild","baselineHeight","offsetTop","maxWidth","spaceSize","space","lines","word","words","line","currentWidth","wordWidth","newLine","editor","refEl","textEl","singleLine","unselectable","overflow","border","font-family","font-size","font-weight","focus","select","cancel","_get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","getter","setSource","sourcePos","setTarget","targetPos","setTerminal","setEdgeAt","removeEdge","addOutEdge","addInEdge","center","refPts","getReferencePoints","terminals","getBound","getPort","getLink","getTerminalVisual","arrow","sign","viewBox","ref","fill","triangle","oval","diamond","orientation","toUpperCase","HORIZONTAL","VERTICAL","_Layout3","items","getLinkedNodes","owner","hgap","vgap","_flPos","moveTo","trigger","tabindex","layout","layoutClass","_translate","dispatcher","graphBehavior","selectionBehavior","nodeBehavior","edgeBehavior","connectionBehavior","scaled","_viewport","isNull","vp","transform","refresh","_graph","viewport","_firstSelection","_delayEdit","delay","renderMarkers","preprocessor","TEMPLATES","parts","part","trim","camelCase","interpolate","gridSize","gBounds","vBounds","parseFloat","defaultClickMode","hideOutline","singleSelect","gridEnabled","guidesEnabled","maxZoom","minZoom","zoomFactor","maskOpacity","_Behavior2","_Behavior3","_Behavior","renderer","handleDrag","handleZoom","pan","Behavior","_Renderer3","NS","SVGElement","createElementNS","outerHTML","$node","$temp","cloneNode","ropen","RegExp","nodeName","rclose","markup","lastChild","firstElementChild","toDataURL","exportSVG","svg_xml","_svg","svg_dataurl","base64dataURLencode","options","b64","btoa","exportImage","canvas","ctx","getContext","svg_img","drawImage","image_dataurl","onerror","exportImageCanvg","canvg","keepOutsideViewport","bbox","getBBox","msg","keepNonSafe","renderDefs","querySelector","str1","str2","renderShape","round","newPts","next","d1","d2","corner","_i","content","_transform","$root","$edge","Triangle","Rhombus","Hexagon","Polygon","removeLast","Grid","variable"],"mappings":"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","file":"qgraph.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"qgraph\"] = factory(require(\"lodash\"));\n\telse\n\t\troot[\"qgraph\"] = factory(root[\"_\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_6__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","/*!\n * \n * \tqgraph - A Graph Manipulation and Visualization Library\n * \tAuthor: Tong Zou\n * \tVersion: v0.0.5\n * \tUrl: https://github.com/tongzou/qgraph\n * \tLicense(s): MIT\n * \n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"qgraph\"] = factory(require(\"lodash\"));\n\telse\n\t\troot[\"qgraph\"] = factory(root[\"_\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_6__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _bean = __webpack_require__(1);\n\t\n\tvar _bean2 = _interopRequireDefault(_bean);\n\t\n\tvar _base = __webpack_require__(2);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tvar _Utils = __webpack_require__(3);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _DomUtils = __webpack_require__(8);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _StringBuffer = __webpack_require__(9);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tvar _Point = __webpack_require__(4);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Line = __webpack_require__(10);\n\t\n\tvar _Line2 = _interopRequireDefault(_Line);\n\t\n\tvar _Shape = __webpack_require__(7);\n\t\n\tvar _Shape2 = _interopRequireDefault(_Shape);\n\t\n\tvar _Rectangle = __webpack_require__(5);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _Ellipse = __webpack_require__(11);\n\t\n\tvar _Ellipse2 = _interopRequireDefault(_Ellipse);\n\t\n\tvar _Link = __webpack_require__(12);\n\t\n\tvar _Link2 = _interopRequireDefault(_Link);\n\t\n\tvar _EventDispatcher = __webpack_require__(13);\n\t\n\tvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\t\n\tvar _Graph = __webpack_require__(15);\n\t\n\tvar _Graph2 = _interopRequireDefault(_Graph);\n\t\n\tvar _Cell = __webpack_require__(17);\n\t\n\tvar _Cell2 = _interopRequireDefault(_Cell);\n\t\n\tvar _Node = __webpack_require__(16);\n\t\n\tvar _Node2 = _interopRequireDefault(_Node);\n\t\n\tvar _Edge = __webpack_require__(20);\n\t\n\tvar _Edge2 = _interopRequireDefault(_Edge);\n\t\n\tvar _Layout = __webpack_require__(22);\n\t\n\tvar _Layout2 = _interopRequireDefault(_Layout);\n\t\n\tvar _FlowLayout = __webpack_require__(23);\n\t\n\tvar _FlowLayout2 = _interopRequireDefault(_FlowLayout);\n\t\n\tvar _Label = __webpack_require__(19);\n\t\n\tvar _Label2 = _interopRequireDefault(_Label);\n\t\n\tvar _Marker = __webpack_require__(21);\n\t\n\tvar _Marker2 = _interopRequireDefault(_Marker);\n\t\n\tvar _Renderer = __webpack_require__(24);\n\t\n\tvar _Renderer2 = _interopRequireDefault(_Renderer);\n\t\n\tvar _SVGRenderer = __webpack_require__(27);\n\t\n\tvar _SVGRenderer2 = _interopRequireDefault(_SVGRenderer);\n\t\n\tvar _GraphBehavior = __webpack_require__(25);\n\t\n\tvar _GraphBehavior2 = _interopRequireDefault(_GraphBehavior);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_Shape2.default.addShape(\"Rectangle\", _Rectangle2.default);\n\t_Shape2.default.addShape(\"Ellipse\", _Ellipse2.default);\n\t\n\texports.default = {\n\t\tEvents: _bean2.default,\n\t\tBase64: _base2.default,\n\t\tCache: _Utils2.default,\n\t\tUtils: _Utils2.default,\n\t\tDomUtils: _DomUtils2.default,\n\t\tStringBuffer: _StringBuffer2.default,\n\t\tPoint: _Point2.default,\n\t\tLine: _Line2.default,\n\t\tShape: _Shape2.default,\n\t\tRectangle: _Rectangle2.default,\n\t\tEllipse: _Ellipse2.default,\n\t\tLink: _Link2.default,\n\t\tEventDispatcher: _EventDispatcher2.default,\n\t\tLabel: _Label2.default,\n\t\tMarker: _Marker2.default,\n\t\tGraph: _Graph2.default,\n\t\tCell: _Cell2.default,\n\t\tNode: _Node2.default,\n\t\tEdge: _Edge2.default,\n\t\tLayout: _Layout2.default,\n\t\tFlowLayout: _FlowLayout2.default,\n\t\tRenderer: _Renderer2.default,\n\t\tSVGRenderer: _SVGRenderer2.default,\n\t\tGraphBehavior: _GraphBehavior2.default\n\t};\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\t  * Bean - copyright (c) Jacob Thornton 2011-2012\n\t  * https://github.com/fat/bean\n\t  * MIT license\n\t  */\n\t(function (name, context, definition) {\n\t  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n\t  else if (true) !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\t  else context[name] = definition()\n\t})('bean', this, function (name, context) {\n\t  name    = name    || 'bean'\n\t  context = context || this\n\t\n\t  var win            = window\n\t    , old            = context[name]\n\t    , namespaceRegex = /[^\\.]*(?=\\..*)\\.|.*/\n\t    , nameRegex      = /\\..*/\n\t    , addEvent       = 'addEventListener'\n\t    , removeEvent    = 'removeEventListener'\n\t    , doc            = document || {}\n\t    , root           = doc.documentElement || {}\n\t    , W3C_MODEL      = root[addEvent]\n\t    , eventSupport   = W3C_MODEL ? addEvent : 'attachEvent'\n\t    , ONE            = {} // singleton for quick matching making add() do one()\n\t\n\t    , slice          = Array.prototype.slice\n\t    , str2arr        = function (s, d) { return s.split(d || ' ') }\n\t    , isString       = function (o) { return typeof o == 'string' }\n\t    , isFunction     = function (o) { return typeof o == 'function' }\n\t\n\t      // events that we consider to be 'native', anything not in this list will\n\t      // be treated as a custom event\n\t    , standardNativeEvents =\n\t        'click dblclick mouseup mousedown contextmenu '                  + // mouse buttons\n\t        'mousewheel mousemultiwheel DOMMouseScroll '                     + // mouse wheel\n\t        'mouseover mouseout mousemove selectstart selectend '            + // mouse movement\n\t        'keydown keypress keyup '                                        + // keyboard\n\t        'orientationchange '                                             + // mobile\n\t        'focus blur change reset select submit '                         + // form elements\n\t        'load unload beforeunload resize move DOMContentLoaded '         + // window\n\t        'readystatechange message '                                      + // window\n\t        'error abort scroll '                                              // misc\n\t      // element.fireEvent('onXYZ'... is not forgiving if we try to fire an event\n\t      // that doesn't actually exist, so make sure we only do these on newer browsers\n\t    , w3cNativeEvents =\n\t        'show '                                                          + // mouse buttons\n\t        'input invalid '                                                 + // form elements\n\t        'touchstart touchmove touchend touchcancel '                     + // touch\n\t        'gesturestart gesturechange gestureend '                         + // gesture\n\t        'textinput '                                                     + // TextEvent\n\t        'readystatechange pageshow pagehide popstate '                   + // window\n\t        'hashchange offline online '                                     + // window\n\t        'afterprint beforeprint '                                        + // printing\n\t        'dragstart dragenter dragover dragleave drag drop dragend '      + // dnd\n\t        'loadstart progress suspend emptied stalled loadmetadata '       + // media\n\t        'loadeddata canplay canplaythrough playing waiting seeking '     + // media\n\t        'seeked ended durationchange timeupdate play pause ratechange '  + // media\n\t        'volumechange cuechange '                                        + // media\n\t        'checking noupdate downloading cached updateready obsolete '       // appcache\n\t\n\t      // convert to a hash for quick lookups\n\t    , nativeEvents = (function (hash, events, i) {\n\t        for (i = 0; i < events.length; i++) events[i] && (hash[events[i]] = 1)\n\t        return hash\n\t      }({}, str2arr(standardNativeEvents + (W3C_MODEL ? w3cNativeEvents : ''))))\n\t\n\t      // custom events are events that we *fake*, they are not provided natively but\n\t      // we can use native events to generate them\n\t    , customEvents = (function () {\n\t        var isAncestor = 'compareDocumentPosition' in root\n\t              ? function (element, container) {\n\t                  return container.compareDocumentPosition && (container.compareDocumentPosition(element) & 16) === 16\n\t                }\n\t              : 'contains' in root\n\t                ? function (element, container) {\n\t                    container = container.nodeType === 9 || container === window ? root : container\n\t                    return container !== element && container.contains(element)\n\t                  }\n\t                : function (element, container) {\n\t                    while (element = element.parentNode) if (element === container) return 1\n\t                    return 0\n\t                  }\n\t          , check = function (event) {\n\t              var related = event.relatedTarget\n\t              return !related\n\t                ? related == null\n\t                : (related !== this && related.prefix !== 'xul' && !/document/.test(this.toString())\n\t                    && !isAncestor(related, this))\n\t            }\n\t\n\t        return {\n\t            mouseenter: { base: 'mouseover', condition: check }\n\t          , mouseleave: { base: 'mouseout', condition: check }\n\t          , mousewheel: { base: /Firefox/.test(navigator.userAgent) ? 'DOMMouseScroll' : 'mousewheel' }\n\t        }\n\t      }())\n\t\n\t      // we provide a consistent Event object across browsers by taking the actual DOM\n\t      // event object and generating a new one from its properties.\n\t    , Event = (function () {\n\t            // a whitelist of properties (for different event types) tells us what to check for and copy\n\t        var commonProps  = str2arr('altKey attrChange attrName bubbles cancelable ctrlKey currentTarget ' +\n\t              'detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey '  +\n\t              'srcElement target timeStamp type view which propertyName')\n\t          , mouseProps   = commonProps.concat(str2arr('button buttons clientX clientY dataTransfer '      +\n\t              'fromElement offsetX offsetY pageX pageY screenX screenY toElement'))\n\t          , mouseWheelProps = mouseProps.concat(str2arr('wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ ' +\n\t              'axis')) // 'axis' is FF specific\n\t          , keyProps     = commonProps.concat(str2arr('char charCode key keyCode keyIdentifier '          +\n\t              'keyLocation location'))\n\t          , textProps    = commonProps.concat(str2arr('data'))\n\t          , touchProps   = commonProps.concat(str2arr('touches targetTouches changedTouches scale rotation'))\n\t          , messageProps = commonProps.concat(str2arr('data origin source'))\n\t          , stateProps   = commonProps.concat(str2arr('state'))\n\t          , overOutRegex = /over|out/\n\t            // some event types need special handling and some need special properties, do that all here\n\t          , typeFixers   = [\n\t                { // key events\n\t                    reg: /key/i\n\t                  , fix: function (event, newEvent) {\n\t                      newEvent.keyCode = event.keyCode || event.which\n\t                      return keyProps\n\t                    }\n\t                }\n\t              , { // mouse events\n\t                    reg: /click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i\n\t                  , fix: function (event, newEvent, type) {\n\t                      newEvent.rightClick = event.which === 3 || event.button === 2\n\t                      newEvent.pos = { x: 0, y: 0 }\n\t                      if (event.pageX || event.pageY) {\n\t                        newEvent.clientX = event.pageX\n\t                        newEvent.clientY = event.pageY\n\t                      } else if (event.clientX || event.clientY) {\n\t                        newEvent.clientX = event.clientX + doc.body.scrollLeft + root.scrollLeft\n\t                        newEvent.clientY = event.clientY + doc.body.scrollTop + root.scrollTop\n\t                      }\n\t                      if (overOutRegex.test(type)) {\n\t                        newEvent.relatedTarget = event.relatedTarget\n\t                          || event[(type == 'mouseover' ? 'from' : 'to') + 'Element']\n\t                      }\n\t                      return mouseProps\n\t                    }\n\t                }\n\t              , { // mouse wheel events\n\t                    reg: /mouse.*(wheel|scroll)/i\n\t                  , fix: function () { return mouseWheelProps }\n\t                }\n\t              , { // TextEvent\n\t                    reg: /^text/i\n\t                  , fix: function () { return textProps }\n\t                }\n\t              , { // touch and gesture events\n\t                    reg: /^touch|^gesture/i\n\t                  , fix: function () { return touchProps }\n\t                }\n\t              , { // message events\n\t                    reg: /^message$/i\n\t                  , fix: function () { return messageProps }\n\t                }\n\t              , { // popstate events\n\t                    reg: /^popstate$/i\n\t                  , fix: function () { return stateProps }\n\t                }\n\t              , { // everything else\n\t                    reg: /.*/\n\t                  , fix: function () { return commonProps }\n\t                }\n\t            ]\n\t          , typeFixerMap = {} // used to map event types to fixer functions (above), a basic cache mechanism\n\t\n\t          , Event = function (event, element, isNative) {\n\t              if (!arguments.length) return\n\t              event = event || ((element.ownerDocument || element.document || element).parentWindow || win).event\n\t              this.originalEvent = event\n\t              this.isNative       = isNative\n\t              this.isBean         = true\n\t\n\t              if (!event) return\n\t\n\t              var type   = event.type\n\t                , target = event.target || event.srcElement\n\t                , i, l, p, props, fixer\n\t\n\t              this.target = target && target.nodeType === 3 ? target.parentNode : target\n\t\n\t              if (isNative) { // we only need basic augmentation on custom events, the rest expensive & pointless\n\t                fixer = typeFixerMap[type]\n\t                if (!fixer) { // haven't encountered this event type before, map a fixer function for it\n\t                  for (i = 0, l = typeFixers.length; i < l; i++) {\n\t                    if (typeFixers[i].reg.test(type)) { // guaranteed to match at least one, last is .*\n\t                      typeFixerMap[type] = fixer = typeFixers[i].fix\n\t                      break\n\t                    }\n\t                  }\n\t                }\n\t\n\t                props = fixer(event, this, type)\n\t                for (i = props.length; i--;) {\n\t                  if (!((p = props[i]) in this) && p in event) this[p] = event[p]\n\t                }\n\t              }\n\t            }\n\t\n\t        // preventDefault() and stopPropagation() are a consistent interface to those functions\n\t        // on the DOM, stop() is an alias for both of them together\n\t        Event.prototype.preventDefault = function () {\n\t          if (this.originalEvent.preventDefault) this.originalEvent.preventDefault()\n\t          else this.originalEvent.returnValue = false\n\t        }\n\t        Event.prototype.stopPropagation = function () {\n\t          if (this.originalEvent.stopPropagation) this.originalEvent.stopPropagation()\n\t          else this.originalEvent.cancelBubble = true\n\t        }\n\t        Event.prototype.stop = function () {\n\t          this.preventDefault()\n\t          this.stopPropagation()\n\t          this.stopped = true\n\t        }\n\t        // stopImmediatePropagation() has to be handled internally because we manage the event list for\n\t        // each element\n\t        // note that originalElement may be a Bean#Event object in some situations\n\t        Event.prototype.stopImmediatePropagation = function () {\n\t          if (this.originalEvent.stopImmediatePropagation) this.originalEvent.stopImmediatePropagation()\n\t          this.isImmediatePropagationStopped = function () { return true }\n\t        }\n\t        Event.prototype.isImmediatePropagationStopped = function () {\n\t          return this.originalEvent.isImmediatePropagationStopped && this.originalEvent.isImmediatePropagationStopped()\n\t        }\n\t        Event.prototype.clone = function (currentTarget) {\n\t          //TODO: this is ripe for optimisation, new events are *expensive*\n\t          // improving this will speed up delegated events\n\t          var ne = new Event(this, this.element, this.isNative)\n\t          ne.currentTarget = currentTarget\n\t          return ne\n\t        }\n\t\n\t        return Event\n\t      }())\n\t\n\t      // if we're in old IE we can't do onpropertychange on doc or win so we use doc.documentElement for both\n\t    , targetElement = function (element, isNative) {\n\t        return !W3C_MODEL && !isNative && (element === doc || element === win) ? root : element\n\t      }\n\t\n\t      /**\n\t        * Bean maintains an internal registry for event listeners. We don't touch elements, objects\n\t        * or functions to identify them, instead we store everything in the registry.\n\t        * Each event listener has a RegEntry object, we have one 'registry' for the whole instance.\n\t        */\n\t    , RegEntry = (function () {\n\t        // each handler is wrapped so we can handle delegation and custom events\n\t        var wrappedHandler = function (element, fn, condition, args) {\n\t            var call = function (event, eargs) {\n\t                  return fn.apply(element, args ? slice.call(eargs, event ? 0 : 1).concat(args) : eargs)\n\t                }\n\t              , findTarget = function (event, eventElement) {\n\t                  return fn.__beanDel ? fn.__beanDel.ft(event.target, element) : eventElement\n\t                }\n\t              , handler = condition\n\t                  ? function (event) {\n\t                      var target = findTarget(event, this) // deleated event\n\t                      if (condition.apply(target, arguments)) {\n\t                        if (event) event.currentTarget = target\n\t                        return call(event, arguments)\n\t                      }\n\t                    }\n\t                  : function (event) {\n\t                      if (fn.__beanDel) event = event.clone(findTarget(event)) // delegated event, fix the fix\n\t                      return call(event, arguments)\n\t                    }\n\t            handler.__beanDel = fn.__beanDel\n\t            return handler\n\t          }\n\t\n\t        , RegEntry = function (element, type, handler, original, namespaces, args, root) {\n\t            var customType     = customEvents[type]\n\t              , isNative\n\t\n\t            if (type == 'unload') {\n\t              // self clean-up\n\t              handler = once(removeListener, element, type, handler, original)\n\t            }\n\t\n\t            if (customType) {\n\t              if (customType.condition) {\n\t                handler = wrappedHandler(element, handler, customType.condition, args)\n\t              }\n\t              type = customType.base || type\n\t            }\n\t\n\t            this.isNative      = isNative = nativeEvents[type] && !!element[eventSupport]\n\t            this.customType    = !W3C_MODEL && !isNative && type\n\t            this.element       = element\n\t            this.type          = type\n\t            this.original      = original\n\t            this.namespaces    = namespaces\n\t            this.eventType     = W3C_MODEL || isNative ? type : 'propertychange'\n\t            this.target        = targetElement(element, isNative)\n\t            this[eventSupport] = !!this.target[eventSupport]\n\t            this.root          = root\n\t            this.handler       = wrappedHandler(element, handler, null, args)\n\t          }\n\t\n\t        // given a list of namespaces, is our entry in any of them?\n\t        RegEntry.prototype.inNamespaces = function (checkNamespaces) {\n\t          var i, j, c = 0\n\t          if (!checkNamespaces) return true\n\t          if (!this.namespaces) return false\n\t          for (i = checkNamespaces.length; i--;) {\n\t            for (j = this.namespaces.length; j--;) {\n\t              if (checkNamespaces[i] == this.namespaces[j]) c++\n\t            }\n\t          }\n\t          return checkNamespaces.length === c\n\t        }\n\t\n\t        // match by element, original fn (opt), handler fn (opt)\n\t        RegEntry.prototype.matches = function (checkElement, checkOriginal, checkHandler) {\n\t          return this.element === checkElement &&\n\t            (!checkOriginal || this.original === checkOriginal) &&\n\t            (!checkHandler || this.handler === checkHandler)\n\t        }\n\t\n\t        return RegEntry\n\t      }())\n\t\n\t    , registry = (function () {\n\t        // our map stores arrays by event type, just because it's better than storing\n\t        // everything in a single array.\n\t        // uses '$' as a prefix for the keys for safety and 'r' as a special prefix for\n\t        // rootListeners so we can look them up fast\n\t        var map = {}\n\t\n\t          // generic functional search of our registry for matching listeners,\n\t          // `fn` returns false to break out of the loop\n\t          , forAll = function (element, type, original, handler, root, fn) {\n\t              var pfx = root ? 'r' : '$'\n\t              if (!type || type == '*') {\n\t                // search the whole registry\n\t                for (var t in map) {\n\t                  if (t.charAt(0) == pfx) {\n\t                    forAll(element, t.substr(1), original, handler, root, fn)\n\t                  }\n\t                }\n\t              } else {\n\t                var i = 0, l, list = map[pfx + type], all = element == '*'\n\t                if (!list) return\n\t                for (l = list.length; i < l; i++) {\n\t                  if ((all || list[i].matches(element, original, handler)) && !fn(list[i], list, i, type)) return\n\t                }\n\t              }\n\t            }\n\t\n\t          , has = function (element, type, original, root) {\n\t              // we're not using forAll here simply because it's a bit slower and this\n\t              // needs to be fast\n\t              var i, list = map[(root ? 'r' : '$') + type]\n\t              if (list) {\n\t                for (i = list.length; i--;) {\n\t                  if (!list[i].root && list[i].matches(element, original, null)) return true\n\t                }\n\t              }\n\t              return false\n\t            }\n\t\n\t          , get = function (element, type, original, root) {\n\t              var entries = []\n\t              forAll(element, type, original, null, root, function (entry) {\n\t                return entries.push(entry)\n\t              })\n\t              return entries\n\t            }\n\t\n\t          , put = function (entry) {\n\t              var has = !entry.root && !this.has(entry.element, entry.type, null, false)\n\t                , key = (entry.root ? 'r' : '$') + entry.type\n\t              ;(map[key] || (map[key] = [])).push(entry)\n\t              return has\n\t            }\n\t\n\t          , del = function (entry) {\n\t              forAll(entry.element, entry.type, null, entry.handler, entry.root, function (entry, list, i) {\n\t                list.splice(i, 1)\n\t                entry.removed = true\n\t                if (list.length === 0) delete map[(entry.root ? 'r' : '$') + entry.type]\n\t                return false\n\t              })\n\t            }\n\t\n\t            // dump all entries, used for onunload\n\t          , entries = function () {\n\t              var t, entries = []\n\t              for (t in map) {\n\t                if (t.charAt(0) == '$') entries = entries.concat(map[t])\n\t              }\n\t              return entries\n\t            }\n\t\n\t        return { has: has, get: get, put: put, del: del, entries: entries }\n\t      }())\n\t\n\t      // we need a selector engine for delegated events, use querySelectorAll if it exists\n\t      // but for older browsers we need Qwery, Sizzle or similar\n\t    , selectorEngine\n\t    , setSelectorEngine = function (e) {\n\t        if (!arguments.length) {\n\t          selectorEngine = doc.querySelectorAll\n\t            ? function (s, r) {\n\t                return r.querySelectorAll(s)\n\t              }\n\t            : function () {\n\t                throw new Error('Bean: No selector engine installed') // eeek\n\t              }\n\t        } else {\n\t          selectorEngine = e\n\t        }\n\t      }\n\t\n\t      // we attach this listener to each DOM event that we need to listen to, only once\n\t      // per event type per DOM element\n\t    , rootListener = function (event, type) {\n\t        if (!W3C_MODEL && type && event && event.propertyName != '_on' + type) return\n\t\n\t        var listeners = registry.get(this, type || event.type, null, false)\n\t          , l = listeners.length\n\t          , i = 0\n\t\n\t        event = new Event(event, this, true)\n\t        if (type) event.type = type\n\t\n\t        // iterate through all handlers registered for this type, calling them unless they have\n\t        // been removed by a previous handler or stopImmediatePropagation() has been called\n\t        for (; i < l && !event.isImmediatePropagationStopped(); i++) {\n\t          if (!listeners[i].removed) listeners[i].handler.call(this, event)\n\t        }\n\t      }\n\t\n\t      // add and remove listeners to DOM elements\n\t    , listener = W3C_MODEL\n\t        ? function (element, type, add) {\n\t            // new browsers\n\t            element[add ? addEvent : removeEvent](type, rootListener, false)\n\t          }\n\t        : function (element, type, add, custom) {\n\t            // IE8 and below, use attachEvent/detachEvent and we have to piggy-back propertychange events\n\t            // to simulate event bubbling etc.\n\t            var entry\n\t            if (add) {\n\t              registry.put(entry = new RegEntry(\n\t                  element\n\t                , custom || type\n\t                , function (event) { // handler\n\t                    rootListener.call(element, event, custom)\n\t                  }\n\t                , rootListener\n\t                , null\n\t                , null\n\t                , true // is root\n\t              ))\n\t              if (custom && element['_on' + custom] == null) element['_on' + custom] = 0\n\t              entry.target.attachEvent('on' + entry.eventType, entry.handler)\n\t            } else {\n\t              entry = registry.get(element, custom || type, rootListener, true)[0]\n\t              if (entry) {\n\t                entry.target.detachEvent('on' + entry.eventType, entry.handler)\n\t                registry.del(entry)\n\t              }\n\t            }\n\t          }\n\t\n\t    , once = function (rm, element, type, fn, originalFn) {\n\t        // wrap the handler in a handler that does a remove as well\n\t        return function () {\n\t          fn.apply(this, arguments)\n\t          rm(element, type, originalFn)\n\t        }\n\t      }\n\t\n\t    , removeListener = function (element, orgType, handler, namespaces) {\n\t        var type     = orgType && orgType.replace(nameRegex, '')\n\t          , handlers = registry.get(element, type, null, false)\n\t          , removed  = {}\n\t          , i, l\n\t\n\t        for (i = 0, l = handlers.length; i < l; i++) {\n\t          if ((!handler || handlers[i].original === handler) && handlers[i].inNamespaces(namespaces)) {\n\t            // TODO: this is problematic, we have a registry.get() and registry.del() that\n\t            // both do registry searches so we waste cycles doing this. Needs to be rolled into\n\t            // a single registry.forAll(fn) that removes while finding, but the catch is that\n\t            // we'll be splicing the arrays that we're iterating over. Needs extra tests to\n\t            // make sure we don't screw it up. @rvagg\n\t            registry.del(handlers[i])\n\t            if (!removed[handlers[i].eventType] && handlers[i][eventSupport])\n\t              removed[handlers[i].eventType] = { t: handlers[i].eventType, c: handlers[i].type }\n\t          }\n\t        }\n\t        // check each type/element for removed listeners and remove the rootListener where it's no longer needed\n\t        for (i in removed) {\n\t          if (!registry.has(element, removed[i].t, null, false)) {\n\t            // last listener of this type, remove the rootListener\n\t            listener(element, removed[i].t, false, removed[i].c)\n\t          }\n\t        }\n\t      }\n\t\n\t      // set up a delegate helper using the given selector, wrap the handler function\n\t    , delegate = function (selector, fn) {\n\t        //TODO: findTarget (therefore $) is called twice, once for match and once for\n\t        // setting e.currentTarget, fix this so it's only needed once\n\t        var findTarget = function (target, root) {\n\t              var i, array = isString(selector) ? selectorEngine(selector, root) : selector\n\t              for (; target && target !== root; target = target.parentNode) {\n\t                for (i = array.length; i--;) {\n\t                  if (array[i] === target) return target\n\t                }\n\t              }\n\t            }\n\t          , handler = function (e) {\n\t              var match = findTarget(e.target, this)\n\t              if (match) fn.apply(match, arguments)\n\t            }\n\t\n\t        // __beanDel isn't pleasant but it's a private function, not exposed outside of Bean\n\t        handler.__beanDel = {\n\t            ft       : findTarget // attach it here for customEvents to use too\n\t          , selector : selector\n\t        }\n\t        return handler\n\t      }\n\t\n\t    , fireListener = W3C_MODEL ? function (isNative, type, element) {\n\t        // modern browsers, do a proper dispatchEvent()\n\t        var evt = doc.createEvent(isNative ? 'HTMLEvents' : 'UIEvents')\n\t        evt[isNative ? 'initEvent' : 'initUIEvent'](type, true, true, win, 1)\n\t        element.dispatchEvent(evt)\n\t      } : function (isNative, type, element) {\n\t        // old browser use onpropertychange, just increment a custom property to trigger the event\n\t        element = targetElement(element, isNative)\n\t        isNative ? element.fireEvent('on' + type, doc.createEventObject()) : element['_on' + type]++\n\t      }\n\t\n\t      /**\n\t        * Public API: off(), on(), add(), (remove()), one(), fire(), clone()\n\t        */\n\t\n\t      /**\n\t        * off(element[, eventType(s)[, handler ]])\n\t        */\n\t    , off = function (element, typeSpec, fn) {\n\t        var isTypeStr = isString(typeSpec)\n\t          , k, type, namespaces, i\n\t\n\t        if (isTypeStr && typeSpec.indexOf(' ') > 0) {\n\t          // off(el, 't1 t2 t3', fn) or off(el, 't1 t2 t3')\n\t          typeSpec = str2arr(typeSpec)\n\t          for (i = typeSpec.length; i--;)\n\t            off(element, typeSpec[i], fn)\n\t          return element\n\t        }\n\t\n\t        type = isTypeStr && typeSpec.replace(nameRegex, '')\n\t        if (type && customEvents[type]) type = customEvents[type].base\n\t\n\t        if (!typeSpec || isTypeStr) {\n\t          // off(el) or off(el, t1.ns) or off(el, .ns) or off(el, .ns1.ns2.ns3)\n\t          if (namespaces = isTypeStr && typeSpec.replace(namespaceRegex, '')) namespaces = str2arr(namespaces, '.')\n\t          removeListener(element, type, fn, namespaces)\n\t        } else if (isFunction(typeSpec)) {\n\t          // off(el, fn)\n\t          removeListener(element, null, typeSpec)\n\t        } else {\n\t          // off(el, { t1: fn1, t2, fn2 })\n\t          for (k in typeSpec) {\n\t            if (typeSpec.hasOwnProperty(k)) off(element, k, typeSpec[k])\n\t          }\n\t        }\n\t\n\t        return element\n\t      }\n\t\n\t      /**\n\t        * on(element, eventType(s)[, selector], handler[, args ])\n\t        */\n\t    , on = function(element, events, selector, fn) {\n\t        var originalFn, type, types, i, args, entry, first\n\t\n\t        //TODO: the undefined check means you can't pass an 'args' argument, fix this perhaps?\n\t        if (selector === undefined && typeof events == 'object') {\n\t          //TODO: this can't handle delegated events\n\t          for (type in events) {\n\t            if (events.hasOwnProperty(type)) {\n\t              on.call(this, element, type, events[type])\n\t            }\n\t          }\n\t          return\n\t        }\n\t\n\t        if (!isFunction(selector)) {\n\t          // delegated event\n\t          originalFn = fn\n\t          args       = slice.call(arguments, 4)\n\t          fn         = delegate(selector, originalFn, selectorEngine)\n\t        } else {\n\t          args       = slice.call(arguments, 3)\n\t          fn         = originalFn = selector\n\t        }\n\t\n\t        types = str2arr(events)\n\t\n\t        // special case for one(), wrap in a self-removing handler\n\t        if (this === ONE) {\n\t          fn = once(off, element, events, fn, originalFn)\n\t        }\n\t\n\t        for (i = types.length; i--;) {\n\t          // add new handler to the registry and check if it's the first for this element/type\n\t          first = registry.put(entry = new RegEntry(\n\t              element\n\t            , types[i].replace(nameRegex, '') // event type\n\t            , fn\n\t            , originalFn\n\t            , str2arr(types[i].replace(namespaceRegex, ''), '.') // namespaces\n\t            , args\n\t            , false // not root\n\t          ))\n\t          if (entry[eventSupport] && first) {\n\t            // first event of this type on this element, add root listener\n\t            listener(element, entry.eventType, true, entry.customType)\n\t          }\n\t        }\n\t\n\t        return element\n\t      }\n\t\n\t      /**\n\t        * add(element[, selector], eventType(s), handler[, args ])\n\t        *\n\t        * Deprecated: kept (for now) for backward-compatibility\n\t        */\n\t    , add = function (element, events, fn, delfn) {\n\t        return on.apply(\n\t            null\n\t          , !isString(fn)\n\t              ? slice.call(arguments)\n\t              : [ element, fn, events, delfn ].concat(arguments.length > 3 ? slice.call(arguments, 5) : [])\n\t        )\n\t      }\n\t\n\t      /**\n\t        * one(element, eventType(s)[, selector], handler[, args ])\n\t        */\n\t    , one = function () {\n\t        return on.apply(ONE, arguments)\n\t      }\n\t\n\t      /**\n\t        * fire(element, eventType(s)[, args ])\n\t        *\n\t        * The optional 'args' argument must be an array, if no 'args' argument is provided\n\t        * then we can use the browser's DOM event system, otherwise we trigger handlers manually\n\t        */\n\t    , fire = function (element, type, args) {\n\t        var types = str2arr(type)\n\t          , i, j, l, names, handlers\n\t\n\t        for (i = types.length; i--;) {\n\t          type = types[i].replace(nameRegex, '')\n\t          if (names = types[i].replace(namespaceRegex, '')) names = str2arr(names, '.')\n\t          if (!names && !args && element[eventSupport]) {\n\t            fireListener(nativeEvents[type], type, element)\n\t          } else {\n\t            // non-native event, either because of a namespace, arguments or a non DOM element\n\t            // iterate over all listeners and manually 'fire'\n\t            handlers = registry.get(element, type, null, false)\n\t            args = [false].concat(args)\n\t            for (j = 0, l = handlers.length; j < l; j++) {\n\t              if (handlers[j].inNamespaces(names)) {\n\t                handlers[j].handler.apply(element, args)\n\t              }\n\t            }\n\t          }\n\t        }\n\t        return element\n\t      }\n\t\n\t      /**\n\t        * clone(dstElement, srcElement[, eventType ])\n\t        *\n\t        * TODO: perhaps for consistency we should allow the same flexibility in type specifiers?\n\t        */\n\t    , clone = function (element, from, type) {\n\t        var handlers = registry.get(from, type, null, false)\n\t          , l = handlers.length\n\t          , i = 0\n\t          , args, beanDel\n\t\n\t        for (; i < l; i++) {\n\t          if (handlers[i].original) {\n\t            args = [ element, handlers[i].type ]\n\t            if (beanDel = handlers[i].handler.__beanDel) args.push(beanDel.selector)\n\t            args.push(handlers[i].original)\n\t            on.apply(null, args)\n\t          }\n\t        }\n\t        return element\n\t      }\n\t\n\t    , bean = {\n\t          'on'                : on\n\t        , 'add'               : add\n\t        , 'one'               : one\n\t        , 'off'               : off\n\t        , 'remove'            : off\n\t        , 'clone'             : clone\n\t        , 'fire'              : fire\n\t        , 'Event'             : Event\n\t        , 'setSelectorEngine' : setSelectorEngine\n\t        , 'noConflict'        : function () {\n\t            context[name] = old\n\t            return this\n\t          }\n\t      }\n\t\n\t  // for IE, clean up on unload to avoid leaks\n\t  if (win.attachEvent) {\n\t    var cleanup = function () {\n\t      var i, entries = registry.entries()\n\t      for (i in entries) {\n\t        if (entries[i].type && entries[i].type !== 'unload') off(entries[i].element, entries[i].type)\n\t      }\n\t      win.detachEvent('onunload', cleanup)\n\t      win.CollectGarbage && win.CollectGarbage()\n\t    }\n\t    win.attachEvent('onunload', cleanup)\n\t  }\n\t\n\t  // initialize selector engine to internal default (qSA or throw Error)\n\t  setSelectorEngine()\n\t\n\t  return bean\n\t});\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t// http://www.webtoolkit.info/javascript-base64.html\n\t\n\tvar Base64 = {\n\t\n\t\t// private property\n\t\t_keyStr: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n\t\n\t\t// public method for encoding\n\t\tencode: function encode(input) {\n\t\t\tvar output = \"\";\n\t\t\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n\t\t\tvar i = 0;\n\t\n\t\t\tinput = Base64._utf8_encode(input);\n\t\n\t\t\twhile (i < input.length) {\n\t\n\t\t\t\tchr1 = input.charCodeAt(i++);\n\t\t\t\tchr2 = input.charCodeAt(i++);\n\t\t\t\tchr3 = input.charCodeAt(i++);\n\t\n\t\t\t\tenc1 = chr1 >> 2;\n\t\t\t\tenc2 = (chr1 & 3) << 4 | chr2 >> 4;\n\t\t\t\tenc3 = (chr2 & 15) << 2 | chr3 >> 6;\n\t\t\t\tenc4 = chr3 & 63;\n\t\n\t\t\t\tif (isNaN(chr2)) {\n\t\t\t\t\tenc3 = enc4 = 64;\n\t\t\t\t} else if (isNaN(chr3)) {\n\t\t\t\t\tenc4 = 64;\n\t\t\t\t}\n\t\n\t\t\t\toutput = output + this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) + this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\n\t\t\t}\n\t\n\t\t\treturn output;\n\t\t},\n\t\n\t\t// public method for decoding\n\t\tdecode: function decode(input) {\n\t\t\tvar output = \"\";\n\t\t\tvar chr1, chr2, chr3;\n\t\t\tvar enc1, enc2, enc3, enc4;\n\t\t\tvar i = 0;\n\t\n\t\t\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\t\n\t\t\twhile (i < input.length) {\n\t\n\t\t\t\tenc1 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\t\tenc2 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\t\tenc3 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\t\tenc4 = this._keyStr.indexOf(input.charAt(i++));\n\t\n\t\t\t\tchr1 = enc1 << 2 | enc2 >> 4;\n\t\t\t\tchr2 = (enc2 & 15) << 4 | enc3 >> 2;\n\t\t\t\tchr3 = (enc3 & 3) << 6 | enc4;\n\t\n\t\t\t\toutput = output + String.fromCharCode(chr1);\n\t\n\t\t\t\tif (enc3 != 64) {\n\t\t\t\t\toutput = output + String.fromCharCode(chr2);\n\t\t\t\t}\n\t\t\t\tif (enc4 != 64) {\n\t\t\t\t\toutput = output + String.fromCharCode(chr3);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\toutput = Base64._utf8_decode(output);\n\t\n\t\t\treturn output;\n\t\t},\n\t\n\t\t// private method for UTF-8 encoding\n\t\t_utf8_encode: function _utf8_encode(string) {\n\t\t\tstring = string.replace(/\\r\\n/g, \"\\n\");\n\t\t\tvar utftext = \"\";\n\t\n\t\t\tfor (var n = 0; n < string.length; n++) {\n\t\n\t\t\t\tvar c = string.charCodeAt(n);\n\t\n\t\t\t\tif (c < 128) {\n\t\t\t\t\tutftext += String.fromCharCode(c);\n\t\t\t\t} else if (c > 127 && c < 2048) {\n\t\t\t\t\tutftext += String.fromCharCode(c >> 6 | 192);\n\t\t\t\t\tutftext += String.fromCharCode(c & 63 | 128);\n\t\t\t\t} else {\n\t\t\t\t\tutftext += String.fromCharCode(c >> 12 | 224);\n\t\t\t\t\tutftext += String.fromCharCode(c >> 6 & 63 | 128);\n\t\t\t\t\tutftext += String.fromCharCode(c & 63 | 128);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn utftext;\n\t\t},\n\t\n\t\t// private method for UTF-8 decoding\n\t\t_utf8_decode: function _utf8_decode(utftext) {\n\t\t\tvar string = \"\";\n\t\t\tvar i = 0;\n\t\t\tvar c = c1 = c2 = 0;\n\t\n\t\t\twhile (i < utftext.length) {\n\t\n\t\t\t\tc = utftext.charCodeAt(i);\n\t\n\t\t\t\tif (c < 128) {\n\t\t\t\t\tstring += String.fromCharCode(c);\n\t\t\t\t\ti++;\n\t\t\t\t} else if (c > 191 && c < 224) {\n\t\t\t\t\tc2 = utftext.charCodeAt(i + 1);\n\t\t\t\t\tstring += String.fromCharCode((c & 31) << 6 | c2 & 63);\n\t\t\t\t\ti += 2;\n\t\t\t\t} else {\n\t\t\t\t\tc2 = utftext.charCodeAt(i + 1);\n\t\t\t\t\tc3 = utftext.charCodeAt(i + 2);\n\t\t\t\t\tstring += String.fromCharCode((c & 15) << 12 | (c2 & 63) << 6 | c3 & 63);\n\t\t\t\t\ti += 3;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn string;\n\t\t}\n\t\n\t};\n\t\n\texports.default = Base64;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _Point = __webpack_require__(4);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Rectangle = __webpack_require__(5);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t// util variables\n\tvar _debugging = [],\n\t    _debugAll = false,\n\t    typeRegistry = {},\n\t    splice = Array.splice;\n\t\n\t/**\n\t * Utility functions\n\t */\n\texports.default = {\n\t\ttype: function type(namespace, name, _type) {\n\t\t\tif (!typeRegistry[namespace]) typeRegistry[namespace] = new Map();\n\t\t\tif (!name) return typeRegistry[namespace];\n\t\t\tif (!_type) return typeRegistry[namespace].get(name);\n\t\t\ttypeRegistry[namespace].set(name, _type);\n\t\t},\n\t\n\t\tcreateType: function createType(namespace, props, defaultType) {\n\t\t\tvar name = props.name;\n\t\n\t\t\t// first check if type exists\n\t\t\tvar type = this.type(namespace, name);\n\t\t\tif (!type) {\n\t\t\t\tvar extend = props.extends ? this.type(namespace, props.extends) : null;\n\t\t\t\tif (!extend && defaultType) extend = defaultType;\n\t\t\t\tif (extend) type = function (_extend) {\n\t\t\t\t\t_inherits(type, _extend);\n\t\n\t\t\t\t\tfunction type() {\n\t\t\t\t\t\t_classCallCheck(this, type);\n\t\n\t\t\t\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(type).apply(this, arguments));\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn type;\n\t\t\t\t}(extend);else {\n\t\t\t\t\ttype = function type(config) {\n\t\t\t\t\t\t_classCallCheck(this, type);\n\t\n\t\t\t\t\t\t_.assign(this, config);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tdelete props.name;\n\t\t\t\tdelete props.extends;\n\t\t\t\t_.assign(type.prototype, props);\n\t\t\t\ttype.typeName = name;\n\t\t\t\tthis.type(namespace, name, type);\n\t\t\t\tthis.log('Utils', 'Utils.createType - ' + namespace + '.' + name);\n\t\t\t}\n\t\t\treturn type;\n\t\t},\n\t\n\t\tbuildTypes: function buildTypes(types, namespace, defaultType) {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tthis.log('Utils', 'Utils.buildTypes - ' + namespace);\n\t\n\t\t\tif (!types && defaultType) {\n\t\t\t\tthis.createType(namespace, defaultType);\n\t\t\t\tthis.log('Utils', 'Utils.buildTypes end');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (defaultType) {\n\t\t\t\tvar type = _.remove(types, { name: defaultType.name });\n\t\t\t\ttype = type.length > 0 ? type[0] : null;\n\t\t\t\tif (type) defaultType = this.createType(namespace, _.assign({}, defaultType, type));else defaultType = this.createType(namespace, defaultType);\n\t\t\t}\n\t\n\t\t\t_.forEach(types, function (type) {\n\t\t\t\t_this2.createType(namespace, type, defaultType);\n\t\t\t});\n\t\t\tthis.log('Utils', 'Utils.buildTypes end');\n\t\t},\n\t\n\t\t// Helper function to correctly set up the prototype chain, for subclasses.\n\t\t// Similar to `goog.inherits`, but uses a hash of prototype properties and\n\t\t// class properties to be extended.\n\t\textend: function extend(child, parent, protoProps, staticProps) {\n\t\t\t// Add static properties to the constructor function, if supplied.\n\t\t\t_.extend(child, parent, staticProps);\n\t\n\t\t\t// Set the prototype chain to inherit from `parent`, without calling\n\t\t\t// `parent`'s constructor function.\n\t\t\tvar Surrogate = function Surrogate() {\n\t\t\t\tthis.constructor = child;\n\t\t\t};\n\t\t\tSurrogate.prototype = parent.prototype;\n\t\t\tchild.prototype = new Surrogate();\n\t\n\t\t\t// Add prototype properties (instance properties) to the subclass,\n\t\t\t// if supplied.\n\t\t\tif (protoProps) _.extend(child.prototype, protoProps);\n\t\n\t\t\t// Set a convenience property in case the parent's prototype is needed later.\n\t\t\tchild.superclass = parent.prototype;\n\t\n\t\t\treturn child;\n\t\t},\n\t\n\t\tinitConfig: function initConfig(obj, config) {\n\t\t\tvar props = {},\n\t\t\t    c = obj.constructor,\n\t\t\t    cArr = [c];\n\t\t\twhile (c) {\n\t\t\t\tif (c.super) {\n\t\t\t\t\tc = c.super.constructor;\n\t\t\t\t\tsplice.apply(cArr, [0, 0, c]);\n\t\t\t\t} else c = null;\n\t\t\t}\n\t\n\t\t\tfor (var i = 0; i < cArr.length; i++) {\n\t\t\t\tc = cArr[i];\n\t\t\t\tif (c.DEFAULTS) _.assign(props, c.DEFAULTS);\n\t\t\t}\n\t\t\tobj.props = _.assign(props, config);\n\t\t\tc.prototype.prop = function (name, value) {\n\t\t\t\tif (!value) return this.props[name];\n\t\t\t\tthis.props[name] = value;\n\t\t\t};\n\t\t},\n\t\n\t\t/**\n\t  * Gets the JS class constructor.\n\t  * @param {Object} jsClass\n\t  * @param {Object} defaultClass\n\t  */\n\t\tgetConstructor: function getConstructor(jsClass, defaultClass) {\n\t\t\tif (!jsClass) jsClass = defaultClass;\n\t\n\t\t\tif (_.isString(jsClass)) jsClass = eval(jsClass);\n\t\t\treturn jsClass;\n\t\t},\n\t\n\t\tdebug: function debug(moduleName) {\n\t\t\tif (moduleName) {\n\t\t\t\t_debugging.push(moduleName);\n\t\t\t} else {\n\t\t\t\t_debugAll = true;\n\t\t\t}\n\t\t},\n\t\n\t\tlog: function log(name, message) {\n\t\t\tif (!window.console) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar debug = _debugAll;\n\t\t\tif (!_debugAll) {\n\t\t\t\tdebug = false;\n\t\t\t\tfor (var i = 0; i < _debugging.length; i++) {\n\t\t\t\t\tif (_debugging[i] == name) debug = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!debug) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twhile (name.length < 10) {\n\t\t\t\tname = name + ' ';\n\t\t\t}\n\t\t\tname = name.substring(0, 10) + \" - \";\n\t\t\tconsole.info(name, message);\n\t\t},\n\t\n\t\t/**\n\t  * Get the relative position of sub shapes within a parent share.\n\t  * @param bounds\n\t  * @param geometry The geometry information, the format of Geometry is:\n\t  * {\n\t  *      x: \"x coordinate of ref point, if less than 1, will be treated as the percentage of the parent width.\",\n\t  *      y: \"y coordinate of ref point.\",\n\t  *      anchorX: \"x pos of child relative to the ref point\",\n\t  *      anchorY: \"y pos of child relative to the ref point\",\n\t  *      offsetX: \"the offset in the x direction.\",\n\t  *      offsetY: \"the offset in the y direction.\",\n\t  *      width: \"the width of the child element\",\n\t  *      height: \"the height of the child element\"\n\t  * }\n\t  * @returns {*[]}\n\t  */\n\t\tgetRelativePosition: function getRelativePosition(bounds, geometry) {\n\t\t\tvar x = Math.abs(geometry.x) <= 1 ? bounds.width * geometry.x : geometry.x;\n\t\t\tvar y = Math.abs(geometry.y) <= 1 ? bounds.height * geometry.y : geometry.y;\n\t\t\treturn this.offsetPosition([x, y], geometry);\n\t\t},\n\t\n\t\toffsetPosition: function offsetPosition(pos, geometry) {\n\t\t\treturn [pos[0] + geometry.width * geometry.anchorX + geometry.offsetX, pos[1] + geometry.height * geometry.anchorY + geometry.offsetY];\n\t\t},\n\t\n\t\t/**\n\t  * Get the position relative to the graph that's unscaled, i.e., absolute position without considering translation and scale.\n\t  * @param t the current translate\n\t  * @param scale the current scale\n\t  * @param o can be either a Point or a Rectangle or a Point array.\n\t  */\n\t\tunscale: function unscale(t, scale, o) {\n\t\t\tif (o instanceof _Rectangle2.default) return new _Rectangle2.default(o.x * scale + t[0], o.y * scale + t[1], o.width * scale, o.height * scale);else if (o instanceof _Point2.default) return new _Point2.default(o.x * scale + t[0], o.y * scale + t[1]);else return [o[0] * scale + t[0], o[1] * scale + t[1]];\n\t\t},\n\t\n\t\t/**\n\t  * Get the position relative to the graph that's scaled, i.e., relative position considering translation and scale.\n\t  * @param t the current translation\n\t  * @param scale the current scale\n\t  * @param o can be either a Point or a Rectangle or a Point array.\n\t  */\n\t\tscale: function scale(t, _scale, o) {\n\t\t\tif (o instanceof _Rectangle2.default) return new _Rectangle2.default((o.x - t[0]) / _scale, (o.y - t[1]) / _scale, o.width / _scale, o.height / _scale);else if (o instanceof _Point2.default) return new _Point2.default((o.x - t[0]) / _scale, (o.y - t[1]) / _scale);else return [(o[0] - t[0]) / _scale, (o[1] - t[1]) / _scale];\n\t\t},\n\t\n\t\t/**\n\t  * Convenience method.\n\t  */\n\t\tgetProperty: function getProperty(obj, prop) {\n\t\t\tif (!obj) return null;\n\t\t\tif (_.has(obj, prop)) return obj[prop];\n\t\t\tif (obj.prop && _.isFunction(obj.prop)) return obj.prop(prop);\n\t\t\treturn null;\n\t\t}\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Point = function () {\n\t\tfunction Point(x, y) {\n\t\t\t_classCallCheck(this, Point);\n\t\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t}\n\t\n\t\t/**\n\t  * Make a clone of this point\n\t  */\n\t\n\t\n\t\t_createClass(Point, [{\n\t\t\tkey: \"clone\",\n\t\t\tvalue: function clone() {\n\t\t\t\treturn new Point(this.x, this.y);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Calculate the distance from this pt to the other pt.\n\t   * @param aPt\n\t   * @returns {number}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"distance\",\n\t\t\tvalue: function distance(aPt) {\n\t\t\t\treturn Math.sqrt((this.x - aPt.x) * (this.x - aPt.x) + (this.y - aPt.y) * (this.y - aPt.y));\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Translate this point\n\t  \t */\n\t\n\t\t}, {\n\t\t\tkey: \"translate\",\n\t\t\tvalue: function translate(p2) {\n\t\t\t\tthis.x += p2.x;\n\t\t\t\tthis.y += p2.y;\n\t\t\t\treturn this;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Scale this vector\n\t  \t */\n\t\n\t\t}, {\n\t\t\tkey: \"scale\",\n\t\t\tvalue: function scale(_scale) {\n\t\t\t\tthis.x *= _scale;\n\t\t\t\tthis.y *= _scale;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getScaled\",\n\t\t\tvalue: function getScaled(scale) {\n\t\t\t\treturn new Point(this.x * scale, this.y * scale);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getTranslated\",\n\t\t\tvalue: function getTranslated(p2) {\n\t\t\t\treturn new Point(this.x + p2.x, this.y + p2.y);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Get the direction vector from this point to p2.\n\t   * @param p2\n\t   * @returns {Point}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getDirection\",\n\t\t\tvalue: function getDirection(p2) {\n\t\t\t\tvar dist = this.distance(p2);\n\t\t\t\treturn new Point((p2.x - this.x) / dist, (p2.y - this.y) / dist);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * rotate the point about the origin. With the specified angle.\n\t   * @param angle the angle to rotate\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"rotate\",\n\t\t\tvalue: function rotate(angle) {\n\t\t\t\tvar cos = Math.cos(angle * Math.PI / 180);\n\t\t\t\tvar sin = Math.sin(angle * Math.PI / 180);\n\t\t\t\tvar x = this.x,\n\t\t\t\t    y = this.y;\n\t\t\t\tthis.x = x * cos - y * sin;\n\t\t\t\tthis.y = x * sin + y * cos;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getRotated\",\n\t\t\tvalue: function getRotated(angle) {\n\t\t\t\treturn this.clone().rotate(angle);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Calculate the dot product, treating this and p2 as vectors.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"dotProduct\",\n\t\t\tvalue: function dotProduct(p2) {\n\t\t\t\treturn this.x * p2.x + this.y * p2.y;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Get the mid point between this and p2.\n\t  \t */\n\t\n\t\t}, {\n\t\t\tkey: \"getMidPoint\",\n\t\t\tvalue: function getMidPoint(p2) {\n\t\t\t\treturn new Point((this.x + p2.x) / 2, (this.y + p2.y) / 2);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"reverse\",\n\t\t\tvalue: function reverse() {\n\t\t\t\tthis.x = -this.x;\n\t\t\t\tthis.y = -this.y;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"equals\",\n\t\t\tvalue: function equals(p2) {\n\t\t\t\tif (!p2 || p2.constructor != Point) return false;\n\t\n\t\t\t\treturn this.x == p2.x && this.y == p2.y;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Reflect this point w.r.t. the rectangle.\n\t   * If vertical is true, it will reflect the point cross the vertical\n\t   * central line of the rectangle, otherwise reflect cross the horizontal\n\t   * central line.\n\t   *\n\t   * @param rect the rectangle\n\t   * @param vertical whether is vertical reflection or horizontal reflection.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"reflect\",\n\t\t\tvalue: function reflect(rect, vertical) {\n\t\t\t\tif (vertical) this.x = 2 * rect.x - this.x;else this.y = 2 * rect.y - this.y;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\treturn this.x + \",\" + this.y;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Point;\n\t}();\n\t\n\tPoint.W = new Point(-1, 0);\n\tPoint.N = new Point(0, -1);\n\tPoint.S = new Point(0, 1);\n\tPoint.E = new Point(1, 0);\n\tPoint.NE = new Point(1, -1);\n\tPoint.NW = new Point(-1, -1);\n\tPoint.SE = new Point(1, 1);\n\tPoint.SW = new Point(-1, 1);\n\t\n\texports.default = Point;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Point = __webpack_require__(4);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Shape2 = __webpack_require__(7);\n\t\n\tvar _Shape3 = _interopRequireDefault(_Shape2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Rectangle = function (_Shape) {\n\t\t_inherits(Rectangle, _Shape);\n\t\n\t\tfunction Rectangle() {\n\t\t\t_classCallCheck(this, Rectangle);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(Rectangle).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(Rectangle, [{\n\t\t\tkey: \"contains\",\n\t\n\t\t\t/**\r\n\t   * Checks whether this rectangle contains a given point of a given rectangle\r\n\t   */\n\t\t\tvalue: function contains(el) {\n\t\t\t\tvar w = el.width || 0;\n\t\t\t\tvar h = el.height || 0;\n\t\t\t\tvar left = el.x - w / 2;\n\t\t\t\tvar right = el.x + w / 2;\n\t\t\t\tvar top = el.y - h / 2;\n\t\t\t\tvar bottom = el.y + h / 2;\n\t\t\t\treturn right <= this.right && left >= this.left && top >= this.top && bottom <= this.bottom;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Calcualte the distance to a point. 0 if this rectangle contains the point.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"distance\",\n\t\t\tvalue: function distance(pt) {\n\t\t\t\tif (this.contains(pt)) return 0;\n\t\n\t\t\t\tif (pt.x < this.left) {\n\t\t\t\t\tif (pt.y < this.top) return pt.distance(new _Point2.default(this.left, this.top));\n\t\t\t\t\tif (pt.y <= this.bottom) return this.left - pt.x;\n\t\t\t\t\treturn pt.distance(new _Point2.default(this.left, this.bottom));\n\t\t\t\t}\n\t\t\t\tif (pt.x <= this.right) {\n\t\t\t\t\tif (pt.y <= this.top) return this.top - pt.y;\n\t\t\t\t\treturn pt.y - this.bottom;\n\t\t\t\t}\n\t\t\t\tif (pt.y < this.top) return pt.distance(new _Point2.default(this.right, this.top));\n\t\t\t\tif (pt.y <= this.bottom) return pt.x - this.right;\n\t\t\t\treturn pt.distance(new _Point2.default(this.right, this.bottom));\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Given two points, we want to detect whether the line joining the pts intersect\r\n\t   * with the rectangle or not. We assume only horizontal or vertical line segments.\r\n\t   *\r\n\t   * @return int the side of the intersection: -1: no intersection, 0: left, 1: top, 2: right, 3: bottom, 4: containment.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"detectIntersection\",\n\t\t\tvalue: function detectIntersection(pt1, pt2) {\n\t\t\t\tvar horizontal = pt1.y == pt2.y;\n\t\t\t\tvar contains1 = this.contains(pt1);\n\t\t\t\tvar contains2 = this.contains(pt2);\n\t\t\t\tif (contains1 && contains2) return 4;\n\t\t\t\tif (!contains1 && !contains2) {\n\t\t\t\t\tif (horizontal && pt1.y >= this.top && pt1.y <= this.bottom) {\n\t\t\t\t\t\tif (pt1.x < this.left && pt2.x > this.right) return 0;\n\t\t\t\t\t\tif (pt1.x > this.right && pt2.x < this.left) return 2;\n\t\t\t\t\t}\n\t\t\t\t\tif (!horizontal && pt1.x >= this.left && pt1.x <= this.right) {\n\t\t\t\t\t\tif (pt1.y < this.top && pt2.y > this.bottom) return 1;\n\t\t\t\t\t\tif (pt1.y > this.bottom && pt2.y < this.top) return 3;\n\t\t\t\t\t}\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\n\t\t\t\tvar outPt = contains1 ? pt2 : pt1;\n\t\t\t\tif (horizontal) {\n\t\t\t\t\tif (outPt.x > this.right) return 2;\n\t\t\t\t\treturn 0;\n\t\t\t\t} else {\n\t\t\t\t\tif (outPt.y < this.top) return 1;\n\t\t\t\t\treturn 3;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Rectangle:{x=' + this.x + ';y=' + this.y + ';width=' + this.width + ';height=' + this.height + '}';\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"getPerimeter\",\n\t\t\tvalue: function getPerimeter(rect, pt) {\n\t\t\t\tvar orthogonal = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\t\n\t\t\t\tvar x = rect.x;\n\t\t\t\tvar y = rect.y;\n\t\t\t\tvar dx = pt.x - x;\n\t\t\t\tvar dy = pt.y - y;\n\t\t\t\tvar alpha = Math.atan2(dy, dx);\n\t\t\t\tvar p = new _Point2.default(0, 0);\n\t\t\t\tvar pi = Math.PI;\n\t\t\t\tvar pi2 = Math.PI / 2;\n\t\t\t\tvar beta = pi2 - alpha;\n\t\t\t\tvar t = Math.atan2(rect.height, rect.width);\n\t\n\t\t\t\tif (alpha < -pi + t || alpha > pi - t) {\n\t\t\t\t\t// Left edge\n\t\t\t\t\tp.x = rect.left;\n\t\t\t\t\tp.y = y - rect.width * Math.tan(alpha) / 2;\n\t\t\t\t} else if (alpha < -t) {\n\t\t\t\t\t// Top Edge\n\t\t\t\t\tp.y = rect.top;\n\t\t\t\t\tp.x = x - rect.height * Math.tan(beta) / 2;\n\t\t\t\t} else if (alpha < t) {\n\t\t\t\t\t// Right Edge\n\t\t\t\t\tp.x = rect.right;\n\t\t\t\t\tp.y = y + rect.width * Math.tan(alpha) / 2;\n\t\t\t\t} else {\n\t\t\t\t\t// Bottom Edge\n\t\t\t\t\tp.y = rect.bottom;\n\t\t\t\t\tp.x = x + rect.height * Math.tan(beta) / 2;\n\t\t\t\t}\n\t\n\t\t\t\tif (orthogonal) {\n\t\t\t\t\tif (alpha < -pi + t || alpha > pi - t) {\n\t\t\t\t\t\t// Left edge\n\t\t\t\t\t\tp.x = rect.left;\n\t\t\t\t\t\tp.y = y;\n\t\t\t\t\t} else if (alpha < -t) {\n\t\t\t\t\t\t// Top Edge\n\t\t\t\t\t\tp.y = rect.top;\n\t\t\t\t\t\tp.x = x;\n\t\t\t\t\t} else if (alpha < t) {\n\t\t\t\t\t\t// Right Edge\n\t\t\t\t\t\tp.x = rect.right;\n\t\t\t\t\t\tp.y = y;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Bottom Edge\n\t\t\t\t\t\tp.y = rect.bottom;\n\t\t\t\t\t\tp.x = x;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tvar dir = Rectangle.getDirection(rect, p, orthogonal);\n\t\t\t\treturn { point: p, direction: dir };\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Return the bounding rectangle that contains p1 and p2\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getBoundingRectangle\",\n\t\t\tvalue: function getBoundingRectangle(pts, margin) {\n\t\t\t\tif (!pts || pts.length == 0) return null;\n\t\t\t\tmargin = margin || [0, 0, 0, 0];\n\t\t\t\tif (!_lodash2.default.isArray(margin)) margin = [margin, margin, margin, margin];\n\t\t\t\tvar min = [pts[0].x, pts[0].y];\n\t\t\t\tvar max = [pts[0].x, pts[0].y];\n\t\t\t\tfor (var i = 1; i < pts.length; i++) {\n\t\t\t\t\tvar p = pts[i];\n\t\t\t\t\tif (p.x < min[0]) {\n\t\t\t\t\t\tmin[0] = p.x;\n\t\t\t\t\t}\n\t\t\t\t\tif (p.y < min[1]) {\n\t\t\t\t\t\tmin[1] = p.y;\n\t\t\t\t\t}\n\t\t\t\t\tif (p.x > max[0]) {\n\t\t\t\t\t\tmax[0] = p.x;\n\t\t\t\t\t}\n\t\t\t\t\tif (p.y > max[1]) {\n\t\t\t\t\t\tmax[1] = p.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmin[0] = min[0] - margin[0];\n\t\t\t\tmin[1] = min[1] - margin[1];\n\t\t\t\tmax[0] = max[0] + margin[2];\n\t\t\t\tmax[1] = max[1] + margin[3];\n\t\t\t\tvar w = Math.abs(max[0] - min[0]);\n\t\t\t\tvar h = Math.abs(max[1] - min[1]);\n\t\t\t\treturn new Rectangle(min[0] + w / 2, min[1] + h / 2, w, h);\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Create a union of all the rectangles.\r\n\t   * @param rects\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"union\",\n\t\t\tvalue: function union(rects) {\n\t\t\t\tvar minx = null,\n\t\t\t\t    miny = null,\n\t\t\t\t    maxx = -Infinity,\n\t\t\t\t    maxy = -Infinity;\n\t\t\t\t_lodash2.default.each(rects, function (rect) {\n\t\t\t\t\tminx = minx || rect.x;\n\t\t\t\t\tminy = miny || rect.y;\n\t\t\t\t\tminx = Math.min(minx, rect.x);\n\t\t\t\t\tminy = Math.min(miny, rect.y);\n\t\t\t\t\tmaxx = Math.max(maxx, rect.right());\n\t\t\t\t\tmaxy = Math.max(maxy, rect.bottom());\n\t\t\t\t});\n\t\t\t\tminx = minx || 0;\n\t\t\t\tminy = miny || 0;\n\t\t\t\treturn new Rectangle(minx, miny, maxx - minx, maxy - miny);\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Returns the direction the point <i>p</i> is in relation to the given rectangle.\r\n\t   * Possible values are WEST (-1,0), EAST (1,0), NORTH (0,-1) and SOUTH (0,1) if orthogonal is true, otherwise return\r\n\t   * the direction connection the center of r and p.\r\n\t   * @param r\r\n\t   * @param p\r\n\t   * @param orthogonal\r\n\t   * @returns {Point|*}\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getDirection\",\n\t\t\tvalue: function getDirection(r, p) {\n\t\t\t\tvar orthogonal = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\t\n\t\t\t\tif (!orthogonal) return new _Point2.default(r.x, r.y).getDirection(new _Point2.default(p.x, p.y));\n\t\n\t\t\t\tvar i = void 0,\n\t\t\t\t    distance = Math.abs(r.left - p.x),\n\t\t\t\t    direction = _Point2.default.W;\n\t\n\t\t\t\ti = Math.abs(r.top - p.y);\n\t\t\t\tif (i <= distance) {\n\t\t\t\t\tdistance = i;\n\t\t\t\t\tdirection = _Point2.default.N;\n\t\t\t\t}\n\t\n\t\t\t\ti = Math.abs(r.bottom - p.y);\n\t\t\t\tif (i <= distance) {\n\t\t\t\t\tdistance = i;\n\t\t\t\t\tdirection = _Point2.default.S;\n\t\t\t\t}\n\t\n\t\t\t\ti = Math.abs(r.right - p.x);\n\t\t\t\tif (i < distance) {\n\t\t\t\t\tdirection = _Point2.default.E;\n\t\t\t\t}\n\t\n\t\t\t\treturn direction;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Rectangle;\n\t}(_Shape3.default);\n\t\n\texports.default = Rectangle;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Point = __webpack_require__(4);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Rectangle = __webpack_require__(5);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar registry = {};\n\t\n\tvar Shape = function () {\n\t\tfunction Shape(x, y, width, height, config) {\n\t\t\t_classCallCheck(this, Shape);\n\t\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\t_lodash2.default.defaults(this, config, { x: 0, y: 0, width: 0, height: 0 });\n\t\t}\n\t\n\t\t/**\n\t  * Return the y-coord of the top side of this rectangle\n\t  */\n\t\n\t\n\t\t_createClass(Shape, [{\n\t\t\tkey: \"contains\",\n\t\t\tvalue: function contains(el) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * This will generate n ports on the shape.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getRegularPoints\",\n\t\t\tvalue: function getRegularPoints(n) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Get the intersection between boundary of this shape and the line connecting (x,y) with the refPt.\n\t   * @param refPt\n\t   * @returns {null}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getPerimeter\",\n\t\t\tvalue: function getPerimeter(refPt) {\n\t\t\t\tvar orthogonal = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t\n\t\t\t\treturn this.constructor.getPerimeter(this, refPt, orthogonal);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"render\",\n\t\t\tvalue: function render(view) {\n\t\t\t\tvar template = _lodash2.default.template(view.getTemplate(this.name, this));\n\t\t\t\treturn template(this);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"top\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.y - this.height / 2;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Returns the y-coordinate of the bottom of this Rectangle.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"bottom\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.y + this.height / 2;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Return the x-coord of left side of this rectangle\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"left\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.x - this.width / 2;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Returns the x-coordinate of the right side of this Rectangle.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"right\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.x + this.width / 2;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"center\",\n\t\t\tget: function get() {\n\t\t\t\treturn new _Point2.default(this.x, this.y);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"bounds\",\n\t\t\tget: function get() {\n\t\t\t\treturn new _Rectangle2.default(this.x, this.y, this.width, this.height);\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"getShape\",\n\t\t\tvalue: function getShape(name) {\n\t\t\t\treturn registry[name];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"addShape\",\n\t\t\tvalue: function addShape(name, c) {\n\t\t\t\tregistry[name] = c;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"removeShape\",\n\t\t\tvalue: function removeShape(name) {\n\t\t\t\tdelete registry[name];\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Shape;\n\t}();\n\t\n\texports.default = Shape;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * dom Utility functions\n\t */\n\texports.default = {\n\t\tisIE: function () {\n\t\t\tif (!window || !window.navigator || !navigator) return false;\n\t\t\tvar sAgent = window.navigator.userAgent;\n\t\t\tvar Idx = sAgent.indexOf(\"MSIE\");\n\t\n\t\t\t// If IE, return version number.\n\t\t\tif (Idx > 0) return parseInt(sAgent.substring(Idx + 5, sAgent.indexOf(\".\", Idx)));\n\t\n\t\t\t// If IE 11 then look for Updated user agent string.\n\t\t\telse if (!!navigator.userAgent.match(/Trident\\/7\\./)) return 11;else return false;\n\t\t}(),\n\t\n\t\tisFireFox: function () {\n\t\t\t// InstallTrigger: Firefox's API to install add-ons\n\t\t\treturn typeof InstallTrigger !== 'undefined';\n\t\t}(),\n\t\n\t\tcreateElement: function createElement(tag, attribs, styles, html) {\n\t\t\tvar el = document.createElement(tag);\n\t\t\tthis.setElement(el, attribs, styles);\n\t\t\tif (html) el.innerHTML = html;\n\t\t\treturn el;\n\t\t},\n\t\n\t\tcreateElementByString: function createElementByString(str) {\n\t\t\tvar temp = this.createElement('div', null, null, str);\n\t\t\treturn temp.childNodes;\n\t\t},\n\t\n\t\tsetElement: function setElement(el, attribs, styles) {\n\t\t\tif (attribs) {\n\t\t\t\t_lodash2.default.forEach(attribs, function (value, key) {\n\t\t\t\t\tel.setAttribute(key, value);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (styles) {\n\t\t\t\t_lodash2.default.forEach(styles, function (value, key) {\n\t\t\t\t\tel.style[key] = value;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\n\t\ttestElement: function testElement(node, method) {\n\t\t\treturn node && node.nodeType == 1 && (!method || method(node));\n\t\t},\n\t\n\t\tgetAncestorBy: function getAncestorBy(node, method) {\n\t\t\twhile (node = node.parentNode) {\n\t\t\t\tif (this.testElement(node, method)) return node;\n\t\t\t}return null;\n\t\t},\n\t\n\t\t/**\n\t  * Get the position of element relative to the context.\n\t  * @param el the element\n\t  * @param context\n\t  * @returns {*[]}\n\t  */\n\t\tgetPosition: function getPosition(el, context) {\n\t\t\tif (!context) context = document.body;\n\t\t\tvar elRect = el.getBoundingClientRect();\n\t\t\tvar contextRect = context.getBoundingClientRect();\n\t\n\t\t\treturn [elRect.left - contextRect.left, elRect.top - contextRect.top];\n\t\t},\n\t\tgetCenterPosition: function getCenterPosition(el, context) {\n\t\t\tif (!context) context = document.body;\n\t\t\tvar elRect = el.getBoundingClientRect();\n\t\t\tvar contextRect = context.getBoundingClientRect();\n\t\t\tvar w = elRect.right - elRect.left;\n\t\t\tvar h = elRect.bottom - elRect.top;\n\t\n\t\t\treturn [elRect.left - contextRect.left + w / 2, elRect.top - contextRect.top + h / 2];\n\t\t},\n\t\n\t\n\t\tmove: function move(el, x, y) {\n\t\t\tif (x) el.style.left = x + 'px';\n\t\t\tif (y) el.style.top = y + 'px';\n\t\t},\n\t\n\t\tgetSize: function getSize(el) {\n\t\t\tvar w = parseInt(el.style.offsetWidth, 10);\n\t\t\tvar h = parseInt(el.style.offsetHeight, 10);\n\t\t\treturn [w, h];\n\t\t},\n\t\n\t\tresize: function resize(el, w, h) {\n\t\t\tif (w) el.style.width = w + \"px\";\n\t\t\tif (h) el.style.height = h + 'px';\n\t\t},\n\t\n\t\tpreloadImages: function preloadImages(array) {\n\t\t\tif (!this.preloadImages.list) this.preloadImages.list = [];\n\t\t\tif (!this.preloadImages.loaded) this.preloadImages.loaded = {};\n\t\n\t\t\tvar list = this.preloadImages.list;\n\t\t\tvar img,\n\t\t\t    that = this;\n\t\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\t\timg = new Image();\n\t\t\t\timg.onload = function () {\n\t\t\t\t\tvar index = list.indexOf(this);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tthat.preloadImages.loaded[this.name] = { width: this.width, height: this.height };\n\t\t\t\t\t\t// remove image from the array once it's loaded\n\t\t\t\t\t\t// for memory consumption reasons\n\t\t\t\t\t\tlist.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tlist.push(img);\n\t\t\t\timg.src = array[i];\n\t\t\t\timg.name = array[i];\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t  * Get's the image's information given the url. Must be preloaded by calling the preloadImage function.\n\t  * @param src\n\t  */\n\t\tgetImageInfo: function getImageInfo(src) {\n\t\t\tif (this.preloadImages.loaded) {\n\t\t\t\treturn this.preloadImages.loaded[src];\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\n\t\tdownloadImage: function downloadImage(name, image) {\n\t\t\tif (!image) return;\n\t\t\tvar mime = image.match(/^data:([^;]*)/)[1];\n\t\t\tvar type = mime.split('/')[1];\n\t\t\tif (type.indexOf('+') > 0) type = type.split('+')[0];\n\t\t\tif (this.isIE) {\n\t\t\t\timage = this.b64toBlob(image.replace('data:' + mime + ';base64,', ''), mime);\n\t\t\t\tnavigator.msSaveBlob(image, name + '.' + type);\n\t\t\t} else {\n\t\t\t\tvar link = this.createElement('a', { href: image, download: name + '.' + type }, { display: \"none\" });\n\t\t\t\tdocument.body.appendChild(link);\n\t\t\t\tlink.click();\n\t\t\t\tlink.parentNode.removeChild(link);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t  * Convert b54 to blob. IE only\n\t  */\n\t\tb64toBlob: function b64toBlob(b64Data, contentType, sliceSize) {\n\t\t\tcontentType = contentType || '';\n\t\t\tsliceSize = sliceSize || 512;\n\t\n\t\t\tvar byteCharacters = atob(b64Data);\n\t\t\tvar byteArrays = [];\n\t\n\t\t\tfor (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n\t\t\t\tvar slice = byteCharacters.slice(offset, offset + sliceSize);\n\t\n\t\t\t\tvar byteNumbers = new Array(slice.length);\n\t\t\t\tfor (var i = 0; i < slice.length; i++) {\n\t\t\t\t\tbyteNumbers[i] = slice.charCodeAt(i);\n\t\t\t\t}\n\t\t\t\tvar byteArray = new Uint8Array(byteNumbers);\n\t\t\t\tbyteArrays.push(byteArray);\n\t\t\t}\n\t\t\treturn new Blob(byteArrays, { type: contentType });\n\t\t},\n\t\n\t\topenImage: function openImage(name, image) {\n\t\t\tvar myWindow = window.open(\"\", \"_blank\", \"toolbar=yes, scrollbars=yes, resizable=yes, width=500, height=500\");\n\t\t\tvar myDocument = myWindow.document;\n\t\t\tvar img = myDocument.createElement(\"img\");\n\t\t\tthis.setElement(img, { src: image, name: name });\n\t\t\tmyDocument.body.appendChild(img);\n\t\t},\n\t\n\t\t/**\n\t  * Check whether the key event is from input, textarea or select.\n\t  * @param e  input event\n\t  */\n\t\teventFromInput: function eventFromInput(e) {\n\t\t\tvar tagName = e.target.tagName;\n\t\t\treturn tagName == 'INPUT' || tagName == 'TEXTAREA' || tagName == 'SELECT';\n\t\t}\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * A string buffer for fast string manipulation\n\t */\n\t\n\tvar StringBuffer = function () {\n\t\tfunction StringBuffer(str) {\n\t\t\t_classCallCheck(this, StringBuffer);\n\t\n\t\t\tthis.buffer = [];\n\t\t\tif (str) this.buffer.push(str);\n\t\t}\n\t\n\t\t_createClass(StringBuffer, [{\n\t\t\tkey: \"append\",\n\t\t\tvalue: function append(stuff) {\n\t\t\t\tif (_lodash2.default.isString(stuff)) this.buffer.push(stuff);else if (_lodash2.default.isArray(stuff)) this.buffer = this.buffer.concat(stuff);else this.buffer.push(\"\" + stuff);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"prepend\",\n\t\t\tvalue: function prepend(stuff) {\n\t\t\t\tif (_lodash2.default.isString(stuff)) this.buffer.splice(0, 0, stuff);else if (_lodash2.default.isArray(stuff)) this.buffer = stuff.concat(this.buffer);else this.buffer.splice(0, 0, \"\" + stuff);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"clear\",\n\t\t\tvalue: function clear() {\n\t\t\t\tthis.buffer = [];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"removeLast\",\n\t\t\tvalue: function removeLast() {\n\t\t\t\tthis.buffer.pop();\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString(sep) {\n\t\t\t\tif (!sep) sep = '';\n\t\t\t\treturn this.buffer.join(sep);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn StringBuffer;\n\t}();\n\t\n\texports.default = StringBuffer;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Point = __webpack_require__(4);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Line = function () {\n\t\tfunction Line(start, end) {\n\t\t\t_classCallCheck(this, Line);\n\t\n\t\t\tthis.start = start;\n\t\t\tthis.end = end;\n\t\t}\n\t\n\t\t/**\n\t  * Calculate the length of this line\n\t  */\n\t\n\t\n\t\t_createClass(Line, [{\n\t\t\tkey: 'length',\n\t\t\tvalue: function length() {\n\t\t\t\treturn this.start.distance(this.end);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Calculate the distance of this line to the point.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'distance',\n\t\t\tvalue: function distance(pt) {\n\t\t\t\tvar x = this.start.distance(pt);\n\t\t\t\tif (x == 0) return 0;\n\t\n\t\t\t\tvar l = this.length();\n\t\t\t\tvar cosa = new _Point2.default((this.end.x - this.start.x) / l, (this.end.y - this.start.y) / l).dotProduct(new _Point2.default(pt.x / x, pt.y / x));\n\t\n\t\t\t\treturn x * Math.sqrt(1 - cosa * cosa);\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Function: intersection\n\t   *\n\t   * Returns the intersection of two lines as an <mxPoint>.\n\t   *\n\t   * Parameters:\n\t   *\n\t   * x0 - X-coordinate of the first line's startpoint.\n\t   * y0 - X-coordinate of the first line's startpoint.\n\t   * x1 - X-coordinate of the first line's endpoint.\n\t   * y1 - Y-coordinate of the first line's endpoint.\n\t   * x2 - X-coordinate of the second line's startpoint.\n\t   * y2 - Y-coordinate of the second line's startpoint.\n\t   * x3 - X-coordinate of the second line's endpoint.\n\t   * y3 - Y-coordinate of the second line's endpoint.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: 'toString',\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Line:{start=' + this.start + ';end=' + this.end + '}';\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: 'intersection',\n\t\t\tvalue: function intersection(x0, y0, x1, y1, x2, y2, x3, y3) {\n\t\t\t\tvar denom = (y3 - y2) * (x1 - x0) - (x3 - x2) * (y1 - y0);\n\t\t\t\tvar nume_a = (x3 - x2) * (y0 - y2) - (y3 - y2) * (x0 - x2);\n\t\t\t\tvar nume_b = (x1 - x0) * (y0 - y2) - (y1 - y0) * (x0 - x2);\n\t\n\t\t\t\tvar ua = nume_a / denom;\n\t\t\t\tvar ub = nume_b / denom;\n\t\n\t\t\t\tif (ua >= 0.0 && ua <= 1.0 && ub >= 0.0 && ub <= 1.0) {\n\t\t\t\t\t// Get the intersection point\n\t\t\t\t\tvar intersectionX = x0 + ua * (x1 - x0);\n\t\t\t\t\tvar intersectionY = y0 + ua * (y1 - y0);\n\t\n\t\t\t\t\treturn new _Point2.default(intersectionX, intersectionY);\n\t\t\t\t}\n\t\n\t\t\t\t// No intersection\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Line;\n\t}();\n\t\n\texports.default = Line;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Shape2 = __webpack_require__(7);\n\t\n\tvar _Shape3 = _interopRequireDefault(_Shape2);\n\t\n\tvar _Point = __webpack_require__(4);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Rectangle = __webpack_require__(5);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Ellipse = function (_Shape) {\n\t\t_inherits(Ellipse, _Shape);\n\t\n\t\tfunction Ellipse() {\n\t\t\t_classCallCheck(this, Ellipse);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(Ellipse).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(Ellipse, [{\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Ellipse:{x=' + this.x + ';y=' + this.y + ';width=' + this.width + ';height=' + this.height + '}';\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"getPerimeter\",\n\t\t\tvalue: function getPerimeter(rect, pt) {\n\t\t\t\tvar orthogonal = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\t\n\t\t\t\tvar a = rect.width / 2;\n\t\t\t\tvar b = rect.height / 2;\n\t\t\t\tvar cx = rect.x;\n\t\t\t\tvar cy = rect.y;\n\t\t\t\tvar px = pt.x;\n\t\t\t\tvar py = pt.y;\n\t\n\t\t\t\t// Calculates straight line equation through\n\t\t\t\t// point and ellipse center y = d * x + h\n\t\t\t\tvar dx = parseInt(px - cx);\n\t\t\t\tvar dy = parseInt(py - cy);\n\t\n\t\t\t\tvar tx, ty;\n\t\n\t\t\t\tif (dx == 0 && dy != 0) {\n\t\t\t\t\treturn new _Point2.default(cx, cy + b * dy / Math.abs(dy));\n\t\t\t\t} else if (dx == 0 && dy == 0) {\n\t\t\t\t\treturn new _Point2.default(px, py);\n\t\t\t\t}\n\t\n\t\t\t\t// Calculates intersection\n\t\t\t\tvar d = dy / dx;\n\t\t\t\tvar h = cy - d * cx;\n\t\t\t\tvar e = a * a * d * d + b * b;\n\t\t\t\tvar f = -2 * cx * e;\n\t\t\t\tvar g = a * a * d * d * cx * cx + b * b * cx * cx - a * a * b * b;\n\t\t\t\tvar det = Math.sqrt(f * f - 4 * e * g);\n\t\n\t\t\t\t// Two solutions (perimeter points)\n\t\t\t\tvar xout1 = (-f + det) / (2 * e);\n\t\t\t\tvar xout2 = (-f - det) / (2 * e);\n\t\t\t\tvar yout1 = d * xout1 + h;\n\t\t\t\tvar yout2 = d * xout2 + h;\n\t\t\t\tvar dist1 = Math.sqrt(Math.pow(xout1 - px, 2) + Math.pow(yout1 - py, 2));\n\t\t\t\tvar dist2 = Math.sqrt(Math.pow(xout2 - px, 2) + Math.pow(yout2 - py, 2));\n\t\n\t\t\t\t// Correct solution\n\t\t\t\tvar xout = 0;\n\t\t\t\tvar yout = 0;\n\t\n\t\t\t\tif (dist1 < dist2) {\n\t\t\t\t\txout = xout1;\n\t\t\t\t\tyout = yout1;\n\t\t\t\t} else {\n\t\t\t\t\txout = xout2;\n\t\t\t\t\tyout = yout2;\n\t\t\t\t}\n\t\n\t\t\t\tvar p = new _Point2.default(xout, yout);\n\t\t\t\tvar dir = _Rectangle2.default.getDirection(rect, p, orthogonal);\n\t\t\t\tif (orthogonal) {\n\t\t\t\t\tif (dir.x == -1) {\n\t\t\t\t\t\treturn { point: new _Point2.default(cx - a, cy), direction: dir };\n\t\t\t\t\t}\n\t\t\t\t\tif (dir.x == 1) {\n\t\t\t\t\t\treturn { point: new _Point2.default(cx + a, cy), direction: dir };\n\t\t\t\t\t}\n\t\t\t\t\tif (dir.y == -1) {\n\t\t\t\t\t\treturn { point: new _Point2.default(cx, cy - b), direction: dir };\n\t\t\t\t\t}\n\t\t\t\t\tif (dir.y == 1) {\n\t\t\t\t\t\treturn { point: new _Point2.default(cx, cy + b), direction: dir };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn { point: p, direction: dir };\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Ellipse;\n\t}(_Shape3.default);\n\t\n\texports.default = Ellipse;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Point = __webpack_require__(4);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Utils = __webpack_require__(3);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar defaultConfig = {\n\t\ttype: \"direct\",\n\t\tshowGauge: true,\n\t\torthogonal: false\n\t};\n\t\n\tvar defaultGeometry = {\n\t\twidth: 0,\n\t\theight: 0,\n\t\tanchorX: 0,\n\t\tanchorY: 0,\n\t\toffsetX: 0,\n\t\toffsetY: 0\n\t};\n\t\n\tvar linkTypes = {};\n\t\n\tvar Link = function () {\n\t\tfunction Link(terminalVisual) {\n\t\t\tvar shapeConfig = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\t\tvar startMarker = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\t\t\tvar endMarker = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];\n\t\n\t\t\t_classCallCheck(this, Link);\n\t\n\t\t\tthis.start = terminalVisual[0].point;\n\t\t\tthis.end = terminalVisual[1].point;\n\t\t\tthis.startNormal = terminalVisual[0].direction;\n\t\t\tthis.endNormal = terminalVisual[1].direction;\n\t\t\tthis.startMarker = startMarker;\n\t\t\tthis.endMarker = endMarker;\n\t\t\t_lodash2.default.assign(this, shapeConfig);\n\t\t}\n\t\n\t\t_createClass(Link, [{\n\t\t\tkey: \"render\",\n\t\t\tvalue: function render(view) {\n\t\t\t\treturn view.renderLink(this);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getRelativePosition\",\n\t\n\t\n\t\t\t/**\r\n\t   * Calculate the position where to put modifiers or label..\r\n\t   *\r\n\t   * @param geometry: defines how far along the edge should the point be placed.\r\n\t   * @return *[] the relative position.\r\n\t   */\n\t\t\tvalue: function getRelativePosition(geometry) {\n\t\t\t\tif (_lodash2.default.isNumber(geometry)) geometry = { x: geometry };\n\t\t\t\tgeometry = _lodash2.default.defaults(geometry, defaultGeometry);\n\t\t\t\tvar p = geometry.x,\n\t\t\t\t    l = this.length;\n\t\t\t\tif (Math.abs(p) <= 1) p *= l;\n\t\t\t\tif (p < 0) p = l + p;\n\t\t\t\tif (p > l) p = l;\n\t\n\t\t\t\tvar points = this.points,\n\t\t\t\t    d = void 0,\n\t\t\t\t    point = void 0,\n\t\t\t\t    dir = void 0;\n\t\t\t\tfor (var i = 0; i < points.length - 1; i++) {\n\t\t\t\t\td = points[i].distance(points[i + 1]);\n\t\t\t\t\tif (p <= d) {\n\t\t\t\t\t\t// we've located the line segment.\n\t\t\t\t\t\tpoint = points[i].clone();\n\t\t\t\t\t\tdir = point.getDirection(points[i + 1]);\n\t\t\t\t\t\tpoint.translate(dir.getScaled(p));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tp -= d;\n\t\t\t\t}\n\t\n\t\t\t\t// return the last point.\n\t\t\t\tif (!point) point = points[points.length - 1];\n\t\t\t\treturn _Utils2.default.offsetPosition([point.x, point.y], geometry);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Link';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"points\",\n\t\t\tget: function get() {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"controlPts\",\n\t\t\tget: function get() {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"length\",\n\t\t\tget: function get() {\n\t\t\t\tvar points = this.points;\n\t\t\t\tvar i = void 0,\n\t\t\t\t    l = 0;\n\t\t\t\tfor (i = 0; i < points.length - 1; i++) {\n\t\t\t\t\tl += points[i].distance(points[i + 1]);\n\t\t\t\t}return l;\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"getLink\",\n\t\t\tvalue: function getLink(terminalVisual) {\n\t\t\t\tvar shapeConfig = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\t\t\tvar startMarker = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\t\t\t\tvar endMarker = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];\n\t\n\t\t\t\tshapeConfig = _lodash2.default.defaultsDeep(shapeConfig, defaultConfig);\n\t\t\t\tvar linkClass = linkTypes[shapeConfig.type];\n\t\t\t\tif (linkClass) return new linkClass(terminalVisual, shapeConfig, startMarker, endMarker);\n\t\t\t\tconsole.log('link type not supported: ' + shapeConfig.type);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Link;\n\t}();\n\t\n\tvar DirectLink = function (_Link) {\n\t\t_inherits(DirectLink, _Link);\n\t\n\t\tfunction DirectLink() {\n\t\t\t_classCallCheck(this, DirectLink);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(DirectLink).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(DirectLink, [{\n\t\t\tkey: \"points\",\n\t\t\tget: function get() {\n\t\t\t\treturn [this.start, this.end];\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn DirectLink;\n\t}(Link);\n\t\n\tvar BezierLink = function (_Link2) {\n\t\t_inherits(BezierLink, _Link2);\n\t\n\t\tfunction BezierLink() {\n\t\t\t_classCallCheck(this, BezierLink);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(BezierLink).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(BezierLink, [{\n\t\t\tkey: \"getRelativePosition\",\n\t\t\tvalue: function getRelativePosition(geometry) {\n\t\t\t\tif (_lodash2.default.isNumber(geometry)) geometry = { x: geometry };\n\t\t\t\tgeometry = _lodash2.default.defaults(geometry, defaultGeometry);\n\t\t\t\tvar p = geometry.x,\n\t\t\t\t    l = this.length;\n\t\t\t\tif (Math.abs(p) > 1) p /= l;\n\t\t\t\tif (p < 0) p++;\n\t\t\t\tif (p > 1) p--;\n\t\n\t\t\t\tvar pts = this.points;\n\t\t\t\tvar ctrlpts = this.controlPts;\n\t\t\t\tvar p1 = pts[0];\n\t\t\t\tvar p2 = ctrlpts[1][0];\n\t\t\t\tvar p3 = ctrlpts[1][1];\n\t\t\t\tvar p4 = pts[1];\n\t\n\t\t\t\tvar point = [(1 - p) * (1 - p) * (1 - p) * p1.x + 3 * p * (1 - p) * (1 - p) * p2.x + 3 * p * p * (1 - p) * p3.x + p * p * p * p4.x, (1 - p) * (1 - p) * (1 - p) * p1.y + 3 * p * (1 - p) * (1 - p) * p2.y + 3 * p * p * (1 - p) * p3.y + p * p * p * p4.y];\n\t\t\t\treturn _Utils2.default.offsetPosition([point.x, point.y], geometry);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"points\",\n\t\t\tget: function get() {\n\t\t\t\treturn [this.start, this.end];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"controlPts\",\n\t\t\tget: function get() {\n\t\t\t\tvar s = this.points[0],\n\t\t\t\t    e = this.points[1];\n\t\t\t\tvar pts = [];\n\t\t\t\tpts[0] = null;\n\t\t\t\tpts[1] = [];\n\t\t\t\tif (this.startNormal.x == 0) {\n\t\t\t\t\tpts[1][0] = new _Point2.default(s.x, (s.y + e.y) / 2);\n\t\t\t\t} else {\n\t\t\t\t\tpts[1][0] = new _Point2.default((s.x + e.x) / 2, s.y);\n\t\t\t\t}\n\t\t\t\tif (this.endNormal.x == 0) {\n\t\t\t\t\tpts[1][1] = new _Point2.default(e.x, (s.y + e.y) / 2);\n\t\t\t\t} else {\n\t\t\t\t\tpts[1][1] = new _Point2.default((s.x + e.x) / 2, e.y);\n\t\t\t\t}\n\t\t\t\treturn pts;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn BezierLink;\n\t}(Link);\n\t\n\tvar EntityRelations = function (_Link3) {\n\t\t_inherits(EntityRelations, _Link3);\n\t\n\t\tfunction EntityRelations() {\n\t\t\t_classCallCheck(this, EntityRelations);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(EntityRelations).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(EntityRelations, [{\n\t\t\tkey: \"points\",\n\t\t\tget: function get() {\n\t\t\t\tvar source = Port.getBounds(edge, true);\n\t\t\t\tvar target = Port.getBounds(edge, false);\n\t\t\t\tvar isSourceLeft = target.right() < source.x;\n\t\t\t\tvar isTargetLeft = source.right() < target.x;\n\t\t\t\tvar result = [];\n\t\n\t\t\t\tvar x0 = isSourceLeft ? source.x : source.x + source.width;\n\t\t\t\tvar y0 = source.getCenterY();\n\t\t\t\tresult.push(new _Point2.default(x0, y0));\n\t\n\t\t\t\tvar xe = isTargetLeft ? target.x : target.x + target.width;\n\t\t\t\tvar ye = target.getCenterY();\n\t\n\t\t\t\tvar seg = this.segment;\n\t\n\t\t\t\tvar dx = isSourceLeft ? -seg : seg;\n\t\t\t\tvar dep = new _Point2.default(x0 + dx, y0);\n\t\n\t\t\t\tdx = isTargetLeft ? -seg : seg;\n\t\t\t\tvar arr = new _Point2.default(xe + dx, ye);\n\t\n\t\t\t\t// Adds intermediate points if both go out on same side\n\t\t\t\tif (isSourceLeft == isTargetLeft) {\n\t\t\t\t\tvar x = isSourceLeft ? Math.min(x0, xe) - seg : Math.max(x0, xe) + seg;\n\t\n\t\t\t\t\tresult.push(new _Point2.default(x, y0));\n\t\t\t\t\tresult.push(new _Point2.default(x, ye));\n\t\t\t\t} else if (dep.x < arr.x == isSourceLeft) {\n\t\t\t\t\tvar midY = y0 + (ye - y0) / 2;\n\t\n\t\t\t\t\tresult.push(dep);\n\t\t\t\t\tresult.push(new _Point2.default(dep.x, midY));\n\t\t\t\t\tresult.push(new _Point2.default(arr.x, midY));\n\t\t\t\t\tresult.push(arr);\n\t\t\t\t} else {\n\t\t\t\t\tresult.push(dep);\n\t\t\t\t\tresult.push(arr);\n\t\t\t\t}\n\t\n\t\t\t\tresult.push(new _Point2.default(xe, ye));\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn EntityRelations;\n\t}(Link);\n\t\n\tvar Manhattan = function (_Link4) {\n\t\t_inherits(Manhattan, _Link4);\n\t\n\t\tfunction Manhattan(terminalVisual, shapeConfig, startMarker, endMarker) {\n\t\t\t_classCallCheck(this, Manhattan);\n\t\n\t\t\tshapeConfig = _lodash2.default.defaults(shapeConfig, {\n\t\t\t\tMIN_BUFFER: 10,\n\t\t\t\tautoRoute: false,\n\t\t\t\tmaxChannelWidth: 100\n\t\t\t});\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(Manhattan).call(this, terminalVisual, shapeConfig, startMarker, endMarker));\n\t\t}\n\t\n\t\t_createClass(Manhattan, [{\n\t\t\tkey: \"autoRoute\",\n\t\n\t\n\t\t\t/**\r\n\t   * Automatically route the connection to avoid intersections with other vertices.\r\n\t   */\n\t\t\tvalue: function autoRoute(pts, container, boxes, startBox, endBox) {\n\t\t\t\tvar side, side2, d, box, intersect, j;\n\t\t\t\tvar channel, channel2, pt, dir;\n\t\n\t\t\t\tvar startPadding = 0,\n\t\t\t\t    endPadding;\n\t\t\t\t// first get the start and end channel\n\t\t\t\tbox = boxes[endBox];\n\t\t\t\tpt = pts[pts.length - 2];\n\t\t\t\tif (pt.y < box.y) side = 1;else if (pt.y > box.y + box.height) side = 3;else if (pt.x < box.x) side = 0;else side = 2;\n\t\t\t\tchannel = _getChannel(container, endBox, boxes, side);\n\t\t\t\tendPadding = channel.horizontal ? (channel.right - channel.left) / 2 : (channel.bottom - channel.top) / 2;\n\t\n\t\t\t\tfor (var i = 0; i < pts.length - 1; i++) {\n\t\t\t\t\tif (pts[i + 1].x == pts[i].x && pts[i + 1].y == pts[i].y) continue;\n\t\t\t\t\tintersect = _getFirstIntersection(pts, i, boxes, startBox, endBox);\n\t\t\t\t\tif (!intersect) continue;\n\t\t\t\t\tj = intersect[0];\n\t\t\t\t\tside = intersect[1];\n\t\t\t\t\tbox = boxes[j];\n\t\t\t\t\tchannel = _getChannel(container, j, boxes, side);\n\t\t\t\t\tswitch (side) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\tpt = new _Point2.default((channel.right + channel.left) / 2, pts[i].y);\n\t\t\t\t\t\t\tdir = _getRouteTendency(pts, i, pt, box, side);\n\t\t\t\t\t\t\tside2 = dir < 0 ? 1 : 3;\n\t\t\t\t\t\t\tchannel2 = _getChannel(container, j, boxes, side2);\n\t\t\t\t\t\t\t// if the previous point is in the channel2, use that point instead of center of the channel.\n\t\t\t\t\t\t\tif (i > 1 && pts[i - 2].y == pts[i - 1].y && pts[i - 1].y > channel2.top && pts[i - 1].y < channel2.bottom) d = pts[i - 1].y - pt.y;else if (i < pts.length - 3 && pts[i + 2].y == pts[i + 3].y && pts[i + 2].y > channel2.top && pts[i + 2].y < channel2.bottom) d = pts[i + 2].y - pt.y;else d = (channel2.bottom + channel2.top) / 2 - pt.y;\n\t\t\t\t\t\t\t// check if we need this pt.\n\t\t\t\t\t\t\tif (side == 0 && pt.x <= pts[i].x || side == 2 && pt.x >= pts[i].x) pt = null;else if (i > 0) {\n\t\t\t\t\t\t\t\t// see if we can push the line out to where we started.\n\t\t\t\t\t\t\t\tif (!_hasIntersection([new _Point2.default(pts[i].x, pts[i].y), new _Point2.default(pts[i].x, pts[i].y + d), new _Point2.default(pt.x, pt.y + d)], boxes)) pt = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\tpt = new _Point2.default(pts[i].x, (channel.bottom + channel.top) / 2);\n\t\t\t\t\t\t\tdir = _getRouteTendency(pts, i, pt, box, side);\n\t\t\t\t\t\t\tside2 = dir < 0 ? 0 : 2;\n\t\t\t\t\t\t\tchannel2 = _getChannel(container, j, boxes, side2);\n\t\t\t\t\t\t\t// if the previous point is in the channel2, use that point instead of center of the channel.\n\t\t\t\t\t\t\tif (i > 1 && pts[i - 2].x == pts[i - 1].x && pts[i - 1].x > channel2.left && pts[i - 1].x < channel2.right) d = pts[i - 1].x - pt.x;else if (i < pts.length - 3 && pts[i + 2].x == pts[i + 3].x && pts[i + 2].x > channel2.left && pts[i + 2].x < channel2.right) d = pts[i + 2].x - pt.x;else d = (channel2.right + channel2.left) / 2 - pt.x;\n\t\t\t\t\t\t\t// check if we need this pt.\n\t\t\t\t\t\t\tif (side == 1 && pt.y <= pts[i].y || side == 3 && pt.y >= pts[i].y) pt = null;else if (i > 0) {\n\t\t\t\t\t\t\t\t// see if we can push the line out to where we started.\n\t\t\t\t\t\t\t\tif (!_hasIntersection([new _Point2.default(pts[i].x, pts[i].y), new _Point2.default(pts[i].x + d, pts[i].y), new _Point2.default(pt.x + d, pt.y)], boxes)) pt = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t// max points.\n\t\t\t\t\tif (i > 20) return;\n\t\t\t\t\tif (pt && (pt.x != pts[i].x || pt.y != pts[i].y)) {\n\t\t\t\t\t\tpts.splice(i + 1, 0, pt);\n\t\t\t\t\t\t_moveSegment(pts, i + 1, d, startPadding, endPadding);\n\t\t\t\t\t\ti++;\n\t\t\t\t\t} else _moveSegment(pts, i, d, startPadding, endPadding);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_hasIntersection\",\n\t\t\tvalue: function _hasIntersection(pts, boxes) {\n\t\t\t\tfor (var i = 0; i < pts.length - 1; i++) {\n\t\t\t\t\tfor (var j = 0; j < boxes.length; j++) {\n\t\t\t\t\t\tif (boxes[j].detectIntersection(pts[i], pts[i + 1]) >= 0) return true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_getFirstIntersection\",\n\t\t\tvalue: function _getFirstIntersection(pts, i, boxes, startBox, endBox) {\n\t\t\t\tvar box,\n\t\t\t\t    side,\n\t\t\t\t    savedIndex = null,\n\t\t\t\t    savedSide = null;\n\t\t\t\tfor (var j = 0; j < boxes.length; j++) {\n\t\t\t\t\tif (i == 0 && j == startBox || i == pts.length - 2 && j == endBox) continue;\n\t\t\t\t\tbox = boxes[j];\n\t\t\t\t\tside = box.detectIntersection(pts[i], pts[i + 1]);\n\t\t\t\t\tif (side >= 0) {\n\t\t\t\t\t\tif (savedIndex == null) {\n\t\t\t\t\t\t\tsavedIndex = j;\n\t\t\t\t\t\t\tsavedSide = side;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (boxes[savedIndex].distance(pts[i]) > box.distance(pts[i])) {\n\t\t\t\t\t\t\t\tsavedIndex = j;\n\t\t\t\t\t\t\t\tsavedSide = side;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (savedIndex != null) return [savedIndex, savedSide];\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_getRouteTendency\",\n\t\t\tvalue: function _getRouteTendency(pts, i, breakPt, box, side) {\n\t\t\t\tvar dir;\n\t\t\t\tvar p;\n\t\t\t\tswitch (side) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tp = \"y\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tp = \"x\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t//first try the breakpt.\n\t\t\t\tdir = _getRouteDirection(breakPt, pts[pts.length - 1])[p];\n\t\t\t\tif (dir == 0) {\n\t\t\t\t\tdir = -_getRouteDirection(pts[0], pts[pts.length - 1])[p];\n\t\t\t\t\tif (dir == 0) {\n\t\t\t\t\t\tif (breakPt[p] < box.getCenter()[p]) dir = -1;else dir = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn dir;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_getRouteDirection\",\n\t\t\tvalue: function _getRouteDirection(pt1, pt2) {\n\t\t\t\tif (pt1.x == pt2.x) {\n\t\t\t\t\tif (pt1.y < pt2.y) return _Point2.default.S;\n\t\t\t\t\treturn _Point2.default.N;\n\t\t\t\t} else if (pt1.y == pt2.y) {\n\t\t\t\t\tif (pt1.x < pt2.x) return _Point2.default.E;\n\t\t\t\t\treturn _Point2.default.W;\n\t\t\t\t} else if (pt1.x < pt2.x) {\n\t\t\t\t\tif (pt1.y < pt2.y) return _Point2.default.SE;\n\t\t\t\t\treturn _Point2.default.NE;\n\t\t\t\t} else {\n\t\t\t\t\tif (pt1.y < pt2.y) return _Point2.default.SW;\n\t\t\t\t\treturn _Point2.default.NW;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_getChannel\",\n\t\t\tvalue: function _getChannel(container, index, boxes, side) {\n\t\t\t\tvar maxChannelWidth = this.maxChannelWidth;\n\t\t\t\tvar box1 = boxes[index],\n\t\t\t\t    box2;\n\t\t\t\tvar pt, i;\n\t\t\t\tvar channel = {},\n\t\t\t\t    l,\n\t\t\t\t    t,\n\t\t\t\t    b,\n\t\t\t\t    r;\n\t\t\t\tswitch (side) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tpt = box1.getLeft();\n\t\t\t\t\t\tchannel.right = pt.x;\n\t\t\t\t\t\tchannel.horizontal = false;\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tr = boxes[i].getRight().x;\n\t\t\t\t\t\t\tif (r >= pt.x) continue;\n\t\t\t\t\t\t\tif (!channel.left || channel.left < r) channel.left = r;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.left) {\n\t\t\t\t\t\t\tchannel.left = container.getLeft().x;\n\t\t\t\t\t\t\tif (channel.right - channel.left > maxChannelWidth) channel.left = channel.right - maxChannelWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tbox2 = boxes[i];\n\t\t\t\t\t\t\tb = box2.getBottom().y;\n\t\t\t\t\t\t\tt = box2.getTop().y;\n\t\t\t\t\t\t\tif (b < pt.y && box2.getRight() > channel.left && box2.getLeft() < channel.right) {\n\t\t\t\t\t\t\t\tif (!channel.top || channel.top < b) channel.top = b;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (t > pt.y && box2.getRight() > channel.left && box2.getLeft() < channel.right) {\n\t\t\t\t\t\t\t\tif (!channel.bottom || channel.bottom > t) channel.bottom = t;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.top) channel.top = container.getTop().y;\n\t\t\t\t\t\tif (!channel.bottom) channel.bottom = container.getBottom().y;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tpt = box1.getTop();\n\t\t\t\t\t\tchannel.horizontal = true;\n\t\t\t\t\t\tchannel.bottom = pt.y;\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tb = boxes[i].getBottom().y;\n\t\t\t\t\t\t\tif (b >= pt.y) continue;\n\t\t\t\t\t\t\tif (!channel.top || channel.top < b) channel.top = b;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.top) {\n\t\t\t\t\t\t\tchannel.top = container.getTop().y;\n\t\t\t\t\t\t\tif (channel.bottom - channel.top > maxChannelWidth) channel.top = channel.bottom - maxChannelWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tbox2 = boxes[i];\n\t\t\t\t\t\t\tl = box2.getLeft().x;\n\t\t\t\t\t\t\tr = box2.getRight().x;\n\t\t\t\t\t\t\tif (r < pt.x && box2.getBottom() > channel.top && box2.getTop() < channel.bottom) {\n\t\t\t\t\t\t\t\tif (!channel.left || channel.left < r) channel.left = r;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (l > pt.x && box2.getBottom() > channel.top && box2.getTop() < channel.bottom) {\n\t\t\t\t\t\t\t\tif (!channel.right || channel.right > l) channel.right = l;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.left) channel.left = container.getLeft().x;\n\t\t\t\t\t\tif (!channel.right) channel.right = container.getRight().x;\n\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tpt = box1.getRight();\n\t\t\t\t\t\tchannel.horizontal = false;\n\t\t\t\t\t\tchannel.left = pt.x;\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tl = boxes[i].getLeft().x;\n\t\t\t\t\t\t\tif (l <= pt.x) continue;\n\t\t\t\t\t\t\tif (!channel.right || channel.right > l) channel.right = l;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.right) {\n\t\t\t\t\t\t\tchannel.right = container.getRight().x;\n\t\t\t\t\t\t\tif (channel.right - channel.left > maxChannelWidth) channel.right = channel.left + maxChannelWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tbox2 = boxes[i];\n\t\t\t\t\t\t\tb = box2.getBottom().y;\n\t\t\t\t\t\t\tt = box2.getTop().y;\n\t\t\t\t\t\t\tif (b < pt.y && box2.getRight() > channel.left && box2.getLeft() < channel.right) {\n\t\t\t\t\t\t\t\tif (!channel.top || channel.top < b) channel.top = b;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (t > pt.y && box2.getRight() > channel.left && box2.getLeft() < channel.right) {\n\t\t\t\t\t\t\t\tif (!channel.bottom || channel.bottom > t) channel.bottom = t;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.top) channel.top = container.getTop().y;\n\t\t\t\t\t\tif (!channel.bottom) channel.bottom = container.getBottom().y;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tpt = box1.getBottom();\n\t\t\t\t\t\tchannel.horizontal = true;\n\t\t\t\t\t\tchannel.top = pt.y;\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tbox2 = boxes[i];\n\t\t\t\t\t\t\tif (box2.getTop().y <= pt.y) continue;\n\t\t\t\t\t\t\tif (!channel.bottom || channel.bottom > box2.getTop().y) channel.bottom = box2.getTop().y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.bottom) {\n\t\t\t\t\t\t\tchannel.bottom = container.getBottom().y;\n\t\t\t\t\t\t\tif (channel.bottom - channel.top > maxChannelWidth) channel.bottom = channel.top + maxChannelWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (i = 0; i < boxes.length; i++) {\n\t\t\t\t\t\t\tif (i == index) continue;\n\t\t\t\t\t\t\tbox2 = boxes[i];\n\t\t\t\t\t\t\tl = box2.getLeft().x;\n\t\t\t\t\t\t\tr = box2.getRight().x;\n\t\t\t\t\t\t\tif (r < pt.x && box2.getBottom() > channel.top && box2.getTop() < channel.bottom) {\n\t\t\t\t\t\t\t\tif (!channel.left || channel.left < r) channel.left = r;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (l > pt.x && box2.getBottom() > channel.top && box2.getTop() < channel.bottom) {\n\t\t\t\t\t\t\t\tif (!channel.right || channel.right > l) channel.right = l;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!channel.left) channel.left = container.getLeft().x;\n\t\t\t\t\t\tif (!channel.right) channel.right = container.getRight().x;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\treturn channel;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Move a line segment by a specified distance.\r\n\t   *\r\n\t   * @param pts the list of points.\r\n\t   * @param i the index of the segment.\r\n\t   * @param d the distance to move.\r\n\t   * @param startPadding\r\n\t   * @param endPadding\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"_moveSegment\",\n\t\t\tvalue: function (_moveSegment2) {\n\t\t\t\tfunction _moveSegment(_x7, _x8, _x9, _x10, _x11) {\n\t\t\t\t\treturn _moveSegment2.apply(this, arguments);\n\t\t\t\t}\n\t\n\t\t\t\t_moveSegment.toString = function () {\n\t\t\t\t\treturn _moveSegment2.toString();\n\t\t\t\t};\n\t\n\t\t\t\treturn _moveSegment;\n\t\t\t}(function (pts, i, d, startPadding, endPadding) {\n\t\t\t\t// first check if we need to add new line segments.\n\t\t\t\tvar dir, l, pt;\n\t\t\t\tif (i == 0) {\n\t\t\t\t\t// we need to break off the segment, since we can't change the starting point.\n\t\t\t\t\tdir = pts[0].getDirection(pts[1]);\n\t\t\t\t\tif (!startPadding) startPadding = this.MIN_BUFFER;\n\t\t\t\t\tl = Math.min(startPadding, pts[0].distance(pts[1]) / 2);\n\t\t\t\t\tpt = pts[0].getTranslated(dir.scale(l));\n\t\t\t\t\tpts.splice(1, 0, pt);\n\t\t\t\t\t_moveSegment(pts, i + 1, d);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (i == pts.length - 2) {\n\t\t\t\t\t// we need to break off the segment, since we can't change the end point.\n\t\t\t\t\tdir = pts[pts.length - 1].getDirection(pts[pts.length - 2]);\n\t\t\t\t\tif (!endPadding) endPadding = this.MIN_BUFFER;\n\t\t\t\t\tl = Math.min(endPadding, pts[pts.length - 1].distance(pts[pts.length - 2]) / 2);\n\t\t\t\t\tpt = pts[pts.length - 1].getTranslated(dir.scale(l));\n\t\t\t\t\tpts.splice(pts.length - 1, 0, pt);\n\t\t\t\t\t_moveSegment(pts, i, d);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tif (pts[i].y == pts[i + 1].y) {\n\t\t\t\t\tif (i > 0 && pts[i - 1].y == pts[i].y) {\n\t\t\t\t\t\tpts.splice(i + 1, 0, pts[i].clone());\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\t\t\t\t\tif (i < pts.length - 2 && pts[i + 1].y == pts[i + 2].y) pts.splice(i + 1, 0, pts[i + 1].clone());\n\t\t\t\t\tpts[i].y += d;\n\t\t\t\t\tpts[i + 1].y += d;\n\t\t\t\t} else {\n\t\t\t\t\tif (i > 0 && pts[i - 1].x == pts[i].x) {\n\t\t\t\t\t\tpts.splice(i + 1, 0, pts[i].clone());\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\t\t\t\t\tif (i < pts.length - 2 && pts[i + 1].x == pts[i + 2].x) pts.splice(i + 1, 0, pts[i + 1].clone());\n\t\t\t\t\tpts[i].x += d;\n\t\t\t\t\tpts[i + 1].x += d;\n\t\t\t\t}\n\t\t\t})\n\t\n\t\t\t/**\r\n\t   * This method will merge the redundant segments.\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"_mergeSegments\",\n\t\t\tvalue: function _mergeSegments(pts) {\n\t\t\t\tvar h1 = pts[pts.length - 1].y == pts[pts.length - 2].y;\n\t\t\t\tvar h2;\n\t\t\t\tfor (var i = pts.length - 2; i >= 1; i--) {\n\t\t\t\t\th2 = pts[i].y == pts[i - 1].y;\n\t\t\t\t\tif (h2 == h1 || pts[i].equals(pts[i - 1])) pts.splice(i, 1);else h1 = !h1;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"points\",\n\t\t\tget: function get() {\n\t\t\t\t//let pos = Manhattan.routeInternal(this.start, this.end, this.startNormal, this.endNormal, this.MIN_BUFFER);\n\t\t\t\t//pos = Manhattan.processPositions(this.start, this.end, pos, this.startNormal.x!=0);\n\t\t\t\tvar pos = Manhattan.findPositions(this.start, this.end, this.startNormal, this.endNormal, this.MIN_BUFFER);\n\t\t\t\tif (this.autoRoute) {\n\t\t\t\t\tthis._mergeSegments(pos);\n\t\t\t\t\tvar boxes = [],\n\t\t\t\t\t    node,\n\t\t\t\t\t    startBox,\n\t\t\t\t\t    endBox;\n\t\t\t\t\tvar container = edge.source.getCommonAncestor(edge.target);\n\t\t\t\t\tvar childNodes = container.getDescendants();\n\t\t\t\t\tvar index = 0;\n\t\t\t\t\tfor (var i = 0; i < childNodes.length; i++) {\n\t\t\t\t\t\tnode = childNodes[i];\n\t\t\t\t\t\t// Do not include source or target ancestors in routing.\n\t\t\t\t\t\tif (node.excludeFromRouting(edge) || node.isAncestor(edge.source) || node.isAncestor(edge.target)) continue;\n\t\t\t\t\t\tif (node == edge.source) startBox = index;\n\t\t\t\t\t\tif (node == edge.target) endBox = index;\n\t\t\t\t\t\tboxes.push(node.getBounds(document));\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\t\t\t\t\tif (boxes.length > 1) this.autoRoute(pos, container.getBounds(document), boxes, startBox, endBox);\n\t\t\t\t}\n\t\t\t\tthis._mergeSegments(pos);\n\t\t\t\treturn pos;\n\t\t\t}\n\t\n\t\t\t//New function for finding route\n\t\n\t\t}], [{\n\t\t\tkey: \"findPositions\",\n\t\t\tvalue: function findPositions(start, end, startNormal, endNormal, buffer) {\n\t\t\t\tvar startBuffer = new _Point2.default(start.x + startNormal.x * buffer, start.y + startNormal.y * buffer);\n\t\t\t\tvar endBuffer = new _Point2.default(end.x + endNormal.x * buffer, end.y + endNormal.y * buffer);\n\t\t\t\tvar startBufferNormal, endBufferNormal;\n\t\t\t\tvar pts;\n\t\t\t\tif (startNormal.x != 0) {\n\t\t\t\t\tif ((endBuffer.x - startBuffer.x) / startNormal.x > 0) {\n\t\t\t\t\t\tstartBufferNormal = startNormal;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstartBufferNormal = new _Point2.default(0, endBuffer.y >= startBuffer.y ? 1 : -1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ((endBuffer.y - startBuffer.y) / startNormal.y > 0) {\n\t\t\t\t\t\tstartBufferNormal = startNormal;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstartBufferNormal = new _Point2.default(endBuffer.x >= startBuffer.x ? 1 : -1, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (endNormal.x != 0) {\n\t\t\t\t\tif ((startBuffer.x - endBuffer.x) / endNormal.x > 0) {\n\t\t\t\t\t\tendBufferNormal = endNormal;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tendBufferNormal = new _Point2.default(0, startBuffer.y >= endBuffer.y ? 1 : -1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ((startBuffer.y - endBuffer.y) / endNormal.y > 0) {\n\t\t\t\t\t\tendBufferNormal = endNormal;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tendBufferNormal = new _Point2.default(startBuffer.x >= endBuffer.x ? 1 : -1, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (startBufferNormal.dotProduct(endBufferNormal) == 0) {\n\t\t\t\t\tvar middle = startBufferNormal.x == 0 ? new _Point2.default(startBuffer.x, endBuffer.y) : new _Point2.default(endBuffer.x, startBuffer.y);\n\t\t\t\t\tpts = [start, startBuffer, middle, endBuffer, end];\n\t\t\t\t} else if (startBufferNormal.dotProduct(endBufferNormal) < 0) {\n\t\t\t\t\tif (startBufferNormal.x == 0) {\n\t\t\t\t\t\tpts = [start, startBuffer, new _Point2.default(startBuffer.x, (start.y + end.y) / 2), new _Point2.default(endBuffer.x, (start.y + end.y) / 2), endBuffer, end];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpts = [start, startBuffer, new _Point2.default((start.x + end.x) / 2, startBuffer.y), new _Point2.default((start.x + end.x) / 2, endBuffer.y), endBuffer, end];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpts = [start, startBuffer, new _Point2.default(startBuffer.x + startBufferNormal.x * buffer, startBuffer.y + startBufferNormal.y * buffer), new _Point2.default(endBuffer.x + endBufferNormal.x * buffer, endBuffer.y + endBufferNormal.y * buffer), endBuffer, end];\n\t\t\t\t}\n\t\n\t\t\t\tvar prunePts = [];\n\t\t\t\tprunePts[0] = pts[0];\n\t\t\t\tfor (var i = 1; i < pts.length - 1; i++) {\n\t\t\t\t\tif (pts[i].x == pts[i - 1].x && pts[i].x == pts[i + 1].x || pts[i].y == pts[i - 1].y && pts[i].y == pts[i + 1].y) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tprunePts.push(pts[i]);\n\t\t\t\t}\n\t\t\t\tprunePts.push(pts[pts.length - 1]);\n\t\t\t\treturn prunePts;\n\t\t\t}\n\t\n\t\t\t/**\r\n\t   * Make a route based on the start, end and startNormal and endNormal\r\n\t   * None of the parameters can be null\r\n\t   * TODO: This method could use some improvement...\r\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"routeInternal\",\n\t\t\tvalue: function routeInternal(start, end, startNormal, endNormal, buffer) {\n\t\t\t\tvar direction = start.getDirection(end);\n\t\t\t\tvar average = start.getMidPoint(end);\n\t\t\t\tvar pos = [];\n\t\t\t\tvar startPositive = new _Point2.default(startNormal.x * startNormal.x, startNormal.y * startNormal.y);\n\t\t\t\tvar endPositive = new _Point2.default(endNormal.x * endNormal.x, endNormal.y * endNormal.y);\n\t\t\t\tvar horizontal = startNormal.x != 0;\n\t\t\t\tpos[0] = horizontal ? start.y : start.x;\n\t\n\t\t\t\thorizontal = !horizontal;\n\t\t\t\tvar i;\n\t\t\t\tif (startNormal.dotProduct(endNormal) == 0) {\n\t\t\t\t\tif (startNormal.dotProduct(direction) >= 0 && endNormal.dotProduct(direction) <= 0) {\n\t\t\t\t\t\t// 0\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 2\n\t\t\t\t\t\tif (startNormal.dotProduct(direction) < 0) i = startPositive.dotProduct(start.getTranslated(startNormal.getScaled(buffer)));else i = horizontal ? average.y : average.x;\n\t\n\t\t\t\t\t\tpos.push(i);\n\t\t\t\t\t\thorizontal = !horizontal;\n\t\n\t\t\t\t\t\tif (endNormal.dotProduct(direction) > 0) i = endPositive.dotProduct(end.getTranslated(endNormal.getScaled(buffer)));else i = horizontal ? average.y : average.x;\n\t\n\t\t\t\t\t\tpos.push(i);\n\t\t\t\t\t\thorizontal = !horizontal;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (startNormal.dotProduct(endNormal) > 0) {\n\t\t\t\t\t\t//1\n\t\t\t\t\t\tif (startNormal.dotProduct(direction) >= 0) i = startPositive.dotProduct(start.getTranslated(startNormal.getScaled(buffer)));else i = endPositive.dotProduct(end.getTranslated(endNormal.getScaled(buffer)));\n\t\t\t\t\t\tpos.push(i);\n\t\t\t\t\t\thorizontal = !horizontal;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//3 or 1\n\t\t\t\t\t\tif (startNormal.dotProduct(direction) < 0) {\n\t\t\t\t\t\t\ti = startPositive.dotProduct(start.getTranslated(startNormal.getScaled(buffer)));\n\t\t\t\t\t\t\tpos.push(i);\n\t\t\t\t\t\t\thorizontal = !horizontal;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\ti = horizontal ? average.y : average.x;\n\t\t\t\t\t\tpos.push(i);\n\t\t\t\t\t\thorizontal = !horizontal;\n\t\n\t\t\t\t\t\tif (startNormal.dotProduct(direction) < 0) {\n\t\t\t\t\t\t\ti = endPositive.dotProduct(end.getTranslated(endNormal.getScaled(buffer)));\n\t\t\t\t\t\t\tpos.push(i);\n\t\t\t\t\t\t\thorizontal = !horizontal;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpos.push(horizontal ? end.y : end.x);\n\t\n\t\t\t\treturn pos;\n\t\t\t}\n\t\n\t\t\t// Process the positions.\n\t\n\t\t}, {\n\t\t\tkey: \"processPositions\",\n\t\t\tvalue: function processPositions(start, end, positions, horizontal) {\n\t\t\t\tvar pos = [];\n\t\t\t\tpos[0] = horizontal ? start.x : start.y;\n\t\t\t\tvar i;\n\t\t\t\tfor (i = 0; i < positions.length; i++) {\n\t\t\t\t\tpos[i + 1] = positions[i];\n\t\t\t\t}\n\t\t\t\tpos.push(horizontal == (positions.length % 2 == 1) ? end.x : end.y);\n\t\n\t\t\t\tvar pts = [];\n\t\t\t\tpts[0] = start;\n\t\t\t\tvar p;\n\t\t\t\tvar current, prev;\n\t\t\t\tfor (i = 2; i < pos.length - 1; i++) {\n\t\t\t\t\thorizontal = !horizontal;\n\t\t\t\t\tprev = pos[i - 1];\n\t\t\t\t\tcurrent = pos[i];\n\t\t\t\t\tp = horizontal ? new _Point2.default(prev, current) : new _Point2.default(current, prev);\n\t\t\t\t\tpts.push(p);\n\t\t\t\t}\n\t\t\t\tpts.push(end);\n\t\t\t\treturn pts;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Manhattan;\n\t}(Link);\n\t\n\tlinkTypes['direct'] = DirectLink;\n\tlinkTypes['bezier'] = BezierLink;\n\tlinkTypes['entityRelations'] = EntityRelations;\n\tlinkTypes['manhattan'] = Manhattan;\n\t\n\texports.default = Link;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _bean = __webpack_require__(1);\n\t\n\tvar _bean2 = _interopRequireDefault(_bean);\n\t\n\tvar _KeyUtils = __webpack_require__(14);\n\t\n\tvar KeyUtils = _interopRequireWildcard(_KeyUtils);\n\t\n\tvar _DomUtils = __webpack_require__(8);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _StringBuffer = __webpack_require__(9);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar DEFAULTS = {\n\t\tstopPropagation: false\n\t};\n\t\n\tvar EventDispatcher = function () {\n\t\t/**\n\t  * Constructor\n\t  * @param root the root element that the manager will listen to.\n\t  * @param zoomScale\n\t  */\n\t\n\t\tfunction EventDispatcher(root) {\n\t\t\tvar zoomScale = arguments.length <= 1 || arguments[1] === undefined ? [0, Infinity] : arguments[1];\n\t\t\tvar config = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\t\n\t\t\t_classCallCheck(this, EventDispatcher);\n\t\n\t\t\tthis.root = root;\n\t\t\tthis.rootNS = root.getAttribute('ns') || 'root';\n\t\t\tthis.zoomScale = zoomScale;\n\t\t\t_lodash2.default.assign(this, DEFAULTS, config);\n\t\t\tthis.scale = 1.0;\n\t\t\tthis.listeners = {};\n\t\t\tthis.dragging = false;\n\t\t\tthis.handler = _lodash2.default.bind(this.handleEvent, this);\n\t\t\tthis.started = false;\n\t\n\t\t\t// Simulate mouseenter/mouseleave events\n\t\t\tthis.enterStack = [];\n\t\t}\n\t\n\t\t/**\n\t  * Start listening for events.\n\t  */\n\t\n\t\n\t\t_createClass(EventDispatcher, [{\n\t\t\tkey: \"start\",\n\t\t\tvalue: function start() {\n\t\t\t\tif (this.started) return;\n\t\t\t\t_bean2.default.on(this.root, 'mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel', this.handler);\n\t\t\t\tthis.startKeys();\n\t\t\t\tthis.started = true;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Stop listening for events.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"stop\",\n\t\t\tvalue: function stop() {\n\t\t\t\tif (!this.started) return;\n\t\t\t\t_bean2.default.off(this.root, 'mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel', this.handler);\n\t\t\t\tthis.stopKeys();\n\t\t\t\tthis.started = false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"startKeys\",\n\t\t\tvalue: function startKeys() {\n\t\t\t\t_bean2.default.on(document, 'keydown keyup', this.handler);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"stopKeys\",\n\t\t\tvalue: function stopKeys() {\n\t\t\t\t_bean2.default.off(document, 'keydown keyup', this.handler);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getEventInfo\",\n\t\t\tvalue: function getEventInfo(event) {\n\t\t\t\tvar target = event.target;\n\t\t\t\tvar buf = new _StringBuffer2.default(),\n\t\t\t\t    ns = void 0,\n\t\t\t\t    stack = [],\n\t\t\t\t    isRoot = false;\n\t\t\t\twhile (!isRoot && target && target != document) {\n\t\t\t\t\tns = target.getAttribute('ns');\n\t\t\t\t\tif (ns) {\n\t\t\t\t\t\tisRoot = _lodash2.default.startsWith(ns, \"root.\");\n\t\t\t\t\t\tif (isRoot) {\n\t\t\t\t\t\t\tns = ns.substring(5);\n\t\t\t\t\t\t\tevent.rootTarget = target;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!event.nsTarget) event.nsTarget = target;\n\t\t\t\t\t\tstack.splice(0, 0, target);\n\t\t\t\t\t\tbuf.prepend(ns);\n\t\t\t\t\t}\n\t\t\t\t\ttarget = target.parentNode;\n\t\t\t\t}\n\t\t\t\tif (!isRoot) event.rootTarget = event.nsTarget;\n\t\n\t\t\t\t// target stack is a stack of all the ns targets up to the one with the data binding.\n\t\t\t\tevent.targetStack = stack;\n\t\t\t\tns = buf.toString('.');\n\t\t\t\tif (ns == '') ns = this.rootNS;\n\t\t\t\treturn { data: event.rootTarget, ns: ns };\n\t\t\t}\n\t\n\t\t\t/**\n\t   * The main event handler method, it processes event and generate relevant events to dispatch.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"handleEvent\",\n\t\t\tvalue: function handleEvent(event) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar type = event.type;\n\t\n\t\t\t\t// Do not dispatch other events if we are dragging.\n\t\t\t\tif (this.dragging || _DomUtils2.default.eventFromInput(event)) return;\n\t\n\t\t\t\tvar data = void 0,\n\t\t\t\t    ns = void 0,\n\t\t\t\t    pos = this.getPosition(event),\n\t\t\t\t    info = void 0,\n\t\t\t\t    isKeyEvent = type == 'keydown' || type == 'keyup';\n\t\t\t\tif (isKeyEvent) {\n\t\t\t\t\tdata = this.root;\n\t\t\t\t\tns = KeyUtils.getKeyEvent(event);\n\t\t\t\t} else {\n\t\t\t\t\tinfo = this.getEventInfo(event);\n\t\t\t\t\tif (!info) return;\n\t\t\t\t\tdata = info.data;\n\t\t\t\t\tns = info.ns;\n\t\t\t\t}\n\t\n\t\t\t\t//Utils.log('EventDispatcher', \"handleEvent - \" + type + ';ns=' + ns);\n\t\n\t\t\t\tif (type == 'mousewheel') {\n\t\t\t\t\tthis.scale *= Math.pow(2, event.wheelDelta * 0.002);\n\t\t\t\t\tthis.scale = Math.max(Math.min(this.zoomScale[1], this.scale), this.zoomScale[0]);\n\t\t\t\t\tevent.scale = this.scale;\n\t\t\t\t\ttype = 'zoom';\n\t\t\t\t}\n\t\n\t\t\t\t// See if we should create drag events\n\t\t\t\tif (type == 'mousedown' && event.button == 0 /*only drag on left click*/) {\n\t\t\t\t\t\t(function () {\n\t\t\t\t\t\t\t// Create drag object.\n\t\t\t\t\t\t\tvar dragObject = { data: data, pos: ns == 'root' ? EventDispatcher.mouse(_this.root, event) : pos };\n\t\t\t\t\t\t\t_this.dragging = false;\n\t\t\t\t\t\t\t// Start listening for mouse move.\n\t\t\t\t\t\t\tvar dragPos = void 0;\n\t\n\t\t\t\t\t\t\tvar mousemove = function mousemove(event) {\n\t\t\t\t\t\t\t\tvar currentPos = _this.getPosition(event);\n\t\t\t\t\t\t\t\tif (!_this.dragging) {\n\t\t\t\t\t\t\t\t\t// check if the mouse has moved. IE always fire mousemove after mousedown even if the mouse hasn't moved yet.\n\t\t\t\t\t\t\t\t\tif (dragObject.pos[0] == currentPos[0] && dragObject.pos[1] == currentPos[1]) return;\n\t\n\t\t\t\t\t\t\t\t\t// start dragging\n\t\t\t\t\t\t\t\t\t_this.dragging = true;\n\t\t\t\t\t\t\t\t\tevent.rootTarget = dragObject.data;\n\t\t\t\t\t\t\t\t\t_this.dispatch(event, 'dragstart', ns, dragObject.data, dragObject.pos);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (ns == \"root\") dragPos = EventDispatcher.mouse(_this.root, event);else dragPos = currentPos;\n\t\t\t\t\t\t\t\t_this.getEventInfo(event);\n\t\t\t\t\t\t\t\t_this.dispatch(event, 'drag', ns, dragObject.data, dragPos);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvar mouseup = function mouseup(event) {\n\t\t\t\t\t\t\t\tif (ns == \"root\") dragPos = EventDispatcher.mouse(_this.root, event);else dragPos = _this.getPosition(event);\n\t\n\t\t\t\t\t\t\t\tvar info = _this.getEventInfo(event);\n\t\t\t\t\t\t\t\tif (_this.dragging) {\n\t\t\t\t\t\t\t\t\t_this.dragging = false;\n\t\t\t\t\t\t\t\t\t_this.dispatch(event, 'dragend', ns, dragObject.data, dragPos);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t_this.dispatch(event, 'mouseup', ns, info.data, dragPos);\n\t\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\t\t_bean2.default.off(window, 'mousemove', mousemove);\n\t\t\t\t\t\t\t\t_bean2.default.off(window, 'mouseup', mouseup);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t_bean2.default.on(window, 'mousemove', mousemove);\n\t\t\t\t\t\t\t_bean2.default.on(window, 'mouseup', mouseup);\n\t\t\t\t\t\t})();\n\t\t\t\t\t}\n\t\n\t\t\t\tif (!isKeyEvent) this.simulateEnterLeave(event, type, ns, data, pos);\n\t\t\t\tthis.dispatch(event, type, ns, data, pos);\n\t\n\t\t\t\t// disable the default context menu\n\t\t\t\t//if (type == 'contextmenu')\n\t\t\t\t//\tevent.preventDefault();\n\t\t\t}\n\t\n\t\t\t/**\n\t   * try to simulate mouseenter/mouseleave events.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"simulateEnterLeave\",\n\t\t\tvalue: function simulateEnterLeave(event, type, ns, data, pos) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar last = void 0,\n\t\t\t\t    stack = void 0;\n\t\t\t\tvar clearEnterStack = function clearEnterStack(k) {\n\t\t\t\t\tk = k || 0;\n\t\t\t\t\t// Clear off the enter stack.\n\t\t\t\t\twhile (_this2.enterStack.length >= k + 1) {\n\t\t\t\t\t\tlast = _this2.enterStack.pop();\n\t\t\t\t\t\t_this2.dispatch(event, 'mouseleave', last.ns, last.data, pos);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tvar getNS = function getNS(index) {\n\t\t\t\t\tvar buf = new _StringBuffer2.default();\n\t\t\t\t\tfor (var i = 0; i <= index; i++) {\n\t\t\t\t\t\tvar val = stack[i].getAttribute(\"ns\");\n\t\t\t\t\t\tif (_lodash2.default.startsWith(val, \"root.\")) val = val.substring(5);\n\t\t\t\t\t\tbuf.append(val);\n\t\t\t\t\t}\n\t\t\t\t\treturn buf.toString('.');\n\t\t\t\t};\n\t\n\t\t\t\tif (ns && ns != this.rootNS) {\n\t\t\t\t\tif (type == 'mouseover') {\n\t\t\t\t\t\tstack = event.targetStack;\n\t\t\t\t\t\tvar item = void 0;\n\t\t\t\t\t\tfor (var i = 0; i < stack.length; i++) {\n\t\t\t\t\t\t\tif (i < this.enterStack.length) {\n\t\t\t\t\t\t\t\tif (this.enterStack[i].target != stack[i]) {\n\t\t\t\t\t\t\t\t\tclearEnterStack(i);\n\t\t\t\t\t\t\t\t} else continue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titem = { data: data, ns: getNS(i), target: stack[i] };\n\t\t\t\t\t\t\tthis.enterStack.push(item);\n\t\t\t\t\t\t\tthis.dispatch(event, 'mouseenter', item.ns, data, pos);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (stack.length < this.enterStack.length) clearEnterStack(stack.length);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (ns == this.rootNS && this.enterStack.length > 0) clearEnterStack();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"dispatch\",\n\t\t\tvalue: function dispatch(event, type, ns, data, pos) {\n\t\t\t\t//if (type != 'mouseover' && type != 'mouseout')\n\t\t\t\t//\tUtils.log('EventDispatcher', \"dispatch - \" + type + '.' + ns + ';' + pos + ';rootTarget=' + event.rootTarget + ';data=' + data);\n\t\t\t\tif (!this.started) return;\n\t\t\t\tvar nsType = ns ? type + '.' + ns : type;\n\t\t\t\t_lodash2.default.forEach(this.listeners, function (listeners, key) {\n\t\t\t\t\tif (EventDispatcher.match(nsType, key)) {\n\t\t\t\t\t\t_lodash2.default.forEach(listeners, function (listener) {\n\t\t\t\t\t\t\tif (!listener.context) listener.callback.apply(window, [type, ns, data, pos, event]);else listener.callback.apply(listener.context, [type, ns, data, pos, event]);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\t// after dispatching, do not propagate.\n\t\t\t\tif (this.stopPropagation && event.stopPropagation) event.stopPropagation();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getPosition\",\n\t\t\tvalue: function getPosition(event) {\n\t\t\t\tvar pos = EventDispatcher.mouse(this.root, event);\n\t\t\t\tif (!_lodash2.default.isNaN(pos[0]) && !_lodash2.default.isNaN(pos[1])) this.lastPosition = pos;\n\t\t\t\treturn this.lastPosition;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Registers a key event handler\n\t   * // Key is object {ctrl, alt, shift, meta, code}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"registerKey\",\n\t\t\tvalue: function registerKey(type, key, callback, context) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tif (_lodash2.default.isArray(key)) {\n\t\t\t\t\t_lodash2.default.forEach(key, function (k) {\n\t\t\t\t\t\t_this3.registerKey(type, k, callback, context);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tkey = KeyUtils.getKeyData(key.ctrl, key.alt, key.shift, key.meta, key.code);\n\t\t\t\tif (!key.length) return;\n\t\t\t\tkey = new _StringBuffer2.default(type).append(key).toString('.');\n\t\n\t\t\t\tvar listener = { callback: callback, context: context };\n\t\t\t\tthis.listeners[key] || (this.listeners[key] = []);\n\t\t\t\tthis.listeners[key].push(listener);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"unregisterKey\",\n\t\t\tvalue: function unregisterKey(type, key, callback, context) {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\tif (_lodash2.default.isArray(key)) {\n\t\t\t\t\t_lodash2.default.forEach(key, function (k) {\n\t\t\t\t\t\t_this4.unregisterKey(type, k, callback, context);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tkey = KeyUtils.getKeyData(key.ctrl, key.alt, key.shift, key.meta, key.code);\n\t\t\t\tif (!key.length) return;\n\t\t\t\tkey = new _StringBuffer2.default(type).append(key).toString('.');\n\t\n\t\t\t\tvar listeners = this.listeners[key],\n\t\t\t\t    listener = void 0;\n\t\t\t\tif (!listeners) return;\n\t\t\t\tfor (var i = 0; i < listeners.length; i++) {\n\t\t\t\t\tlistener = listeners[i];\n\t\t\t\t\tif (listener.callback === callback && (!context || context === listener.context)) {\n\t\t\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Registers an event handler\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"register\",\n\t\t\tvalue: function register(type, callback, context, zIndex) {\n\t\t\t\tvar _this5 = this;\n\t\n\t\t\t\tif (_lodash2.default.isArray(type)) {\n\t\t\t\t\t_lodash2.default.forEach(type, function (t) {\n\t\t\t\t\t\t_this5.register(t, callback, context, zIndex);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar listener = { callback: callback, context: context, zIndex: zIndex };\n\t\t\t\tthis.listeners[type] || (this.listeners[type] = []);\n\t\t\t\tthis.listeners[type].push(listener);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"unregister\",\n\t\t\tvalue: function unregister(type, callback, context) {\n\t\t\t\tvar listeners = this.listeners[type],\n\t\t\t\t    listener = void 0;\n\t\t\t\tif (!listeners) return;\n\t\t\t\tfor (var i = 0; i < listeners.length; i++) {\n\t\t\t\t\tlistener = listeners[i];\n\t\t\t\t\tif (listener.callback === callback && (!context || context === listener.context)) {\n\t\t\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\tthis.stop();\n\t\t\t\tdelete this.root;\n\t\t\t\tdelete this.listeners;\n\t\t\t\tdelete this.enterStack;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Check if the registered event type matches the real event type. \"*\" is allowed as a wild card.\n\t   */\n\t\n\t\t}], [{\n\t\t\tkey: \"match\",\n\t\t\tvalue: function match(nsType, registeredType) {\n\t\t\t\tvar arr = registeredType.split('*');\n\t\t\t\tif (arr.length == 1) return nsType == registeredType;\n\t\n\t\t\t\tvar substr = void 0,\n\t\t\t\t    index = 0;\n\t\t\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\t\t\tif (arr[i].length == 0) continue;\n\t\t\t\t\tsubstr = nsType.slice(index);\n\t\t\t\t\tindex = substr.indexOf(arr[i]);\n\t\t\t\t\tif (index < 0) return false;\n\t\t\t\t\tindex += arr[i].length;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"mouse\",\n\t\t\tvalue: function mouse(container, e) {\n\t\t\t\tif (e.changedTouches) e = e.changedTouches[0];\n\t\t\t\tvar svg = container.ownerSVGElement || container;\n\t\t\t\tif (svg.createSVGPoint) {\n\t\t\t\t\tvar point = svg.createSVGPoint();\n\t\t\t\t\tpoint.x = e.clientX;point.y = e.clientY;\n\t\t\t\t\tpoint = point.matrixTransform(container.getScreenCTM().inverse());\n\t\t\t\t\treturn [point.x, point.y];\n\t\t\t\t}\n\t\t\t\tvar rect = container.getBoundingClientRect();\n\t\t\t\treturn [e.clientX - rect.left - container.clientLeft, e.clientY - rect.top - container.clientTop];\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn EventDispatcher;\n\t}();\n\t\n\texports.default = EventDispatcher;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.getKeyEvent = getKeyEvent;\n\texports.getKeyData = getKeyData;\n\t\n\tvar _StringBuffer = __webpack_require__(9);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\n\t * KEY constant\n\t */\n\tvar KEY = {\n\t\tALT: 18,\n\t\tBACK_SPACE: 8,\n\t\tCAPS_LOCK: 20,\n\t\tCONTROL: 17,\n\t\tDELETE: 46,\n\t\tDOWN: 40,\n\t\tEND: 35,\n\t\tENTER: 13,\n\t\tESCAPE: 220,\n\t\tHOME: 36,\n\t\tLEFT: 37,\n\t\tMETA: 224,\n\t\tNUM_LOCK: 144,\n\t\tPAGE_DOWN: 34,\n\t\tPAGE_UP: 33,\n\t\tPAUSE: 19,\n\t\tPRINTSCREEN: 44,\n\t\tRIGHT: 39,\n\t\tSCROLL_LOCK: 145,\n\t\tSHIFT: 16,\n\t\tSPACE: 32,\n\t\tTAB: 9,\n\t\tUP: 38\n\t\t//ADD          : DomUtils.isFireFox ? 61  : 187,\n\t\t//SUBTRACT     : DomUtils.isFireFox ? 173 : 189\n\t}; ///////////////////////////////////////////////////////////////////////////////\n\t//                                                                           //\n\t//           The Key Utility CLass for the Event Dispatcher          \t     //\n\t//                                                                           //\n\t///////////////////////////////////////////////////////////////////////////////\n\t\n\tfunction getKeyEvent(event) {\n\t\tif (!event || !event instanceof KeyboardEvent) {\n\t\t\treturn null;\n\t\t}\n\t\n\t\tvar key = event.keyCode || event.which;\n\t\n\t\t// Need to find a way to avoid this\n\t\tif (key >= 16 && key <= 18) {\n\t\t\tkey = null;\n\t\t}\n\t\n\t\treturn getKeyData(event.ctrlKey, event.altKey, event.shiftKey, event.metaKey, key);\n\t}\n\t\n\tfunction getKeyData(ctrl, alt, shift, meta, key) {\n\t\tvar buf = new _StringBuffer2.default();\n\t\n\t\tif (ctrl) buf.append(\"CTRL\");\n\t\tif (alt) buf.append(\"ALT\");\n\t\tif (shift) buf.append(\"SHIFT\");\n\t\tif (meta) buf.append(\"META\");\n\t\tif (key) buf.append(key);\n\t\n\t\treturn buf.toString(\".\");\n\t}\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Utils = __webpack_require__(3);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _Node = __webpack_require__(16);\n\t\n\tvar _Node2 = _interopRequireDefault(_Node);\n\t\n\tvar _Edge = __webpack_require__(20);\n\t\n\tvar _Edge2 = _interopRequireDefault(_Edge);\n\t\n\tvar _Marker = __webpack_require__(21);\n\t\n\tvar _Marker2 = _interopRequireDefault(_Marker);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar nodeDefaults = {\n\t\tname: 'Default',\n\t\trole: 'node',\n\t\tdraggable: true,\n\t\tselectable: true,\n\t\teditable: true,\n\t\tresizable: false,\n\t\tsourceable: true,\n\t\ttargetable: true,\n\t\tvisible: true\n\t};\n\t\n\tvar edgeDefaults = {\n\t\tname: 'Default',\n\t\trole: 'edge',\n\t\tselectable: true,\n\t\tvisible: true,\n\t\tstartMarker: null,\n\t\tendMarker: {\n\t\t\tid: 'Default_EndMarker',\n\t\t\ttype: 'arrow',\n\t\t\tsize: 10,\n\t\t\tcolor: '#0ea117'\n\t\t},\n\t\t/* start and end is only used if the edge is not connected to a node */\n\t\tstart: [0, 0],\n\t\tend: [400, 200]\n\t};\n\t\n\tvar Graph = function () {\n\t\tfunction Graph() {\n\t\t\tvar id = arguments.length <= 0 || arguments[0] === undefined ? _lodash2.default.uniqueId(\"G\") : arguments[0];\n\t\t\tvar config = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\t\tvar model = arguments[2];\n\t\n\t\t\t_classCallCheck(this, Graph);\n\t\n\t\t\tthis.id = id;\n\t\n\t\t\tthis.nodes = {};\n\t\t\tthis.edges = {};\n\t\n\t\t\tthis.selection = null;\n\t\t\tthis.destroyed = false;\n\t\n\t\t\t_Utils2.default.buildTypes(config.nodeTypes, \"Nodes\", nodeDefaults);\n\t\t\t_Utils2.default.buildTypes(config.edgeTypes, \"Edges\", edgeDefaults);\n\t\t\t// check for markers.\n\t\t\tthis.markers = [];\n\t\t\tvar edgeTypes = _Utils2.default.type(_Edge2.default.namespace),\n\t\t\t    marker = void 0,\n\t\t\t    markerConfig = void 0;\n\t\t\tedgeTypes.forEach(function (type) {\n\t\t\t\tmarkerConfig = type.prototype.startMarker;\n\t\t\t\tif (markerConfig) {\n\t\t\t\t\tmarker = _Marker2.default.getMarker(markerConfig, true);\n\t\t\t\t\tthis.markers.push(marker);\n\t\t\t\t}\n\t\t\t\tmarkerConfig = type.prototype.endMarker;\n\t\t\t\tif (markerConfig) {\n\t\t\t\t\tmarker = _Marker2.default.getMarker(markerConfig, false);\n\t\t\t\t\tthis.markers.push(marker);\n\t\t\t\t}\n\t\t\t}, this);\n\t\n\t\t\tdelete config.nodeTypes;\n\t\t\tdelete config.edgeTypes;\n\t\t\t_Utils2.default.initConfig(this, config);\n\t\t\tthis.root = null;\n\t\t\tif (model) this.loadModel(model);\n\t\t}\n\t\n\t\t_createClass(Graph, [{\n\t\t\tkey: \"addNode\",\n\t\n\t\n\t\t\t/**\n\t   * Create a new Node\n\t   */\n\t\t\tvalue: function addNode(config) {\n\t\t\t\tvar parent = arguments.length <= 1 || arguments[1] === undefined ? this.currentRoot : arguments[1];\n\t\t\t\tvar pos = arguments[2];\n\t\n\t\t\t\tvar NodeClass = Graph.getJSClass(config, _Node2.default);\n\t\t\t\tvar node = new NodeClass(this, config);\n\t\n\t\t\t\tif (parent) Graph.addChild(parent, node, pos);else {\n\t\t\t\t\tthis.root = node;\n\t\t\t\t\tthis.root.prop('role', 'root');\n\t\t\t\t}\n\t\n\t\t\t\tthis.nodes[node.id] = node;\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"addEdge\",\n\t\t\tvalue: function addEdge(config) {\n\t\t\t\tvar parent = arguments.length <= 1 || arguments[1] === undefined ? this.currentRoot : arguments[1];\n\t\t\t\tvar from = arguments[2];\n\t\t\t\tvar to = arguments[3];\n\t\n\t\t\t\tvar EdgeClass = Graph.getJSClass(config, _Edge2.default);\n\t\t\t\tvar edge = new EdgeClass(this, config, from, to);\n\t\n\t\t\t\tGraph.addChild(parent, edge);\n\t\t\t\tthis.edges[edge.id] = edge;\n\t\t\t\treturn edge;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"loadModel\",\n\t\t\tvalue: function loadModel(model) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar parent = arguments.length <= 1 || arguments[1] === undefined ? this.currentRoot : arguments[1];\n\t\n\t\t\t\tvar nodes = model.nodes;\n\t\t\t\tvar edges = model.edges;\n\t\t\t\tdelete model.nodes;\n\t\t\t\tdelete model.edges;\n\t\n\t\t\t\tvar node = this.addNode(model, parent);\n\t\t\t\tif (nodes) {\n\t\t\t\t\t_lodash2.default.forEach(nodes, function (child) {\n\t\t\t\t\t\t_this.loadModel(child, node);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (edges) {\n\t\t\t\t\t_lodash2.default.forEach(edges, function (edge) {\n\t\t\t\t\t\tvar from = void 0,\n\t\t\t\t\t\t    to = void 0;\n\t\t\t\t\t\tif (edge.from) from = _this.nodes[edge.from];\n\t\t\t\t\t\tif (edge.to) to = _this.nodes[edge.to];\n\t\t\t\t\t\t_this.addEdge(edge, node, from, to);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"reset\",\n\t\t\tvalue: function reset() {}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {}\n\t\t}, {\n\t\t\tkey: \"currentRoot\",\n\t\t\tget: function get() {\n\t\t\t\treturn this.root;\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"getJSClass\",\n\t\t\tvalue: function getJSClass(config, defaultClass) {\n\t\t\t\tvar jsClass = null;\n\t\t\t\tif (config && config.type) {\n\t\t\t\t\t// See if we can get the js class from config.\n\t\t\t\t\tvar type = _Utils2.default.type(defaultClass.namespace, config.type);\n\t\t\t\t\tif (type) jsClass = type.jsClass;\n\t\t\t\t}\n\t\n\t\t\t\treturn _Utils2.default.getConstructor(jsClass, defaultClass);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"addChild\",\n\t\t\tvalue: function addChild(parent, child) {\n\t\t\t\tif (!parent.children) parent.children = [];\n\t\n\t\t\t\tif (child.parent != parent) {\n\t\t\t\t\tparent.children.push(child);\n\t\n\t\t\t\t\tif (child.parent && child.parent.children) child.parent.children = _lodash2.default.without(child.parent.children, child);\n\t\t\t\t}\n\t\t\t\tchild.parent = parent;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Graph;\n\t}();\n\t\n\tGraph.DEFAULTS = {\n\t\tallowDanglingEdges: true,\n\t\tmultiConnect: false,\n\t\treadOnly: false,\n\t\tviewOnly: false\n\t};\n\t\n\texports.default = Graph;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _StringBuffer = __webpack_require__(9);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tvar _Cell2 = __webpack_require__(17);\n\t\n\tvar _Cell3 = _interopRequireDefault(_Cell2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Node = function (_Cell) {\n\t\t_inherits(Node, _Cell);\n\t\n\t\tfunction Node(graph) {\n\t\t\tvar config = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t\t\t_classCallCheck(this, Node);\n\t\n\t\t\tif (!config.id) config.id = _lodash2.default.uniqueId('N');\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Node).call(this, graph, config));\n\t\n\t\t\t_this.inEdges = [];\n\t\t\t_this.outEdges = [];\n\t\t\t_this.ports = null;\n\t\t\t_this.parent = null;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(Node, [{\n\t\t\tkey: \"isAncestor\",\n\t\t\tvalue: function isAncestor(n) {\n\t\t\t\t// TODO: should we move this to graph class ?\n\t\t\t\tvar node = n.parent;\n\t\t\t\twhile (node) {\n\t\t\t\t\tif (this == node) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.parent;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"removeEdge\",\n\t\t\tvalue: function removeEdge(edge) {\n\t\t\t\tvar edges = edge.source == this ? this.outEdges : this.inEdges;\n\t\t\t\tfor (var i = 0; i < edges.length; i++) {\n\t\t\t\t\tif (edge == edges[i]) {\n\t\t\t\t\t\tedges.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// Add a new incoming edge\n\t\n\t\t}, {\n\t\t\tkey: \"addInEdge\",\n\t\t\tvalue: function addInEdge(edge, pos) {\n\t\t\t\tif (pos == null || pos === undefined) this.inEdges.push(edge);else this.inEdges.splice(pos, 0, edge);\n\t\t\t}\n\t\n\t\t\t// Add a new outgoing edge\n\t\n\t\t}, {\n\t\t\tkey: \"addOutEdge\",\n\t\t\tvalue: function addOutEdge(edge, pos) {\n\t\t\t\tif (pos == null || pos === undefined || pos > edge.length - 1) this.outEdges.push(edge);else this.outEdges.splice(pos, 0, edge);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderChildren\",\n\t\t\tvalue: function renderChildren(view) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tif (this.children) {\n\t\t\t\t\tvar _ret = function () {\n\t\t\t\t\t\tvar buf = new _StringBuffer2.default();\n\t\t\t\t\t\t_lodash2.default.forEach(_this2.children, function (child) {\n\t\t\t\t\t\t\tbuf.append(child.render(view));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tv: buf.toString()\n\t\t\t\t\t\t};\n\t\t\t\t\t}();\n\t\n\t\t\t\t\tif ((typeof _ret === \"undefined\" ? \"undefined\" : _typeof(_ret)) === \"object\") return _ret.v;\n\t\t\t\t}\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getPort\",\n\t\t\tvalue: function getPort(key) {\n\t\t\t\tvar portName = arguments.length <= 1 || arguments[1] === undefined ? 'auto' : arguments[1];\n\t\t\t\tvar endPt = arguments[2];\n\t\t\t\tvar orthogonal = arguments[3];\n\t\n\t\t\t\tvar shape = this.getShape(key);\n\t\t\t\tif (portName == 'auto') {\n\t\t\t\t\treturn shape.getPerimeter(endPt, orthogonal);\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\tvar label = this.prop(\"label\") ? this.prop(\"label\") : \"undefined\";\n\t\t\t\tif (_lodash2.default.isArray(label)) label = label[0];\n\t\t\t\treturn 'Node:{id:' + this.id + ';label:' + label + ';type:' + this.props.constructor.typeName + '}';\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Node;\n\t}(_Cell3.default);\n\t\n\tNode.namespace = \"Nodes\";\n\t\n\texports.default = Node;\n\t\n\t/*\n\n\t/**\n\t * The DrillDownParent is the parent that displays the vertex when drilled down.\n\t *\n\tVertex.prototype.getDrillDownParent = function() {\n\t\treturn this.parent;\n\t};\n\n\tVertex.prototype.isLocked = function() {\n\t\tvar mode = this.getProperty(\"mode\") || 3;\n\t\treturn !(mode & Graph.ALLOW_INTERACTIONS);\n\t};\n\n\tVertex.prototype.getCrumbText = function() {\n\t\tif (this.isLocked())\n\t\t\treturn '<span><img src=\"webwb/pzreadonly.png\" /></span><span>&nbsp;' + this.getProperty(\"label\") + '</span>';\n\t\treturn this.getProperty(\"label\");\n\t};\n\n\tVertex.prototype.canEdit = function() {\n\t\treturn (!this.parent || !this.parent.isLocked()) && Vertex.superclass.canEdit.call(this);\n\t};\n\n\tVertex.prototype.isContainer = function() {\n\t\treturn this.getProperty(\"container\");\n\t};\n\n\t*/\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Utils = __webpack_require__(3);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _Cache = __webpack_require__(18);\n\t\n\tvar _Cache2 = _interopRequireDefault(_Cache);\n\t\n\tvar _StringBuffer = __webpack_require__(9);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tvar _Shape = __webpack_require__(7);\n\t\n\tvar _Shape2 = _interopRequireDefault(_Shape);\n\t\n\tvar _Rectangle = __webpack_require__(5);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _Label = __webpack_require__(19);\n\t\n\tvar _Label2 = _interopRequireDefault(_Label);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * The Cell is the common parent for Node and Edge.\n\t */\n\t\n\tvar Cell = function () {\n\t\tfunction Cell(graph) {\n\t\t\tvar config = arguments.length <= 1 || arguments[1] === undefined ? { id: _lodash2.default.uniqueId() } : arguments[1];\n\t\n\t\t\t_classCallCheck(this, Cell);\n\t\n\t\t\tthis.graph = graph;\n\t\t\tthis.id = config.id;\n\t\t\tdelete config.id;\n\t\n\t\t\t// Initialize decorators\n\t\t\tif (config.decorators) {\n\t\t\t\tthis.createDecorators(config.decorators);\n\t\t\t\tdelete config.decorators;\n\t\t\t}\n\t\n\t\t\t// Initialize View Properties\n\t\t\tif (config.views) {\n\t\t\t\tthis.viewProps = config.views;\n\t\t\t\tdelete config.views;\n\t\t\t}\n\t\n\t\t\t// Initialize type\n\t\t\tvar type = config.type || \"Default\";\n\t\t\ttype = _Utils2.default.type(this.constructor.namespace, type);\n\t\t\tif (!type) throw new Error(\"Type not found \" + config.type);\n\t\t\tdelete config.type;\n\t\t\tthis.props = new type(config);\n\t\t}\n\t\n\t\t_createClass(Cell, [{\n\t\t\tkey: \"prop\",\n\t\t\tvalue: function prop(name, value) {\n\t\t\t\tif (_lodash2.default.isUndefined(value)) return this.props[name];\n\t\t\t\tthis.props[name] = value;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Get/Set property stored by views.\n\t   * @param key\n\t   * @param name\n\t   * @param value\n\t   * @returns {*}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"viewProp\",\n\t\t\tvalue: function viewProp() {\n\t\t\t\tvar key = arguments.length <= 0 || arguments[0] === undefined ? 'default' : arguments[0];\n\t\t\t\tvar name = arguments[1];\n\t\t\t\tvar value = arguments[2];\n\t\n\t\t\t\tif (_lodash2.default.isUndefined(value)) {\n\t\t\t\t\tif (key == 'default') return this.prop(name, value);\n\t\t\t\t\treturn this.viewProps[key][name];\n\t\t\t\t}\n\t\t\t\tif (key == 'default') {\n\t\t\t\t\tthis.prop(name, value);\n\t\t\t\t} else {\n\t\t\t\t\tif (!this.viewProps[key]) this.viewProps[key] = {};\n\t\t\t\t\tthis.viewProps[key][name] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"createDecorators\",\n\t\t\tvalue: function createDecorators(decorators) {}\n\t\n\t\t\t/**\n\t   * Get properties needed for rendering this element\n\t   * @returns {{key: (string|*), className: *, namespace: *, bounds: *}}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getView\",\n\t\t\tvalue: function getView(key) {\n\t\t\t\tvar shape = this.getShape(key);\n\t\t\t\treturn _lodash2.default.assign({\n\t\t\t\t\tid: this.id,\n\t\t\t\t\tkey: key,\n\t\t\t\t\tclassName: this.computedClassName,\n\t\t\t\t\tnamespace: this.namespace\n\t\t\t\t}, shape);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getShape\",\n\t\t\tvalue: function getShape(key) {\n\t\t\t\tvar shape = _Cache2.default.get(this.id + \".shape\", key);\n\t\t\t\tif (shape) return shape;\n\t\n\t\t\t\tvar shapeConfig = this.viewProp(key, 'shape');\n\t\t\t\tvar shapeClass = shapeConfig ? _Shape2.default.getShape(shapeConfig.name) : _Shape2.default.getShape('Rectangle');\n\t\t\t\tvar x = this.viewProp(key, \"x\");\n\t\t\t\tvar y = this.viewProp(key, \"y\");\n\t\t\t\tvar width = this.viewProp(key, \"width\");\n\t\t\t\tvar height = this.viewProp(key, \"height\");\n\t\t\t\tshape = new shapeClass(x, y, width, height, shapeConfig);\n\t\t\t\t_Cache2.default.set(this.id + '.shape', shape, key);\n\t\t\t\treturn shape;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"render\",\n\t\t\tvalue: function render(view) {\n\t\t\t\tvar template = _Cache2.default.get(this.id + '.template', view.id);\n\t\t\t\tif (!template) {\n\t\t\t\t\t//create the template\n\t\t\t\t\tvar role = this.prop('role');\n\t\t\t\t\ttemplate = view.getTemplate('$' + role, null, this);\n\t\t\t\t\tif (_lodash2.default.isString(template)) template = _lodash2.default.template(template);\n\t\t\t\t\t_Cache2.default.set(this.id + '.template', template, view.id);\n\t\t\t\t}\n\t\t\t\treturn template(this.getView(view.id));\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderShape\",\n\t\t\tvalue: function renderShape(view) {\n\t\t\t\tvar shape = this.getShape(view.id);\n\t\t\t\tif (shape) return shape.render(view);\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderLabel\",\n\t\t\tvalue: function renderLabel(view) {\n\t\t\t\tif (this == this.graph.currentRoot) return null;\n\t\t\t\tvar box = this.getLabelBox(view.id);\n\t\t\t\tif (box) return view.renderLabel(box);\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getLabelBox\",\n\t\t\tvalue: function getLabelBox(key) {\n\t\t\t\tvar box = _Cache2.default.get(this.id + '.labelBox', key);\n\t\t\t\tif (box) return box;\n\t\t\t\tvar shape = this.getShape(key);\n\t\t\t\t// Just get the config will have a positive performance boost for IE11 and IE10.\n\t\t\t\tbox = _Label2.default.getLabelBox(this.prop('label'), this.viewProp(key, 'labelConfig'), shape.width, shape.height);\n\t\t\t\t_Cache2.default.set(this.id + '.labelBox', box, key);\n\t\t\t\treturn box;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\tdelete this.graph;\n\t\t\t\tdelete this.decorators;\n\t\t\t\tdelete this.props;\n\t\t\t\tdelete this.viewProps;\n\t\t\t\tthis.destroyed = true;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"computedClassName\",\n\t\t\tget: function get() {\n\t\t\t\tif (!this._computedClassName) {\n\t\t\t\t\tvar buf = new _StringBuffer2.default(this.prop(\"role\"));\n\t\t\t\t\tvar props = this.props;\n\t\t\t\t\tif (props.hasOwnProperty(\"className\")) buf.append(props[\"className\"]);\n\t\t\t\t\tprops = props.constructor.prototype;\n\t\t\t\t\twhile (props) {\n\t\t\t\t\t\tif (props.hasOwnProperty(\"className\")) buf.append(props[\"className\"]);\n\t\t\t\t\t\tprops = Object.getPrototypeOf(props);\n\t\t\t\t\t}\n\t\t\t\t\tthis._computedClassName = buf.toString(' ');\n\t\t\t\t}\n\t\t\t\treturn this._computedClassName;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"namespace\",\n\t\t\tget: function get() {\n\t\t\t\tif (this == this.graph.currentRoot) return '';\n\t\t\t\treturn \"root.\" + this.prop(\"role\");\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Cell;\n\t}();\n\t\n\t/*\n\t\n\tCell.prototype.move = function(x, y) {\n\t\tthis.setProperty(\"x\", Math.round(x));\n\t\tthis.setProperty(\"y\", Math.round(y));\n\t\tdelete this.bounds;\n\t};\n\t\n\tCell.prototype.resize = function(w, h) {\n\t\tthis.setProperty(\"width\", w);\n\t\tthis.setProperty(\"height\", h);\n\t\tdelete this.bounds;\n\t};\n\t\n\tCell.prototype.canEdit = function() {\n\t\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"editable\");\n\t};\n\t\n\tCell.prototype.canSelect = function() {\n\t\treturn (this.graph ? this.graph.canSelect() : true) && this.getProperty(\"selectable\");\n\t};\n\t\n\tCell.prototype.canMove = function() {\n\t\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"draggable\");\n\t};\n\t\n\tCell.prototype.canResize = function() {\n\t\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"resizable\");\n\t};\n\t\n\tCell.prototype.getTypeFromString = function(typeStr) {\n\t\treturn this.graph.getType(typeStr);\n\t};\n\t\n\tCell.prototype.createModifiers = function(modifiers) {\n\t\tthis.modifiers = null;\n\t\tvar modifierSettings = this.getProperty(\"modifierSettings\");\n\t\tif (modifierSettings) {\n\t\t\t_.each(modifiers, function(config) {\n\t\t\t\tconfig.type = this.graph.getModifierType(config.className);\n\t\t\t\tconfig.setting = modifierSettings[config.className];\n\t\t\t\tif (!config.type || !config.setting) return;\n\t\n\t\t\t\tthis.addModifier(config.className, new Modifier(this, config));\n\t\t\t}, this);\n\t\n\t\t\t// Check for showAlways settings\n\t\t\t_.each(modifierSettings, function(setting, name) {\n\t\t\t\tif (setting.showAlways && (!this.modifiers || !this.modifiers[name])) {\n\t\t\t\t\tvar config = {type: this.graph.getModifierType(name), setting: setting};\n\t\t\t\t\tif (!config.type) return;\n\t\t\t\t\tthis.addModifier(name, new Modifier(this, config));\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\t};\n\t\n\tCell.prototype.addModifier = function(name, modifier) {\n\t\tif (!this.modifiers)\n\t\t\tthis.modifiers = {};\n\t\n\t\tif (!modifier.hasOwnProperty(\"showHeader\"))\n\t\t\tmodifier.showHeader = true;\n\t\n\t\t// @hack preferably set it in configurations.\n\t\tif (modifier.name == \"HoverProcessModifier\" || modifier.name == \"HoverResults\")\n\t\t\tmodifier.showHeader = false;\n\t\n\t\tthis.modifiers[name] = modifier;\n\t};\n\t\n\tCell.prototype.getModifiers = function() {\n\t\tif (_.isUndefined(this.modifiers))\n\t\t\tthis.createModifiers();\n\t\treturn this.modifiers;\n\t};\n\t\n\tCell.prototype.getModifier = function(name) {\n\t\tvar modifiers = this.getModifiers();\n\t\tif (modifiers)\n\t\t\treturn modifiers[name];\n\t\treturn null;\n\t};\n\t\n\tCell.prototype.isVisible = function() {\n\t\treturn this.getProperty('visible');\n\t};\n\t\n\tCell.prototype.isContainer = function() {\n\t\treturn false;\n\t};\n\t*/\n\t\n\t\n\texports.default = Cell;\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t/**\n\t * Created by tong on 6/7/2016.\n\t */\n\t\n\tvar caches = {};\n\t\n\tvar Cache = {\n\t\tget: function get(key, namespace) {\n\t\t\treturn this.getCache(namespace)[key];\n\t\t},\n\t\n\t\tset: function set(key, value, namespace) {\n\t\t\tthis.getCache(namespace)[key] = value;\n\t\t},\n\t\n\t\tcontains: function contains(key, namespace) {\n\t\t\treturn key in this.getCache(namespace);\n\t\t},\n\t\n\t\tremove: function remove(key, namespace) {\n\t\t\tdelete this.getCache(namespace)[key];\n\t\t},\n\t\n\t\tclear: function clear(namesapce) {\n\t\t\tif (!namespace) caches = {};else if (caches[namespace]) caches[namespace] = {};\n\t\t},\n\t\n\t\tgetCache: function getCache() {\n\t\t\tvar namespace = arguments.length <= 0 || arguments[0] === undefined ? 'default' : arguments[0];\n\t\n\t\t\tif (!caches[namespace]) caches[namespace] = {};\n\t\t\treturn caches[namespace];\n\t\t}\n\t};\n\t\n\texports.default = Cache;\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _bean = __webpack_require__(1);\n\t\n\tvar _bean2 = _interopRequireDefault(_bean);\n\t\n\tvar _Utils = __webpack_require__(3);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _DomUtils = __webpack_require__(8);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _StringBuffer = __webpack_require__(9);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tvar _Rectangle = __webpack_require__(5);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar FONT_BOLD = 1,\n\t    FONT_ITALIC = 2,\n\t    FONT_UNDERLINE = 4,\n\t    FONT_SHADOW = 8;\n\t\n\tvar defaultConfig = {\n\t\tfontSize: 11,\n\t\tfontFamily: \"Arial\",\n\t\tfontStyle: 0,\n\t\tpadding: 0,\n\t\tlinePadding: 0,\n\t\talign: \"left\",\n\t\twidth: 0,\n\t\theight: 0,\n\t\trotation: null,\n\t\tgeometry: { x: 0, y: 0, anchorY: 0, offsetX: 0, offsetY: 0 }\n\t};\n\t\n\t/**\n\t * The label object handles label sizing/positioning\n\t */\n\t\n\texports.default = function () {\n\t\tvar stringMeasureEl = null,\n\t\t    measureDiv = void 0,\n\t\t    baselineDiv = void 0;\n\t\n\t\t/**\n\t  * Calculate the size of the string.\n\t  */\n\t\tvar getStringSize = _lodash2.default.memoize(function (str, fontSize, fontFamily, bold) {\n\t\t\tfontSize = fontSize || 11;\n\t\t\tfontFamily = fontFamily || 'Arial,Helvetica';\n\t\t\tbold = !_lodash2.default.isUndefined(bold) ? bold : false;\n\t\n\t\t\t// first check if there is a string-measuring div available, if not, create now.\n\t\t\tif (!stringMeasureEl) {\n\t\t\t\tstringMeasureEl = _DomUtils2.default.createElement('iframe', { id: \"_ComputeStylesIframe\" }, { position: \"absolute\", visibility: \"hidden\", width: \"auto\" });\n\t\t\t\tdocument.body.appendChild(stringMeasureEl);\n\t\t\t\tvar doc = stringMeasureEl.contentWindow.document;\n\t\t\t\tdoc.open();\n\t\t\t\tdoc.write('<html><body>\\\n\t\t\t\t\t<div id=\"baselineDiv\" style=\"height:100px;\"><span style=\"line-height:0\">T</span><span style=\"height:100%;display:inline-block;\"></span></div>\\\n\t\t\t\t\t<div id=\"measureDiv\" style=\"position:absolute;width:auto;height:auto;padding:0;white-space:pre-wrap;word-wrap:break-word;display:inline-block;\"></div>\\\n\t\t\t\t\t</body></html>');\n\t\t\t\tdoc.close();\n\t\t\t\tmeasureDiv = doc.getElementById(\"measureDiv\");\n\t\t\t\tbaselineDiv = doc.getElementById(\"baselineDiv\");\n\t\t\t}\n\t\t\tbaselineDiv.style.fontSize = measureDiv.style.fontSize = fontSize;\n\t\t\tbaselineDiv.style.fontFamily = measureDiv.style.fontFamily = fontFamily;\n\t\t\tbaselineDiv.style.fontWeight = measureDiv.style.fontWeight = bold ? 'bold' : 'normal';\n\t\t\tmeasureDiv.innerHTML = str;\n\t\n\t\t\tvar strut = baselineDiv.firstChild;\n\t\t\tvar baselineHeight = strut.offsetTop + strut.offsetHeight - baselineDiv.offsetHeight - baselineDiv.offsetTop;\n\t\n\t\t\treturn { width: measureDiv.offsetWidth, height: measureDiv.offsetHeight, baseline: baselineHeight };\n\t\t}, function (str, fontSize, fontFamily, bold) {\n\t\t\treturn str + ';' + fontSize + ';' + fontFamily + ';' + bold;\n\t\t});\n\t\n\t\t/**\n\t  * Create a wrapped text.\n\t  * @param {String} string the string to wrap.\n\t  * @param {maxWidth} the maximum width this string can take.\n\t  * @param {fontSize}\n\t  * @param {fontFamily}\n\t  * @param {bold}\n\t  */\n\t\tvar wrap = _lodash2.default.memoize(function (string, maxWidth, fontSize, fontFamily, bold) {\n\t\t\tmaxWidth = maxWidth || 0;\n\t\t\tfontSize = fontSize || 11;\n\t\t\tfontFamily = fontFamily || 'Arial,Helvetica';\n\t\t\tbold = !_lodash2.default.isUndefined(bold) ? bold : false;\n\t\n\t\t\tvar arr = [];\n\t\t\tvar spaceSize = getStringSize(\"&nbsp;\", fontSize, fontFamily, bold),\n\t\t\t    space = spaceSize.width;\n\t\t\tarr.lineHeight = spaceSize.height;\n\t\t\tarr.baseline = spaceSize.baseline;\n\t\n\t\t\tif (!maxWidth || !string || string == \"\") {\n\t\t\t\tarr.push(string);\n\t\t\t\tarr.width = !string || string == \"\" ? space : getStringSize(string, fontSize, fontFamily, bold).width;\n\t\t\t\tarr.height = arr.lineHeight;\n\t\t\t\treturn arr;\n\t\t\t}\n\t\n\t\t\tvar width = 0;\n\t\t\t//split the text by lines\n\t\t\tvar lines = string.split('\\n');\n\t\n\t\t\tvar buf = new _StringBuffer2.default();\n\t\n\t\t\tfor (var j = 0; j < lines.length; j++) {\n\t\t\t\t//split each line by word\n\t\t\t\tvar words = lines[j].split(/\\s/);\n\t\t\t\tvar line = \"\",\n\t\t\t\t    currentWidth = 0,\n\t\t\t\t    wordWidth = 0,\n\t\t\t\t    newLine = true,\n\t\t\t\t    word;\n\t\n\t\t\t\tfor (var i = 0; i < words.length; i++) {\n\t\t\t\t\tword = words[i];\n\t\t\t\t\twordWidth = getStringSize(word, fontSize, fontFamily, bold).width;\n\t\n\t\t\t\t\tif ((newLine ? wordWidth : currentWidth + space + wordWidth) > maxWidth) {\n\t\t\t\t\t\tif (newLine) {\n\t\t\t\t\t\t\tbuf.append(word);\n\t\t\t\t\t\t\twidth = Math.max(width, wordWidth);\n\t\t\t\t\t\t\tif (i < words.length - 1) {\n\t\t\t\t\t\t\t\tarr.push(buf.toString());\n\t\t\t\t\t\t\t\tbuf.clear();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tarr.push(buf.append(line).toString());\n\t\t\t\t\t\t\twidth = Math.max(width, currentWidth + space + wordWidth);\n\t\t\t\t\t\t\tbuf.clear();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tline = \"\";\n\t\t\t\t\t\tcurrentWidth = 0;\n\t\t\t\t\t\tif (!newLine) i--; // move back one word.\n\t\t\t\t\t\tnewLine = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tline = newLine ? word : line + \" \" + word;\n\t\t\t\t\t\tcurrentWidth = newLine ? wordWidth : currentWidth + space + wordWidth;\n\t\t\t\t\t\twidth = Math.max(width, currentWidth);\n\t\t\t\t\t\tnewLine = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (line != \"\") buf.append(line);\n\t\t\t\tif (j < lines.length - 1) {\n\t\t\t\t\tarr.push(buf.toString());\n\t\t\t\t\tbuf.clear();\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tarr.push(buf.toString());\n\t\t\tarr.width = width;\n\t\t\tarr.height = arr.lineHeight * arr.length;\n\t\t\treturn arr;\n\t\t}, function (str, maxWidth, fontSize, fontFamily, bold) {\n\t\t\treturn str + ';' + maxWidth + ';' + fontSize + ';' + fontFamily + ';' + bold;\n\t\t});\n\t\n\t\t/**\n\t  *  Get the view information for how to display the label.\n\t  * @param label The string that needs to be displayed\n\t  * @param containerWidth The width of the parent container.\n\t  * @param containerHeight The height of the parent container.\n\t  * @param labelConfig The configuration on how to display label. It should be an object with the following parameters:\n\t  * {\n\t  *      fontSize, fontFamily, fontStyle, padding,\n\t  *      align: can be either \"left\", \"center\" or \"right\",\n\t  *      width: the maximum width of the label. if less than 1, then is treated as percentage. If 0, no wrapping will occur,\n\t  *      height,\n\t  *      geometry\n\t  * }\n\t  * @returns {*}\n\t  */\n\t\tfunction getLabelBox(label, labelConfig, containerWidth, containerHeight) {\n\t\t\treturn _getLabelBox.call(this, label, labelConfig, { width: containerWidth, height: containerHeight });\n\t\t}\n\t\n\t\tfunction getLabelBoxForLink(label, labelConfig, link) {\n\t\t\treturn _getLabelBox.call(this, label, labelConfig, link);\n\t\t}\n\t\n\t\tfunction _getLabelBox(label) {\n\t\t\tvar labelConfig = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\t\tvar context = arguments[2];\n\t\n\t\t\tlabelConfig = _lodash2.default.defaultsDeep(labelConfig, defaultConfig);\n\t\t\tvar fontSize = labelConfig.fontSize;\n\t\t\tvar fontFamily = labelConfig.fontFamily;\n\t\t\tvar fontStyle = labelConfig.fontStyle;\n\t\t\tvar bold = (fontStyle & FONT_BOLD) == FONT_BOLD;\n\t\t\tvar padding = labelConfig.padding;\n\t\t\tvar linePadding = labelConfig.linePadding;\n\t\t\tvar align = labelConfig.align;\n\t\n\t\t\tvar w = labelConfig.width,\n\t\t\t    h = labelConfig.height;\n\t\t\tif (context.width) {\n\t\t\t\tw = w <= 5 ? context.width * w : w;\n\t\t\t\th = h <= 5 ? context.height * h : h;\n\t\t\t}\n\t\t\tw -= 2 * padding;\n\t\t\th -= 2 * padding;\n\t\t\tw = Math.max(0, w);\n\t\t\th = Math.max(0, h);\n\t\n\t\t\tvar geometry = _lodash2.default.clone(labelConfig.geometry);\n\t\t\tvar wrappedLabel = this.wrap(label, w, fontSize, fontFamily, bold);\n\t\t\tgeometry.width = wrappedLabel.width + 2 * padding;\n\t\t\tgeometry.height = wrappedLabel.height + 2 * padding + (wrappedLabel.length - 1) * linePadding;\n\t\t\tvar anchor = \"start\",\n\t\t\t    dx = 0,\n\t\t\t    setAnchorX = !_lodash2.default.has(geometry, \"anchorX\");\n\t\t\tswitch (align) {\n\t\t\t\tcase \"center\":\n\t\t\t\t\tanchor = \"middle\";\n\t\t\t\t\tif (setAnchorX) geometry.anchorX = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tanchor = \"end\";\n\t\t\t\t\tdx = wrappedLabel.width / 2;\n\t\t\t\t\tif (setAnchorX) geometry.anchorX = -0.5;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"left\":\n\t\t\t\t\tdx = -wrappedLabel.width / 2;\n\t\t\t\t\tif (setAnchorX) geometry.anchorX = 0.5;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar pos = void 0;\n\t\t\tif (context.getRelativePosition) pos = context.getRelativePosition(geometry);else pos = _Utils2.default.getRelativePosition({ width: context.width, height: context.height }, geometry);\n\t\n\t\t\tvar bounds = new _Rectangle2.default(pos[0], pos[1], geometry.width, geometry.height);\n\t\t\t// the pivot is the center of rotation when the label has a rotation specified.\n\t\t\tvar pivot = align == 'center' ? [0, 0] : align == 'left' ? [-wrappedLabel.width / 2, 0] : [wrappedLabel.width / 2, 0];\n\t\n\t\t\t// the maximum bounds for the label, used to position inline editor\n\t\t\tgeometry.width = Math.max(w + 2 * padding, geometry.width);\n\t\t\tgeometry.height = Math.max(h + 2 * padding, geometry.height);\n\t\n\t\t\tif (context.getRelativePosition) pos = context.getRelativePosition(geometry);else pos = _Utils2.default.getRelativePosition({ width: context.width, height: context.height }, geometry);\n\t\n\t\t\tvar maxBounds = new _Rectangle2.default(pos[0], pos[1], geometry.width, geometry.height);\n\t\t\treturn {\n\t\t\t\tconfig: labelConfig, label: wrappedLabel, _label: label,\n\t\t\t\tdx: dx, dy: -geometry.height / 2 + padding + wrappedLabel.lineHeight - wrappedLabel.baseline, anchor: anchor, lineHeight: wrappedLabel.lineHeight + linePadding,\n\t\t\t\tpivot: pivot, bounds: bounds, maxBounds: maxBounds\n\t\t\t};\n\t\t}\n\t\n\t\tfunction render(view, box) {\n\t\t\treturn view.renderLabel(box);\n\t\t}\n\t\n\t\tvar editor = {\n\t\t\tstart: function start(key, container, box, refEl, textEl) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar scale = arguments.length <= 5 || arguments[5] === undefined ? 1.0 : arguments[5];\n\t\t\t\tvar singleLine = arguments.length <= 6 || arguments[6] === undefined ? true : arguments[6];\n\t\n\t\t\t\tif (this.input) {\n\t\t\t\t\tif (this.key != key) {\n\t\t\t\t\t\t// need to close the existing editor first\n\t\t\t\t\t\tthis.stop();\n\t\t\t\t\t} else return;\n\t\t\t\t}\n\t\t\t\tvar tag = singleLine ? 'input' : 'textarea';\n\t\t\t\tthis.input = _DomUtils2.default.createElement(tag, { id: \"inlineEditor\", unselectable: \"off\" }, { position: \"absolute\", overflow: \"hidden\", padding: \"0px\", margin: \"0px\", border: \"transparent\" });\n\t\t\t\tif (singleLine) {\n\t\t\t\t\t_bean2.default.on(this.input, 'keydown keyup', function (event) {\n\t\t\t\t\t\tif (event.keyCode == 13) {\n\t\t\t\t\t\t\t_bean2.default.off(_this.input, 'keydown keyup');\n\t\t\t\t\t\t\t_this.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcontainer.appendChild(this.input);\n\t\n\t\t\t\tthis.key = key;\n\t\t\t\tthis.box = box;\n\t\t\t\tthis.refEl = refEl;\n\t\t\t\tthis.textEl = textEl;\n\t\n\t\t\t\tvar labelConfig = box.config;\n\t\t\t\tvar maxBounds = new _Rectangle2.default(box.maxBounds.x, box.maxBounds.y, box.maxBounds.width * scale, box.maxBounds.height * scale);\n\t\t\t\tvar pos = _DomUtils2.default.getCenterPosition(refEl, container);\n\t\t\t\tpos = [pos[0] + maxBounds.left, pos[1] + maxBounds.top];\n\t\n\t\t\t\tif (textEl) textEl.style.visibility = 'hidden';\n\t\n\t\t\t\t_DomUtils2.default.setElement(this.input, null, {\n\t\t\t\t\tvisibility: 'visible',\n\t\t\t\t\tleft: pos[0] + \"px\",\n\t\t\t\t\ttop: pos[1] + \"px\",\n\t\t\t\t\twidth: maxBounds.width + 'px',\n\t\t\t\t\theight: maxBounds.height + 'px',\n\t\t\t\t\t\"font-family\": labelConfig.fontFamily,\n\t\t\t\t\t\"font-size\": labelConfig.fontSize * scale + 'px',\n\t\t\t\t\t\"font-weight\": (labelConfig.fontStyle & FONT_BOLD) == FONT_BOLD ? 'bold' : 'normal'\n\t\t\t\t\t/*\"color\": labelConfig.fontColor*/\n\t\t\t\t});\n\t\n\t\t\t\tthis.input.value = box._label;\n\t\t\t\tthis.input.focus();\n\t\t\t\tthis.input.select();\n\t\t\t\t_bean2.default.fire(this, 'editor.start', [this.key]);\n\t\t\t},\n\t\n\t\t\tstop: function stop(cancel) {\n\t\t\t\tif (!this.input) return;\n\t\n\t\t\t\tcancel = cancel || false;\n\t\t\t\tif (this.textEl) this.textEl.style.visibility = null;\n\t\n\t\t\t\tif (!cancel) _bean2.default.fire(this, 'editor.update', [this.key, this.input.value]);\n\t\n\t\t\t\t_bean2.default.fire(this, 'editor.stop', [this.key]);\n\t\n\t\t\t\t// remove the input\n\t\t\t\tthis.input.parentNode.removeChild(this.input);\n\t\t\t\tdelete this.input;\n\t\t\t\tdelete this.key;\n\t\t\t\tdelete this.box;\n\t\t\t\tdelete this.refEl;\n\t\t\t\tdelete this.textEl;\n\t\t\t}\n\t\t};\n\t\n\t\treturn {\n\t\t\tFONT_BOLD: FONT_BOLD,\n\t\t\tFONT_ITALIC: FONT_ITALIC,\n\t\t\tFONT_UNDERLINE: FONT_UNDERLINE,\n\t\t\tFONT_SHADOW: FONT_SHADOW,\n\t\t\tgetStringSize: getStringSize,\n\t\t\twrap: wrap,\n\t\t\tgetLabelBox: getLabelBox,\n\t\t\tgetLabelBoxForLink: getLabelBoxForLink,\n\t\t\trender: render,\n\t\t\teditor: editor\n\t\t};\n\t}();\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Cell2 = __webpack_require__(17);\n\t\n\tvar _Cell3 = _interopRequireDefault(_Cell2);\n\t\n\tvar _Rectangle = __webpack_require__(5);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _Link = __webpack_require__(12);\n\t\n\tvar _Link2 = _interopRequireDefault(_Link);\n\t\n\tvar _Label = __webpack_require__(19);\n\t\n\tvar _Label2 = _interopRequireDefault(_Label);\n\t\n\tvar _Cache = __webpack_require__(18);\n\t\n\tvar _Cache2 = _interopRequireDefault(_Cache);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Edge = function (_Cell) {\n\t\t_inherits(Edge, _Cell);\n\t\n\t\tfunction Edge(graph) {\n\t\t\tvar config = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\t\tvar source = arguments[2];\n\t\t\tvar target = arguments[3];\n\t\n\t\t\t_classCallCheck(this, Edge);\n\t\n\t\t\tif (!config.id) config.id = _lodash2.default.uniqueId('E');\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Edge).call(this, graph, config));\n\t\n\t\t\t_this.source = _this.target = null;\n\t\t\t_this.setSource(source, config.sourcePos);\n\t\t\t_this.setTarget(target, config.targetPos);\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(Edge, [{\n\t\t\tkey: \"setSource\",\n\t\t\tvalue: function setSource(node, pos) {\n\t\t\t\tthis.setTerminal(node, pos, 'source');\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"setTarget\",\n\t\t\tvalue: function setTarget(node, pos) {\n\t\t\t\tthis.setTerminal(node, pos, 'target');\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Internal methods to set either the source or target\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"setTerminal\",\n\t\t\tvalue: function setTerminal(node, pos, dir) {\n\t\t\t\tvar end = dir == 'source' ? this.source : this.target;\n\t\t\t\tif (end == node) {\n\t\t\t\t\t// simply change the position of the edge.\n\t\t\t\t\tif (node) node.setEdgeAt(this, pos);\n\t\t\t\t} else {\n\t\t\t\t\tif (end) {\n\t\t\t\t\t\t// first remove the edge from the current end\n\t\t\t\t\t\tend.removeEdge(this);\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (node) {\n\t\t\t\t\t\tif (dir == 'source') node.addOutEdge(this, pos);else node.addInEdge(this, pos);\n\t\t\t\t\t}\n\t\t\t\t\tif (dir == 'source') this.source = node;else this.target = node;\n\t\t\t\t\t//this.clearPoints();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getLabelBox\",\n\t\t\tvalue: function getLabelBox(key) {\n\t\t\t\tvar label = this.prop('label');\n\t\t\t\tif (label) return _Label2.default.getLabelBoxForLink(label, this.viewProp(key, 'labelConfig'), this.getShape(key));\n\t\t\t\treturn null;\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Return a pair of points as reference to the calculation of start and end points.\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getReferencePoints\",\n\t\t\tvalue: function getReferencePoints(key) {\n\t\t\t\tvar pts = [];\n\t\t\t\tif (this.source) pts.push(this.source.getShape(key).center);else pts.push(this.viewProp(key, 'start'));\n\t\n\t\t\t\tif (this.target) pts.push(this.target.getShape(key).center);else pts.push(this.viewProp(key, 'end'));\n\t\n\t\t\t\treturn pts;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getTerminalVisual\",\n\t\t\tvalue: function getTerminalVisual(key, orthogonal) {\n\t\t\t\tvar refPts = this.getReferencePoints(key);\n\t\t\t\tvar terminals = [];\n\t\n\t\t\t\tvar getBound = function getBound(pt) {\n\t\t\t\t\treturn new _Rectangle2.default(pt.x, pt.y, 3, 3);\n\t\t\t\t};\n\t\n\t\t\t\tif (this.source) {\n\t\t\t\t\tterminals.push(this.source.getPort(key, this.prop('sourcePort'), refPts[1], orthogonal));\n\t\t\t\t} else terminals.push({ point: refPts[0], direction: _Rectangle2.default.getDirection(getBound(refPts[0]), refPts[1], true) });\n\t\n\t\t\t\tif (this.target) {\n\t\t\t\t\tterminals.push(this.target.getPort(key, this.prop('targetPort'), refPts[0], orthogonal));\n\t\t\t\t} else terminals.push({ point: refPts[1], direction: _Rectangle2.default.getDirection(getBound(refPts[1]), refPts[0], true) });\n\t\t\t\treturn terminals;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getShape\",\n\t\t\tvalue: function getShape(key) {\n\t\t\t\tvar shape = _Cache2.default.get(this.id + \".shape\", key);\n\t\t\t\tif (shape) return shape;\n\t\n\t\t\t\tvar config = this.viewProp(key, 'shape');\n\t\t\t\tshape = _Link2.default.getLink(this.getTerminalVisual(key, config.orthogonal), config, this.prop('startMarker'), this.prop('endMarker'));\n\t\t\t\t_Cache2.default.set(this.id + '.shape', shape, key);\n\t\t\t\treturn shape;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"toString\",\n\t\t\tvalue: function toString() {\n\t\t\t\treturn 'Edge:{' + (!this.source ? 'null' : this.source.id) + '--' + (!this.target ? 'null' : this.target.id) + '}';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\t_get(Object.getPrototypeOf(Edge.prototype), \"destroy\", this).call(this);\n\t\t\t\tthis.setSource(null);\n\t\t\t\tthis.setTarget(null);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Edge;\n\t}(_Cell3.default);\n\t\n\tEdge.namespace = \"Edges\";\n\t\n\texports.default = Edge;\n\t\n\t/*\n\n\tEdge.prototype.isVisible = function() {\n\t\tif (this.graph.getProperty(\"allowDanglingEdges\")) {\n\t\t\treturn (this.source ? this.source.isVisible() : true) && (this.target ? this.target.isVisible() : true) && this.getProperty(\"visible\");\n\t\t} else\n\t\t\treturn this.source && this.target && this.getProperty('visible') && this.source.isVisible() && this.target.isVisible();\n\t};\n\n\t*/\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _Rectangle = __webpack_require__(5);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar registry = {};\n\t\n\tvar Marker = function () {\n\t\n\t\t/** Begin Standard Marker Type **/\n\t\tfunction arrow(size, source, styles) {\n\t\t\tvar sign = source ? -1 : 1;\n\t\t\tvar marker = {\n\t\t\t\tviewBox: new _Rectangle2.default(-5, -5, 10, 10),\n\t\t\t\tsize: size,\n\t\t\t\tref: [4 * sign, 0],\n\t\t\t\tfill: styles.color\n\t\t\t};\n\t\t\tmarker.shape = {\n\t\t\t\tname: 'Polygon',\n\t\t\t\tpoints: [[-2 * sign, 0], [-4 * sign, 4], [4 * sign, 0], [-4 * sign, -4]]\n\t\t\t};\n\t\t\treturn marker;\n\t\t}\n\t\n\t\tfunction triangle(size, source, styles) {\n\t\t\tvar sign = source ? -1 : 1;\n\t\t\tvar marker = {\n\t\t\t\tviewBox: new _Rectangle2.default(-5, -5, 10, 10),\n\t\t\t\tsize: size,\n\t\t\t\tref: [4 * sign, 0],\n\t\t\t\tfill: styles.color\n\t\t\t};\n\t\t\tmarker.shape = {\n\t\t\t\tname: 'Polygon',\n\t\t\t\tpoints: [[-5 * sign, -5], [-5 * sign, 5], [4 * sign, 0]]\n\t\t\t};\n\t\t\treturn marker;\n\t\t}\n\t\n\t\tfunction oval(size, source, styles) {\n\t\t\tvar r = size / 2;\n\t\t\tvar marker = {\n\t\t\t\tviewBox: new _Rectangle2.default(-r, -r, size, size),\n\t\t\t\tsize: size,\n\t\t\t\tref: [0, 0],\n\t\t\t\tfill: styles.color\n\t\t\t};\n\t\t\tmarker.shape = '<ellipse cx=\"0\" cy=\"0\" rx=\"' + r + '\" ry=\"' + r + '\"></ellipse>';\n\t\t\treturn marker;\n\t\t}\n\t\n\t\tfunction diamond(size, source, styles) {\n\t\t\tvar sign = source ? -1 : 1;\n\t\t\tvar marker = {\n\t\t\t\tviewBox: new _Rectangle2.default(-5, -5, 10, 10),\n\t\t\t\tsize: size,\n\t\t\t\tref: [4 * sign, 0],\n\t\t\t\tfill: styles.color\n\t\t\t};\n\t\t\tmarker.shape = '';\n\t\t\treturn marker;\n\t\t}\n\t\t/** End Standard Marker Type **/\n\t\tfunction getMarker(config, source) {\n\t\t\tvar factory = registry[config.type];\n\t\t\tvar marker = factory(config.size, source, config);\n\t\t\tmarker.id = config.id;\n\t\t\treturn marker;\n\t\t}\n\t\n\t\tregistry['arrow'] = arrow;\n\t\tregistry['triangle'] = triangle;\n\t\tregistry['oval'] = oval;\n\t\tregistry['diamond'] = diamond;\n\t\n\t\treturn {\n\t\t\tregistry: registry,\n\t\t\tgetMarker: getMarker\n\t\t};\n\t}();\n\t\n\texports.default = Marker;\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _Utils = __webpack_require__(3);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Layout = function () {\n\t\tfunction Layout() {\n\t\t\tvar config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t\t\t_classCallCheck(this, Layout);\n\t\n\t\t\tif (config.hasOwnProperty(\"orientation\") && _lodash2.default.isString(config.orientation)) {\n\t\t\t\tif (config.orientation.toUpperCase() == \"HORIZONTAL\") config.orientation = Layout.HORIZONTAL;else delete config.orientation;\n\t\t\t}\n\t\t\t_Utils2.default.initConfig(this, config);\n\t\t}\n\t\n\t\t_createClass(Layout, [{\n\t\t\tkey: \"layout\",\n\t\t\tvalue: function layout(root, bounds) {}\n\t\t}, {\n\t\t\tkey: \"reset\",\n\t\t\tvalue: function reset() {}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {}\n\t\t}]);\n\t\n\t\treturn Layout;\n\t}();\n\t\n\tLayout.VERTICAL = 0;\n\tLayout.HORIZONTAL = 1;\n\t\n\tLayout.DEFAULTS = {\n\t\torientation: Layout.VERTICAL\n\t};\n\t\n\texports.default = Layout;\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Layout2 = __webpack_require__(22);\n\t\n\tvar _Layout3 = _interopRequireDefault(_Layout2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar FlowLayout = function (_Layout) {\n\t\t_inherits(FlowLayout, _Layout);\n\t\n\t\tfunction FlowLayout() {\n\t\t\t_classCallCheck(this, FlowLayout);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(FlowLayout).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(FlowLayout, [{\n\t\t\tkey: \"layout\",\n\t\t\tvalue: function layout(root, bounds) {\n\t\t\t\tvar items;\n\t\t\t\tif (!root) items = this.owner.childNodes;else if (_.isArray(root)) items = root;else items = root.getLinkedNodes('target');\n\t\t\t\tif (!items || items.length == 0) return;\n\t\n\t\t\t\tvar x = 0,\n\t\t\t\t    y = 0,\n\t\t\t\t    h = 0,\n\t\t\t\t    node;\n\t\t\t\tvar p1 = 0,\n\t\t\t\t    p2 = 0;\n\t\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\t\tnode = items[i];\n\t\t\t\t\tif (x > 0 && x + this.hgap + node.getProperty(\"width\") > bounds.width) {\n\t\t\t\t\t\t// create new line\n\t\t\t\t\t\ty += h + this.vgap;\n\t\t\t\t\t\tx = 0;h = 0;p1 = 0;p2++;\n\t\t\t\t\t}\n\t\t\t\t\tnode._flPos = [p1, p2];\n\t\t\t\t\tnode.moveTo([bounds.x + x, bounds.y + y]);\n\t\t\t\t\tx += this.hgap + node.getProperty(\"width\");\n\t\t\t\t\tp1++;\n\t\t\t\t\th = h < node.getProperty(\"height\") ? node.getProperty(\"height\") : h;\n\t\t\t\t}\n\t\t\t\tthis.trigger(new Rectangle(bounds.x, bounds.y, bounds.width, y + h));\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn FlowLayout;\n\t}(_Layout3.default);\n\t\n\tFlowLayout.DEFAULTS = {\n\t\thgap: 10,\n\t\tvgap: 10\n\t};\n\t\n\texports.default = FlowLayout;\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _bean = __webpack_require__(1);\n\t\n\tvar _bean2 = _interopRequireDefault(_bean);\n\t\n\tvar _Utils = __webpack_require__(3);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _DomUtils = __webpack_require__(8);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _Layout = __webpack_require__(22);\n\t\n\tvar _Layout2 = _interopRequireDefault(_Layout);\n\t\n\tvar _Rectangle = __webpack_require__(5);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _EventDispatcher = __webpack_require__(13);\n\t\n\tvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\t\n\tvar _GraphBehavior = __webpack_require__(25);\n\t\n\tvar _GraphBehavior2 = _interopRequireDefault(_GraphBehavior);\n\t\n\tvar _Label = __webpack_require__(19);\n\t\n\tvar _Label2 = _interopRequireDefault(_Label);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Renderer = function () {\n\t\tfunction Renderer(id, container) {\n\t\t\tvar config = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\t\t\tvar graph = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];\n\t\n\t\t\t_classCallCheck(this, Renderer);\n\t\n\t\t\tthis.id = id;\n\t\t\tthis.box = _DomUtils2.default.createElement('div', { id: this.id, tabindex: 0, ns: 'graph' }, { overflow: \"hidden\", width: \"100%\", height: \"100%\", position: 'relative' });\n\t\t\tcontainer.appendChild(this.box);\n\t\t\tif (config.layout) {\n\t\t\t\tvar layoutClass = _Utils2.default.getConstructor(config.layout.jsClass, _Layout2.default);\n\t\t\t\tthis.layout = new layoutClass(config.layout.config);\n\t\t\t\tdelete config.layout;\n\t\t\t}\n\t\t\tthis.clear = true;\n\t\t\tthis._translate = [0, 0];\n\t\t\tthis._scale = 1.0;\n\t\t\tthis.graph = graph;\n\t\t\tthis.dispatcher = null;\n\t\t\tthis.graphBehavior = null;\n\t\t\tthis.selectionBehavior = null;\n\t\t\tthis.nodeBehavior = null;\n\t\t\tthis.edgeBehavior = null;\n\t\t\tthis.connectionBehavior = null;\n\t\t\t_Utils2.default.initConfig(this, config);\n\t\n\t\t\t_bean2.default.on(_Label2.default.editor, 'editor.update.*', function (key, value) {\n\t\t\t\tconsole.log(key + '=' + value);\n\t\t\t});\n\t\t}\n\t\n\t\t_createClass(Renderer, [{\n\t\t\tkey: \"viewport\",\n\t\t\tvalue: function viewport(scaled, _viewport) {\n\t\t\t\tif (_lodash2.default.isUndefined(scaled) || _lodash2.default.isNull(scaled)) scaled = false;\n\t\t\t\tif (!_viewport) {\n\t\t\t\t\tvar vp = new _Rectangle2.default(0, 0, this.box.offsetWidth, this.box.offsetHeight);\n\t\t\t\t\tif (scaled) return _Utils2.default.scale(this.translate, this.scale, vp);\n\t\t\t\t\treturn vp;\n\t\t\t\t}\n\t\t\t\tif (!scaled) _viewport = _Utils2.default.scale(this.translate, this.scale, _viewport);\n\t\t\t\tvar w = this.box.offsetWidth;\n\t\t\t\tvar scale = w / _viewport.width;\n\t\t\t\tthis.transform(-_viewport.x * scale, -_viewport.y * scale, scale);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"transform\",\n\t\t\tvalue: function transform() {\n\t\t\t\tvar x = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\t\t\t\tvar y = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\t\t\t\tvar scale = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\t\n\t\t\t\tvar graph = this.graph;\n\t\t\t\tvar root = graph ? graph.currentRoot : null;\n\t\t\t\tif (!_lodash2.default.isNull(x)) {\n\t\t\t\t\tthis._translate[0] = x;\n\t\t\t\t\tif (root) root.viewProp(this.id, 'x', x);\n\t\t\t\t}\n\t\t\t\tif (!_lodash2.default.isNull(y)) {\n\t\t\t\t\tthis._translate[1] = y;\n\t\t\t\t\tif (root) root.viewProp(this.id, 'y', y);\n\t\t\t\t}\n\t\t\t\tif (!_lodash2.default.isNull(scale)) {\n\t\t\t\t\tthis._scale = scale;\n\t\t\t\t\tif (root) root.viewProp(this.id, 'scale', scale);\n\t\t\t\t\t// sync the scale between the dispatcher and the graph\n\t\t\t\t\tvar s = this.dispatcher.scale;\n\t\t\t\t\tif (s != scale) this.dispatcher.scale = scale;\n\t\t\t\t}\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"render\",\n\t\t\tvalue: function render() {\n\t\t\t\tif (!this._graph) return false;\n\t\t\t\t// intialize views\n\t\t\t\tif (this.layout) this.layout.layout(this._graph.currentRoot, this.viewport());\n\t\n\t\t\t\t// create the event dispatcher if necessary.\n\t\t\t\tif (!this.dispatcher) {\n\t\t\t\t\tthis.dispatcher = new _EventDispatcher2.default(this.box, [this.prop('minZoom'), this.prop('maxZoom')]);\n\t\t\t\t\tvar jsClass = void 0;\n\t\t\t\t\tif (this.prop('graphBehavior')) {\n\t\t\t\t\t\tjsClass = _Utils2.default.getConstructor(this.prop('graphBehavior'));\n\t\t\t\t\t\tthis.graphBehavior = new jsClass(this);\n\t\t\t\t\t}\n\t\t\t\t\tthis.dispatcher.register('mouseup.node.label', function (type, ns, target, pos, event) {\n\t\t\t\t\t\tvar _this = this;\n\t\n\t\t\t\t\t\tvar node = this._graph.nodes[target.getAttribute('id')];\n\t\t\t\t\t\tif (!this.dispatcher.dragging && !node._firstSelection) {\n\t\t\t\t\t\t\t_Label2.default._delayEdit = _lodash2.default.delay(function () {\n\t\t\t\t\t\t\t\tif (_Label2.default._delayEdit) {\n\t\t\t\t\t\t\t\t\tdelete _Label2.default._delayEdit;\n\t\t\t\t\t\t\t\t\t_Label2.default.editor.start(node.id, _this.box, node.getLabelBox(_this.id), target, event.nsTarget, _this.scale);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, 250);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.dispatcher.register(['mousedown.*', 'zoom*'], function (type, ns, target, pos, event) {\n\t\t\t\t\t\tif (!_DomUtils2.default.eventFromInput(event)) {\n\t\t\t\t\t\t\t_Label2.default.editor.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t\tthis.dispatcher.start();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderLabel\",\n\t\t\tvalue: function renderLabel(box) {\n\t\t\t\treturn this.constructor.renderLabel(box);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderLink\",\n\t\t\tvalue: function renderLink(shape) {\n\t\t\t\treturn this.constructor.renderLink(shape);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderMarkers\",\n\t\t\tvalue: function renderMarkers(markers) {\n\t\t\t\treturn this.constructor.renderMarkers(markers);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"refresh\",\n\t\t\tvalue: function refresh() {}\n\t\n\t\t\t/**\n\t   * Get the template for the specified key.\n\t   * @param key\n\t   * @param config if the template is a function, this config will be passed as the argument.\n\t   * @param preprocessor if the template contains preprossing elements, such as #{shape}, the preprocessor will be\n\t   * used to render them.\n\t   * @returns {*}\n\t   */\n\t\n\t\t}, {\n\t\t\tkey: \"getTemplate\",\n\t\t\tvalue: function getTemplate(key, config, preprocessor) {\n\t\t\t\tvar t = this.constructor.TEMPLATES[key];\n\t\t\t\tif (t && _lodash2.default.isFunction(t)) {\n\t\t\t\t\tt = t(config);\n\t\t\t\t}\n\t\t\t\t// check if there are any preprocessing tags.\n\t\t\t\tif (preprocessor) {\n\t\t\t\t\tvar parts = t.match(/(#{[^#]*})/g);\n\t\t\t\t\tvar obj = {};\n\t\t\t\t\tfor (var part in parts) {\n\t\t\t\t\t\tpart = parts[part];\n\t\t\t\t\t\tpart = part.substring(2, part.length - 1).trim();\n\t\t\t\t\t\tobj[part] = preprocessor[_lodash2.default.camelCase('render ' + part)](this);\n\t\t\t\t\t}\n\t\t\t\t\tt = _lodash2.default.template(t, { interpolate: /#{([\\s\\S]+?)}/g })(obj);\n\t\t\t\t}\n\t\t\t\treturn t;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"reset\",\n\t\t\tvalue: function reset() {}\n\t\t}, {\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\tdelete this._graph;\n\t\t\t\tdelete this.layout;\n\t\t\t\tif (this.dispatcher) {\n\t\t\t\t\tthis.dispatcher.stop();\n\t\t\t\t\tdelete this.dispatcher;\n\t\t\t\t}\n\t\t\t\tthis.box.innerHTML = '';\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"graph\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._graph;\n\t\t\t},\n\t\t\tset: function set(graph) {\n\t\t\t\tthis._graph = graph;\n\t\t\t\tvar root = graph.currentRoot;\n\t\t\t\tif (root) {\n\t\t\t\t\tthis._translate = [root.viewProp(this.id, 'x') || 0, root.viewProp(this.id, 'y') || 0];\n\t\t\t\t\tthis._scale = root.viewProp(this.id, 'scale') || 1.0;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"translate\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._translate;\n\t\t\t},\n\t\t\tset: function set(t) {\n\t\t\t\tthis.transform(t[0], t[1]);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"scale\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._scale;\n\t\t\t},\n\t\t\tset: function set(k) {\n\t\t\t\tswitch (k) {\n\t\t\t\t\tcase \"in\":\n\t\t\t\t\t\tk = this.scale * this.prop(\"zoomFactor\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"out\":\n\t\t\t\t\t\tk = this.scale / this.prop(\"zoomFactor\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"actual\":\n\t\t\t\t\t\tk = 1.0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"fit\":\n\t\t\t\t\t\tvar gridSize = this.prop(\"gridSize\") * 2;\n\t\n\t\t\t\t\t\tvar gBounds = this.getBounds();\n\t\t\t\t\t\tvar vBounds = this.viewport();\n\t\n\t\t\t\t\t\tvBounds.width -= gridSize;\n\t\t\t\t\t\tvBounds.height -= gridSize;\n\t\n\t\t\t\t\t\t/* Do not zoom more than actual if graph already fits into the bounds */\n\t\t\t\t\t\tk = Math.min(vBounds.width / gBounds.width, vBounds.height / gBounds.height, 1.0);\n\t\n\t\t\t\t\t\t//TODO: Add centering code here or trigger an event for that\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (_lodash2.default.isString(k)) k = parseFloat(k);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.transform(null, null, k);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Renderer;\n\t}();\n\t\n\tRenderer.DEFAULTS = {\n\t\tdefaultClickMode: \"pan\",\n\t\thideOutline: false,\n\t\tsingleSelect: true,\n\t\tdraggable: true,\n\t\tgridEnabled: false,\n\t\tguidesEnabled: true,\n\t\tgridSize: 30,\n\t\tmaxZoom: 4.0,\n\t\tminZoom: 0.2,\n\t\tzoomFactor: 1.2,\n\t\tmaskOpacity: 0.5,\n\t\tgraphBehavior: _GraphBehavior2.default\n\t};\n\t\n\texports.default = Renderer;\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Behavior2 = __webpack_require__(26);\n\t\n\tvar _Behavior3 = _interopRequireDefault(_Behavior2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by tong on 6/28/2016.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\t\n\t/**\n\t * Graph handler handles Panning and Zoom and rubber band selection\n\t */\n\t\n\tvar GraphBehavior = function (_Behavior) {\n\t\t_inherits(GraphBehavior, _Behavior);\n\t\n\t\tfunction GraphBehavior(renderer) {\n\t\t\t_classCallCheck(this, GraphBehavior);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(GraphBehavior).call(this, renderer));\n\t\n\t\t\tvar dispatcher = renderer.dispatcher;\n\t\t\tvar f = function f(type, ns, graph, pos, event) {\n\t\t\t\t//Cursor.updateCursor(type, ns, graph, event);\n\t\t\t};\n\t\t\tdispatcher.register('drag*.graph', _this.handleDrag, _this);\n\t\t\tdispatcher.register('zoom.*', _this.handleZoom, _this);\n\t\t\t//dispatcher.register(['mousedown.graph', 'mouseenter.graph', 'mouseleave.graph'], f);\n\t\t\t_this.offset = null;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(GraphBehavior, [{\n\t\t\tkey: 'handleZoom',\n\t\t\tvalue: function handleZoom(type, ns, graph, pos, event) {\n\t\t\t\tthis.renderer.transform(null, null, event.scale);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'handleDrag',\n\t\t\tvalue: function handleDrag(type, ns, graph, pos, event) {\n\t\t\t\tif (type == 'dragstart') {\n\t\t\t\t\tvar pan = this.renderer.prop(\"defaultClickMode\") == \"pan\" ^ (event.ctrlKey || event.shiftKey);\n\t\t\t\t\tif (!pan) return;\n\t\t\t\t\tvar t = this.renderer.translate;\n\t\t\t\t\tthis.offset = [t[0] - pos[0], t[1] - pos[1]];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!this.offset) return;\n\t\t\t\tthis.renderer.transform(pos[0] + this.offset[0], pos[1] + this.offset[1]);\n\t\t\t\tif (type == 'dragend') {\n\t\t\t\t\t//Cursor.updateCursor('mouseup', ns, graph, event);\n\t\t\t\t\tdelete this.offset;\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn GraphBehavior;\n\t}(_Behavior3.default);\n\t\n\texports.default = GraphBehavior;\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Behavior = function () {\n\t\tfunction Behavior(renderer) {\n\t\t\t_classCallCheck(this, Behavior);\n\t\n\t\t\tthis.renderer = renderer;\n\t\t}\n\t\n\t\t_createClass(Behavior, [{\n\t\t\tkey: \"destroy\",\n\t\t\tvalue: function destroy() {\n\t\t\t\tdelete this.renderer;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Behavior;\n\t}();\n\t\n\texports.default = Behavior;\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _lodash = __webpack_require__(6);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _base = __webpack_require__(2);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tvar _DomUtils = __webpack_require__(8);\n\t\n\tvar _DomUtils2 = _interopRequireDefault(_DomUtils);\n\t\n\tvar _Renderer2 = __webpack_require__(24);\n\t\n\tvar _Renderer3 = _interopRequireDefault(_Renderer2);\n\t\n\tvar _StringBuffer = __webpack_require__(9);\n\t\n\tvar _StringBuffer2 = _interopRequireDefault(_StringBuffer);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar NS = 'http://www.w3.org/2000/svg';\n\tif (typeof SVGElement != \"undefined\") {\n\t\tvar svg = document.createElementNS(NS, \"svg\");\n\t\tsvg.innerHTML = '<circle/>';\n\t\tif (svg.firstChild !== \"[object SVGCircleElement]\") {\n\t\t\tObject.defineProperties(SVGElement.prototype, {\n\t\t\t\t\"outerHTML\": {\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tget: function get() {\n\t\t\t\t\t\tvar $node, $temp;\n\t\t\t\t\t\t$temp = document.createElement('div');\n\t\t\t\t\t\t$node = this.cloneNode(true);\n\t\t\t\t\t\t$temp.appendChild($node);\n\t\t\t\t\t\treturn $temp.innerHTML;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"innerHTML\": {\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tget: function get() {\n\t\t\t\t\t\tvar s = this.outerHTML;\n\t\t\t\t\t\tvar ropen = new RegExp(\"<\" + this.nodeName + '\\\\b(?:([\"\\'])[^\"]*?(\\\\1)|[^>])*>', \"i\");\n\t\t\t\t\t\tvar rclose = new RegExp(\"<\\/\" + this.nodeName + \">$\", \"i\");\n\t\t\t\t\t\treturn s.replace(ropen, \"\").replace(rclose, \"\");\n\t\t\t\t\t},\n\t\t\t\t\tset: function set(markup) {\n\t\t\t\t\t\t// empty el first.\n\t\t\t\t\t\tvar child = void 0;\n\t\t\t\t\t\twhile (child = this.lastChild) {\n\t\t\t\t\t\t\tthis.removeChild(child);\n\t\t\t\t\t\t}var buf = new _StringBuffer2.default();\n\t\t\t\t\t\tbuf.append('<svg>').append(markup).append('</svg');\n\t\t\t\t\t\tvar $temp = _DomUtils2.default.createElement('div', null, null, buf.toString()).firstElementChild;\n\t\t\t\t\t\twhile ($temp.firstChild) {\n\t\t\t\t\t\t\tthis.appendChild($temp.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// Define the toDataURL for SVG\n\t\tSVGElement.prototype.toDataURL = function (type) {\n\t\t\tvar options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t\t\tvar _svg = this;\n\t\n\t\t\tvar debug = function debug(msg) {};\n\t\n\t\t\tif (options['debug'] == true && typeof console != 'undefined') debug = function debug(msg) {\n\t\t\t\tconsole.log(\"SVG.toDataURL:\", msg);\n\t\t\t};\n\t\n\t\t\tfunction exportSVG() {\n\t\t\t\tvar svg_xml = _svg.outerHTML;\n\t\t\t\tvar svg_dataurl = base64dataURLencode(svg_xml);\n\t\t\t\tdebug(type + \" length: \" + svg_dataurl.length);\n\t\n\t\t\t\t// NOTE double data carrier\n\t\t\t\tif (options.callback) options.callback(svg_dataurl);\n\t\t\t\treturn svg_dataurl;\n\t\t\t}\n\t\n\t\t\tfunction base64dataURLencode(s) {\n\t\t\t\tvar b64 = \"data:image/svg+xml;base64,\";\n\t\n\t\t\t\t// https://developer.mozilla.org/en/DOM/window.btoa\n\t\t\t\tif (window.btoa) {\n\t\t\t\t\tdebug(\"using window.btoa for base64 encoding\");\n\t\t\t\t\tb64 += btoa(s);\n\t\t\t\t} else {\n\t\t\t\t\tdebug(\"using custom base64 encoder\");\n\t\t\t\t\tb64 += _base2.default.encode(s);\n\t\t\t\t}\n\t\n\t\t\t\treturn b64;\n\t\t\t}\n\t\n\t\t\t// Native export doesn't work very well. should use canvg instead.\n\t\t\tfunction exportImage(type) {\n\t\t\t\tvar canvas = document.createElement(\"canvas\");\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\t\n\t\t\t\t// TODO: if (options.keepOutsideViewport), do some translation magic?\n\t\n\t\t\t\tvar svg_img = new Image();\n\t\t\t\tvar svg_xml = _svg.outerHTML;\n\t\t\t\tsvg_img.src = base64dataURLencode(svg_xml);\n\t\n\t\t\t\tsvg_img.onload = function () {\n\t\t\t\t\tdebug(\"exported image size: \" + [svg_img.width, svg_img.height]);\n\t\t\t\t\tcanvas.width = svg_img.width;\n\t\t\t\t\tcanvas.height = svg_img.height;\n\t\t\t\t\tctx.drawImage(svg_img, 0, 0);\n\t\n\t\t\t\t\t// SECURITY_ERR WILL HAPPEN NOW\n\t\t\t\t\tvar image_dataurl = canvas.toDataURL(type);\n\t\t\t\t\tdebug(type + \" length: \" + image_dataurl.length);\n\t\n\t\t\t\t\tif (options.callback) options.callback(image_dataurl);else debug(\"WARNING: no callback set, so nothing happens.\");\n\t\t\t\t};\n\t\n\t\t\t\tsvg_img.onerror = function () {\n\t\t\t\t\tdebug(\"Can't export! Maybe your browser doesn't support \" + \"SVG in img element or SVG input for Canvas drawImage?\\n\" + \"http://en.wikipedia.org/wiki/SVG#Native_support\");\n\t\t\t\t};\n\t\n\t\t\t\t// NOTE: will not return anything\n\t\t\t}\n\t\n\t\t\tfunction exportImageCanvg(type) {\n\t\t\t\tif (!canvg) return null;\n\t\t\t\tvar canvas = _DomUtils2.default.createElement('canvas', null, { display: \"none\" });\n\t\t\t\tdocument.body.appendChild(canvas);\n\t\t\t\tif (!options.keepOutsideViewport) {\n\t\t\t\t\tcanvg(canvas, _svg.outerHTML);\n\t\t\t\t} else {\n\t\t\t\t\tvar padding = options.padding || 0;\n\t\t\t\t\tvar scale = 1.0;\n\t\t\t\t\tvar translate = [0, 0];\n\t\t\t\t\tvar bbox = _svg.getBBox();\n\t\t\t\t\tdebug(\"detected svg dimensions \" + [bbox.x, bbox.y, bbox.width, bbox.height]);\n\t\t\t\t\tvar transform = _svg.firstElementChild.getAttribute('transform');\n\t\t\t\t\tif (transform) {\n\t\t\t\t\t\tdebug('detected svg transform ' + transform);\n\t\t\t\t\t\ttransform = SVGRenderer.transform(transform);\n\t\t\t\t\t\ttranslate = transform.translate;\n\t\t\t\t\t\tscale = transform.scale;\n\t\t\t\t\t}\n\t\t\t\t\tvar buf = new _StringBuffer2.default();\n\t\t\t\t\tbuf.append('<svg width=\"').append(bbox.width + 2 * padding).append('px\" height=\"').append(bbox.height + 2 * padding).append('px\"><g transform=\"translate(').append(-bbox.x + translate[0] + padding).append(',').append(-bbox.y + translate[1] + padding).append(')scale(').append(scale).append(')\">').append(_svg.firstElementChild.innerHTML).append('</g></svg>');\n\t\t\t\t\tcanvg(canvas, buf.toString());\n\t\t\t\t}\n\t\t\t\tvar image_dataurl = canvas.toDataURL(type);\n\t\t\t\tif (options.callback) options.callback(image_dataurl);\n\t\t\t\tcanvas.parentNode.removeChild(canvas);\n\t\t\t\treturn image_dataurl;\n\t\t\t}\n\t\n\t\t\tif (!type) type = \"image/svg+xml\";\n\t\n\t\t\tif (options.keepNonSafe) debug(\"NOTE: keepNonSafe is NOT supported and will be ignored!\");\n\t\t\tif (options.keepOutsideViewport) debug(\"NOTE: keepOutsideViewport is only supported with canvg exporter.\");\n\t\n\t\t\tswitch (type) {\n\t\t\t\tcase \"image/svg+xml\":\n\t\t\t\t\treturn exportSVG();\n\t\t\t\tcase \"image/png\":\n\t\t\t\tcase \"image/jpeg\":\n\t\t\t\t\tif (!options.renderer) {\n\t\t\t\t\t\tif (window.canvg) options.renderer = \"canvg\";else options.renderer = \"native\";\n\t\t\t\t\t}\n\t\t\t\t\tswitch (options.renderer) {\n\t\t\t\t\t\tcase \"canvg\":\n\t\t\t\t\t\t\tdebug(\"using canvg renderer for \" + type + \" image export\");\n\t\t\t\t\t\t\treturn exportImageCanvg(type);\n\t\t\t\t\t\tcase \"native\":\n\t\t\t\t\t\t\tdebug(\"using native renderer for \" + type + \" export. THIS MIGHT FAIL.\");\n\t\t\t\t\t\t\treturn exportImage(type);\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tdebug(\"unknown image renderer given, doing noting (\" + options.renderer + \")\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tdebug(\"Sorry! Exporting as '\" + type + \"' is not supported!\");\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t}\n\t\n\tvar SVGRenderer = function (_Renderer) {\n\t\t_inherits(SVGRenderer, _Renderer);\n\t\n\t\tfunction SVGRenderer() {\n\t\t\t_classCallCheck(this, SVGRenderer);\n\t\n\t\t\treturn _possibleConstructorReturn(this, Object.getPrototypeOf(SVGRenderer).apply(this, arguments));\n\t\t}\n\t\n\t\t_createClass(SVGRenderer, [{\n\t\t\tkey: \"render\",\n\t\t\tvalue: function render() {\n\t\t\t\tvar result = _get(Object.getPrototypeOf(SVGRenderer.prototype), \"render\", this).call(this);\n\t\t\t\tif (result) {\n\t\t\t\t\tvar root = this.graph.currentRoot;\n\t\t\t\t\tvar buf = new _StringBuffer2.default('<svg width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">');\n\t\t\t\t\tvar t = this.translate;\n\t\t\t\t\tbuf.append('<g transform=\"translate(').append(t[0]).append(',').append(t[1]).append(')scale(').append(this.scale).append(')\">');\n\t\t\t\t\tbuf.append(this.renderDefs());\n\t\t\t\t\tbuf.append(root.render(this));\n\t\t\t\t\tbuf.append('</g></svg>');\n\t\t\t\t\tthis.box.innerHTML = buf.toString();\n\t\t\t\t\tthis.svg = this.box.firstElementChild;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderDefs\",\n\t\t\tvalue: function renderDefs() {\n\t\t\t\tvar buf = new _StringBuffer2.default('<defs>');\n\t\t\t\tbuf.append(this.getTemplate('Grid', this.prop(\"gridSize\")));\n\t\t\t\tvar markers = this.graph.markers;\n\t\t\t\tif (markers.length > 0) buf.append(SVGRenderer.renderMarkers(markers));\n\t\t\t\tbuf.append('</defs>');\n\t\t\t\treturn buf.toString();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"refresh\",\n\t\t\tvalue: function refresh() {\n\t\t\t\tif (!this.svg) return;\n\t\t\t\tvar g = this.svg.querySelector('g');\n\t\t\t\tvar t = this.translate;\n\t\t\t\tg.setAttribute('transform', 'translate(' + t[0] + ',' + t[1] + ')scale(' + this.scale + ')');\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: \"renderMarkers\",\n\t\t\tvalue: function renderMarkers(markers) {\n\t\t\t\tvar buf = new _StringBuffer2.default(),\n\t\t\t\t    str1 = void 0,\n\t\t\t\t    str2 = void 0;\n\t\t\t\tmarkers.forEach(function (marker) {\n\t\t\t\t\tstr1 = this.TEMPLATES['Marker'](marker);\n\t\t\t\t\tstr2 = marker.shape;\n\t\t\t\t\tif (!_lodash2.default.isString(str2)) str2 = this.renderShape(str2);\n\t\t\t\t\tstr1 = str1.replace(/\\#\\{shape\\}/, str2);\n\t\t\t\t\tbuf.append(str1);\n\t\t\t\t}, this);\n\t\t\t\treturn buf.toString();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderLabel\",\n\t\t\tvalue: function renderLabel(box) {\n\t\t\t\treturn this.TEMPLATES['Label'](box);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderShape\",\n\t\t\tvalue: function renderShape(shape) {\n\t\t\t\tvar template = this.TEMPLATES[shape.name];\n\t\t\t\tif (_lodash2.default.isString(template)) template = _lodash2.default.template(template);\n\t\t\t\treturn template(shape);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"renderLink\",\n\t\t\tvalue: function renderLink(shape) {\n\t\t\t\tvar points = shape.points;\n\t\t\t\tvar controlPts = shape.controlPts;\n\t\t\t\tif (!points || points.length == 0) return '';\n\t\n\t\t\t\tif (!controlPts && shape.round) {\n\t\t\t\t\t// render rounded line joins.\n\t\t\t\t\tvar newPts = [];\n\t\t\t\t\tcontrolPts = [];\n\t\t\t\t\tvar prev = points[0],\n\t\t\t\t\t    next = void 0,\n\t\t\t\t\t    d1 = void 0,\n\t\t\t\t\t    d2 = void 0,\n\t\t\t\t\t    corner = void 0;\n\t\t\t\t\tnewPts.push(prev);\n\t\t\t\t\tfor (var i = 1; i < points.length - 1; i++) {\n\t\t\t\t\t\tnext = points[i];\n\t\t\t\t\t\t// set the control point first.\n\t\t\t\t\t\tcontrolPts[2 * i] = [next, next];\n\t\t\t\t\t\t// check the size of the corner.\n\t\t\t\t\t\td1 = prev.distance(next);\n\t\t\t\t\t\td2 = next.distance(points[i + 1]);\n\t\t\t\t\t\tcorner = Math.min(shape.round, d1 / 2, d2 / 2);\n\t\t\t\t\t\t// split the point into two.\n\t\t\t\t\t\tnewPts.push(next.getDirection(prev).scale(corner).translate(next));\n\t\t\t\t\t\tnewPts.push(next.getDirection(points[i + 1]).scale(corner).translate(next));\n\t\t\t\t\t\tprev = next;\n\t\t\t\t\t}\n\t\t\t\t\tnewPts.push(points[points.length - 1]);\n\t\t\t\t\tpoints = newPts;\n\t\t\t\t}\n\t\t\t\tvar buf = new _StringBuffer2.default('M'),\n\t\t\t\t    point = void 0;\n\t\t\t\tfor (var _i = 0; _i < points.length; _i++) {\n\t\t\t\t\tpoint = points[_i];\n\t\t\t\t\tif (_i == 0) buf.append(point);else {\n\t\t\t\t\t\tif (controlPts && controlPts[_i]) {\n\t\t\t\t\t\t\tbuf.append(' C ');\n\t\t\t\t\t\t\tfor (var j = 0; j < controlPts[_i].length; j++) {\n\t\t\t\t\t\t\t\tbuf.append(controlPts[_i][j]).append(' ');\n\t\t\t\t\t\t\t}buf.append(point);\n\t\t\t\t\t\t} else buf.append(' L ').append(point);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar d = buf.toString();\n\t\t\t\tbuf.clear();\n\t\t\t\tif (shape.showGauge) buf.append('<path style=\"stroke: white; stroke-width: 9; visibility: hidden; pointer-events: stroke;\" d=\"').append(d).append('\"/>');\n\t\t\t\tbuf.append('<path d=\"').append(d).append('\"');\n\t\t\t\tif (shape.startMarker || shape.endMarker) {\n\t\t\t\t\tbuf.append(' style=\"');\n\t\t\t\t\tif (shape.startMarker) buf.append('marker-start: url(#').append(_lodash2.default.isString(shape.startMarker) ? shape.startMarker : shape.startMarker.id).append(');');\n\t\t\t\t\tif (shape.endMarker) buf.append('marker-end: url(#').append(_lodash2.default.isString(shape.endMarker) ? shape.endMarker : shape.endMarker.id).append(');');\n\t\t\t\t\tbuf.append('\"');\n\t\t\t\t}\n\t\t\t\tbuf.append('/>');\n\t\t\t\treturn buf.toString();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"appendContent\",\n\t\t\tvalue: function appendContent(el, content) {\n\t\t\t\tvar buf = new _StringBuffer2.default();\n\t\t\t\tbuf.append('<svg>').append(content).append('</svg');\n\t\t\t\tvar temp = _DomUtils2.default.createElement('div', null, null, buf.toString()).firstElementChild;\n\t\n\t\t\t\twhile (temp.firstChild) {\n\t\t\t\t\tel.appendChild(temp.firstChild);\n\t\t\t\t}return el;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"transform\",\n\t\t\tvalue: function transform(_transform) {\n\t\t\t\tvar translate = [0, 0],\n\t\t\t\t    scale = 1.0;\n\t\t\t\t//\n\t\t\t\tvar parts = _transform.match(/translate\\(\\s*([^)]+)/);\n\t\t\t\tif (parts) {\n\t\t\t\t\tvar m = parts[1].trim().match(/([\\d.-]+)[ ,]([\\d.-]+)/);\n\t\t\t\t\tif (m) {\n\t\t\t\t\t\ttranslate[0] = parseFloat(m[1]) || 0;\n\t\t\t\t\t\ttranslate[1] = parseFloat(m[2]) || 0;\n\t\t\t\t\t} else translate[0] = translate[1] = parseFloat(parts[1]);\n\t\t\t\t}\n\t\t\t\tparts = _transform.match(/scale\\(\\s*([^)]+)/);\n\t\t\t\tif (parts) scale = parseFloat(parts[1]) || 1.0;\n\t\n\t\t\t\treturn { translate: translate, scale: scale };\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn SVGRenderer;\n\t}(_Renderer3.default);\n\t\n\tSVGRenderer.TEMPLATES = {\n\t\t$root: '<g id=\"${id}\" class=\"${className}\">#{children}</g>',\n\t\t$node: '<g id=\"${id}\" class=\"${className}\" ns=\"${namespace}\" transform=\"translate(${x},${y})\">#{shape}#{label}</g>',\n\t\t$edge: '<g id=\"${id}\" class=\"${className}\" ns=\"${namespace}\">#{shape}#{label}</g>',\n\t\tEllipse: '<ellipse cx=\"0\" cy=\"0\" rx=\"${width/2}\" ry=\"${height/2}\"/>',\n\t\tRectangle: '<rect x=\"${-width/2}\" y=\"${-height/2}\" width=\"${width}\" height=\"${height}\" rx=\"9\" ry=\"9\"/>',\n\t\tTriangle: '<polygon points=\"${-width/2},${-height/2} ${width/2},${-height/2} 0,${height/2}\"/>',\n\t\tRhombus: '<polygon points=\"0,${-height/2} ${width/2},0 0,${height/2} ${-width/2},0\"/>',\n\t\tHexagon: function Hexagon(config) {\n\t\t\tvar vertical = config.direction == 'north' || config.direction == 'south';\n\t\t\tif (vertical) return '<polygon points=\"0,${-height/2} ${width/2},${-height/4} ${width/2},${height/4} 0,${height/2} ${-width/2},${height/4} ${-width/2},${-height/4}\"/>';else return '<polygon points=\"${-width/2},0 ${width/4},${-height/2} ${width/4},${-height/2} ${width/2},0 ${width/4},${height/2} ${-width/4},${height/2}\"/>';\n\t\t},\n\t\tPolygon: function Polygon(shape) {\n\t\t\tvar buf = new _StringBuffer2.default('<polygon points=\"');\n\t\t\tshape.points.forEach(function (pt) {\n\t\t\t\tbuf.append(pt[0]).append(',').append(pt[1]).append(' ');\n\t\t\t});\n\t\t\tbuf.removeLast();\n\t\t\tbuf.append('\"/>');\n\t\t\treturn buf.toString();\n\t\t},\n\t\tImage: function Image(config) {\n\t\t\treturn '<image x=\"${-width/2}\" y=\"${-height/2}\" width=\"${width}\" height=\"${height}\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"' + config.image + '\"/>';\n\t\t},\n\t\tMarker: function Marker(marker) {\n\t\t\treturn (\"\\n<marker id=\\\"\" + marker.id + \"\\\" markerWidth=\\\"\" + marker.size + \"\\\" markerHeight=\\\"\" + marker.size + \"\\\" refx=\\\"\" + marker.ref[0] + \"\\\" \\nrefy=\\\"\" + marker.ref[1] + \"\\\" orient=\\\"auto\\\" viewbox=\\\"\" + marker.viewBox.x + \" \" + marker.viewBox.y + \" \" + marker.viewBox.width + \" \" + marker.viewBox.height + \"\\\"\\nmarkerUnits=\\\"userSpaceOnUse\\\" \" + (marker.fill ? \"style=\\\"stroke: \" + marker.fill + \";fill:\" + marker.fill + \"\\\"\" : '') + \">#{shape}</marker>\\n\").trim();\n\t\t},\n\t\tGrid: function Grid(size) {\n\t\t\treturn (\"\\n<pattern id=\\\"GridPattern\\\" width=\\\"\" + size + \"\\\" height=\\\"\" + size + \"\\\" patternUnits=\\\"userSpaceOnUse\\\">\\n\\t<ellipse cx=\\\"0\\\" cy=\\\"0\\\" rx=\\\"1\\\" ry=\\\"1\\\" fill=\\\"#999999\\\"/>\\n\\t<ellipse cx=\\\"0\\\" cy=\\\"\" + size + \"\\\" rx=\\\"1\\\" ry=\\\"1\\\" fill=\\\"#999999\\\"/>\\n\\t<ellipse cx=\\\"\" + size + \"\\\" cy=\\\"0\\\" rx=\\\"1\\\" ry=\\\"1\\\" fill=\\\"#999999\\\"/>\\n\\t<ellipse cx=\\\"\" + size + \"\\\" cy=\\\"\" + size + \"\\\" rx=\\\"1\\\" ry=\\\"1\\\" fill=\\\"#999999\\\"/>\\n</pattern>\").trim();\n\t\t},\n\t\tLabel: _lodash2.default.template(\"\\n<% var box = _.has(data, \\\"dx\\\") ? data : (data.getLabelBox ? data.getLabelBox() : null); \\n   if (box) {%>\\n\\t<g <% if (box.config && box.config.class) {%>class=\\\"<%=box.config.class%>\\\"<%}%>\\t\\t<% if (box.config && box.config.ns) {%>ns=\\\"<%=box.config.ns%>\\\"<%}%>\\t\\ttext-anchor=\\\"<%=box.anchor%>\\\"\\t\\ttransform=\\\"translate(<%=box.bounds.x%>,<%=box.bounds.y%>)<% if (box.config && box.config.rotation) {%>rotate(<%=box.config.rotation%> <%=box.pivot[0]%> <%=box.pivot[1]%>)<%}%>\\\">\\n\\t<% if (box.config.backgroundStyle) {%>\\n\\t\\t<rect x=\\\"<%=-box.bounds.width/2%>\\\" y=\\\"<%=-box.bounds.height/2%>\\\" width=\\\"<%=box.bounds.width%>\\\" height=\\\"<%=box.bounds.height%>\\\" style=\\\"<%=box.config.backgroundStyle%>\\\"/>\\n\\t<% } if (_.isArray(box.label)) { \\n\\t\\t_.each(box.label, function(value, line) {%>\\n\\t\\t\\t<text <% if (box.config && box.config.textStyle) {%>style=\\\"<%=box.config.textStyle%>\\\"<%}%>\\t\\t\\t\\tdx=\\\"<%=box.dx%>\\\" dy=\\\"<%=box.dy + box.lineHeight * line%>\\\"><%=value%></text>\\n\\t\\t<%});} else { %>\\n\\t\\t\\t<text><%=box.label%></text>\\n\\t\\t<%}%>\\n\\t</g>\\n<%}%>\\n\".trim(), { variable: \"data\" })\n\t};\n\t\n\texports.default = SVGRenderer;\n\n/***/ }\n/******/ ])\n});\n;\n"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e07ff498019e95851416\n **/","import Events from \"bean\";\nimport Base64 from \"./util/base64\";\nimport Cache from \"./util/Utils\";\nimport Utils from \"./util/Utils\";\nimport DomUtils from \"./util/DomUtils\";\nimport StringBuffer from \"./util/StringBuffer\";\nimport Point from \"./geometry/Point\";\nimport Line from \"./geometry/Line\";\nimport Shape from \"./geometry/Shape\";\nimport Rectangle from \"./geometry/Rectangle\";\nimport Ellipse from \"./geometry/Ellipse\";\nimport Link from \"./geometry/Link\";\nimport EventDispatcher from \"./event/EventDispatcher\";\nimport Graph from \"./graph/Graph\";\nimport Cell from \"./graph/Cell\";\nimport Node from \"./graph/Node\";\nimport Edge from \"./graph/Edge\";\nimport Layout from \"./layout/Layout\";\nimport FlowLayout from \"./layout/FlowLayout\";\nimport Label from \"./view/Label\";\nimport Marker from \"./view/Marker\";\nimport Renderer from \"./view/Renderer\";\nimport SVGRenderer from \"./view/SVGRenderer\";\nimport GraphBehavior from \"./behavior/GraphBehavior\";\n\nShape.addShape(\"Rectangle\", Rectangle);\nShape.addShape(\"Ellipse\", Ellipse);\n\nexport default {\n\tEvents,\n\tBase64,\n\tCache,\n\tUtils,\n\tDomUtils,\n\tStringBuffer,\n\tPoint,\n\tLine,\n\tShape,\n\tRectangle,\n\tEllipse,\n\tLink,\n\tEventDispatcher,\n\tLabel,\n\tMarker,\n\tGraph,\n\tCell,\n\tNode,\n\tEdge,\n\tLayout,\n\tFlowLayout,\n\tRenderer,\n\tSVGRenderer,\n\tGraphBehavior\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","/*!\n  * Bean - copyright (c) Jacob Thornton 2011-2012\n  * https://github.com/fat/bean\n  * MIT license\n  */\n(function (name, context, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else context[name] = definition()\n})('bean', this, function (name, context) {\n  name    = name    || 'bean'\n  context = context || this\n\n  var win            = window\n    , old            = context[name]\n    , namespaceRegex = /[^\\.]*(?=\\..*)\\.|.*/\n    , nameRegex      = /\\..*/\n    , addEvent       = 'addEventListener'\n    , removeEvent    = 'removeEventListener'\n    , doc            = document || {}\n    , root           = doc.documentElement || {}\n    , W3C_MODEL      = root[addEvent]\n    , eventSupport   = W3C_MODEL ? addEvent : 'attachEvent'\n    , ONE            = {} // singleton for quick matching making add() do one()\n\n    , slice          = Array.prototype.slice\n    , str2arr        = function (s, d) { return s.split(d || ' ') }\n    , isString       = function (o) { return typeof o == 'string' }\n    , isFunction     = function (o) { return typeof o == 'function' }\n\n      // events that we consider to be 'native', anything not in this list will\n      // be treated as a custom event\n    , standardNativeEvents =\n        'click dblclick mouseup mousedown contextmenu '                  + // mouse buttons\n        'mousewheel mousemultiwheel DOMMouseScroll '                     + // mouse wheel\n        'mouseover mouseout mousemove selectstart selectend '            + // mouse movement\n        'keydown keypress keyup '                                        + // keyboard\n        'orientationchange '                                             + // mobile\n        'focus blur change reset select submit '                         + // form elements\n        'load unload beforeunload resize move DOMContentLoaded '         + // window\n        'readystatechange message '                                      + // window\n        'error abort scroll '                                              // misc\n      // element.fireEvent('onXYZ'... is not forgiving if we try to fire an event\n      // that doesn't actually exist, so make sure we only do these on newer browsers\n    , w3cNativeEvents =\n        'show '                                                          + // mouse buttons\n        'input invalid '                                                 + // form elements\n        'touchstart touchmove touchend touchcancel '                     + // touch\n        'gesturestart gesturechange gestureend '                         + // gesture\n        'textinput '                                                     + // TextEvent\n        'readystatechange pageshow pagehide popstate '                   + // window\n        'hashchange offline online '                                     + // window\n        'afterprint beforeprint '                                        + // printing\n        'dragstart dragenter dragover dragleave drag drop dragend '      + // dnd\n        'loadstart progress suspend emptied stalled loadmetadata '       + // media\n        'loadeddata canplay canplaythrough playing waiting seeking '     + // media\n        'seeked ended durationchange timeupdate play pause ratechange '  + // media\n        'volumechange cuechange '                                        + // media\n        'checking noupdate downloading cached updateready obsolete '       // appcache\n\n      // convert to a hash for quick lookups\n    , nativeEvents = (function (hash, events, i) {\n        for (i = 0; i < events.length; i++) events[i] && (hash[events[i]] = 1)\n        return hash\n      }({}, str2arr(standardNativeEvents + (W3C_MODEL ? w3cNativeEvents : ''))))\n\n      // custom events are events that we *fake*, they are not provided natively but\n      // we can use native events to generate them\n    , customEvents = (function () {\n        var isAncestor = 'compareDocumentPosition' in root\n              ? function (element, container) {\n                  return container.compareDocumentPosition && (container.compareDocumentPosition(element) & 16) === 16\n                }\n              : 'contains' in root\n                ? function (element, container) {\n                    container = container.nodeType === 9 || container === window ? root : container\n                    return container !== element && container.contains(element)\n                  }\n                : function (element, container) {\n                    while (element = element.parentNode) if (element === container) return 1\n                    return 0\n                  }\n          , check = function (event) {\n              var related = event.relatedTarget\n              return !related\n                ? related == null\n                : (related !== this && related.prefix !== 'xul' && !/document/.test(this.toString())\n                    && !isAncestor(related, this))\n            }\n\n        return {\n            mouseenter: { base: 'mouseover', condition: check }\n          , mouseleave: { base: 'mouseout', condition: check }\n          , mousewheel: { base: /Firefox/.test(navigator.userAgent) ? 'DOMMouseScroll' : 'mousewheel' }\n        }\n      }())\n\n      // we provide a consistent Event object across browsers by taking the actual DOM\n      // event object and generating a new one from its properties.\n    , Event = (function () {\n            // a whitelist of properties (for different event types) tells us what to check for and copy\n        var commonProps  = str2arr('altKey attrChange attrName bubbles cancelable ctrlKey currentTarget ' +\n              'detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey '  +\n              'srcElement target timeStamp type view which propertyName')\n          , mouseProps   = commonProps.concat(str2arr('button buttons clientX clientY dataTransfer '      +\n              'fromElement offsetX offsetY pageX pageY screenX screenY toElement'))\n          , mouseWheelProps = mouseProps.concat(str2arr('wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ ' +\n              'axis')) // 'axis' is FF specific\n          , keyProps     = commonProps.concat(str2arr('char charCode key keyCode keyIdentifier '          +\n              'keyLocation location'))\n          , textProps    = commonProps.concat(str2arr('data'))\n          , touchProps   = commonProps.concat(str2arr('touches targetTouches changedTouches scale rotation'))\n          , messageProps = commonProps.concat(str2arr('data origin source'))\n          , stateProps   = commonProps.concat(str2arr('state'))\n          , overOutRegex = /over|out/\n            // some event types need special handling and some need special properties, do that all here\n          , typeFixers   = [\n                { // key events\n                    reg: /key/i\n                  , fix: function (event, newEvent) {\n                      newEvent.keyCode = event.keyCode || event.which\n                      return keyProps\n                    }\n                }\n              , { // mouse events\n                    reg: /click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i\n                  , fix: function (event, newEvent, type) {\n                      newEvent.rightClick = event.which === 3 || event.button === 2\n                      newEvent.pos = { x: 0, y: 0 }\n                      if (event.pageX || event.pageY) {\n                        newEvent.clientX = event.pageX\n                        newEvent.clientY = event.pageY\n                      } else if (event.clientX || event.clientY) {\n                        newEvent.clientX = event.clientX + doc.body.scrollLeft + root.scrollLeft\n                        newEvent.clientY = event.clientY + doc.body.scrollTop + root.scrollTop\n                      }\n                      if (overOutRegex.test(type)) {\n                        newEvent.relatedTarget = event.relatedTarget\n                          || event[(type == 'mouseover' ? 'from' : 'to') + 'Element']\n                      }\n                      return mouseProps\n                    }\n                }\n              , { // mouse wheel events\n                    reg: /mouse.*(wheel|scroll)/i\n                  , fix: function () { return mouseWheelProps }\n                }\n              , { // TextEvent\n                    reg: /^text/i\n                  , fix: function () { return textProps }\n                }\n              , { // touch and gesture events\n                    reg: /^touch|^gesture/i\n                  , fix: function () { return touchProps }\n                }\n              , { // message events\n                    reg: /^message$/i\n                  , fix: function () { return messageProps }\n                }\n              , { // popstate events\n                    reg: /^popstate$/i\n                  , fix: function () { return stateProps }\n                }\n              , { // everything else\n                    reg: /.*/\n                  , fix: function () { return commonProps }\n                }\n            ]\n          , typeFixerMap = {} // used to map event types to fixer functions (above), a basic cache mechanism\n\n          , Event = function (event, element, isNative) {\n              if (!arguments.length) return\n              event = event || ((element.ownerDocument || element.document || element).parentWindow || win).event\n              this.originalEvent = event\n              this.isNative       = isNative\n              this.isBean         = true\n\n              if (!event) return\n\n              var type   = event.type\n                , target = event.target || event.srcElement\n                , i, l, p, props, fixer\n\n              this.target = target && target.nodeType === 3 ? target.parentNode : target\n\n              if (isNative) { // we only need basic augmentation on custom events, the rest expensive & pointless\n                fixer = typeFixerMap[type]\n                if (!fixer) { // haven't encountered this event type before, map a fixer function for it\n                  for (i = 0, l = typeFixers.length; i < l; i++) {\n                    if (typeFixers[i].reg.test(type)) { // guaranteed to match at least one, last is .*\n                      typeFixerMap[type] = fixer = typeFixers[i].fix\n                      break\n                    }\n                  }\n                }\n\n                props = fixer(event, this, type)\n                for (i = props.length; i--;) {\n                  if (!((p = props[i]) in this) && p in event) this[p] = event[p]\n                }\n              }\n            }\n\n        // preventDefault() and stopPropagation() are a consistent interface to those functions\n        // on the DOM, stop() is an alias for both of them together\n        Event.prototype.preventDefault = function () {\n          if (this.originalEvent.preventDefault) this.originalEvent.preventDefault()\n          else this.originalEvent.returnValue = false\n        }\n        Event.prototype.stopPropagation = function () {\n          if (this.originalEvent.stopPropagation) this.originalEvent.stopPropagation()\n          else this.originalEvent.cancelBubble = true\n        }\n        Event.prototype.stop = function () {\n          this.preventDefault()\n          this.stopPropagation()\n          this.stopped = true\n        }\n        // stopImmediatePropagation() has to be handled internally because we manage the event list for\n        // each element\n        // note that originalElement may be a Bean#Event object in some situations\n        Event.prototype.stopImmediatePropagation = function () {\n          if (this.originalEvent.stopImmediatePropagation) this.originalEvent.stopImmediatePropagation()\n          this.isImmediatePropagationStopped = function () { return true }\n        }\n        Event.prototype.isImmediatePropagationStopped = function () {\n          return this.originalEvent.isImmediatePropagationStopped && this.originalEvent.isImmediatePropagationStopped()\n        }\n        Event.prototype.clone = function (currentTarget) {\n          //TODO: this is ripe for optimisation, new events are *expensive*\n          // improving this will speed up delegated events\n          var ne = new Event(this, this.element, this.isNative)\n          ne.currentTarget = currentTarget\n          return ne\n        }\n\n        return Event\n      }())\n\n      // if we're in old IE we can't do onpropertychange on doc or win so we use doc.documentElement for both\n    , targetElement = function (element, isNative) {\n        return !W3C_MODEL && !isNative && (element === doc || element === win) ? root : element\n      }\n\n      /**\n        * Bean maintains an internal registry for event listeners. We don't touch elements, objects\n        * or functions to identify them, instead we store everything in the registry.\n        * Each event listener has a RegEntry object, we have one 'registry' for the whole instance.\n        */\n    , RegEntry = (function () {\n        // each handler is wrapped so we can handle delegation and custom events\n        var wrappedHandler = function (element, fn, condition, args) {\n            var call = function (event, eargs) {\n                  return fn.apply(element, args ? slice.call(eargs, event ? 0 : 1).concat(args) : eargs)\n                }\n              , findTarget = function (event, eventElement) {\n                  return fn.__beanDel ? fn.__beanDel.ft(event.target, element) : eventElement\n                }\n              , handler = condition\n                  ? function (event) {\n                      var target = findTarget(event, this) // deleated event\n                      if (condition.apply(target, arguments)) {\n                        if (event) event.currentTarget = target\n                        return call(event, arguments)\n                      }\n                    }\n                  : function (event) {\n                      if (fn.__beanDel) event = event.clone(findTarget(event)) // delegated event, fix the fix\n                      return call(event, arguments)\n                    }\n            handler.__beanDel = fn.__beanDel\n            return handler\n          }\n\n        , RegEntry = function (element, type, handler, original, namespaces, args, root) {\n            var customType     = customEvents[type]\n              , isNative\n\n            if (type == 'unload') {\n              // self clean-up\n              handler = once(removeListener, element, type, handler, original)\n            }\n\n            if (customType) {\n              if (customType.condition) {\n                handler = wrappedHandler(element, handler, customType.condition, args)\n              }\n              type = customType.base || type\n            }\n\n            this.isNative      = isNative = nativeEvents[type] && !!element[eventSupport]\n            this.customType    = !W3C_MODEL && !isNative && type\n            this.element       = element\n            this.type          = type\n            this.original      = original\n            this.namespaces    = namespaces\n            this.eventType     = W3C_MODEL || isNative ? type : 'propertychange'\n            this.target        = targetElement(element, isNative)\n            this[eventSupport] = !!this.target[eventSupport]\n            this.root          = root\n            this.handler       = wrappedHandler(element, handler, null, args)\n          }\n\n        // given a list of namespaces, is our entry in any of them?\n        RegEntry.prototype.inNamespaces = function (checkNamespaces) {\n          var i, j, c = 0\n          if (!checkNamespaces) return true\n          if (!this.namespaces) return false\n          for (i = checkNamespaces.length; i--;) {\n            for (j = this.namespaces.length; j--;) {\n              if (checkNamespaces[i] == this.namespaces[j]) c++\n            }\n          }\n          return checkNamespaces.length === c\n        }\n\n        // match by element, original fn (opt), handler fn (opt)\n        RegEntry.prototype.matches = function (checkElement, checkOriginal, checkHandler) {\n          return this.element === checkElement &&\n            (!checkOriginal || this.original === checkOriginal) &&\n            (!checkHandler || this.handler === checkHandler)\n        }\n\n        return RegEntry\n      }())\n\n    , registry = (function () {\n        // our map stores arrays by event type, just because it's better than storing\n        // everything in a single array.\n        // uses '$' as a prefix for the keys for safety and 'r' as a special prefix for\n        // rootListeners so we can look them up fast\n        var map = {}\n\n          // generic functional search of our registry for matching listeners,\n          // `fn` returns false to break out of the loop\n          , forAll = function (element, type, original, handler, root, fn) {\n              var pfx = root ? 'r' : '$'\n              if (!type || type == '*') {\n                // search the whole registry\n                for (var t in map) {\n                  if (t.charAt(0) == pfx) {\n                    forAll(element, t.substr(1), original, handler, root, fn)\n                  }\n                }\n              } else {\n                var i = 0, l, list = map[pfx + type], all = element == '*'\n                if (!list) return\n                for (l = list.length; i < l; i++) {\n                  if ((all || list[i].matches(element, original, handler)) && !fn(list[i], list, i, type)) return\n                }\n              }\n            }\n\n          , has = function (element, type, original, root) {\n              // we're not using forAll here simply because it's a bit slower and this\n              // needs to be fast\n              var i, list = map[(root ? 'r' : '$') + type]\n              if (list) {\n                for (i = list.length; i--;) {\n                  if (!list[i].root && list[i].matches(element, original, null)) return true\n                }\n              }\n              return false\n            }\n\n          , get = function (element, type, original, root) {\n              var entries = []\n              forAll(element, type, original, null, root, function (entry) {\n                return entries.push(entry)\n              })\n              return entries\n            }\n\n          , put = function (entry) {\n              var has = !entry.root && !this.has(entry.element, entry.type, null, false)\n                , key = (entry.root ? 'r' : '$') + entry.type\n              ;(map[key] || (map[key] = [])).push(entry)\n              return has\n            }\n\n          , del = function (entry) {\n              forAll(entry.element, entry.type, null, entry.handler, entry.root, function (entry, list, i) {\n                list.splice(i, 1)\n                entry.removed = true\n                if (list.length === 0) delete map[(entry.root ? 'r' : '$') + entry.type]\n                return false\n              })\n            }\n\n            // dump all entries, used for onunload\n          , entries = function () {\n              var t, entries = []\n              for (t in map) {\n                if (t.charAt(0) == '$') entries = entries.concat(map[t])\n              }\n              return entries\n            }\n\n        return { has: has, get: get, put: put, del: del, entries: entries }\n      }())\n\n      // we need a selector engine for delegated events, use querySelectorAll if it exists\n      // but for older browsers we need Qwery, Sizzle or similar\n    , selectorEngine\n    , setSelectorEngine = function (e) {\n        if (!arguments.length) {\n          selectorEngine = doc.querySelectorAll\n            ? function (s, r) {\n                return r.querySelectorAll(s)\n              }\n            : function () {\n                throw new Error('Bean: No selector engine installed') // eeek\n              }\n        } else {\n          selectorEngine = e\n        }\n      }\n\n      // we attach this listener to each DOM event that we need to listen to, only once\n      // per event type per DOM element\n    , rootListener = function (event, type) {\n        if (!W3C_MODEL && type && event && event.propertyName != '_on' + type) return\n\n        var listeners = registry.get(this, type || event.type, null, false)\n          , l = listeners.length\n          , i = 0\n\n        event = new Event(event, this, true)\n        if (type) event.type = type\n\n        // iterate through all handlers registered for this type, calling them unless they have\n        // been removed by a previous handler or stopImmediatePropagation() has been called\n        for (; i < l && !event.isImmediatePropagationStopped(); i++) {\n          if (!listeners[i].removed) listeners[i].handler.call(this, event)\n        }\n      }\n\n      // add and remove listeners to DOM elements\n    , listener = W3C_MODEL\n        ? function (element, type, add) {\n            // new browsers\n            element[add ? addEvent : removeEvent](type, rootListener, false)\n          }\n        : function (element, type, add, custom) {\n            // IE8 and below, use attachEvent/detachEvent and we have to piggy-back propertychange events\n            // to simulate event bubbling etc.\n            var entry\n            if (add) {\n              registry.put(entry = new RegEntry(\n                  element\n                , custom || type\n                , function (event) { // handler\n                    rootListener.call(element, event, custom)\n                  }\n                , rootListener\n                , null\n                , null\n                , true // is root\n              ))\n              if (custom && element['_on' + custom] == null) element['_on' + custom] = 0\n              entry.target.attachEvent('on' + entry.eventType, entry.handler)\n            } else {\n              entry = registry.get(element, custom || type, rootListener, true)[0]\n              if (entry) {\n                entry.target.detachEvent('on' + entry.eventType, entry.handler)\n                registry.del(entry)\n              }\n            }\n          }\n\n    , once = function (rm, element, type, fn, originalFn) {\n        // wrap the handler in a handler that does a remove as well\n        return function () {\n          fn.apply(this, arguments)\n          rm(element, type, originalFn)\n        }\n      }\n\n    , removeListener = function (element, orgType, handler, namespaces) {\n        var type     = orgType && orgType.replace(nameRegex, '')\n          , handlers = registry.get(element, type, null, false)\n          , removed  = {}\n          , i, l\n\n        for (i = 0, l = handlers.length; i < l; i++) {\n          if ((!handler || handlers[i].original === handler) && handlers[i].inNamespaces(namespaces)) {\n            // TODO: this is problematic, we have a registry.get() and registry.del() that\n            // both do registry searches so we waste cycles doing this. Needs to be rolled into\n            // a single registry.forAll(fn) that removes while finding, but the catch is that\n            // we'll be splicing the arrays that we're iterating over. Needs extra tests to\n            // make sure we don't screw it up. @rvagg\n            registry.del(handlers[i])\n            if (!removed[handlers[i].eventType] && handlers[i][eventSupport])\n              removed[handlers[i].eventType] = { t: handlers[i].eventType, c: handlers[i].type }\n          }\n        }\n        // check each type/element for removed listeners and remove the rootListener where it's no longer needed\n        for (i in removed) {\n          if (!registry.has(element, removed[i].t, null, false)) {\n            // last listener of this type, remove the rootListener\n            listener(element, removed[i].t, false, removed[i].c)\n          }\n        }\n      }\n\n      // set up a delegate helper using the given selector, wrap the handler function\n    , delegate = function (selector, fn) {\n        //TODO: findTarget (therefore $) is called twice, once for match and once for\n        // setting e.currentTarget, fix this so it's only needed once\n        var findTarget = function (target, root) {\n              var i, array = isString(selector) ? selectorEngine(selector, root) : selector\n              for (; target && target !== root; target = target.parentNode) {\n                for (i = array.length; i--;) {\n                  if (array[i] === target) return target\n                }\n              }\n            }\n          , handler = function (e) {\n              var match = findTarget(e.target, this)\n              if (match) fn.apply(match, arguments)\n            }\n\n        // __beanDel isn't pleasant but it's a private function, not exposed outside of Bean\n        handler.__beanDel = {\n            ft       : findTarget // attach it here for customEvents to use too\n          , selector : selector\n        }\n        return handler\n      }\n\n    , fireListener = W3C_MODEL ? function (isNative, type, element) {\n        // modern browsers, do a proper dispatchEvent()\n        var evt = doc.createEvent(isNative ? 'HTMLEvents' : 'UIEvents')\n        evt[isNative ? 'initEvent' : 'initUIEvent'](type, true, true, win, 1)\n        element.dispatchEvent(evt)\n      } : function (isNative, type, element) {\n        // old browser use onpropertychange, just increment a custom property to trigger the event\n        element = targetElement(element, isNative)\n        isNative ? element.fireEvent('on' + type, doc.createEventObject()) : element['_on' + type]++\n      }\n\n      /**\n        * Public API: off(), on(), add(), (remove()), one(), fire(), clone()\n        */\n\n      /**\n        * off(element[, eventType(s)[, handler ]])\n        */\n    , off = function (element, typeSpec, fn) {\n        var isTypeStr = isString(typeSpec)\n          , k, type, namespaces, i\n\n        if (isTypeStr && typeSpec.indexOf(' ') > 0) {\n          // off(el, 't1 t2 t3', fn) or off(el, 't1 t2 t3')\n          typeSpec = str2arr(typeSpec)\n          for (i = typeSpec.length; i--;)\n            off(element, typeSpec[i], fn)\n          return element\n        }\n\n        type = isTypeStr && typeSpec.replace(nameRegex, '')\n        if (type && customEvents[type]) type = customEvents[type].base\n\n        if (!typeSpec || isTypeStr) {\n          // off(el) or off(el, t1.ns) or off(el, .ns) or off(el, .ns1.ns2.ns3)\n          if (namespaces = isTypeStr && typeSpec.replace(namespaceRegex, '')) namespaces = str2arr(namespaces, '.')\n          removeListener(element, type, fn, namespaces)\n        } else if (isFunction(typeSpec)) {\n          // off(el, fn)\n          removeListener(element, null, typeSpec)\n        } else {\n          // off(el, { t1: fn1, t2, fn2 })\n          for (k in typeSpec) {\n            if (typeSpec.hasOwnProperty(k)) off(element, k, typeSpec[k])\n          }\n        }\n\n        return element\n      }\n\n      /**\n        * on(element, eventType(s)[, selector], handler[, args ])\n        */\n    , on = function(element, events, selector, fn) {\n        var originalFn, type, types, i, args, entry, first\n\n        //TODO: the undefined check means you can't pass an 'args' argument, fix this perhaps?\n        if (selector === undefined && typeof events == 'object') {\n          //TODO: this can't handle delegated events\n          for (type in events) {\n            if (events.hasOwnProperty(type)) {\n              on.call(this, element, type, events[type])\n            }\n          }\n          return\n        }\n\n        if (!isFunction(selector)) {\n          // delegated event\n          originalFn = fn\n          args       = slice.call(arguments, 4)\n          fn         = delegate(selector, originalFn, selectorEngine)\n        } else {\n          args       = slice.call(arguments, 3)\n          fn         = originalFn = selector\n        }\n\n        types = str2arr(events)\n\n        // special case for one(), wrap in a self-removing handler\n        if (this === ONE) {\n          fn = once(off, element, events, fn, originalFn)\n        }\n\n        for (i = types.length; i--;) {\n          // add new handler to the registry and check if it's the first for this element/type\n          first = registry.put(entry = new RegEntry(\n              element\n            , types[i].replace(nameRegex, '') // event type\n            , fn\n            , originalFn\n            , str2arr(types[i].replace(namespaceRegex, ''), '.') // namespaces\n            , args\n            , false // not root\n          ))\n          if (entry[eventSupport] && first) {\n            // first event of this type on this element, add root listener\n            listener(element, entry.eventType, true, entry.customType)\n          }\n        }\n\n        return element\n      }\n\n      /**\n        * add(element[, selector], eventType(s), handler[, args ])\n        *\n        * Deprecated: kept (for now) for backward-compatibility\n        */\n    , add = function (element, events, fn, delfn) {\n        return on.apply(\n            null\n          , !isString(fn)\n              ? slice.call(arguments)\n              : [ element, fn, events, delfn ].concat(arguments.length > 3 ? slice.call(arguments, 5) : [])\n        )\n      }\n\n      /**\n        * one(element, eventType(s)[, selector], handler[, args ])\n        */\n    , one = function () {\n        return on.apply(ONE, arguments)\n      }\n\n      /**\n        * fire(element, eventType(s)[, args ])\n        *\n        * The optional 'args' argument must be an array, if no 'args' argument is provided\n        * then we can use the browser's DOM event system, otherwise we trigger handlers manually\n        */\n    , fire = function (element, type, args) {\n        var types = str2arr(type)\n          , i, j, l, names, handlers\n\n        for (i = types.length; i--;) {\n          type = types[i].replace(nameRegex, '')\n          if (names = types[i].replace(namespaceRegex, '')) names = str2arr(names, '.')\n          if (!names && !args && element[eventSupport]) {\n            fireListener(nativeEvents[type], type, element)\n          } else {\n            // non-native event, either because of a namespace, arguments or a non DOM element\n            // iterate over all listeners and manually 'fire'\n            handlers = registry.get(element, type, null, false)\n            args = [false].concat(args)\n            for (j = 0, l = handlers.length; j < l; j++) {\n              if (handlers[j].inNamespaces(names)) {\n                handlers[j].handler.apply(element, args)\n              }\n            }\n          }\n        }\n        return element\n      }\n\n      /**\n        * clone(dstElement, srcElement[, eventType ])\n        *\n        * TODO: perhaps for consistency we should allow the same flexibility in type specifiers?\n        */\n    , clone = function (element, from, type) {\n        var handlers = registry.get(from, type, null, false)\n          , l = handlers.length\n          , i = 0\n          , args, beanDel\n\n        for (; i < l; i++) {\n          if (handlers[i].original) {\n            args = [ element, handlers[i].type ]\n            if (beanDel = handlers[i].handler.__beanDel) args.push(beanDel.selector)\n            args.push(handlers[i].original)\n            on.apply(null, args)\n          }\n        }\n        return element\n      }\n\n    , bean = {\n          'on'                : on\n        , 'add'               : add\n        , 'one'               : one\n        , 'off'               : off\n        , 'remove'            : off\n        , 'clone'             : clone\n        , 'fire'              : fire\n        , 'Event'             : Event\n        , 'setSelectorEngine' : setSelectorEngine\n        , 'noConflict'        : function () {\n            context[name] = old\n            return this\n          }\n      }\n\n  // for IE, clean up on unload to avoid leaks\n  if (win.attachEvent) {\n    var cleanup = function () {\n      var i, entries = registry.entries()\n      for (i in entries) {\n        if (entries[i].type && entries[i].type !== 'unload') off(entries[i].element, entries[i].type)\n      }\n      win.detachEvent('onunload', cleanup)\n      win.CollectGarbage && win.CollectGarbage()\n    }\n    win.attachEvent('onunload', cleanup)\n  }\n\n  // initialize selector engine to internal default (qSA or throw Error)\n  setSelectorEngine()\n\n  return bean\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/bean/bean.js\n ** module id = 1\n ** module chunks = 0\n **/","// http://www.webtoolkit.info/javascript-base64.html\n\nvar Base64 = {\n\n\t// private property\n\t_keyStr : \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n\n\t// public method for encoding\n\tencode : function (input) {\n\t\tvar output = \"\";\n\t\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n\t\tvar i = 0;\n\n\t\tinput = Base64._utf8_encode(input);\n\n\t\twhile (i < input.length) {\n\n\t\t\tchr1 = input.charCodeAt(i++);\n\t\t\tchr2 = input.charCodeAt(i++);\n\t\t\tchr3 = input.charCodeAt(i++);\n\n\t\t\tenc1 = chr1 >> 2;\n\t\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n\t\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n\t\t\tenc4 = chr3 & 63;\n\n\t\t\tif (isNaN(chr2)) {\n\t\t\t\tenc3 = enc4 = 64;\n\t\t\t} else if (isNaN(chr3)) {\n\t\t\t\tenc4 = 64;\n\t\t\t}\n\n\t\t\toutput = output +\n\t\t\tthis._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\n\t\t\tthis._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\n\n\t\t}\n\n\t\treturn output;\n\t},\n\n\t// public method for decoding\n\tdecode : function (input) {\n\t\tvar output = \"\";\n\t\tvar chr1, chr2, chr3;\n\t\tvar enc1, enc2, enc3, enc4;\n\t\tvar i = 0;\n\n\t\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n\t\twhile (i < input.length) {\n\n\t\t\tenc1 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\tenc2 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\tenc3 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\tenc4 = this._keyStr.indexOf(input.charAt(i++));\n\n\t\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\n\t\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n\t\t\tchr3 = ((enc3 & 3) << 6) | enc4;\n\n\t\t\toutput = output + String.fromCharCode(chr1);\n\n\t\t\tif (enc3 != 64) {\n\t\t\t\toutput = output + String.fromCharCode(chr2);\n\t\t\t}\n\t\t\tif (enc4 != 64) {\n\t\t\t\toutput = output + String.fromCharCode(chr3);\n\t\t\t}\n\n\t\t}\n\n\t\toutput = Base64._utf8_decode(output);\n\n\t\treturn output;\n\n\t},\n\n\t// private method for UTF-8 encoding\n\t_utf8_encode : function (string) {\n\t\tstring = string.replace(/\\r\\n/g,\"\\n\");\n\t\tvar utftext = \"\";\n\n\t\tfor (var n = 0; n < string.length; n++) {\n\n\t\t\tvar c = string.charCodeAt(n);\n\n\t\t\tif (c < 128) {\n\t\t\t\tutftext += String.fromCharCode(c);\n\t\t\t}\n\t\t\telse if((c > 127) && (c < 2048)) {\n\t\t\t\tutftext += String.fromCharCode((c >> 6) | 192);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tutftext += String.fromCharCode((c >> 12) | 224);\n\t\t\t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t}\n\n\t\t}\n\n\t\treturn utftext;\n\t},\n\n\t// private method for UTF-8 decoding\n\t_utf8_decode : function (utftext) {\n\t\tvar string = \"\";\n\t\tvar i = 0;\n\t\tvar c = c1 = c2 = 0;\n\n\t\twhile ( i < utftext.length ) {\n\n\t\t\tc = utftext.charCodeAt(i);\n\n\t\t\tif (c < 128) {\n\t\t\t\tstring += String.fromCharCode(c);\n\t\t\t\ti++;\n\t\t\t}\n\t\t\telse if((c > 191) && (c < 224)) {\n\t\t\t\tc2 = utftext.charCodeAt(i+1);\n\t\t\t\tstring += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n\t\t\t\ti += 2;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tc2 = utftext.charCodeAt(i+1);\n\t\t\t\tc3 = utftext.charCodeAt(i+2);\n\t\t\t\tstring += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n\t\t\t\ti += 3;\n\t\t\t}\n\n\t\t}\n\n\t\treturn string;\n\t}\n\n};\n\nexport default Base64;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/base64.js\n **/","import Point from \"../geometry/Point\";\nimport Rectangle from \"../geometry/Rectangle\";\n\n// util variables\nlet _debugging = [], _debugAll = false, typeRegistry = {}, splice = Array.splice;\n\n/**\n * Utility functions\n */\nexport default {\n\ttype: function (namespace, name, type) {\n\t\tif (!typeRegistry[namespace])\n\t\t\ttypeRegistry[namespace] = new Map();\n\t\tif (!name)\n\t\t\treturn typeRegistry[namespace];\n\t\tif (!type)\n\t\t\treturn typeRegistry[namespace].get(name);\n\t\ttypeRegistry[namespace].set(name, type);\n\t},\n\n\tcreateType: function (namespace, props, defaultType) {\n\t\tlet name = props.name;\n\n\t\t// first check if type exists\n\t\tlet type = this.type(namespace, name);\n\t\tif (!type) {\n\t\t\tlet extend = props.extends ? this.type(namespace, props.extends) : null;\n\t\t\tif (!extend && defaultType)\n\t\t\t\textend = defaultType;\n\t\t\tif (extend)\n\t\t\t\ttype = class extends extend {\n\t\t\t\t};\n\t\t\telse {\n\t\t\t\ttype = class {\n\t\t\t\t\tconstructor(config) {\n\t\t\t\t\t\t_.assign(this, config);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\tdelete props.name;\n\t\t\tdelete props.extends;\n\t\t\t_.assign(type.prototype, props);\n\t\t\ttype.typeName = name;\n\t\t\tthis.type(namespace, name, type);\n\t\t\tthis.log('Utils', 'Utils.createType - ' + namespace + '.' + name);\n\t\t}\n\t\treturn type;\n\t},\n\n\tbuildTypes: function (types, namespace, defaultType) {\n\t\tthis.log('Utils', 'Utils.buildTypes - ' + namespace);\n\n\t\tif (!types && defaultType) {\n\t\t\tthis.createType(namespace, defaultType);\n\t\t\tthis.log('Utils', 'Utils.buildTypes end');\n\t\t\treturn;\n\t\t}\n\t\tif (defaultType) {\n\t\t\tlet type = _.remove(types, {name: defaultType.name});\n\t\t\ttype = type.length > 0 ? type[0] : null;\n\t\t\tif (type)\n\t\t\t\tdefaultType = this.createType(namespace, _.assign({}, defaultType, type));\n\t\t\telse\n\t\t\t\tdefaultType = this.createType(namespace, defaultType);\n\t\t}\n\n\t\t_.forEach(types, (type) => {\n\t\t\tthis.createType(namespace, type, defaultType);\n\t\t});\n\t\tthis.log('Utils', 'Utils.buildTypes end');\n\t},\n\n\t// Helper function to correctly set up the prototype chain, for subclasses.\n\t// Similar to `goog.inherits`, but uses a hash of prototype properties and\n\t// class properties to be extended.\n\textend: function (child, parent, protoProps, staticProps) {\n\t\t// Add static properties to the constructor function, if supplied.\n\t\t_.extend(child, parent, staticProps);\n\n\t\t// Set the prototype chain to inherit from `parent`, without calling\n\t\t// `parent`'s constructor function.\n\t\tvar Surrogate = function () {\n\t\t\tthis.constructor = child;\n\t\t};\n\t\tSurrogate.prototype = parent.prototype;\n\t\tchild.prototype = new Surrogate;\n\n\t\t// Add prototype properties (instance properties) to the subclass,\n\t\t// if supplied.\n\t\tif (protoProps) _.extend(child.prototype, protoProps);\n\n\t\t// Set a convenience property in case the parent's prototype is needed later.\n\t\tchild.superclass = parent.prototype;\n\n\t\treturn child;\n\t},\n\n\tinitConfig: function (obj, config) {\n\t\tlet props = {}, c = obj.constructor, cArr = [c];\n\t\twhile (c) {\n\t\t\tif (c.super) {\n\t\t\t\tc = c.super.constructor;\n\t\t\t\tsplice.apply(cArr, [0, 0, c]);\n\t\t\t} else\n\t\t\t\tc = null;\n\t\t}\n\n\t\tfor (let i = 0; i < cArr.length; i++) {\n\t\t\tc = cArr[i];\n\t\t\tif (c.DEFAULTS)\n\t\t\t\t_.assign(props, c.DEFAULTS);\n\t\t}\n\t\tobj.props = _.assign(props, config);\n\t\tc.prototype.prop = function (name, value) {\n\t\t\tif (!value)\n\t\t\t\treturn this.props[name];\n\t\t\tthis.props[name] = value;\n\t\t};\n\t},\n\n\t/**\n\t * Gets the JS class constructor.\n\t * @param {Object} jsClass\n\t * @param {Object} defaultClass\n\t */\n\tgetConstructor: function (jsClass, defaultClass) {\n\t\tif (!jsClass)\n\t\t\tjsClass = defaultClass;\n\n\t\tif (_.isString(jsClass))\n\t\t\tjsClass = eval(jsClass);\n\t\treturn jsClass;\n\t},\n\n\tdebug: function (moduleName) {\n\t\tif (moduleName) {\n\t\t\t_debugging.push(moduleName);\n\t\t} else {\n\t\t\t_debugAll = true;\n\t\t}\n\t},\n\n\tlog: function (name, message) {\n\t\tif (!window.console) {\n\t\t\treturn;\n\t\t}\n\t\tvar debug = _debugAll;\n\t\tif (!_debugAll) {\n\t\t\tdebug = false;\n\t\t\tfor (var i = 0; i < _debugging.length; i++) {\n\t\t\t\tif (_debugging[i] == name) debug = true;\n\t\t\t}\n\t\t}\n\t\tif (!debug) {\n\t\t\treturn;\n\t\t}\n\t\twhile (name.length < 10) {\n\t\t\tname = name + ' ';\n\t\t}\n\t\tname = name.substring(0, 10) + \" - \";\n\t\tconsole.info(name, message);\n\t},\n\n\t/**\n\t * Get the relative position of sub shapes within a parent share.\n\t * @param bounds\n\t * @param geometry The geometry information, the format of Geometry is:\n\t * {\n\t *      x: \"x coordinate of ref point, if less than 1, will be treated as the percentage of the parent width.\",\n\t *      y: \"y coordinate of ref point.\",\n\t *      anchorX: \"x pos of child relative to the ref point\",\n\t *      anchorY: \"y pos of child relative to the ref point\",\n\t *      offsetX: \"the offset in the x direction.\",\n\t *      offsetY: \"the offset in the y direction.\",\n\t *      width: \"the width of the child element\",\n\t *      height: \"the height of the child element\"\n\t * }\n\t * @returns {*[]}\n\t */\n\tgetRelativePosition: function (bounds, geometry) {\n\t\tlet x = Math.abs(geometry.x) <= 1 ? bounds.width * geometry.x : geometry.x;\n\t\tlet y = Math.abs(geometry.y) <= 1 ? bounds.height * geometry.y : geometry.y;\n\t\treturn this.offsetPosition([x, y], geometry);\n\t},\n\n\toffsetPosition: function (pos, geometry) {\n\t\treturn [pos[0] + geometry.width * geometry.anchorX + geometry.offsetX, pos[1] + geometry.height * geometry.anchorY + geometry.offsetY];\n\t},\n\n\t/**\n\t * Get the position relative to the graph that's unscaled, i.e., absolute position without considering translation and scale.\n\t * @param t the current translate\n\t * @param scale the current scale\n\t * @param o can be either a Point or a Rectangle or a Point array.\n\t */\n\tunscale: function (t, scale, o) {\n\t\tif (o instanceof Rectangle)\n\t\t\treturn new Rectangle(o.x * scale + t[0], o.y * scale + t[1], o.width * scale, o.height * scale);\n\t\telse if (o instanceof Point)\n\t\t\treturn new Point(o.x * scale + t[0], o.y * scale + t[1]);\n\t\telse\n\t\t\treturn [o[0] * scale + t[0], o[1] * scale + t[1]];\n\t},\n\n\t/**\n\t * Get the position relative to the graph that's scaled, i.e., relative position considering translation and scale.\n\t * @param t the current translation\n\t * @param scale the current scale\n\t * @param o can be either a Point or a Rectangle or a Point array.\n\t */\n\tscale: function (t, scale, o) {\n\t\tif (o instanceof Rectangle)\n\t\t\treturn new Rectangle((o.x - t[0]) / scale, (o.y - t[1]) / scale, o.width / scale, o.height / scale);\n\t\telse if (o instanceof Point)\n\t\t\treturn new Point((o.x - t[0]) / scale, (o.y - t[1]) / scale);\n\t\telse\n\t\t\treturn [(o[0] - t[0]) / scale, (o[1] - t[1]) / scale];\n\t},\n\n\t/**\n\t * Convenience method.\n\t */\n\tgetProperty: function (obj, prop) {\n\t\tif (!obj)\n\t\t\treturn null;\n\t\tif (_.has(obj, prop))\n\t\t\treturn obj[prop];\n\t\tif (obj.prop && _.isFunction(obj.prop))\n\t\t\treturn obj.prop(prop);\n\t\treturn null;\n\t}\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/Utils.js\n **/","class Point {\n\tconstructor(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\t/**\n\t * Make a clone of this point\n\t */\n\tclone() {\n\t\treturn new Point(this.x, this.y);\n\t}\n\n\t/**\n\t * Calculate the distance from this pt to the other pt.\n\t * @param aPt\n\t * @returns {number}\n\t */\n\tdistance(aPt) {\n\t\treturn Math.sqrt((this.x - aPt.x) * (this.x - aPt.x) + (this.y - aPt.y) * (this.y - aPt.y));\n\t}\n\n\t/**\n\t * Translate this point\n \t */\n\ttranslate(p2) {\n\t\tthis.x += p2.x;\n\t\tthis.y += p2.y;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Scale this vector\n \t */\n\tscale(scale) {\n\t\tthis.x *= scale;\n\t\tthis.y *= scale;\n\t\treturn this;\n\t}\n\n\tgetScaled(scale) {\n\t\treturn new Point(this.x * scale, this.y * scale);\n\t}\n\n\tgetTranslated(p2) {\n\t\treturn new Point(this.x + p2.x, this.y + p2.y);\n\t}\n\n\t/**\n\t * Get the direction vector from this point to p2.\n\t * @param p2\n\t * @returns {Point}\n\t */\n\tgetDirection(p2) {\n\t\tvar dist = this.distance(p2);\n\t\treturn new Point((p2.x - this.x) / dist, (p2.y - this.y) / dist);\n\t}\n\n\t/**\n\t * rotate the point about the origin. With the specified angle.\n\t * @param angle the angle to rotate\n\t */\n\trotate(angle) {\n\t\tvar cos = Math.cos(angle * Math.PI / 180);\n\t\tvar sin = Math.sin(angle * Math.PI / 180);\n\t\tvar x = this.x, y = this.y;\n\t\tthis.x = x * cos - y * sin;\n\t\tthis.y = x * sin + y * cos;\n\t\treturn this;\n\t}\n\n\tgetRotated(angle) {\n\t\treturn this.clone().rotate(angle);\n\t}\n\n\t/**\n\t * Calculate the dot product, treating this and p2 as vectors.\n\t */\n\tdotProduct(p2) {\n\t\treturn this.x * p2.x + this.y * p2.y;\n\t}\n\n\t/**\n\t * Get the mid point between this and p2.\n \t */\n\tgetMidPoint(p2) {\n\t\treturn new Point((this.x + p2.x) / 2, (this.y + p2.y) / 2);\n\t}\n\n\treverse() {\n\t\tthis.x = -this.x;\n\t\tthis.y = -this.y;\n\t\treturn this;\n\t}\n\n\tequals(p2) {\n\t\tif (!p2 || p2.constructor != Point) return false;\n\n\t\treturn (this.x == p2.x && this.y == p2.y);\n\t}\n\n\t/**\n\t * Reflect this point w.r.t. the rectangle.\n\t * If vertical is true, it will reflect the point cross the vertical\n\t * central line of the rectangle, otherwise reflect cross the horizontal\n\t * central line.\n\t *\n\t * @param rect the rectangle\n\t * @param vertical whether is vertical reflection or horizontal reflection.\n\t */\n\treflect(rect, vertical) {\n\t\tif (vertical)\n\t\t\tthis.x = 2 * rect.x - this.x;\n\t\telse\n\t\t\tthis.y = 2 * rect.y - this.y;\n\t\treturn this;\n\t}\n\n\ttoString() {\n\t\treturn this.x + \",\" + this.y;\n\t}\n}\n\nPoint.W = new Point(-1, 0);\nPoint.N = new Point(0, -1);\nPoint.S = new Point(0, 1);\nPoint.E = new Point(1, 0);\nPoint.NE = new Point(1, -1);\nPoint.NW = new Point(-1, -1);\nPoint.SE = new Point(1, 1);\nPoint.SW = new Point(-1, 1);\n\nexport default Point;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Point.js\n **/","import _ from \"lodash\";\r\nimport Point from \"./Point\";\r\nimport Shape from \"./Shape\";\r\n\r\nexport default class Rectangle extends Shape {\r\n\t/**\r\n\t * Checks whether this rectangle contains a given point of a given rectangle\r\n\t */\r\n\tcontains(el) {\r\n\t\tlet w = el.width || 0;\r\n\t\tlet h = el.height || 0;\r\n\t\tlet left = el.x - w/2;\r\n\t\tlet right = el.x + w/2;\r\n\t\tlet top = el.y - h/2;\r\n\t\tlet bottom = el.y + h/2;\r\n\t\treturn (right <= this.right) && (left >= this.left) &&\r\n\t\t\t(top >= this.top) && (bottom <= this.bottom);\r\n\t}\r\n\r\n\t/**\r\n\t * Calcualte the distance to a point. 0 if this rectangle contains the point.\r\n\t */\r\n\tdistance(pt) {\r\n\t\tif (this.contains(pt)) return 0;\r\n\r\n\t\tif (pt.x < this.left) {\r\n\t\t\tif (pt.y < this.top)\r\n\t\t\t\treturn pt.distance(new Point(this.left, this.top));\r\n\t\t\tif (pt.y <= this.bottom)\r\n\t\t\t\treturn this.left - pt.x;\r\n\t\t\treturn pt.distance(new Point(this.left, this.bottom));\r\n\t\t}\r\n\t\tif (pt.x <= this.right) {\r\n\t\t\tif (pt.y <= this.top)\r\n\t\t\t\treturn this.top - pt.y;\r\n\t\t\treturn pt.y - this.bottom;\r\n\t\t}\r\n\t\tif (pt.y < this.top)\r\n\t\t\treturn pt.distance(new Point(this.right, this.top));\r\n\t\tif (pt.y <= this.bottom)\r\n\t\t\treturn pt.x - this.right;\r\n\t\treturn pt.distance(new Point(this.right, this.bottom));\r\n\t}\r\n\r\n\t/**\r\n\t * Given two points, we want to detect whether the line joining the pts intersect\r\n\t * with the rectangle or not. We assume only horizontal or vertical line segments.\r\n\t *\r\n\t * @return int the side of the intersection: -1: no intersection, 0: left, 1: top, 2: right, 3: bottom, 4: containment.\r\n\t */\r\n\tdetectIntersection(pt1, pt2) {\r\n\t\tlet horizontal = pt1.y == pt2.y;\r\n\t\tlet contains1 = this.contains(pt1);\r\n\t\tlet contains2 = this.contains(pt2);\r\n\t\tif (contains1 && contains2) return 4;\r\n\t\tif (!contains1 && !contains2) {\r\n\t\t\tif (horizontal && (pt1.y >= this.top && pt1.y <= this.bottom)) {\r\n\t\t\t\tif (pt1.x < this.left && pt2.x > this.right)\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\tif (pt1.x > this.right && pt2.x < this.left)\r\n\t\t\t\t\treturn 2;\r\n\t\t\t}\r\n\t\t\tif (!horizontal && (pt1.x >= this.left && pt1.x <= this.right)) {\r\n\t\t\t\tif (pt1.y < this.top && pt2.y > this.bottom)\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\tif (pt1.y > this.bottom && pt2.y < this.top)\r\n\t\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tlet outPt = contains1 ? pt2 : pt1;\r\n\t\tif (horizontal) {\r\n\t\t\tif (outPt.x > this.right)\r\n\t\t\t\treturn 2;\r\n\t\t\treturn 0;\r\n\t\t} else {\r\n\t\t\tif (outPt.y < this.top)\r\n\t\t\t\treturn 1;\r\n\t\t\treturn 3;\r\n\t\t}\r\n\t}\r\n\r\n\ttoString() {\r\n\t\treturn 'Rectangle:{x=' + this.x + ';y=' + this.y + ';width=' + this.width + ';height=' + this.height + '}';\r\n\t}\r\n\r\n\tstatic getPerimeter(rect, pt, orthogonal = false) {\r\n\t\tlet x = rect.x;\r\n\t\tlet y = rect.y;\r\n\t\tlet dx = pt.x - x;\r\n\t\tlet dy = pt.y - y;\r\n\t\tlet alpha = Math.atan2(dy, dx);\r\n\t\tlet p = new Point(0, 0);\r\n\t\tlet pi = Math.PI;\r\n\t\tlet pi2 = Math.PI/2;\r\n\t\tlet beta = pi2 - alpha;\r\n\t\tlet t = Math.atan2(rect.height, rect.width);\r\n\r\n\t\tif (alpha < -pi + t || alpha > pi - t) {\r\n\t\t\t// Left edge\r\n\t\t\tp.x = rect.left;\r\n\t\t\tp.y = y - rect.width * Math.tan(alpha) / 2;\r\n\t\t} else if (alpha < -t) {\r\n\t\t\t// Top Edge\r\n\t\t\tp.y = rect.top;\r\n\t\t\tp.x = x - rect.height * Math.tan(beta) / 2;\r\n\t\t} else if (alpha < t) {\r\n\t\t\t// Right Edge\r\n\t\t\tp.x = rect.right;\r\n\t\t\tp.y = y + rect.width * Math.tan(alpha) / 2;\r\n\t\t} else {\r\n\t\t\t// Bottom Edge\r\n\t\t\tp.y = rect.bottom;\r\n\t\t\tp.x = x + rect.height * Math.tan(beta) / 2;\r\n\t\t}\r\n\r\n\t\tif (orthogonal) {\r\n\t\t\tif (alpha < -pi + t || alpha > pi - t) {\r\n\t\t\t\t// Left edge\r\n\t\t\t\tp.x = rect.left;\r\n\t\t\t\tp.y = y;\r\n\t\t\t} else if (alpha < -t) {\r\n\t\t\t\t// Top Edge\r\n\t\t\t\tp.y = rect.top;\r\n\t\t\t\tp.x = x;\r\n\t\t\t} else if (alpha < t) {\r\n\t\t\t\t// Right Edge\r\n\t\t\t\tp.x = rect.right;\r\n\t\t\t\tp.y = y;\r\n\t\t\t} else {\r\n\t\t\t\t// Bottom Edge\r\n\t\t\t\tp.y = rect.bottom;\r\n\t\t\t\tp.x = x;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet dir = Rectangle.getDirection(rect, p, orthogonal);\r\n\t\treturn {point: p, direction: dir};\r\n\t}\r\n\r\n\t/**\r\n\t * Return the bounding rectangle that contains p1 and p2\r\n\t */\r\n\tstatic getBoundingRectangle(pts, margin) {\r\n\t\tif (!pts || pts.length == 0) return null;\r\n\t\tmargin = margin || [0, 0, 0, 0];\r\n\t\tif (!_.isArray(margin))\r\n\t\t\tmargin = [margin, margin, margin, margin];\r\n\t\tlet min = [pts[0].x, pts[0].y];\r\n\t\tlet max = [pts[0].x, pts[0].y];\r\n\t\tfor (let i = 1; i < pts.length; i++) {\r\n\t\t\tlet p = pts[i];\r\n\t\t\tif (p.x < min[0]) {\r\n\t\t\t\tmin[0] = p.x;\r\n\t\t\t}\r\n\t\t\tif (p.y < min[1]) {\r\n\t\t\t\tmin[1] = p.y;\r\n\t\t\t}\r\n\t\t\tif (p.x > max[0]) {\r\n\t\t\t\tmax[0] = p.x;\r\n\t\t\t}\r\n\t\t\tif (p.y > max[1]) {\r\n\t\t\t\tmax[1] = p.y;\r\n\t\t\t}\r\n\t\t}\r\n\t\tmin[0] = min[0] - margin[0];\r\n\t\tmin[1] = min[1] - margin[1];\r\n\t\tmax[0] = max[0] + margin[2];\r\n\t\tmax[1] = max[1] + margin[3];\r\n\t\tlet w = Math.abs(max[0] - min[0]);\r\n\t\tlet h = Math.abs(max[1] - min[1]);\r\n\t\treturn new Rectangle(min[0] + w/2, min[1] + h/2, w, h);\r\n\t}\r\n\r\n\t/**\r\n\t * Create a union of all the rectangles.\r\n\t * @param rects\r\n\t */\r\n\tstatic union(rects) {\r\n\t\tlet minx = null, miny = null, maxx = -Infinity, maxy = -Infinity;\r\n\t\t_.each(rects, function (rect) {\r\n\t\t\tminx = minx || rect.x;\r\n\t\t\tminy = miny || rect.y;\r\n\t\t\tminx = Math.min(minx, rect.x);\r\n\t\t\tminy = Math.min(miny, rect.y);\r\n\t\t\tmaxx = Math.max(maxx, rect.right());\r\n\t\t\tmaxy = Math.max(maxy, rect.bottom());\r\n\t\t});\r\n\t\tminx = minx || 0;\r\n\t\tminy = miny || 0;\r\n\t\treturn new Rectangle(minx, miny, maxx - minx, maxy - miny);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the direction the point <i>p</i> is in relation to the given rectangle.\r\n\t * Possible values are WEST (-1,0), EAST (1,0), NORTH (0,-1) and SOUTH (0,1) if orthogonal is true, otherwise return\r\n\t * the direction connection the center of r and p.\r\n\t * @param r\r\n\t * @param p\r\n\t * @param orthogonal\r\n\t * @returns {Point|*}\r\n\t */\r\n\tstatic getDirection(r, p, orthogonal = false) {\r\n\t\tif (!orthogonal)\r\n\t\t\treturn new Point(r.x, r.y).getDirection(new Point(p.x, p.y));\r\n\r\n\t\tlet i, distance = Math.abs(r.left - p.x), direction = Point.W;\r\n\r\n\t\ti = Math.abs(r.top - p.y);\r\n\t\tif (i <= distance) {\r\n\t\t\tdistance = i;\r\n\t\t\tdirection = Point.N;\r\n\t\t}\r\n\r\n\t\ti = Math.abs(r.bottom - p.y);\r\n\t\tif (i <= distance) {\r\n\t\t\tdistance = i;\r\n\t\t\tdirection = Point.S;\r\n\t\t}\r\n\r\n\t\ti = Math.abs(r.right - p.x);\r\n\t\tif (i < distance) {\r\n\t\t\tdirection = Point.E;\r\n\t\t}\r\n\r\n\t\treturn direction;\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Rectangle.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}\n ** module id = 6\n ** module chunks = 0\n **/","import _ from \"lodash\";\nimport Point from \"./Point\";\nimport Rectangle from \"./Rectangle\";\n\nlet registry = {};\n\nclass Shape {\n\tconstructor(x, y, width, height, config) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\t_.defaults(this, config, {x: 0, y: 0, width: 0, height: 0});\n\t}\n\n\t/**\n\t * Return the y-coord of the top side of this rectangle\n\t */\n\tget top() { return this.y - this.height/2; }\n\n\t/**\n\t * Returns the y-coordinate of the bottom of this Rectangle.\n\t */\n\tget bottom() { return this.y + this.height/2; }\n\n\t/**\n\t * Return the x-coord of left side of this rectangle\n\t */\n\tget left() { return this.x - this.width/2; }\n\n\t/**\n\t * Returns the x-coordinate of the right side of this Rectangle.\n\t */\n\tget right() { return this.x + this.width/2; }\n\n\tget center() { return new Point(this.x, this.y); }\n\n\tget bounds() { return new Rectangle(this.x, this.y, this.width, this.height); }\n\n\tcontains(el) { return false; }\n\n\t/**\n\t * This will generate n ports on the shape.\n\t */\n\tgetRegularPoints(n) {return null;}\n\n\t/**\n\t * Get the intersection between boundary of this shape and the line connecting (x,y) with the refPt.\n\t * @param refPt\n\t * @returns {null}\n\t */\n\tgetPerimeter(refPt, orthogonal = false) {\n\t\treturn this.constructor.getPerimeter(this, refPt, orthogonal);\n\t}\n\n\trender(view) {\n\t\tlet template = _.template(view.getTemplate(this.name, this));\n\t\treturn template(this);\n\t}\n\n\tstatic getShape(name) {\n\t\treturn registry[name];\n\t}\n\n\tstatic addShape(name, c) {\n\t\tregistry[name] = c;\n\t}\n\n\tstatic removeShape(name) {\n\t\tdelete registry[name];\n\t}\n}\n\nexport default Shape;\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Shape.js\n **/","import _ from \"lodash\";\n\n/**\n * dom Utility functions\n */\nexport default {\n\tisIE: (function () {\n\t\tif (!window || !window.navigator || !navigator) return false;\n\t\tvar sAgent = window.navigator.userAgent;\n\t\tvar Idx = sAgent.indexOf(\"MSIE\");\n\n\t\t// If IE, return version number.\n\t\tif (Idx > 0)\n\t\t\treturn parseInt(sAgent.substring(Idx + 5, sAgent.indexOf(\".\", Idx)));\n\n\t\t// If IE 11 then look for Updated user agent string.\n\t\telse if (!!navigator.userAgent.match(/Trident\\/7\\./))\n\t\t\treturn 11;\n\t\telse\n\t\t\treturn false;\n\t})(),\n\n\tisFireFox : (function(){\n\t\t// InstallTrigger: Firefox's API to install add-ons\n\t\treturn typeof InstallTrigger !== 'undefined';\n\t})(),\n\n\tcreateElement: function (tag, attribs, styles, html) {\n\t\tlet el = document.createElement(tag);\n\t\tthis.setElement(el, attribs, styles);\n\t\tif (html)\n\t\t\tel.innerHTML = html;\n\t\treturn el;\n\t},\n\n\tcreateElementByString: function(str) {\n\t\tlet temp = this.createElement('div', null, null, str);\n\t\treturn temp.childNodes;\n\t},\n\n\tsetElement: function (el, attribs, styles) {\n\t\tif (attribs) {\n\t\t\t_.forEach(attribs, function(value, key) {\n\t\t\t    el.setAttribute(key, value);\n\t\t\t });\n\t\t}\n\t\tif (styles) {\n\t\t\t_.forEach(styles, function(value, key) {\n\t\t\t\tel.style[key] = value;\n\t\t\t});\n\t\t}\n\t},\n\n\ttestElement: function(node, method) {\n\t\treturn node && node.nodeType == 1 && ( !method || method(node) );\n\t},\n\n\tgetAncestorBy: function(node, method) {\n\t\twhile (node = node.parentNode)\n\t\t\tif (this.testElement(node, method) )\n\t\t\t\treturn node;\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Get the position of element relative to the context.\n\t * @param el the element\n\t * @param context\n\t * @returns {*[]}\n\t */\n\tgetPosition(el, context) {\n\t\tif (!context) context = document.body;\n\t\tlet elRect = el.getBoundingClientRect();\n\t\tlet contextRect = context.getBoundingClientRect();\n\n\t\treturn [elRect.left - contextRect.left, elRect.top - contextRect.top];\n\t},\n\n\tgetCenterPosition(el, context) {\n\t\tif (!context) context = document.body;\n\t\tlet elRect = el.getBoundingClientRect();\n\t\tlet contextRect = context.getBoundingClientRect();\n\t\tlet w = elRect.right - elRect.left;\n\t\tlet h = elRect.bottom - elRect.top;\n\n\t\treturn [elRect.left - contextRect.left + w/2, elRect.top - contextRect.top + h/2];\n\t},\n\n\tmove: function(el, x, y) {\n\t\tif (x) el.style.left = x + 'px';\n\t\tif (y) el.style.top = y + 'px';\n\t},\n\n\tgetSize: function(el) {\n\t\tvar w = parseInt(el.style.offsetWidth, 10);\n\t\tvar h = parseInt(el.style.offsetHeight, 10);\n\t\treturn [w, h];\n\t},\n\n\tresize: function(el, w, h) {\n\t\tif (w) el.style.width = w + \"px\";\n\t\tif (h) el.style.height = h + 'px';\n\t},\n\n\tpreloadImages: function(array) {\n\t\tif (!this.preloadImages.list) this.preloadImages.list = [];\n\t\tif (!this.preloadImages.loaded) this.preloadImages.loaded = {};\n\n\t\tvar list = this.preloadImages.list;\n\t\tvar img, that = this;\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\timg = new Image();\n\t\t\timg.onload = function() {\n\t\t\t\tvar index = list.indexOf(this);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthat.preloadImages.loaded[this.name] = {width: this.width, height: this.height};\n\t\t\t\t\t// remove image from the array once it's loaded\n\t\t\t\t\t// for memory consumption reasons\n\t\t\t\t\tlist.splice(index, 1);\n\t\t\t\t}\n\t\t\t};\n\t\t\tlist.push(img);\n\t\t\timg.src = array[i];\n\t\t\timg.name = array[i];\n\t\t}\n\t},\n\n\t/**\n\t * Get's the image's information given the url. Must be preloaded by calling the preloadImage function.\n\t * @param src\n\t */\n\tgetImageInfo: function(src) {\n\t\tif (this.preloadImages.loaded) {\n\t\t\treturn this.preloadImages.loaded[src];\n\t\t}\n\t\treturn null;\n\t},\n\n\tdownloadImage: function(name, image) {\n\t\tif (!image) return;\n\t\tlet mime = image.match(/^data:([^;]*)/)[1];\n\t\tlet type = mime.split('/')[1];\n\t\tif (type.indexOf('+') > 0) type = type.split('+')[0];\n\t\tif (this.isIE) {\n\t\t\timage = this.b64toBlob(image.replace('data:' + mime + ';base64,', ''), mime);\n\t\t\tnavigator.msSaveBlob(image, name + '.' + type);\n\t\t} else {\n\t\t\tlet link = this.createElement('a', {href: image, download: name + '.' + type}, {display: \"none\"});\n\t\t\tdocument.body.appendChild(link);\n\t\t\tlink.click();\n\t\t\tlink.parentNode.removeChild(link);\n\t\t}\n\t},\n\n\t/**\n\t * Convert b54 to blob. IE only\n\t */\n\tb64toBlob: function (b64Data, contentType, sliceSize) {\n\t\tcontentType = contentType || '';\n\t\tsliceSize = sliceSize || 512;\n\n\t\tvar byteCharacters = atob(b64Data);\n\t\tvar byteArrays = [];\n\n\t\tfor (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n\t\t\tvar slice = byteCharacters.slice(offset, offset + sliceSize);\n\n\t\t\tvar byteNumbers = new Array(slice.length);\n\t\t\tfor (var i = 0; i < slice.length; i++) {\n\t\t\t\tbyteNumbers[i] = slice.charCodeAt(i);\n\t\t\t}\n\t\t\tvar byteArray = new Uint8Array(byteNumbers);\n\t\t\tbyteArrays.push(byteArray);\n\t\t}\n\t\treturn new Blob(byteArrays, {type: contentType});\n\t},\n\n\topenImage: function(name, image) {\n\t\tvar myWindow = window.open(\"\", \"_blank\", \"toolbar=yes, scrollbars=yes, resizable=yes, width=500, height=500\");\n\t\tvar myDocument = myWindow.document;\n\t\tvar img = myDocument.createElement(\"img\");\n\t\tthis.setElement(img, {src: image, name: name});\n\t\tmyDocument.body.appendChild(img);\n\t},\n\n\t/**\n\t * Check whether the key event is from input, textarea or select.\n\t * @param e  input event\n\t */\n\teventFromInput: function(e){\n\t\tvar tagName = e.target.tagName;\n\t\treturn (tagName == 'INPUT' || tagName == 'TEXTAREA' || tagName == 'SELECT');\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/DomUtils.js\n **/","import _ from \"lodash\";\n\n/**\n * A string buffer for fast string manipulation\n */\nexport default class StringBuffer {\n\tconstructor(str) {\n\t\tthis.buffer = [];\n\t\tif (str)\n\t\t\tthis.buffer.push(str);\n\t}\n\n\tappend(stuff) {\n\t\tif (_.isString(stuff))\n\t\t\tthis.buffer.push(stuff);\n\t\telse if (_.isArray(stuff))\n\t\t\tthis.buffer = this.buffer.concat(stuff);\n\t\telse\n\t\t\tthis.buffer.push(\"\" + stuff);\n\t\treturn this;\n\t}\n\n\tprepend(stuff) {\n\t\tif (_.isString(stuff))\n\t\t\tthis.buffer.splice(0, 0, stuff);\n\t\telse if (_.isArray(stuff))\n\t\t\tthis.buffer = stuff.concat(this.buffer);\n\t\telse\n\t\t\tthis.buffer.splice(0, 0, \"\" + stuff);\n\t\treturn this;\n\t}\n\n\tclear() {\n\t\tthis.buffer = [];\n\t}\n\n\tremoveLast() {\n\t\tthis.buffer.pop();\n\t\treturn this;\n\t}\n\n\ttoString(sep) {\n\t\tif (!sep) sep = '';\n\t\treturn this.buffer.join(sep);\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/StringBuffer.js\n **/","import Point from \"./Point\";\n\nexport default class Line {\n\tconstructor(start, end) {\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t}\n\n\t/**\n\t * Calculate the length of this line\n\t */\n\tlength() {\n\t\treturn this.start.distance(this.end);\n\t}\n\n\t/**\n\t * Calculate the distance of this line to the point.\n\t */\n\tdistance(pt) {\n\t\tvar x = this.start.distance(pt);\n\t\tif (x == 0) return 0;\n\n\t\tvar l = this.length();\n\t\tvar cosa = new Point((this.end.x - this.start.x) / l, (this.end.y - this.start.y) / l).dotProduct(\n\t\t\tnew Point(pt.x / x, pt.y / x));\n\n\t\treturn x * Math.sqrt(1 - cosa * cosa);\n\t}\n\n\t/**\n\t * Function: intersection\n\t *\n\t * Returns the intersection of two lines as an <mxPoint>.\n\t *\n\t * Parameters:\n\t *\n\t * x0 - X-coordinate of the first line's startpoint.\n\t * y0 - X-coordinate of the first line's startpoint.\n\t * x1 - X-coordinate of the first line's endpoint.\n\t * y1 - Y-coordinate of the first line's endpoint.\n\t * x2 - X-coordinate of the second line's startpoint.\n\t * y2 - Y-coordinate of the second line's startpoint.\n\t * x3 - X-coordinate of the second line's endpoint.\n\t * y3 - Y-coordinate of the second line's endpoint.\n\t */\n\tstatic intersection(x0, y0, x1, y1, x2, y2, x3, y3) {\n\t\tvar denom = ((y3 - y2) * (x1 - x0)) - ((x3 - x2) * (y1 - y0));\n\t\tvar nume_a = ((x3 - x2) * (y0 - y2)) - ((y3 - y2) * (x0 - x2));\n\t\tvar nume_b = ((x1 - x0) * (y0 - y2)) - ((y1 - y0) * (x0 - x2));\n\n\t\tvar ua = nume_a / denom;\n\t\tvar ub = nume_b / denom;\n\n\t\tif (ua >= 0.0 && ua <= 1.0 && ub >= 0.0 && ub <= 1.0) {\n\t\t\t// Get the intersection point\n\t\t\tvar intersectionX = x0 + ua * (x1 - x0);\n\t\t\tvar intersectionY = y0 + ua * (y1 - y0);\n\n\t\t\treturn new Point(intersectionX, intersectionY);\n\t\t}\n\n\t\t// No intersection\n\t\treturn null;\n\t}\n\n\ttoString() {\n\t\treturn 'Line:{start=' + this.start + ';end=' + this.end + '}';\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Line.js\n **/","import Shape from \"./Shape\";\r\nimport Point from \"./Point\";\r\nimport Rectangle from \"./Rectangle\";\r\n\r\nexport default class Ellipse extends Shape {\r\n\ttoString() {\r\n\t\treturn 'Ellipse:{x=' + this.x + ';y=' + this.y + ';width=' + this.width + ';height=' + this.height + '}';\r\n\t}\r\n\r\n\tstatic getPerimeter(rect, pt, orthogonal = false) {\r\n\t\tvar a = rect.width / 2;\r\n\t\tvar b = rect.height / 2;\r\n\t\tvar cx = rect.x;\r\n\t\tvar cy = rect.y;\r\n\t\tvar px = pt.x;\r\n\t\tvar py = pt.y;\r\n\r\n\t\t// Calculates straight line equation through\r\n\t\t// point and ellipse center y = d * x + h\r\n\t\tvar dx = parseInt(px - cx);\r\n\t\tvar dy = parseInt(py - cy);\r\n\r\n\t\tvar tx, ty;\r\n\r\n\t\tif (dx == 0 && dy != 0) {\r\n\t\t\treturn new Point(cx, cy + b * dy / Math.abs(dy));\r\n\t\t} else if (dx == 0 && dy == 0) {\r\n\t\t\treturn new Point(px, py);\r\n\t\t}\r\n\r\n\t\t// Calculates intersection\r\n\t\tvar d = dy / dx;\r\n\t\tvar h = cy - d * cx;\r\n\t\tvar e = a * a * d * d + b * b;\r\n\t\tvar f = -2 * cx * e;\r\n\t\tvar g = a * a * d * d * cx * cx + b * b * cx * cx - a * a * b * b;\r\n\t\tvar det = Math.sqrt(f * f - 4 * e * g);\r\n\r\n\t\t// Two solutions (perimeter points)\r\n\t\tvar xout1 = (-f + det) / (2 * e);\r\n\t\tvar xout2 = (-f - det) / (2 * e);\r\n\t\tvar yout1 = d * xout1 + h;\r\n\t\tvar yout2 = d * xout2 + h;\r\n\t\tvar dist1 = Math.sqrt(Math.pow((xout1 - px), 2) + Math.pow((yout1 - py), 2));\r\n\t\tvar dist2 = Math.sqrt(Math.pow((xout2 - px), 2) + Math.pow((yout2 - py), 2));\r\n\r\n\t\t// Correct solution\r\n\t\tvar xout = 0;\r\n\t\tvar yout = 0;\r\n\r\n\t\tif (dist1 < dist2) {\r\n\t\t\txout = xout1;\r\n\t\t\tyout = yout1;\r\n\t\t} else {\r\n\t\t\txout = xout2;\r\n\t\t\tyout = yout2;\r\n\t\t}\r\n\r\n\t\tlet p = new Point(xout, yout);\r\n\t\tlet dir = Rectangle.getDirection(rect, p, orthogonal);\r\n\t\tif (orthogonal) {\r\n\t\t\tif (dir.x == -1) {\r\n\t\t\t\treturn {point: new Point(cx - a, cy), direction: dir};\r\n\t\t\t}\r\n\t\t\tif (dir.x == 1) {\r\n\t\t\t\treturn {point: new Point(cx + a, cy), direction: dir};\r\n\t\t\t}\r\n\t\t\tif (dir.y == -1) {\r\n\t\t\t\treturn {point: new Point(cx, cy - b), direction: dir};\r\n\t\t\t}\r\n\t\t\tif (dir.y == 1) {\r\n\t\t\t\treturn {point: new Point(cx, cy + b), direction: dir};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {point: p, direction: dir};\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Ellipse.js\n **/","import _ from \"lodash\";\r\nimport Point from \"./Point\";\r\nimport Utils from \"../util/Utils\";\r\n\r\nlet defaultConfig = {\r\n\ttype: \"direct\",\r\n\tshowGauge: true,\r\n\torthogonal: false\r\n};\r\n\r\nlet defaultGeometry = {\r\n\twidth: 0,\r\n\theight: 0,\r\n\tanchorX: 0,\r\n\tanchorY: 0,\r\n\toffsetX: 0,\r\n\toffsetY: 0\r\n};\r\n\r\nlet linkTypes = {};\r\n\r\nclass Link {\r\n\tconstructor(terminalVisual, shapeConfig = {}, startMarker = null, endMarker = null) {\r\n\t\tthis.start = terminalVisual[0].point;\r\n\t\tthis.end = terminalVisual[1].point;\r\n\t\tthis.startNormal = terminalVisual[0].direction;\r\n\t\tthis.endNormal = terminalVisual[1].direction;\r\n\t\tthis.startMarker = startMarker;\r\n\t\tthis.endMarker = endMarker;\r\n\t\t_.assign(this, shapeConfig);\r\n\t}\r\n\r\n\trender(view) {\r\n\t\treturn view.renderLink(this);\r\n\t}\r\n\r\n\tget points() { return null; }\r\n\tget controlPts() { return null; }\r\n\tget length() {\r\n\t\tlet points = this.points;\r\n\t\tlet i, l = 0;\r\n\t\tfor (i = 0; i < points.length - 1; i++)\r\n\t\t\tl += points[i].distance(points[i+1]);\r\n\t\treturn l;\r\n\t}\r\n\r\n\t/**\r\n\t * Calculate the position where to put modifiers or label..\r\n\t *\r\n\t * @param geometry: defines how far along the edge should the point be placed.\r\n\t * @return *[] the relative position.\r\n\t */\r\n\tgetRelativePosition(geometry) {\r\n\t\tif (_.isNumber(geometry))\r\n\t\t\tgeometry = {x: geometry};\r\n\t\tgeometry = _.defaults(geometry, defaultGeometry);\r\n\t\tlet p = geometry.x, l = this.length;\r\n\t\tif (Math.abs(p) <= 1) p *= l;\r\n\t\tif (p < 0) p = l + p;\r\n\t\tif (p > l) p = l;\r\n\r\n\t\tlet points = this.points, d, point, dir;\r\n\t\tfor (let i = 0; i < points.length - 1; i++) {\r\n\t\t\td = points[i].distance(points[i+1]);\r\n\t\t\tif (p <= d) {\r\n\t\t\t\t// we've located the line segment.\r\n\t\t\t\tpoint = points[i].clone();\r\n\t\t\t\tdir = point.getDirection(points[i+1]);\r\n\t\t\t\tpoint.translate(dir.getScaled(p));\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tp -= d;\r\n\t\t}\r\n\r\n\t\t// return the last point.\r\n\t\tif (!point)\r\n\t\t\tpoint = points[points.length - 1];\r\n\t\treturn Utils.offsetPosition([point.x, point.y], geometry);\r\n\t}\r\n\r\n\ttoString() {\r\n\t\treturn 'Link';\r\n\t}\r\n\r\n\tstatic getLink(terminalVisual, shapeConfig = {}, startMarker = null, endMarker = null) {\r\n\t\tshapeConfig = _.defaultsDeep(shapeConfig, defaultConfig);\r\n\t\tlet linkClass = linkTypes[shapeConfig.type];\r\n\t\tif (linkClass)\r\n\t\t\treturn new linkClass(terminalVisual, shapeConfig, startMarker, endMarker);\r\n\t\tconsole.log('link type not supported: ' + shapeConfig.type);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nclass DirectLink extends Link {\r\n\tget points() {\r\n\t\treturn [this.start, this.end];\r\n\t}\r\n}\r\n\r\nclass BezierLink extends Link {\r\n\tget points() {\r\n\t\treturn [this.start, this.end];\r\n\t}\r\n\r\n\tget controlPts() {\r\n\t\tlet s = this.points[0], e = this.points[1];\r\n\t\tlet pts = [];\r\n\t\tpts[0] = null;\r\n\t\tpts[1] = [];\r\n\t\tif (this.startNormal.x == 0) {\r\n\t\t\tpts[1][0] = new Point(s.x, (s.y + e.y)/2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tpts[1][0] = new Point((s.x + e.x)/2, s.y);\r\n\t\t}\r\n\t\tif (this.endNormal.x == 0) {\r\n\t\t\tpts[1][1] = new Point(e.x, (s.y + e.y)/2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tpts[1][1] = new Point((s.x + e.x)/2, e.y);\r\n\t\t}\r\n\t\treturn pts;\r\n\t}\r\n\r\n\tgetRelativePosition(geometry) {\r\n\t\tif (_.isNumber(geometry))\r\n\t\t\tgeometry = {x: geometry};\r\n\t\tgeometry = _.defaults(geometry, defaultGeometry);\r\n\t\tlet p = geometry.x, l = this.length;\r\n\t\tif (Math.abs(p) > 1) p /= l;\r\n\t\tif (p < 0) p++;\r\n\t\tif (p > 1) p--;\r\n\r\n\t\tlet pts = this.points;\r\n\t\tlet ctrlpts = this.controlPts;\r\n\t\tlet p1 = pts[0];\r\n\t\tlet p2 = ctrlpts[1][0];\r\n\t\tlet p3 = ctrlpts[1][1];\r\n\t\tlet p4 = pts[1];\r\n\r\n\t\tlet point = [(1-p)*(1-p)*(1-p) * p1.x + 3*p*(1-p)*(1-p) * p2.x + 3*p*p*(1-p) * p3.x + p*p*p * p4.x, (1-p)*(1-p)*(1-p) * p1.y + 3*p*(1-p)*(1-p) * p2.y + 3*p*p*(1-p) * p3.y + p*p*p * p4.y];\r\n\t\treturn Utils.offsetPosition([point.x, point.y], geometry);\r\n\t}\r\n}\r\n\r\nclass EntityRelations extends Link {\r\n\tget points() {\r\n\t\tvar source = Port.getBounds(edge, true);\r\n\t\tvar target = Port.getBounds(edge, false);\r\n\t\tvar isSourceLeft = target.right() < source.x;\r\n\t\tvar isTargetLeft = source.right() < target.x;\r\n\t\tvar result = [];\r\n\r\n\t\tvar x0 = (isSourceLeft) ? source.x : source.x + source.width;\r\n\t\tvar y0 = source.getCenterY();\r\n\t\tresult.push(new Point(x0, y0));\r\n\r\n\t\tvar xe = (isTargetLeft) ? target.x : target.x + target.width;\r\n\t\tvar ye = target.getCenterY();\r\n\r\n\t\tvar seg = this.segment;\r\n\r\n\t\tvar dx = (isSourceLeft) ? -seg : seg;\r\n\t\tvar dep = new Point(x0 + dx, y0);\r\n\r\n\t\tdx = (isTargetLeft) ? -seg : seg;\r\n\t\tvar arr = new Point(xe + dx, ye);\r\n\r\n\t\t// Adds intermediate points if both go out on same side\r\n\t\tif (isSourceLeft == isTargetLeft)\r\n\t\t{\r\n\t\t\tvar x = (isSourceLeft) ?\r\n\t\t\tMath.min(x0, xe)-seg :\r\n\t\t\tMath.max(x0, xe)+seg;\r\n\r\n\t\t\tresult.push(new Point(x, y0));\r\n\t\t\tresult.push(new Point(x, ye));\r\n\t\t}\r\n\t\telse if ((dep.x < arr.x) == isSourceLeft)\r\n\t\t{\r\n\t\t\tvar midY = y0 + (ye - y0) / 2;\r\n\r\n\t\t\tresult.push(dep);\r\n\t\t\tresult.push(new Point(dep.x, midY));\r\n\t\t\tresult.push(new Point(arr.x, midY));\r\n\t\t\tresult.push(arr);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tresult.push(dep);\r\n\t\t\tresult.push(arr);\r\n\t\t}\r\n\r\n\t\tresult.push(new Point(xe, ye));\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\n\r\nclass Manhattan extends Link {\r\n\tconstructor(terminalVisual, shapeConfig, startMarker, endMarker) {\r\n\t\tshapeConfig = _.defaults(shapeConfig, {\r\n\t\t\tMIN_BUFFER: 10,\r\n\t\t\tautoRoute: false,\r\n\t\t\tmaxChannelWidth: 100\r\n\t\t});\r\n\t\tsuper(terminalVisual, shapeConfig, startMarker, endMarker);\r\n\t}\r\n\r\n\tget points() {\r\n\t\t//let pos = Manhattan.routeInternal(this.start, this.end, this.startNormal, this.endNormal, this.MIN_BUFFER);\r\n\t\t//pos = Manhattan.processPositions(this.start, this.end, pos, this.startNormal.x!=0);\r\n\t\tlet pos = Manhattan.findPositions(this.start, this.end, this.startNormal, this.endNormal, this.MIN_BUFFER);\r\n\t\tif (this.autoRoute) {\r\n\t\t\tthis._mergeSegments(pos);\r\n\t\t\tvar boxes = [], node, startBox, endBox;\r\n\t\t\tvar container = edge.source.getCommonAncestor(edge.target);\r\n\t\t\tvar childNodes = container.getDescendants();\r\n\t\t\tvar index = 0;\r\n\t\t\tfor (var i = 0; i < childNodes.length; i++) {\r\n\t\t\t\tnode = childNodes[i];\r\n\t\t\t\t// Do not include source or target ancestors in routing.\r\n\t\t\t\tif (node.excludeFromRouting(edge) || node.isAncestor(edge.source) || node.isAncestor(edge.target)) continue;\r\n\t\t\t\tif (node == edge.source)\r\n\t\t\t\tstartBox = index;\r\n\t\t\t\tif (node == edge.target)\r\n\t\t\t\tendBox = index;\r\n\t\t\t\tboxes.push(node.getBounds(document));\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\tif (boxes.length > 1)\r\n\t\t\t\tthis.autoRoute(pos, container.getBounds(document), boxes, startBox, endBox);\r\n\t\t}\r\n\t\tthis._mergeSegments(pos);\r\n\t\treturn pos;\r\n\t}\r\n\r\n\t//New function for finding route\r\n\tstatic findPositions(start, end, startNormal, endNormal, buffer) {\r\n\t\tvar startBuffer = new Point(start.x + startNormal.x * buffer, start.y + startNormal.y * buffer);\r\n\t\tvar endBuffer = new Point(end.x + endNormal.x * buffer, end.y + endNormal.y * buffer);\r\n\t\tvar startBufferNormal, endBufferNormal;\r\n\t\tvar pts;\r\n\t\tif (startNormal.x != 0) {\r\n\t\t\tif ((endBuffer.x - startBuffer.x) / startNormal.x > 0) {\r\n\t\t\t\tstartBufferNormal = startNormal;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tstartBufferNormal = new Point(0, (endBuffer.y >= startBuffer.y) ? 1 : -1);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif ((endBuffer.y - startBuffer.y) / startNormal.y > 0) {\r\n\t\t\t\tstartBufferNormal = startNormal;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tstartBufferNormal = new Point((endBuffer.x >= startBuffer.x) ? 1 : -1, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (endNormal.x != 0) {\r\n\t\t\tif ((startBuffer.x - endBuffer.x) / endNormal.x > 0) {\r\n\t\t\t\tendBufferNormal = endNormal;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tendBufferNormal = new Point(0, (startBuffer.y >= endBuffer.y) ? 1 : -1);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif ((startBuffer.y - endBuffer.y) / endNormal.y > 0) {\r\n\t\t\t\tendBufferNormal = endNormal;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tendBufferNormal = new Point((startBuffer.x >= endBuffer.x) ? 1 : -1, 0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (startBufferNormal.dotProduct(endBufferNormal) == 0) {\r\n\t\t\tvar middle = (startBufferNormal.x == 0) ? new Point(startBuffer.x, endBuffer.y) : new Point(endBuffer.x, startBuffer.y);\r\n\t\t\tpts = [start, startBuffer, middle, endBuffer, end];\r\n\t\t}\r\n\t\telse if (startBufferNormal.dotProduct(endBufferNormal) < 0) {\r\n\t\t\tif (startBufferNormal.x == 0) {\r\n\t\t\t\tpts = [start, startBuffer, new Point(startBuffer.x, (start.y + end.y) / 2), new Point(endBuffer.x, (start.y + end.y) / 2), endBuffer, end];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tpts = [start, startBuffer, new Point((start.x + end.x) / 2, startBuffer.y), new Point((start.x + end.x) / 2, endBuffer.y), endBuffer, end];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tpts = [start, startBuffer, new Point(startBuffer.x + startBufferNormal.x * buffer, startBuffer.y + startBufferNormal.y * buffer), new Point(endBuffer.x + endBufferNormal.x * buffer, endBuffer.y + endBufferNormal.y * buffer), endBuffer, end];\r\n\t\t}\r\n\r\n\t\tvar prunePts = [];\r\n\t\tprunePts[0] = pts[0];\r\n\t\tfor (var i = 1; i < pts.length - 1; i++) {\r\n\t\t\tif ((pts[i].x == pts[i-1].x && pts[i].x == pts[i+1].x) || (pts[i].y == pts[i-1].y && pts[i].y == pts[i+1].y)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tprunePts.push(pts[i]);\r\n\t\t}\r\n\t\tprunePts.push(pts[pts.length - 1]);\r\n\t\treturn prunePts;\r\n\t}\r\n\r\n\t/**\r\n\t * Make a route based on the start, end and startNormal and endNormal\r\n\t * None of the parameters can be null\r\n\t * TODO: This method could use some improvement...\r\n\t */\r\n\tstatic routeInternal(start, end, startNormal, endNormal, buffer) {\r\n\t\tvar direction = start.getDirection(end);\r\n\t\tvar average = start.getMidPoint(end);\r\n\t\tvar pos = [];\r\n\t\tvar startPositive = new Point(startNormal.x*startNormal.x, startNormal.y*startNormal.y);\r\n\t\tvar endPositive = new Point(endNormal.x*endNormal.x, endNormal.y*endNormal.y);\r\n\t\tvar horizontal = startNormal.x != 0;\r\n\t\tpos[0] = horizontal ? start.y : start.x;\r\n\r\n\t\thorizontal = !horizontal;\r\n\t\tvar i;\r\n\t\tif (startNormal.dotProduct(endNormal) == 0) {\r\n\t\t\tif ((startNormal.dotProduct(direction) >= 0)\r\n\t\t\t\t&& (endNormal.dotProduct(direction) <= 0)) {\r\n\t\t\t\t// 0\r\n\t\t\t} else {\r\n\t\t\t\t// 2\r\n\t\t\t\tif (startNormal.dotProduct(direction) < 0)\r\n\t\t\t\t\ti = startPositive.dotProduct(start.getTranslated(startNormal.getScaled(buffer)));\r\n\t\t\t\telse\r\n\t\t\t\t\ti = horizontal ? average.y : average.x;\r\n\r\n\t\t\t\tpos.push(i);\r\n\t\t\t\thorizontal = !horizontal;\r\n\r\n\t\t\t\tif (endNormal.dotProduct(direction) > 0)\r\n\t\t\t\t\ti = endPositive.dotProduct(end.getTranslated(endNormal.getScaled(buffer)));\r\n\t\t\t\telse\r\n\t\t\t\t\ti = horizontal ? average.y : average.x;\r\n\r\n\t\t\t\tpos.push(i);\r\n\t\t\t\thorizontal = !horizontal;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (startNormal.dotProduct(endNormal) > 0) {\r\n\t\t\t\t//1\r\n\t\t\t\tif (startNormal.dotProduct(direction) >= 0)\r\n\t\t\t\t\ti = startPositive.dotProduct(start.getTranslated(startNormal.getScaled(buffer)));\r\n\t\t\t\telse\r\n\t\t\t\t\ti = endPositive.dotProduct(end.getTranslated(endNormal.getScaled(buffer)));\r\n\t\t\t\tpos.push(i);\r\n\t\t\t\thorizontal = !horizontal;\r\n\t\t\t} else {\r\n\t\t\t\t//3 or 1\r\n\t\t\t\tif (startNormal.dotProduct(direction) < 0) {\r\n\t\t\t\t\ti = startPositive.dotProduct(start.getTranslated(startNormal.getScaled(buffer)));\r\n\t\t\t\t\tpos.push(i);\r\n\t\t\t\t\thorizontal = !horizontal;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti = horizontal ? average.y : average.x;\r\n\t\t\t\tpos.push(i);\r\n\t\t\t\thorizontal = !horizontal;\r\n\r\n\t\t\t\tif (startNormal.dotProduct(direction) < 0) {\r\n\t\t\t\t\ti = endPositive.dotProduct(end.getTranslated(endNormal.getScaled(buffer)));\r\n\t\t\t\t\tpos.push(i);\r\n\t\t\t\t\thorizontal = !horizontal;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tpos.push(horizontal ? end.y : end.x);\r\n\r\n\t\treturn pos;\r\n\t}\r\n\r\n\t// Process the positions.\r\n\tstatic processPositions(start, end, positions, horizontal) {\r\n\t\tvar pos = [];\r\n\t\tpos[0] = horizontal ? start.x : start.y;\r\n\t\tvar i;\r\n\t\tfor (i = 0; i < positions.length; i++) {\r\n\t\t\tpos[i + 1] = positions[i];\r\n\t\t}\r\n\t\tpos.push((horizontal == (positions.length % 2 == 1)) ? end.x : end.y);\r\n\r\n\t\tvar pts = [];\r\n\t\tpts[0] = start;\r\n\t\tvar p;\r\n\t\tvar current, prev;\r\n\t\tfor (i = 2; i < pos.length - 1; i++) {\r\n\t\t\thorizontal = !horizontal;\r\n\t\t\tprev = pos[i - 1];\r\n\t\t\tcurrent = pos[i];\r\n\t\t\tp = horizontal ? new Point(prev, current) : new Point(current, prev);\r\n\t\t\tpts.push(p);\r\n\t\t}\r\n\t\tpts.push(end);\r\n\t\treturn pts;\r\n\t}\r\n\r\n\t/**\r\n\t * Automatically route the connection to avoid intersections with other vertices.\r\n\t */\r\n\tautoRoute(pts, container, boxes, startBox, endBox) {\r\n\t\tvar side, side2, d, box, intersect, j;\r\n\t\tvar channel, channel2, pt, dir;\r\n\r\n\t\tvar startPadding = 0, endPadding;\r\n\t\t// first get the start and end channel\r\n\t\tbox = boxes[endBox];\r\n\t\tpt = pts[pts.length - 2];\r\n\t\tif (pt.y < box.y)\r\n\t\t\tside = 1;\r\n\t\telse if (pt.y > box.y + box.height)\r\n\t\t\tside = 3;\r\n\t\telse if (pt.x < box.x)\r\n\t\t\tside = 0;\r\n\t\telse\r\n\t\t\tside = 2;\r\n\t\tchannel = _getChannel(container, endBox, boxes, side);\r\n\t\tendPadding = channel.horizontal ? (channel.right - channel.left)/2 : (channel.bottom - channel.top)/2;\r\n\r\n\t\tfor (var i = 0; i < pts.length - 1; i++) {\r\n\t\t\tif (pts[i+1].x == pts[i].x && pts[i+1].y == pts[i].y) continue;\r\n\t\t\tintersect = _getFirstIntersection(pts, i, boxes, startBox, endBox);\r\n\t\t\tif (!intersect) continue;\r\n\t\t\tj = intersect[0];\r\n\t\t\tside = intersect[1];\r\n\t\t\tbox = boxes[j];\r\n\t\t\tchannel = _getChannel(container, j, boxes, side);\r\n\t\t\tswitch(side) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tpt = new Point((channel.right + channel.left)/2, pts[i].y);\r\n\t\t\t\t\tdir = _getRouteTendency(pts, i, pt, box, side);\r\n\t\t\t\t\tside2 = dir < 0 ? 1 : 3;\r\n\t\t\t\t\tchannel2 = _getChannel(container, j, boxes, side2);\r\n\t\t\t\t\t// if the previous point is in the channel2, use that point instead of center of the channel.\r\n\t\t\t\t\tif (i > 1 && (pts[i-2].y == pts[i-1].y) && (pts[i-1].y > channel2.top && pts[i-1].y < channel2.bottom))\r\n\t\t\t\t\t\td = pts[i-1].y - pt.y;\r\n\t\t\t\t\telse if (i < pts.length - 3 && (pts[i+2].y == pts[i+3].y) && (pts[i+2].y > channel2.top && pts[i+2].y < channel2.bottom))\r\n\t\t\t\t\t\td = pts[i+2].y - pt.y;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\td = (channel2.bottom + channel2.top)/2 - pt.y;\r\n\t\t\t\t\t// check if we need this pt.\r\n\t\t\t\t\tif ((side == 0 && pt.x <= pts[i].x) || (side == 2 && pt.x >= pts[i].x))\r\n\t\t\t\t\t\tpt = null;\r\n\t\t\t\t\telse if (i > 0) {\r\n\t\t\t\t\t\t// see if we can push the line out to where we started.\r\n\t\t\t\t\t\tif (!_hasIntersection(\r\n\t\t\t\t\t\t\t\t[new Point(pts[i].x, pts[i].y), new Point(pts[i].x, pts[i].y + d), new Point(pt.x, pt.y + d)],\r\n\t\t\t\t\t\t\t\tboxes))\r\n\t\t\t\t\t\t\tpt = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tpt = new Point(pts[i].x, (channel.bottom + channel.top)/2);\r\n\t\t\t\t\tdir = _getRouteTendency(pts, i, pt, box, side);\r\n\t\t\t\t\tside2 = dir < 0 ? 0 : 2;\r\n\t\t\t\t\tchannel2 = _getChannel(container, j, boxes, side2);\r\n\t\t\t\t\t// if the previous point is in the channel2, use that point instead of center of the channel.\r\n\t\t\t\t\tif (i > 1 && (pts[i-2].x == pts[i-1].x) && (pts[i-1].x > channel2.left && pts[i-1].x < channel2.right))\r\n\t\t\t\t\t\td = pts[i-1].x - pt.x;\r\n\t\t\t\t\telse if (i < pts.length - 3 && (pts[i+2].x == pts[i+3].x) && (pts[i+2].x > channel2.left && pts[i+2].x < channel2.right))\r\n\t\t\t\t\t\td = pts[i+2].x - pt.x;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\td = (channel2.right + channel2.left)/2 - pt.x;\r\n\t\t\t\t\t// check if we need this pt.\r\n\t\t\t\t\tif ((side == 1 && pt.y <= pts[i].y) || (side == 3 && pt.y >= pts[i].y))\r\n\t\t\t\t\t\tpt = null;\r\n\t\t\t\t\telse if (i > 0) {\r\n\t\t\t\t\t\t// see if we can push the line out to where we started.\r\n\t\t\t\t\t\tif (!_hasIntersection(\r\n\t\t\t\t\t\t\t\t[new Point(pts[i].x, pts[i].y), new Point(pts[i].x + d, pts[i].y), new Point(pt.x + d, pt.y)],\r\n\t\t\t\t\t\t\t\tboxes))\r\n\t\t\t\t\t\t\tpt = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t// max points.\r\n\t\t\tif (i > 20) return;\r\n\t\t\tif (pt && (pt.x != pts[i].x || pt.y != pts[i].y)) {\r\n\t\t\t\tpts.splice(i+1, 0, pt);\r\n\t\t\t\t_moveSegment(pts, i+1, d, startPadding, endPadding);\r\n\t\t\t\ti++;\r\n\t\t\t} else\r\n\t\t\t\t_moveSegment(pts, i, d, startPadding, endPadding);\r\n\t\t}\r\n\t}\r\n\r\n\t_hasIntersection(pts, boxes) {\r\n\t\tfor (var i = 0; i < pts.length - 1; i++) {\r\n\t\t\tfor (var j = 0; j < boxes.length; j++) {\r\n\t\t\t\tif (boxes[j].detectIntersection(pts[i], pts[i+1]) >= 0)\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t_getFirstIntersection(pts, i, boxes, startBox, endBox) {\r\n\t\tvar box, side, savedIndex = null, savedSide = null;\r\n\t\tfor (var j = 0; j < boxes.length; j++) {\r\n\t\t\tif ((i == 0 && j == startBox) || (i == pts.length - 2 && j == endBox))\r\n\t\t\t\tcontinue;\r\n\t\t\tbox = boxes[j];\r\n\t\t\tside = box.detectIntersection(pts[i], pts[i+1]);\r\n\t\t\tif (side >= 0) {\r\n\t\t\t\tif (savedIndex == null) {\r\n\t\t\t\t\tsavedIndex = j;\r\n\t\t\t\t\tsavedSide = side;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (boxes[savedIndex].distance(pts[i]) > box.distance(pts[i])) {\r\n\t\t\t\t\t\tsavedIndex = j;\r\n\t\t\t\t\t\tsavedSide = side;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (savedIndex != null)\r\n\t\t\treturn [savedIndex, savedSide];\r\n\t\treturn null;\r\n\t}\r\n\r\n\t_getRouteTendency(pts, i, breakPt, box, side) {\r\n\t\tvar dir;\r\n\t\tvar p;\r\n\t\tswitch (side) {\r\n\t\t\tcase 0:\r\n\t\t\tcase 2:\r\n\t\t\t\tp = \"y\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\tcase 3:\r\n\t\t\t\tp = \"x\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t//first try the breakpt.\r\n\t\tdir = _getRouteDirection(breakPt, pts[pts.length - 1])[p];\r\n\t\tif (dir == 0) {\r\n\t\t\tdir = -_getRouteDirection(pts[0], pts[pts.length - 1])[p];\r\n\t\t\tif (dir == 0) {\r\n\t\t\t\tif (breakPt[p] < box.getCenter()[p])\r\n\t\t\t\t\tdir = -1;\r\n\t\t\t\telse\r\n\t\t\t\t\tdir = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn dir;\r\n\t}\r\n\r\n\t_getRouteDirection(pt1, pt2) {\r\n\t\tif (pt1.x == pt2.x) {\r\n\t\t\tif (pt1.y < pt2.y) return Point.S;\r\n\t\t\treturn Point.N;\r\n\t\t} else if (pt1.y == pt2.y) {\r\n\t\t\tif (pt1.x < pt2.x) return Point.E;\r\n\t\t\treturn Point.W;\r\n\t\t} else if (pt1.x < pt2.x) {\r\n\t\t\tif (pt1.y < pt2.y) return Point.SE;\r\n\t\t\treturn Point.NE;\r\n\t\t} else {\r\n\t\t\tif (pt1.y < pt2.y) return Point.SW;\r\n\t\t\treturn Point.NW;\r\n\t\t}\r\n\t}\r\n\r\n\t_getChannel(container, index, boxes, side) {\r\n\t\tvar maxChannelWidth = this.maxChannelWidth;\r\n\t\tvar box1 = boxes[index], box2;\r\n\t\tvar pt, i;\r\n\t\tvar channel = {}, l, t, b, r;\r\n\t\tswitch (side) {\r\n\t\t\tcase 0:\r\n\t\t\t\tpt = box1.getLeft();\r\n\t\t\t\tchannel.right = pt.x;\r\n\t\t\t\tchannel.horizontal = false;\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tr = boxes[i].getRight().x;\r\n\t\t\t\t\tif (r >= pt.x) continue;\r\n\t\t\t\t\tif (!channel.left || channel.left < r)\r\n\t\t\t\t\t\tchannel.left = r;\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.left) {\r\n\t\t\t\t\tchannel.left = container.getLeft().x;\r\n\t\t\t\t\tif (channel.right - channel.left > maxChannelWidth)\r\n\t\t\t\t\t\tchannel.left = channel.right - maxChannelWidth;\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tbox2 = boxes[i];\r\n\t\t\t\t\tb = box2.getBottom().y;\r\n\t\t\t\t\tt = box2.getTop().y;\r\n\t\t\t\t\tif (b < pt.y && (box2.getRight() > channel.left && box2.getLeft() < channel.right)) {\r\n\t\t\t\t\t\tif (!channel.top || channel.top < b)\r\n\t\t\t\t\t\t\tchannel.top = b;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (t > pt.y && (box2.getRight() > channel.left && box2.getLeft() < channel.right)) {\r\n\t\t\t\t\t\tif (!channel.bottom || channel.bottom > t)\r\n\t\t\t\t\t\t\tchannel.bottom = t;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.top) channel.top = container.getTop().y;\r\n\t\t\t\tif (!channel.bottom) channel.bottom = container.getBottom().y;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tpt = box1.getTop();\r\n\t\t\t\tchannel.horizontal = true;\r\n\t\t\t\tchannel.bottom = pt.y;\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tb = boxes[i].getBottom().y;\r\n\t\t\t\t\tif (b >= pt.y) continue;\r\n\t\t\t\t\tif (!channel.top || channel.top < b)\r\n\t\t\t\t\t\tchannel.top = b;\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.top) {\r\n\t\t\t\t\tchannel.top = container.getTop().y;\r\n\t\t\t\t\tif (channel.bottom - channel.top > maxChannelWidth)\r\n\t\t\t\t\t\tchannel.top = channel.bottom - maxChannelWidth;\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tbox2 = boxes[i];\r\n\t\t\t\t\tl = box2.getLeft().x;\r\n\t\t\t\t\tr = box2.getRight().x;\r\n\t\t\t\t\tif (r < pt.x && (box2.getBottom() > channel.top && box2.getTop() < channel.bottom)) {\r\n\t\t\t\t\t\tif (!channel.left || channel.left < r)\r\n\t\t\t\t\t\t\tchannel.left = r;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (l > pt.x && (box2.getBottom() > channel.top && box2.getTop() < channel.bottom)) {\r\n\t\t\t\t\t\tif (!channel.right || channel.right > l)\r\n\t\t\t\t\t\t\tchannel.right = l;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.left) channel.left = container.getLeft().x;\r\n\t\t\t\tif (!channel.right) channel.right = container.getRight().x;\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tpt = box1.getRight();\r\n\t\t\t\tchannel.horizontal = false;\r\n\t\t\t\tchannel.left = pt.x;\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tl = boxes[i].getLeft().x;\r\n\t\t\t\t\tif (l <= pt.x) continue;\r\n\t\t\t\t\tif (!channel.right || channel.right > l)\r\n\t\t\t\t\t\tchannel.right = l;\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.right) {\r\n\t\t\t\t\tchannel.right = container.getRight().x;\r\n\t\t\t\t\tif (channel.right - channel.left > maxChannelWidth)\r\n\t\t\t\t\t\tchannel.right = channel.left + maxChannelWidth;\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tbox2 = boxes[i];\r\n\t\t\t\t\tb = box2.getBottom().y;\r\n\t\t\t\t\tt = box2.getTop().y;\r\n\t\t\t\t\tif (b < pt.y && (box2.getRight() > channel.left && box2.getLeft() < channel.right)) {\r\n\t\t\t\t\t\tif (!channel.top || channel.top < b)\r\n\t\t\t\t\t\t\tchannel.top = b;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (t > pt.y && (box2.getRight() > channel.left && box2.getLeft() < channel.right)) {\r\n\t\t\t\t\t\tif (!channel.bottom || channel.bottom > t)\r\n\t\t\t\t\t\t\tchannel.bottom = t;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.top) channel.top = container.getTop().y;\r\n\t\t\t\tif (!channel.bottom) channel.bottom = container.getBottom().y;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tpt = box1.getBottom();\r\n\t\t\t\tchannel.horizontal = true;\r\n\t\t\t\tchannel.top = pt.y;\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tbox2 = boxes[i];\r\n\t\t\t\t\tif (box2.getTop().y <= pt.y) continue;\r\n\t\t\t\t\tif (!channel.bottom || channel.bottom > box2.getTop().y)\r\n\t\t\t\t\t\tchannel.bottom = box2.getTop().y;\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.bottom) {\r\n\t\t\t\t\tchannel.bottom = container.getBottom().y;\r\n\t\t\t\t\tif (channel.bottom - channel.top > maxChannelWidth)\r\n\t\t\t\t\t\tchannel.bottom = channel.top + maxChannelWidth;\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < boxes.length; i++) {\r\n\t\t\t\t\tif (i == index) continue;\r\n\t\t\t\t\tbox2 = boxes[i];\r\n\t\t\t\t\tl = box2.getLeft().x;\r\n\t\t\t\t\tr = box2.getRight().x;\r\n\t\t\t\t\tif (r < pt.x && (box2.getBottom() > channel.top && box2.getTop() < channel.bottom)) {\r\n\t\t\t\t\t\tif (!channel.left || channel.left < r)\r\n\t\t\t\t\t\t\tchannel.left = r;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (l > pt.x && (box2.getBottom() > channel.top && box2.getTop() < channel.bottom)) {\r\n\t\t\t\t\t\tif (!channel.right || channel.right > l)\r\n\t\t\t\t\t\t\tchannel.right = l;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!channel.left) channel.left = container.getLeft().x;\r\n\t\t\t\tif (!channel.right) channel.right = container.getRight().x;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn channel;\r\n\t}\r\n\r\n\t/**\r\n\t * Move a line segment by a specified distance.\r\n\t *\r\n\t * @param pts the list of points.\r\n\t * @param i the index of the segment.\r\n\t * @param d the distance to move.\r\n\t * @param startPadding\r\n\t * @param endPadding\r\n\t */\r\n\t_moveSegment(pts, i, d, startPadding, endPadding) {\r\n\t\t// first check if we need to add new line segments.\r\n\t\tvar dir, l, pt;\r\n\t\tif (i == 0) {\r\n\t\t\t// we need to break off the segment, since we can't change the starting point.\r\n\t\t\tdir = pts[0].getDirection(pts[1]);\r\n\t\t\tif (!startPadding)\r\n\t\t\t\tstartPadding = this.MIN_BUFFER;\r\n\t\t\tl = Math.min(startPadding, pts[0].distance(pts[1])/2);\r\n\t\t\tpt = pts[0].getTranslated(dir.scale(l));\r\n\t\t\tpts.splice(1, 0, pt);\r\n\t\t\t_moveSegment(pts, i+1, d);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (i == pts.length - 2) {\r\n\t\t\t// we need to break off the segment, since we can't change the end point.\r\n\t\t\tdir = pts[pts.length-1].getDirection(pts[pts.length-2]);\r\n\t\t\tif (!endPadding)\r\n\t\t\t\tendPadding = this.MIN_BUFFER;\r\n\t\t\tl = Math.min(endPadding, pts[pts.length-1].distance(pts[pts.length-2])/2);\r\n\t\t\tpt = pts[pts.length - 1].getTranslated(dir.scale(l));\r\n\t\t\tpts.splice(pts.length - 1, 0, pt);\r\n\t\t\t_moveSegment(pts, i, d);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (pts[i].y == pts[i+1].y) {\r\n\t\t\tif (i > 0 && pts[i - 1].y == pts[i].y) {\r\n\t\t\t\tpts.splice(i + 1, 0, pts[i].clone());\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tif (i < pts.length - 2 && pts[i+1].y == pts[i+2].y)\r\n\t\t\t\tpts.splice(i + 1, 0, pts[i+1].clone());\r\n\t\t\tpts[i].y += d;\r\n\t\t\tpts[i+1].y += d;\r\n\t\t} else {\r\n\t\t\tif (i > 0 && pts[i - 1].x == pts[i].x) {\r\n\t\t\t\tpts.splice(i + 1, 0, pts[i].clone());\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tif (i < pts.length - 2 && pts[i+1].x == pts[i+2].x)\r\n\t\t\t\tpts.splice(i + 1, 0, pts[i+1].clone());\r\n\t\t\tpts[i].x += d;\r\n\t\t\tpts[i+1].x += d;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * This method will merge the redundant segments.\r\n\t */\r\n\t_mergeSegments(pts) {\r\n\t\tvar h1 = pts[pts.length-1].y == pts[pts.length-2].y;\r\n\t\tvar h2;\r\n\t\tfor (var i = pts.length - 2; i >= 1; i--) {\r\n\t\t\th2 = pts[i].y == pts[i-1].y;\r\n\t\t\tif (h2 == h1 || (pts[i].equals(pts[i-1])))\r\n\t\t\t\tpts.splice(i, 1);\r\n\t\t\telse\r\n\t\t\t\th1 = !h1;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nlinkTypes['direct'] = DirectLink;\r\nlinkTypes['bezier'] = BezierLink;\r\nlinkTypes['entityRelations'] = EntityRelations;\r\nlinkTypes['manhattan'] = Manhattan;\r\n\r\nexport default Link;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Link.js\n **/","import _ from \"lodash\";\nimport Events from \"bean\";\nimport * as KeyUtils from \"./KeyUtils\";\nimport DomUtils from \"../util/DomUtils\";\nimport StringBuffer from \"./../util/StringBuffer\";\n\nconst DEFAULTS = {\n\tstopPropagation: false\n};\n\nexport default class EventDispatcher {\n\t/**\n\t * Constructor\n\t * @param root the root element that the manager will listen to.\n\t * @param zoomScale\n\t */\n\tconstructor(root, zoomScale = [0, Infinity], config = {}) {\n\t\tthis.root = root;\n\t\tthis.rootNS = root.getAttribute('ns') || 'root';\n\t\tthis.zoomScale = zoomScale;\n\t\t_.assign(this, DEFAULTS, config);\n\t\tthis.scale = 1.0;\n\t\tthis.listeners = {};\n\t\tthis.dragging = false;\n\t\tthis.handler = _.bind(this.handleEvent, this);\n\t\tthis.started = false;\n\n\t\t// Simulate mouseenter/mouseleave events\n\t\tthis.enterStack = [];\n\t}\n\n\t/**\n\t * Start listening for events.\n\t */\n\tstart() {\n\t\tif (this.started) return;\n\t\tEvents.on(this.root, 'mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel', this.handler);\n\t\tthis.startKeys();\n\t\tthis.started = true;\n\t}\n\n\t/**\n\t * Stop listening for events.\n\t */\n\tstop() {\n\t\tif (!this.started) return;\n\t\tEvents.off(this.root, 'mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel', this.handler);\n\t\tthis.stopKeys();\n\t\tthis.started = false;\n\t}\n\n\tstartKeys() {\n\t\tEvents.on(document, 'keydown keyup', this.handler);\n\t}\n\n\tstopKeys() {\n\t\tEvents.off(document, 'keydown keyup', this.handler);\n\t}\n\n\tgetEventInfo(event) {\n\t\tlet target = event.target;\n\t\tlet buf = new StringBuffer(), ns, stack = [], isRoot = false;\n\t\twhile (!isRoot && target && target != document) {\n\t\t\tns = target.getAttribute('ns');\n\t\t\tif (ns) {\n\t\t\t\tisRoot = _.startsWith(ns, \"root.\");\n\t\t\t\tif (isRoot) {\n\t\t\t\t\tns = ns.substring(5);\n\t\t\t\t\tevent.rootTarget = target;\n\t\t\t\t}\n\t\t\t\tif (!event.nsTarget) event.nsTarget = target;\n\t\t\t\tstack.splice(0, 0, target);\n\t\t\t\tbuf.prepend(ns);\n\t\t\t}\n\t\t\ttarget = target.parentNode;\n\t\t}\n\t\tif (!isRoot)\n\t\t\tevent.rootTarget = event.nsTarget;\n\n\t\t// target stack is a stack of all the ns targets up to the one with the data binding.\n\t\tevent.targetStack = stack;\n\t\tns = buf.toString('.');\n\t\tif (ns == '') ns = this.rootNS;\n\t\treturn {data: event.rootTarget, ns: ns};\n\t}\n\n\t/**\n\t * The main event handler method, it processes event and generate relevant events to dispatch.\n\t */\n\thandleEvent(event) {\n\t\tlet type = event.type;\n\n\t\t// Do not dispatch other events if we are dragging.\n\t\tif (this.dragging || DomUtils.eventFromInput(event)) return;\n\n\t\tlet data, ns, pos = this.getPosition(event), info, isKeyEvent = (type == 'keydown' || type =='keyup');\n\t\tif (isKeyEvent) {\n\t\t\tdata = this.root;\n\t\t\tns = KeyUtils.getKeyEvent(event);\n\t\t} else {\n\t\t\tinfo = this.getEventInfo(event);\n\t\t\tif (!info) return;\n\t\t\tdata = info.data;\n\t\t\tns = info.ns;\n\t\t}\n\n\t\t//Utils.log('EventDispatcher', \"handleEvent - \" + type + ';ns=' + ns);\n\n\t\tif (type == 'mousewheel') {\n\t\t\tthis.scale *= Math.pow(2, event.wheelDelta * 0.002);\n\t\t\tthis.scale = Math.max(Math.min(this.zoomScale[1], this.scale), this.zoomScale[0]);\n\t\t\tevent.scale = this.scale;\n\t\t\ttype = 'zoom';\n\t\t}\n\n\t\t// See if we should create drag events\n\t\tif (type == 'mousedown' && event.button == 0 /*only drag on left click*/) {\n\t\t\t// Create drag object.\n\t\t\tconst dragObject = {data: data, pos: ns == 'root' ? EventDispatcher.mouse(this.root, event) : pos};\n\t\t\tthis.dragging = false;\n\t\t\t// Start listening for mouse move.\n\t\t\tlet dragPos;\n\n\t\t\tconst mousemove = (event) => {\n\t\t\t\tlet currentPos = this.getPosition(event);\n\t\t\t\tif (!this.dragging) {\n\t\t\t\t\t// check if the mouse has moved. IE always fire mousemove after mousedown even if the mouse hasn't moved yet.\n\t\t\t\t\tif (dragObject.pos[0] == currentPos[0] && dragObject.pos[1] == currentPos[1]) return;\n\n\t\t\t\t\t// start dragging\n\t\t\t\t\tthis.dragging = true;\n\t\t\t\t\tevent.rootTarget = dragObject.data;\n\t\t\t\t\tthis.dispatch(event, 'dragstart', ns, dragObject.data, dragObject.pos);\n\t\t\t\t}\n\t\t\t\tif (ns == \"root\")\n\t\t\t\t\tdragPos = EventDispatcher.mouse(this.root, event);\n\t\t\t\telse\n\t\t\t\t\tdragPos = currentPos;\n\t\t\t\tthis.getEventInfo(event);\n\t\t\t\tthis.dispatch(event, 'drag', ns, dragObject.data, dragPos);\n\t\t\t};\n\t\t\tconst mouseup = (event) => {\n\t\t\t\tif (ns == \"root\")\n\t\t\t\t\tdragPos = EventDispatcher.mouse(this.root, event);\n\t\t\t\telse\n\t\t\t\t\tdragPos = this.getPosition(event);\n\n\t\t\t\tlet info = this.getEventInfo(event);\n\t\t\t\tif (this.dragging) {\n\t\t\t\t\tthis.dragging = false;\n\t\t\t\t\tthis.dispatch(event, 'dragend', ns, dragObject.data, dragPos);\n\t\t\t\t} else {\n\t\t\t\t\tthis.dispatch(event, 'mouseup', ns, info.data, dragPos);\n\t\t\t\t}\n\n\t\t\t\tEvents.off(window, 'mousemove', mousemove);\n\t\t\t\tEvents.off(window, 'mouseup', mouseup);\n\t\t\t};\n\t\t\tevent.preventDefault();\n\t\t\tEvents.on(window, 'mousemove', mousemove);\n\t\t\tEvents.on(window, 'mouseup', mouseup);\n\t\t}\n\n\t\tif (!isKeyEvent)\n\t\t\tthis.simulateEnterLeave(event, type, ns, data, pos);\n\t\tthis.dispatch(event, type, ns, data, pos);\n\n\t\t// disable the default context menu\n\t\t//if (type == 'contextmenu')\n\t\t//\tevent.preventDefault();\n\t}\n\n\t/**\n\t * try to simulate mouseenter/mouseleave events.\n\t */\n\tsimulateEnterLeave(event, type, ns, data, pos) {\n\t\tlet last, stack;\n\t\tconst clearEnterStack = (k) => {\n\t\t\tk = k || 0;\n\t\t\t// Clear off the enter stack.\n\t\t\twhile (this.enterStack.length >= k + 1) {\n\t\t\t\tlast = this.enterStack.pop();\n\t\t\t\tthis.dispatch(event, 'mouseleave', last.ns, last.data, pos);\n\t\t\t}\n\t\t};\n\t\tconst getNS = function(index) {\n\t\t\tlet buf = new StringBuffer();\n\t\t\tfor (let i = 0; i <= index; i++) {\n\t\t\t\tvar val = stack[i].getAttribute(\"ns\");\n\t\t\t\tif (_.startsWith(val, \"root.\"))\n\t\t\t\t\tval = val.substring(5);\n\t\t\t\tbuf.append(val);\n\t\t\t}\n\t\t\treturn buf.toString('.');\n\t\t};\n\n\t\tif (ns && ns != this.rootNS) {\n\t\t\tif (type == 'mouseover') {\n\t\t\t\tstack = event.targetStack;\n\t\t\t\tlet item;\n\t\t\t\tfor (let i = 0; i < stack.length; i++) {\n\t\t\t\t\tif (i < this.enterStack.length) {\n\t\t\t\t\t\tif (this.enterStack[i].target != stack[i]) {\n\t\t\t\t\t\t\tclearEnterStack(i);\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\titem = {data: data, ns: getNS(i), target: stack[i]};\n\t\t\t\t\tthis.enterStack.push(item);\n\t\t\t\t\tthis.dispatch(event, 'mouseenter', item.ns, data, pos);\n\t\t\t\t}\n\t\t\t\tif (stack.length < this.enterStack.length)\n\t\t\t\t\tclearEnterStack(stack.length);\n\t\t\t}\n\t\t}\n\t\tif (ns == this.rootNS && this.enterStack.length > 0)\n\t\t\tclearEnterStack();\n\t}\n\n\tdispatch(event, type, ns, data, pos) {\n\t\t//if (type != 'mouseover' && type != 'mouseout')\n\t\t//\tUtils.log('EventDispatcher', \"dispatch - \" + type + '.' + ns + ';' + pos + ';rootTarget=' + event.rootTarget + ';data=' + data);\n\t\tif (!this.started) return;\n\t\tconst nsType = ns ? type + '.' + ns : type;\n\t\t_.forEach(this.listeners, (listeners, key) => {\n\t\t\tif (EventDispatcher.match(nsType, key)) {\n\t\t\t\t_.forEach(listeners, (listener) => {\n\t\t\t\t\tif (!listener.context)\n\t\t\t\t\t\tlistener.callback.apply(window, [type, ns, data, pos, event]);\n\t\t\t\t\telse\n\t\t\t\t\t\tlistener.callback.apply(listener.context, [type, ns, data, pos, event]);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// after dispatching, do not propagate.\n\t\tif (this.stopPropagation && event.stopPropagation)\n\t\t\tevent.stopPropagation();\n\t}\n\n\tgetPosition(event) {\n\t\tconst pos = EventDispatcher.mouse(this.root, event);\n\t\tif(! _.isNaN(pos[0]) && ! _.isNaN(pos[1]))\n\t\t\tthis.lastPosition = pos;\n\t\treturn this.lastPosition;\n\t}\n\n\t/**\n\t * Registers a key event handler\n\t * // Key is object {ctrl, alt, shift, meta, code}\n\t */\n\tregisterKey(type, key, callback, context) {\n\t\tif (_.isArray(key)) {\n\t\t\t_.forEach(key, (k) => {\n\t\t\t\tthis.registerKey(type, k, callback, context);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tkey = KeyUtils.getKeyData(key.ctrl, key.alt, key.shift, key.meta, key.code);\n\t\tif(!key.length) return;\n\t\tkey = new StringBuffer(type).append(key).toString('.');\n\n\t\tconst listener = {callback: callback, context: context};\n\t\tthis.listeners[key] || (this.listeners[key] = []);\n\t\tthis.listeners[key].push(listener);\n\t}\n\n\tunregisterKey(type, key, callback, context) {\n\t\tif (_.isArray(key)) {\n\t\t\t_.forEach(key, (k) => {\n\t\t\t\tthis.unregisterKey(type, k, callback, context);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tkey = KeyUtils.getKeyData(key.ctrl, key.alt, key.shift, key.meta, key.code);\n\t\tif(!key.length) return;\n\t\tkey = new StringBuffer(type).append(key).toString('.');\n\n\t\tlet listeners = this.listeners[key], listener;\n\t\tif (!listeners) return;\n\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\tlistener = listeners[i];\n\t\t\tif (listener.callback === callback && (!context || context === listener.context)) {\n\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Registers an event handler\n\t */\n\tregister(type, callback, context, zIndex) {\n\t\tif (_.isArray(type)) {\n\t\t\t_.forEach(type, (t) => {\n\t\t\t\tthis.register(t, callback, context, zIndex);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tconst listener = {callback: callback, context: context, zIndex: zIndex};\n\t\tthis.listeners[type] || (this.listeners[type] = []);\n\t\tthis.listeners[type].push(listener);\n\t}\n\n\tunregister(type, callback, context) {\n\t\tlet listeners = this.listeners[type], listener;\n\t\tif (!listeners) return;\n\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\tlistener = listeners[i];\n\t\t\tif (listener.callback === callback && (!context || context === listener.context)) {\n\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.stop();\n\t\tdelete this.root;\n\t\tdelete this.listeners;\n\t\tdelete this.enterStack;\n\t}\n\n\t/**\n\t * Check if the registered event type matches the real event type. \"*\" is allowed as a wild card.\n\t */\n\tstatic match(nsType, registeredType) {\n\t\tconst arr = registeredType.split('*');\n\t\tif (arr.length == 1)\n\t\t\treturn nsType == registeredType;\n\n\t\tlet substr, index = 0;\n\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\tif (arr[i].length == 0) continue;\n\t\t\tsubstr = nsType.slice(index);\n\t\t\tindex = substr.indexOf(arr[i]);\n\t\t\tif (index < 0)\n\t\t\t\treturn false;\n\t\t\tindex += arr[i].length;\n\t\t}\n\t\treturn true;\n\t}\n\n\tstatic mouse(container, e) {\n\t\tif (e.changedTouches) e = e.changedTouches[0];\n\t\tvar svg = container.ownerSVGElement || container;\n\t\tif (svg.createSVGPoint) {\n\t\t\tvar point = svg.createSVGPoint();\n\t\t\tpoint.x = e.clientX; point.y = e.clientY;\n\t\t\tpoint = point.matrixTransform(container.getScreenCTM().inverse());\n\t\t\treturn [point.x, point.y];\n\t\t}\n\t\tvar rect = container.getBoundingClientRect();\n\t\treturn [e.clientX - rect.left - container.clientLeft, e.clientY - rect.top - container.clientTop];\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/event/EventDispatcher.js\n **/","///////////////////////////////////////////////////////////////////////////////\n//                                                                           //\n//           The Key Utility CLass for the Event Dispatcher          \t     //\n//                                                                           //\n///////////////////////////////////////////////////////////////////////////////\n\nimport StringBuffer from \"./../util/StringBuffer\";\n\n/**\n * KEY constant\n */\nconst KEY = {\n\tALT          : 18,\n\tBACK_SPACE   : 8,\n\tCAPS_LOCK    : 20,\n\tCONTROL      : 17,\n\tDELETE       : 46,\n\tDOWN         : 40,\n\tEND          : 35,\n\tENTER        : 13,\n\tESCAPE       : 220,\n\tHOME         : 36,\n\tLEFT         : 37,\n\tMETA         : 224,\n\tNUM_LOCK     : 144,\n\tPAGE_DOWN    : 34,\n\tPAGE_UP      : 33,\n\tPAUSE        : 19,\n\tPRINTSCREEN  : 44,\n\tRIGHT        : 39,\n\tSCROLL_LOCK  : 145,\n\tSHIFT        : 16,\n\tSPACE        : 32,\n\tTAB          : 9,\n\tUP           : 38\n\t//ADD          : DomUtils.isFireFox ? 61  : 187,\n\t//SUBTRACT     : DomUtils.isFireFox ? 173 : 189\n};\n\nexport function getKeyEvent(event) {\n\tif (!event || !event instanceof KeyboardEvent) {\n\t\treturn null;\n\t}\n\n\tvar key = event.keyCode || event.which;\n\n\t// Need to find a way to avoid this\n\tif (key >= 16 && key <= 18) {\n\t\tkey = null;\n\t}\n\n\treturn getKeyData(event.ctrlKey, event.altKey, event.shiftKey, event.metaKey, key);\n}\n\nexport function getKeyData(ctrl, alt, shift, meta, key) {\n\tvar buf = new StringBuffer();\n\n\tif (ctrl) buf.append(\"CTRL\");\n\tif (alt) buf.append(\"ALT\");\n\tif (shift) buf.append(\"SHIFT\");\n\tif (meta) buf.append(\"META\");\n\tif (key) buf.append(key);\n\n\treturn buf.toString(\".\");\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/event/KeyUtils.js\n **/","import _ from \"lodash\";\nimport Utils from \"../util/Utils\";\nimport Node from \"./Node\";\nimport Edge from \"./Edge\";\nimport Marker from \"../view/Marker\";\n\nconst nodeDefaults = {\n\tname: 'Default',\n\trole: 'node',\n\tdraggable: true,\n\tselectable: true,\n\teditable: true,\n\tresizable: false,\n\tsourceable: true,\n\ttargetable: true,\n\tvisible: true\n};\n\nconst edgeDefaults = {\n\tname: 'Default',\n\trole: 'edge',\n\tselectable: true,\n\tvisible: true,\n\tstartMarker: null,\n\tendMarker: {\n\t\tid: 'Default_EndMarker',\n\t\ttype: 'arrow',\n\t\tsize: 10,\n\t\tcolor: '#0ea117'\n\t},\n\t/* start and end is only used if the edge is not connected to a node */\n\tstart: [0, 0],\n\tend: [400, 200]\n};\n\nclass Graph {\n\tconstructor(id = _.uniqueId(\"G\"), config = {}, model) {\n\t\tthis.id = id;\n\n\t\tthis.nodes = {};\n\t\tthis.edges = {};\n\n\t\tthis.selection = null;\n\t\tthis.destroyed = false;\n\n\t\tUtils.buildTypes(config.nodeTypes, \"Nodes\", nodeDefaults);\n\t\tUtils.buildTypes(config.edgeTypes, \"Edges\", edgeDefaults);\n\t\t// check for markers.\n\t\tthis.markers = [];\n\t\tlet edgeTypes = Utils.type(Edge.namespace), marker, markerConfig;\n\t\tedgeTypes.forEach(function(type) {\n\t\t\tmarkerConfig = type.prototype.startMarker;\n\t\t\tif (markerConfig) {\n\t\t\t\tmarker = Marker.getMarker(markerConfig, true);\n\t\t\t\tthis.markers.push(marker);\n\t\t\t}\n\t\t\tmarkerConfig = type.prototype.endMarker;\n\t\t\tif (markerConfig) {\n\t\t\t\tmarker = Marker.getMarker(markerConfig, false);\n\t\t\t\tthis.markers.push(marker);\n\t\t\t}\n\t\t}, this);\n\n\t\tdelete config.nodeTypes;\n\t\tdelete config.edgeTypes;\n\t\tUtils.initConfig(this, config);\n\t\tthis.root = null;\n\t\tif (model)\n\t\t\tthis.loadModel(model);\n\t}\n\n\tstatic getJSClass(config, defaultClass) {\n\t\tvar jsClass = null;\n\t\tif (config && config.type) {\n\t\t\t// See if we can get the js class from config.\n\t\t\tvar type = Utils.type(defaultClass.namespace, config.type);\n\t\t\tif (type)\n\t\t\t\tjsClass = type.jsClass;\n\t\t}\n\n\t\treturn Utils.getConstructor(jsClass, defaultClass);\n\t}\n\n\t/**\n\t * Create a new Node\n\t */\n\taddNode(config, parent = this.currentRoot, pos) {\n\t\tlet NodeClass = Graph.getJSClass(config, Node);\n\t\tlet node = new NodeClass(this, config);\n\n\t\tif (parent)\n\t\t\tGraph.addChild(parent, node, pos);\n\t\telse {\n\t\t\tthis.root = node;\n\t\t\tthis.root.prop('role', 'root');\n\t\t}\n\n\t\tthis.nodes[node.id] = node;\n\t\treturn node;\n\t}\n\n\taddEdge(config, parent = this.currentRoot, from, to) {\n\t\tlet EdgeClass = Graph.getJSClass(config, Edge);\n\t\tlet edge = new EdgeClass(this, config, from, to);\n\n\t\tGraph.addChild(parent, edge);\n\t\tthis.edges[edge.id] = edge;\n\t\treturn edge;\n\t}\n\n\tstatic addChild(parent, child) {\n\t\tif (!parent.children)\n\t\t\tparent.children = [];\n\n\t\tif (child.parent != parent) {\n\t\t\tparent.children.push(child);\n\n\t\t\tif (child.parent && child.parent.children)\n\t\t\t\tchild.parent.children = _.without(child.parent.children, child);\n\t\t}\n\t\tchild.parent = parent;\n\t}\n\n\tloadModel(model, parent = this.currentRoot) {\n\t\tvar nodes = model.nodes;\n\t\tvar edges = model.edges;\n\t\tdelete model.nodes;\n\t\tdelete model.edges;\n\n\t\tvar node = this.addNode(model, parent);\n\t\tif (nodes) {\n\t\t\t_.forEach(nodes, (child) => {\n\t\t\t\tthis.loadModel(child, node);\n\t\t\t});\n\t\t}\n\t\tif (edges) {\n\t\t\t_.forEach(edges, (edge) => {\n\t\t\t\tlet from, to;\n\t\t\t\tif (edge.from)\n\t\t\t\t\tfrom = this.nodes[edge.from];\n\t\t\t\tif (edge.to)\n\t\t\t\t\tto = this.nodes[edge.to];\n\t\t\t\tthis.addEdge(edge, node, from, to);\n\t\t\t});\n\t\t}\n\t}\n\n\tget currentRoot() {\n\t\treturn this.root;\n\t}\n\n\treset() {}\n\tdestroy() {}\n}\n\nGraph.DEFAULTS = {\n\tallowDanglingEdges: true,\n\tmultiConnect: false,\n\treadOnly: false,\n\tviewOnly: false\n};\n\nexport default Graph;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/graph/Graph.js\n **/","import _ from \"lodash\";\nimport StringBuffer from \"../util/StringBuffer\";\nimport Cell from \"./Cell\";\n\nclass Node extends Cell {\n\tconstructor(graph, config = {}) {\n\t\tif (!config.id) config.id = _.uniqueId('N');\n\t\tsuper(graph, config);\n\n\t\tthis.inEdges = [];\n\t\tthis.outEdges = [];\n\t\tthis.ports = null;\n\t\tthis.parent = null;\n\t}\n\n\tisAncestor(n) {\n\t\t// TODO: should we move this to graph class ?\n\t\tvar node = n.parent;\n\t\twhile (node) {\n\t\t\tif (this == node) { return true; }\n\t\t\tnode = node.parent;\n\t\t}\n\t\treturn false;\n\t}\n\n\tremoveEdge(edge) {\n\t\tvar edges = edge.source == this ? this.outEdges : this.inEdges;\n\t\tfor (var i = 0; i < edges.length; i++) {\n\t\t\tif (edge == edges[i]) {\n\t\t\t\tedges.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Add a new incoming edge\n\taddInEdge(edge, pos) {\n\t\tif (pos == null || pos === undefined)\n\t\t\tthis.inEdges.push(edge);\n\t\telse\n\t\t\tthis.inEdges.splice(pos, 0, edge);\n\t}\n\n\t// Add a new outgoing edge\n\taddOutEdge(edge, pos) {\n\t\tif (pos == null || pos === undefined || pos > edge.length - 1)\n\t\t\tthis.outEdges.push(edge);\n\t\telse\n\t\t\tthis.outEdges.splice(pos, 0, edge);\n\t}\n\n\trenderChildren(view) {\n\t\tif (this.children) {\n\t\t\tlet buf = new StringBuffer();\n\t\t\t_.forEach(this.children, (child) => {\n\t\t\t\tbuf.append(child.render(view));\n\t\t\t});\n\t\t\treturn buf.toString();\n\t\t}\n\t\treturn '';\n\t}\n\n\tgetPort(key, portName = 'auto', endPt, orthogonal) {\n\t\tlet shape = this.getShape(key);\n\t\tif (portName == 'auto') {\n\t\t\treturn shape.getPerimeter(endPt, orthogonal);\n\t\t}\n\t\treturn null;\n\t}\n\n\ttoString() {\n\t\tvar label = this.prop(\"label\") ? this.prop(\"label\") : \"undefined\";\n\t\tif (_.isArray(label))\n\t\t\tlabel = label[0];\n\t\treturn 'Node:{id:' + this.id + ';label:' + label + ';type:' + this.props.constructor.typeName + '}';\n\t}\n}\nNode.namespace = \"Nodes\";\n\nexport default Node;\n\n/*\n\n/**\n * The DrillDownParent is the parent that displays the vertex when drilled down.\n *\nVertex.prototype.getDrillDownParent = function() {\n\treturn this.parent;\n};\n\nVertex.prototype.isLocked = function() {\n\tvar mode = this.getProperty(\"mode\") || 3;\n\treturn !(mode & Graph.ALLOW_INTERACTIONS);\n};\n\nVertex.prototype.getCrumbText = function() {\n\tif (this.isLocked())\n\t\treturn '<span><img src=\"webwb/pzreadonly.png\" /></span><span>&nbsp;' + this.getProperty(\"label\") + '</span>';\n\treturn this.getProperty(\"label\");\n};\n\nVertex.prototype.canEdit = function() {\n\treturn (!this.parent || !this.parent.isLocked()) && Vertex.superclass.canEdit.call(this);\n};\n\nVertex.prototype.isContainer = function() {\n\treturn this.getProperty(\"container\");\n};\n\n*/\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/graph/Node.js\n **/","import _ from \"lodash\";\nimport Utils from \"../util/Utils\";\nimport Cache from \"../util/Cache\";\nimport StringBuffer from \"../util/StringBuffer\";\nimport Shape from \"../geometry/Shape\";\nimport Rectangle from \"../geometry/Rectangle\";\nimport Label from \"../view/Label\";\n\n/**\n * The Cell is the common parent for Node and Edge.\n */\nexport default class Cell {\n\tconstructor(graph, config = {id: _.uniqueId()}) {\n\t\tthis.graph = graph;\n\t\tthis.id = config.id;\n\t\tdelete config.id;\n\n\t\t// Initialize decorators\n\t\tif (config.decorators) {\n\t\t\tthis.createDecorators(config.decorators);\n\t\t\tdelete config.decorators;\n\t\t}\n\n\t\t// Initialize View Properties\n\t\tif (config.views) {\n\t\t\tthis.viewProps = config.views;\n\t\t\tdelete config.views;\n\t\t}\n\n\t\t// Initialize type\n\t\tvar type = config.type || \"Default\";\n\t\ttype = Utils.type(this.constructor.namespace, type);\n\t\tif (!type)\n\t\t\tthrow new Error(\"Type not found \" + config.type);\n\t\tdelete config.type;\n\t\tthis.props = new type(config);\n\t}\n\n\tprop(name, value) {\n\t\tif (_.isUndefined(value))\n\t\t\treturn this.props[name];\n\t\tthis.props[name] = value;\n\t}\n\n\t/**\n\t * Get/Set property stored by views.\n\t * @param key\n\t * @param name\n\t * @param value\n\t * @returns {*}\n\t */\n\tviewProp(key = 'default', name, value) {\n\t\tif (_.isUndefined(value)) {\n\t\t\tif (key == 'default')\n\t\t\t\treturn this.prop(name, value);\n\t\t\treturn this.viewProps[key][name];\n\t\t}\n\t\tif (key == 'default') {\n\t\t\tthis.prop(name, value);\n\t\t} else {\n\t\t\tif (!this.viewProps[key])\n\t\t\t\tthis.viewProps[key] = {};\n\t\t\tthis.viewProps[key][name] = value;\n\t\t}\n\t}\n\n\tcreateDecorators(decorators) {}\n\n\t/**\n\t * Get properties needed for rendering this element\n\t * @returns {{key: (string|*), className: *, namespace: *, bounds: *}}\n\t */\n\tgetView(key) {\n\t\tlet shape = this.getShape(key);\n\t\treturn _.assign({\n\t\t\tid: this.id,\n\t\t\tkey: key,\n\t\t\tclassName: this.computedClassName,\n\t\t\tnamespace: this.namespace\n\t\t}, shape);\n\t}\n\n\tgetShape(key) {\n\t\tlet shape = Cache.get(this.id + \".shape\", key);\n\t\tif (shape) return shape;\n\n\t\tlet shapeConfig = this.viewProp(key, 'shape');\n\t\tlet shapeClass = shapeConfig ? Shape.getShape(shapeConfig.name) : Shape.getShape('Rectangle');\n\t\tlet x = this.viewProp(key, \"x\");\n\t\tlet y = this.viewProp(key, \"y\");\n\t\tlet width = this.viewProp(key, \"width\");\n\t\tlet height = this.viewProp(key, \"height\");\n\t\tshape = new shapeClass(x, y, width, height, shapeConfig);\n\t\tCache.set(this.id + '.shape', shape, key);\n\t\treturn shape;\n\t}\n\n\trender(view) {\n\t\tlet template = Cache.get(this.id + '.template', view.id);\n\t\tif (!template) {\n\t\t\t//create the template\n\t\t\tlet role = this.prop('role');\n\t\t\ttemplate = view.getTemplate('$' + role, null, this);\n\t\t\tif (_.isString(template))\n\t\t\t\ttemplate = _.template(template);\n\t\t\tCache.set(this.id + '.template', template, view.id);\n\t\t}\n\t\treturn template(this.getView(view.id));\n\t}\n\n\trenderShape(view) {\n\t\tlet shape = this.getShape(view.id);\n\t\tif (shape)\n\t\t\treturn shape.render(view);\n\t\treturn '';\n\t}\n\n\trenderLabel(view) {\n\t\tif (this == this.graph.currentRoot)\n\t\t\treturn null;\n\t\tlet box = this.getLabelBox(view.id);\n\t\tif (box)\n\t\t\treturn view.renderLabel(box);\n\t\treturn '';\n\t}\n\n\tgetLabelBox(key) {\n\t\tlet box = Cache.get(this.id + '.labelBox', key);\n\t\tif (box) return box;\n\t\tlet shape = this.getShape(key);\n\t\t// Just get the config will have a positive performance boost for IE11 and IE10.\n\t\tbox = Label.getLabelBox(this.prop('label'), this.viewProp(key, 'labelConfig'), shape.width, shape.height);\n\t\tCache.set(this.id + '.labelBox', box, key);\n\t\treturn box;\n\t}\n\n\tget computedClassName() {\n\t\tif (!this._computedClassName) {\n\t\t\tvar buf = new StringBuffer(this.prop(\"role\"));\n\t\t\tlet props = this.props;\n\t\t\tif (props.hasOwnProperty(\"className\"))\n\t\t\t\tbuf.append(props[\"className\"]);\n\t\t\tprops = props.constructor.prototype;\n\t\t\twhile (props) {\n\t\t\t\tif (props.hasOwnProperty(\"className\"))\n\t\t\t\t\tbuf.append(props[\"className\"]);\n\t\t\t\tprops = Object.getPrototypeOf(props);\n\t\t\t}\n\t\t\tthis._computedClassName = buf.toString(' ');\n\t\t}\n\t\treturn this._computedClassName;\n\t}\n\n\tget namespace() {\n\t\tif (this == this.graph.currentRoot) return '';\n\t\treturn \"root.\" + this.prop(\"role\");\n\t}\n\n\tdestroy() {\n\t\tdelete this.graph;\n\t\tdelete this.decorators;\n\t\tdelete this.props;\n\t\tdelete this.viewProps;\n\t\tthis.destroyed = true;\n\t}\n}\n\n/*\n\nCell.prototype.move = function(x, y) {\n\tthis.setProperty(\"x\", Math.round(x));\n\tthis.setProperty(\"y\", Math.round(y));\n\tdelete this.bounds;\n};\n\nCell.prototype.resize = function(w, h) {\n\tthis.setProperty(\"width\", w);\n\tthis.setProperty(\"height\", h);\n\tdelete this.bounds;\n};\n\nCell.prototype.canEdit = function() {\n\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"editable\");\n};\n\nCell.prototype.canSelect = function() {\n\treturn (this.graph ? this.graph.canSelect() : true) && this.getProperty(\"selectable\");\n};\n\nCell.prototype.canMove = function() {\n\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"draggable\");\n};\n\nCell.prototype.canResize = function() {\n\treturn (this.graph ? this.graph.canEdit() : true) && this.getProperty(\"resizable\");\n};\n\nCell.prototype.getTypeFromString = function(typeStr) {\n\treturn this.graph.getType(typeStr);\n};\n\nCell.prototype.createModifiers = function(modifiers) {\n\tthis.modifiers = null;\n\tvar modifierSettings = this.getProperty(\"modifierSettings\");\n\tif (modifierSettings) {\n\t\t_.each(modifiers, function(config) {\n\t\t\tconfig.type = this.graph.getModifierType(config.className);\n\t\t\tconfig.setting = modifierSettings[config.className];\n\t\t\tif (!config.type || !config.setting) return;\n\n\t\t\tthis.addModifier(config.className, new Modifier(this, config));\n\t\t}, this);\n\n\t\t// Check for showAlways settings\n\t\t_.each(modifierSettings, function(setting, name) {\n\t\t\tif (setting.showAlways && (!this.modifiers || !this.modifiers[name])) {\n\t\t\t\tvar config = {type: this.graph.getModifierType(name), setting: setting};\n\t\t\t\tif (!config.type) return;\n\t\t\t\tthis.addModifier(name, new Modifier(this, config));\n\t\t\t}\n\t\t}, this);\n\t}\n};\n\nCell.prototype.addModifier = function(name, modifier) {\n\tif (!this.modifiers)\n\t\tthis.modifiers = {};\n\n\tif (!modifier.hasOwnProperty(\"showHeader\"))\n\t\tmodifier.showHeader = true;\n\n\t// @hack preferably set it in configurations.\n\tif (modifier.name == \"HoverProcessModifier\" || modifier.name == \"HoverResults\")\n\t\tmodifier.showHeader = false;\n\n\tthis.modifiers[name] = modifier;\n};\n\nCell.prototype.getModifiers = function() {\n\tif (_.isUndefined(this.modifiers))\n\t\tthis.createModifiers();\n\treturn this.modifiers;\n};\n\nCell.prototype.getModifier = function(name) {\n\tvar modifiers = this.getModifiers();\n\tif (modifiers)\n\t\treturn modifiers[name];\n\treturn null;\n};\n\nCell.prototype.isVisible = function() {\n\treturn this.getProperty('visible');\n};\n\nCell.prototype.isContainer = function() {\n\treturn false;\n};\n*/\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/graph/Cell.js\n **/","/**\n * Created by tong on 6/7/2016.\n */\n\nlet caches = {};\n\nlet Cache = {\n\tget: function(key, namespace) {\n\t\treturn this.getCache(namespace)[key];\n\t},\n\n\tset: function(key, value, namespace) {\n\t\tthis.getCache(namespace)[key] = value;\n\t},\n\n\tcontains: function(key, namespace) {\n\t\treturn key in this.getCache(namespace);\n\t},\n\n\tremove: function(key, namespace) {\n\t\tdelete this.getCache(namespace)[key];\n\t},\n\n\tclear: function(namesapce) {\n\t\tif (!namespace)\n\t\t\tcaches = {};\n\t\telse if (caches[namespace])\n\t\t\tcaches[namespace] = {};\n\t},\n\n\tgetCache: function(namespace = 'default') {\n\t\tif (!caches[namespace])\n\t\t\tcaches[namespace] = {};\n\t\treturn caches[namespace];\n\t}\n};\n\nexport default Cache;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/Cache.js\n **/","import _ from \"lodash\";\nimport Events from \"bean\";\nimport Utils from \"../util/Utils\";\nimport DomUtils from \"../util/DomUtils\";\nimport StringBuffer from \"../util/StringBuffer\";\nimport Rectangle from \"../geometry/Rectangle\";\n\nconst FONT_BOLD = 1, FONT_ITALIC = 2, FONT_UNDERLINE = 4, FONT_SHADOW = 8;\n\nlet defaultConfig = {\n\tfontSize: 11,\n\tfontFamily: \"Arial\",\n\tfontStyle: 0,\n\tpadding: 0,\n\tlinePadding: 0,\n\talign: \"left\",\n\twidth: 0,\n\theight: 0,\n\trotation: null,\n\tgeometry: {x: 0, y: 0, anchorY: 0, offsetX: 0, offsetY: 0}\n};\n\n/**\n * The label object handles label sizing/positioning\n */\nexport default (function() {\n\tlet stringMeasureEl = null, measureDiv, baselineDiv;\n\n\t/**\n\t * Calculate the size of the string.\n\t */\n\tlet getStringSize = _.memoize(function(str, fontSize, fontFamily, bold) {\n\t\tfontSize = fontSize || 11;\n\t\tfontFamily = fontFamily || 'Arial,Helvetica';\n\t\tbold = !_.isUndefined(bold) ? bold: false;\n\n\t\t// first check if there is a string-measuring div available, if not, create now.\n\t\tif (!stringMeasureEl) {\n\t\t\tstringMeasureEl = DomUtils.createElement('iframe', {id:\"_ComputeStylesIframe\"}, {position:\"absolute\", visibility:\"hidden\", width:\"auto\"});\n\t\t\tdocument.body.appendChild(stringMeasureEl);\n\t\t\tvar doc = stringMeasureEl.contentWindow.document;\n\t\t\tdoc.open();\n\t\t\tdoc.write('<html><body>\\\n\t\t\t\t<div id=\"baselineDiv\" style=\"height:100px;\"><span style=\"line-height:0\">T</span><span style=\"height:100%;display:inline-block;\"></span></div>\\\n\t\t\t\t<div id=\"measureDiv\" style=\"position:absolute;width:auto;height:auto;padding:0;white-space:pre-wrap;word-wrap:break-word;display:inline-block;\"></div>\\\n\t\t\t\t</body></html>');\n\t\t\tdoc.close();\n\t\t\tmeasureDiv = doc.getElementById(\"measureDiv\");\n\t\t\tbaselineDiv = doc.getElementById(\"baselineDiv\");\n\t\t}\n\t\tbaselineDiv.style.fontSize = measureDiv.style.fontSize = fontSize;\n\t\tbaselineDiv.style.fontFamily = measureDiv.style.fontFamily = fontFamily;\n\t\tbaselineDiv.style.fontWeight = measureDiv.style.fontWeight = bold ? 'bold' : 'normal';\n\t\tmeasureDiv.innerHTML = str;\n\n\t\tlet strut = baselineDiv.firstChild;\n\t\tlet baselineHeight = strut.offsetTop + strut.offsetHeight - baselineDiv.offsetHeight - baselineDiv.offsetTop;\n\n\t\treturn {width: measureDiv.offsetWidth, height: measureDiv.offsetHeight, baseline: baselineHeight};\n\t}, function(str, fontSize, fontFamily, bold) { return str + ';' + fontSize + ';' + fontFamily + ';' + bold; });\n\n\t/**\n\t * Create a wrapped text.\n\t * @param {String} string the string to wrap.\n\t * @param {maxWidth} the maximum width this string can take.\n\t * @param {fontSize}\n\t * @param {fontFamily}\n\t * @param {bold}\n\t */\n\tlet wrap = _.memoize(function(string, maxWidth, fontSize, fontFamily, bold) {\n\t\tmaxWidth = maxWidth || 0;\n\t\tfontSize = fontSize || 11;\n\t\tfontFamily = fontFamily || 'Arial,Helvetica';\n\t\tbold = !_.isUndefined(bold) ? bold: false;\n\n\t\tlet arr = [];\n\t\tlet spaceSize = getStringSize(\"&nbsp;\", fontSize, fontFamily, bold), space = spaceSize.width;\n\t\tarr.lineHeight = spaceSize.height;\n\t\tarr.baseline = spaceSize.baseline;\n\n\t\tif (!maxWidth || !string || string == \"\") {\n\t\t\tarr.push(string);\n\t\t\tarr.width = (!string || string == \"\") ? space : getStringSize(string, fontSize, fontFamily, bold).width;\n\t\t\tarr.height = arr.lineHeight;\n\t\t\treturn arr;\n\t\t}\n\n\t\tvar width = 0;\n\t\t//split the text by lines\n\t\tvar lines = string.split('\\n');\n\n\t\tvar buf = new StringBuffer();\n\n\t\tfor (var j = 0; j < lines.length; j++) {\n\t\t\t//split each line by word\n\t\t\tvar words = lines[j].split(/\\s/);\n\t\t\tvar line = \"\", currentWidth = 0, wordWidth = 0, newLine = true, word;\n\n\t\t\tfor (var i = 0; i < words.length; i++) {\n\t\t\t\tword = words[i];\n\t\t\t\twordWidth = getStringSize(word, fontSize, fontFamily, bold).width;\n\n\t\t\t\tif ((newLine ? wordWidth : currentWidth + space + wordWidth) > maxWidth) {\n\t\t\t\t\tif (newLine) {\n\t\t\t\t\t\tbuf.append(word);\n\t\t\t\t\t\twidth = Math.max(width, wordWidth);\n\t\t\t\t\t\tif (i < words.length - 1) {\n\t\t\t\t\t\t\tarr.push(buf.toString());\n\t\t\t\t\t\t\tbuf.clear();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tarr.push(buf.append(line).toString());\n\t\t\t\t\t\twidth = Math.max(width, currentWidth + space + wordWidth);\n\t\t\t\t\t\tbuf.clear();\n\t\t\t\t\t}\n\t\t\t\t\tline = \"\";\n\t\t\t\t\tcurrentWidth = 0;\n\t\t\t\t\tif (!newLine)\n\t\t\t\t\t\ti--; // move back one word.\n\t\t\t\t\tnewLine = true;\n\t\t\t\t} else {\n\t\t\t\t\tline = newLine ? word : line + \" \" + word;\n\t\t\t\t\tcurrentWidth = newLine ? wordWidth : currentWidth + space + wordWidth;\n\t\t\t\t\twidth = Math.max(width, currentWidth);\n\t\t\t\t\tnewLine = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (line != \"\")\n\t\t\t\tbuf.append(line);\n\t\t\tif (j < lines.length - 1) {\n\t\t\t\tarr.push(buf.toString());\n\t\t\t\tbuf.clear();\n\t\t\t}\n\t\t}\n\n\t\tarr.push(buf.toString());\n\t\tarr.width = width;\n\t\tarr.height = arr.lineHeight * arr.length;\n\t\treturn arr;\n\t}, function(str, maxWidth, fontSize, fontFamily, bold) { return str + ';' + maxWidth + ';' + fontSize + ';' + fontFamily + ';' + bold; });\n\n\t/**\n\t *  Get the view information for how to display the label.\n\t * @param label The string that needs to be displayed\n\t * @param containerWidth The width of the parent container.\n\t * @param containerHeight The height of the parent container.\n\t * @param labelConfig The configuration on how to display label. It should be an object with the following parameters:\n\t * {\n\t *      fontSize, fontFamily, fontStyle, padding,\n\t *      align: can be either \"left\", \"center\" or \"right\",\n\t *      width: the maximum width of the label. if less than 1, then is treated as percentage. If 0, no wrapping will occur,\n\t *      height,\n\t *      geometry\n\t * }\n\t * @returns {*}\n\t */\n\tfunction getLabelBox(label, labelConfig, containerWidth, containerHeight) {\n\t\treturn _getLabelBox.call(this, label, labelConfig, {width: containerWidth, height: containerHeight});\n\t}\n\n\tfunction getLabelBoxForLink(label, labelConfig, link) {\n\t\treturn _getLabelBox.call(this, label, labelConfig, link);\n\t}\n\n\tfunction _getLabelBox(label, labelConfig = {}, context) {\n\t\tlabelConfig = _.defaultsDeep(labelConfig, defaultConfig);\n\t\tlet fontSize = labelConfig.fontSize;\n\t\tlet fontFamily = labelConfig.fontFamily;\n\t\tlet fontStyle = labelConfig.fontStyle;\n\t\tlet bold = (fontStyle & FONT_BOLD) == FONT_BOLD;\n\t\tlet padding = labelConfig.padding;\n\t\tlet linePadding = labelConfig.linePadding;\n\t\tlet align = labelConfig.align;\n\n\t\tlet w = labelConfig.width, h = labelConfig.height;\n\t\tif (context.width) {\n\t\t\tw = w <= 5 ? context.width * w : w;\n\t\t\th = h <= 5 ? context.height * h : h;\n\t\t}\n\t\tw -= 2 * padding;\n\t\th -= 2 * padding;\n\t\tw = Math.max(0, w);\n\t\th = Math.max(0, h);\n\n\t\tlet geometry = _.clone(labelConfig.geometry);\n\t\tlet wrappedLabel = this.wrap(label, w, fontSize, fontFamily, bold);\n\t\tgeometry.width = wrappedLabel.width + 2 * padding;\n\t\tgeometry.height = wrappedLabel.height + 2 * padding + (wrappedLabel.length - 1) * linePadding;\n\t\tlet anchor = \"start\", dx = 0, setAnchorX = !_.has(geometry, \"anchorX\");\n\t\tswitch (align) {\n\t\t\tcase \"center\":\n\t\t\t\tanchor = \"middle\";\n\t\t\t\tif (setAnchorX) geometry.anchorX = 0;\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tanchor = \"end\";\n\t\t\t\tdx = wrappedLabel.width/2;\n\t\t\t\tif (setAnchorX) geometry.anchorX = -0.5;\n\t\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\t\tdx = -wrappedLabel.width/2;\n\t\t\t\tif (setAnchorX) geometry.anchorX = 0.5;\n\t\t\t\tbreak;\n\t\t}\n\t\tlet pos;\n\t\tif (context.getRelativePosition)\n\t\t\tpos = context.getRelativePosition(geometry);\n\t\telse\n\t\t\tpos = Utils.getRelativePosition({width: context.width, height: context.height}, geometry);\n\n\t\tlet bounds = new Rectangle(pos[0], pos[1], geometry.width, geometry.height);\n\t\t// the pivot is the center of rotation when the label has a rotation specified.\n\t\tlet pivot = align == 'center' ? [0, 0] : (align == 'left' ? [-wrappedLabel.width/2, 0] : [wrappedLabel.width/2, 0]);\n\n\t\t// the maximum bounds for the label, used to position inline editor\n\t\tgeometry.width = Math.max(w + 2 * padding, geometry.width);\n\t\tgeometry.height = Math.max(h + 2 * padding, geometry.height);\n\n\t\tif (context.getRelativePosition)\n\t\t\tpos = context.getRelativePosition(geometry);\n\t\telse\n\t\t\tpos = Utils.getRelativePosition({width: context.width, height: context.height}, geometry);\n\n\t\tlet maxBounds = new Rectangle(pos[0], pos[1], geometry.width, geometry.height);\n\t\treturn {\n\t\t\tconfig: labelConfig, label: wrappedLabel, _label: label,\n\t\t\tdx, dy: -geometry.height/2 + padding + wrappedLabel.lineHeight - wrappedLabel.baseline, anchor, lineHeight: wrappedLabel.lineHeight + linePadding,\n\t\t\tpivot, bounds, maxBounds\n\t\t};\n\t}\n\n\tfunction render(view, box) {\n\t\treturn view.renderLabel(box);\n\t}\n\n\tlet editor = {\n\t\tstart: function(key, container, box, refEl, textEl, scale = 1.0, singleLine = true) {\n\t\t\tif (this.input) {\n\t\t\t\tif (this.key != key) {\n\t\t\t\t\t// need to close the existing editor first\n\t\t\t\t\tthis.stop();\n\t\t\t\t} else\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar tag = singleLine ? 'input' : 'textarea';\n\t\t\tthis.input = DomUtils.createElement(tag, {id:\"inlineEditor\", unselectable:\"off\"}, {position:\"absolute\", overflow:\"hidden\", padding:\"0px\", margin:\"0px\", border:\"transparent\"});\n\t\t\tif (singleLine) {\n\t\t\t\tEvents.on(this.input, 'keydown keyup', (event) => {\n\t\t\t\t\tif (event.keyCode == 13) {\n\t\t\t\t\t\tEvents.off(this.input, 'keydown keyup');\n\t\t\t\t\t\tthis.stop();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tcontainer.appendChild(this.input);\n\n\t\t\tthis.key = key;\n\t\t\tthis.box = box;\n\t\t\tthis.refEl = refEl;\n\t\t\tthis.textEl = textEl;\n\n\t\t\tlet labelConfig = box.config;\n\t\t\tlet maxBounds = new Rectangle(box.maxBounds.x, box.maxBounds.y, box.maxBounds.width * scale, box.maxBounds.height * scale);\n\t\t\tlet pos = DomUtils.getCenterPosition(refEl, container);\n\t\t\tpos = [pos[0] + maxBounds.left, pos[1] + maxBounds.top];\n\n\t\t\tif (textEl)\n\t\t\t\ttextEl.style.visibility = 'hidden';\n\n\t\t\tDomUtils.setElement(this.input, null, {\n\t\t\t\tvisibility: 'visible',\n\t\t\t\tleft: pos[0] + \"px\",\n\t\t\t\ttop: pos[1] + \"px\",\n\t\t\t\twidth: maxBounds.width + 'px',\n\t\t\t\theight: maxBounds.height + 'px',\n\t\t\t\t\"font-family\": labelConfig.fontFamily,\n\t\t\t\t\"font-size\": (labelConfig.fontSize * scale) + 'px',\n\t\t\t\t\"font-weight\": (labelConfig.fontStyle & FONT_BOLD) == FONT_BOLD ? 'bold' : 'normal'\n\t\t\t\t/*\"color\": labelConfig.fontColor*/\n\t\t\t});\n\n\t\t\tthis.input.value = box._label;\n\t\t\tthis.input.focus();\n\t\t\tthis.input.select();\n\t\t\tEvents.fire(this, 'editor.start', [this.key]);\n\t\t},\n\n\t\tstop: function(cancel) {\n\t\t\tif (!this.input) return;\n\n\t\t\tcancel = cancel || false;\n\t\t\tif (this.textEl)\n\t\t\t\tthis.textEl.style.visibility = null;\n\n\t\t\tif (!cancel)\n\t\t\t\tEvents.fire(this, 'editor.update', [this.key, this.input.value]);\n\n\t\t\tEvents.fire(this, 'editor.stop', [this.key]);\n\n\t\t\t// remove the input\n\t\t\tthis.input.parentNode.removeChild(this.input);\n\t\t\tdelete this.input;\n\t\t\tdelete this.key;\n\t\t\tdelete this.box;\n\t\t\tdelete this.refEl;\n\t\t\tdelete this.textEl;\n\t\t}\n\t};\n\n\treturn {\n\t\tFONT_BOLD,\n\t\tFONT_ITALIC,\n\t\tFONT_UNDERLINE,\n\t\tFONT_SHADOW,\n\t\tgetStringSize,\n\t\twrap,\n\t\tgetLabelBox,\n\t\tgetLabelBoxForLink,\n\t\trender,\n\t\teditor\n\t};\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/Label.js\n **/","import _ from \"lodash\";\nimport Cell from \"./Cell\";\nimport Rectangle from \"../geometry/Rectangle\";\nimport Link from \"../geometry/Link\";\nimport Label from \"../view/Label\";\nimport Cache from \"../util/Cache\";\n\nclass Edge extends Cell {\n\tconstructor(graph, config = {}, source, target) {\n\t\tif (!config.id) config.id = _.uniqueId('E');\n\t\tsuper(graph, config);\n\n\t\tthis.source = this.target = null;\n\t\tthis.setSource(source, config.sourcePos);\n\t\tthis.setTarget(target, config.targetPos);\n\t}\n\n\tsetSource(node, pos) {\n\t\tthis.setTerminal(node, pos, 'source');\n\t}\n\n\tsetTarget(node, pos) {\n\t\tthis.setTerminal(node, pos, 'target');\n\t}\n\n\t/**\n\t * Internal methods to set either the source or target\n\t */\n\t setTerminal(node, pos, dir) {\n\t\tvar end = dir == 'source' ? this.source : this.target;\n\t\tif (end == node) {\n\t\t\t// simply change the position of the edge.\n\t\t\tif (node)\n\t\t\t\tnode.setEdgeAt(this, pos);\n\t\t} else {\n\t\t\tif (end) {\n\t\t\t\t// first remove the edge from the current end\n\t\t\t\tend.removeEdge(this);\n\t\t\t}\n\n\t\t\tif (node) {\n\t\t\t\tif (dir == 'source')\n\t\t\t\t\tnode.addOutEdge(this, pos);\n\t\t\t\telse\n\t\t\t\t\tnode.addInEdge(this, pos);\n\t\t\t}\n\t\t\tif (dir == 'source')\n\t\t\t\tthis.source = node;\n\t\t\telse\n\t\t\t\tthis.target = node;\n\t\t\t//this.clearPoints();\n\t\t}\n\t}\n\n\tgetLabelBox(key) {\n\t\tvar label = this.prop('label');\n\t\tif (label)\n\t\t\treturn Label.getLabelBoxForLink(label, this.viewProp(key, 'labelConfig'), this.getShape(key));\n\t\treturn null;\n\t}\n\n\t/**\n\t * Return a pair of points as reference to the calculation of start and end points.\n\t */\n\tgetReferencePoints(key) {\n\t\tlet pts = [];\n\t\tif (this.source)\n\t\t\tpts.push(this.source.getShape(key).center);\n\t\telse\n\t\t\tpts.push(this.viewProp(key, 'start'));\n\n\t\tif (this.target)\n\t\t\tpts.push(this.target.getShape(key).center);\n\t\telse\n\t\t\tpts.push(this.viewProp(key, 'end'));\n\n\t\treturn pts;\n\t}\n\n\tgetTerminalVisual(key, orthogonal) {\n\t\tlet refPts = this.getReferencePoints(key);\n\t\tlet terminals = [];\n\n\t\tlet getBound = function(pt) {\n\t\t\treturn new Rectangle(pt.x, pt.y, 3, 3);\n\t\t};\n\n\t\tif (this.source) {\n\t\t\tterminals.push(this.source.getPort(key, this.prop('sourcePort'), refPts[1], orthogonal));\n\t\t} else\n\t\t\tterminals.push({point: refPts[0], direction: Rectangle.getDirection(getBound(refPts[0]), refPts[1], true)});\n\n\t\tif (this.target) {\n\t\t\tterminals.push(this.target.getPort(key, this.prop('targetPort'), refPts[0], orthogonal));\n\t\t} else\n\t\t\tterminals.push({point: refPts[1], direction: Rectangle.getDirection(getBound(refPts[1]), refPts[0], true)});\n\t\treturn terminals;\n\t}\n\n\tgetShape(key) {\n\t\tlet shape = Cache.get(this.id + \".shape\", key);\n\t\tif (shape) return shape;\n\n\t\tlet config = this.viewProp(key, 'shape');\n\t\tshape = Link.getLink(this.getTerminalVisual(key, config.orthogonal), config, this.prop('startMarker'), this.prop('endMarker'));\n\t\tCache.set(this.id + '.shape', shape, key);\n\t\treturn shape;\n\t}\n\n\ttoString() {\n\t\treturn 'Edge:{' + (!this.source ? 'null' : this.source.id) + '--' + (!this.target ? 'null' : this.target.id) + '}';\n\t}\n\n\tdestroy() {\n\t\tsuper.destroy();\n\t\tthis.setSource(null);\n\t\tthis.setTarget(null);\n\t}\n}\nEdge.namespace = \"Edges\";\n\nexport default Edge;\n\n/*\n\nEdge.prototype.isVisible = function() {\n\tif (this.graph.getProperty(\"allowDanglingEdges\")) {\n\t\treturn (this.source ? this.source.isVisible() : true) && (this.target ? this.target.isVisible() : true) && this.getProperty(\"visible\");\n\t} else\n\t\treturn this.source && this.target && this.getProperty('visible') && this.source.isVisible() && this.target.isVisible();\n};\n\n*/\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/graph/Edge.js\n **/","import Rectangle from \"../geometry/Rectangle\";\n\nlet registry = {};\n\nlet Marker = (function() {\n\n\t/** Begin Standard Marker Type **/\n\tfunction arrow(size, source, styles) {\n\t\tvar sign = source ? -1 : 1;\n\t\tvar marker = {\n\t\t\tviewBox: new Rectangle(-5, -5, 10, 10),\n\t\t\tsize: size,\n\t\t\tref: [4*sign, 0],\n\t\t\tfill: styles.color\n\t\t};\n\t\tmarker.shape = {\n\t\t\tname: 'Polygon',\n\t\t\tpoints: [[-2*sign, 0], [-4*sign, 4], [4*sign, 0], [-4*sign, -4]]\n\t\t};\n\t\treturn marker;\n\t}\n\n\tfunction triangle(size, source, styles) {\n\t\tvar sign = source ? -1 : 1;\n\t\tvar marker = {\n\t\t\tviewBox: new Rectangle(-5, -5, 10, 10),\n\t\t\tsize: size,\n\t\t\tref: [4*sign, 0],\n\t\t\tfill: styles.color\n\t\t};\n\t\tmarker.shape = {\n\t\t\tname: 'Polygon',\n\t\t\tpoints: [[-5*sign, -5], [-5*sign, 5], [4*sign, 0]]\n\t\t};\n\t\treturn marker;\n\t}\n\n\tfunction oval(size, source, styles) {\n\t\tvar r = size / 2;\n\t\tvar marker = {\n\t\t\tviewBox: new Rectangle(-r, -r, size, size),\n\t\t\tsize: size,\n\t\t\tref: [0, 0],\n\t\t\tfill: styles.color\n\t\t};\n\t\tmarker.shape = '<ellipse cx=\"0\" cy=\"0\" rx=\"' + r + '\" ry=\"' + r + '\"></ellipse>';\n\t\treturn marker;\n\t}\n\n\tfunction diamond(size, source, styles) {\n\t\tvar sign = source ? -1 : 1;\n\t\tvar marker = {\n\t\t\tviewBox: new Rectangle(-5, -5, 10, 10),\n\t\t\tsize: size,\n\t\t\tref: [4*sign, 0],\n\t\t\tfill: styles.color\n\t\t};\n\t\tmarker.shape = '';\n\t\treturn marker;\n\t}\n\t/** End Standard Marker Type **/\n\tfunction getMarker(config, source) {\n\t\tvar factory = registry[config.type];\n\t\tvar marker = factory(config.size, source, config);\n\t\tmarker.id = config.id;\n\t\treturn marker;\n\t}\n\n\tregistry['arrow'] = arrow;\n\tregistry['triangle'] = triangle;\n\tregistry['oval'] = oval;\n\tregistry['diamond'] = diamond;\n\n\treturn {\n\t\tregistry: registry,\n\t\tgetMarker: getMarker\n\t};\n})();\n\nexport default Marker;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/Marker.js\n **/","import _ from \"lodash\";\nimport Utils from \"../util/Utils\";\n\nclass Layout {\n\tconstructor(config={}) {\n\t\tif (config.hasOwnProperty(\"orientation\") && _.isString(config.orientation)) {\n\t\t\tif (config.orientation.toUpperCase() == \"HORIZONTAL\")\n\t\t\t\tconfig.orientation = Layout.HORIZONTAL;\n\t\t\telse\n\t\t\t\tdelete config.orientation;\n\t\t}\n\t\tUtils.initConfig(this, config);\n\t}\n\n\tlayout(root, bounds) {}\n\treset() {}\n\tdestroy() {}\n}\nLayout.VERTICAL = 0;\nLayout.HORIZONTAL = 1;\n\nLayout.DEFAULTS = {\n\torientation: Layout.VERTICAL\n};\n\nexport default Layout;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/layout/Layout.js\n **/","import Layout from \"./Layout\";\n\nclass FlowLayout extends Layout {\n\tlayout(root, bounds) {\n\t\tvar items;\n\t\tif (!root)\n\t\t\titems = this.owner.childNodes;\n\t\telse if (_.isArray(root))\n\t\t\titems = root;\n\t\telse\n\t\t\titems = root.getLinkedNodes('target');\n\t\tif (!items || items.length == 0) return;\n\n\t\tvar x = 0, y = 0, h = 0, node;\n\t\tvar p1 = 0, p2 = 0;\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\tnode = items[i];\n\t\t\tif (x > 0 && x + this.hgap + node.getProperty(\"width\") > bounds.width) {\n\t\t\t\t// create new line\n\t\t\t\ty += h + this.vgap;\n\t\t\t\tx = 0;h = 0;p1 = 0;p2++;\n\t\t\t}\n\t\t\tnode._flPos = [p1, p2];\n\t\t\tnode.moveTo([bounds.x + x, bounds.y + y]);\n\t\t\tx += this.hgap + node.getProperty(\"width\");\n\t\t\tp1++;\n\t\t\th = h < node.getProperty(\"height\") ? node.getProperty(\"height\") : h;\n\t\t}\n\t\tthis.trigger(new Rectangle(bounds.x, bounds.y, bounds.width, y + h));\n\t}\n}\n\nFlowLayout.DEFAULTS = {\n\thgap: 10,\n\tvgap: 10\n};\n\nexport default FlowLayout;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/layout/FlowLayout.js\n **/","import _ from \"lodash\";\nimport Events from \"bean\";\nimport Utils from \"../util/Utils\";\nimport DomUtils from \"../util/DomUtils\";\nimport Layout from \"../layout/Layout\";\nimport Rectangle from \"../geometry/Rectangle\";\nimport EventDispatcher from \"../event/EventDispatcher\";\nimport GraphBehavior from \"../behavior/GraphBehavior\";\nimport Label from \"./Label\";\n\nclass Renderer {\n\tconstructor(id, container, config = {}, graph = null) {\n\t\tthis.id = id;\n\t\tthis.box = DomUtils.createElement('div', {id: this.id, tabindex: 0, ns: 'graph'}, {overflow: \"hidden\", width: \"100%\", height: \"100%\", position: 'relative'});\n\t\tcontainer.appendChild(this.box);\n\t\tif (config.layout) {\n\t\t\tlet layoutClass = Utils.getConstructor(config.layout.jsClass, Layout);\n\t\t\tthis.layout = new layoutClass(config.layout.config);\n\t\t\tdelete config.layout;\n\t\t}\n\t\tthis.clear = true;\n\t\tthis._translate = [0, 0];\n\t\tthis._scale = 1.0;\n\t\tthis.graph = graph;\n\t\tthis.dispatcher = null;\n\t\tthis.graphBehavior = null;\n\t\tthis.selectionBehavior = null;\n\t\tthis.nodeBehavior = null;\n\t\tthis.edgeBehavior = null;\n\t\tthis.connectionBehavior = null;\n\t\tUtils.initConfig(this, config);\n\n\t\tEvents.on(Label.editor, 'editor.update.*', function(key, value) {\n\t\t\tconsole.log(key + '=' + value);\n\t\t});\n\t}\n\n\tget graph() {\n\t\treturn this._graph;\n\t}\n\n\tset graph(graph) {\n\t\tthis._graph = graph;\n\t\tlet root = graph.currentRoot;\n\t\tif (root) {\n\t\t\tthis._translate = [root.viewProp(this.id, 'x') || 0, root.viewProp(this.id, 'y') || 0];\n\t\t\tthis._scale = root.viewProp(this.id, 'scale') || 1.0;\n\t\t}\n\t}\n\n\tviewport(scaled, viewport) {\n\t\tif (_.isUndefined(scaled) || _.isNull(scaled)) scaled = false;\n\t\tif (!viewport) {\n\t\t\tvar vp = new Rectangle(0, 0, this.box.offsetWidth, this.box.offsetHeight);\n\t\t\tif (scaled)\n\t\t\t\treturn Utils.scale(this.translate, this.scale, vp);\n\t\t\treturn vp;\n\t\t}\n\t\tif (!scaled) viewport = Utils.scale(this.translate, this.scale, viewport);\n\t\tvar w = this.box.offsetWidth;\n\t\tvar scale = w / viewport.width;\n\t\tthis.transform(-viewport.x*scale, -viewport.y*scale, scale);\n\t}\n\n\tget translate() { return this._translate; }\n\tset translate(t) { this.transform(t[0], t[1]); }\n\tget scale() { return this._scale; }\n\tset scale(k) {\n\t\tswitch (k) {\n\t\t\tcase \"in\":\n\t\t\t\tk = this.scale * this.prop(\"zoomFactor\");\n\t\t\t\tbreak;\n\t\t\tcase \"out\":\n\t\t\t\tk = this.scale / this.prop(\"zoomFactor\");\n\t\t\t\tbreak;\n\t\t\tcase \"actual\":\n\t\t\t\tk = 1.0;\n\t\t\t\tbreak;\n\t\t\tcase \"fit\":\n\t\t\t\tvar gridSize = this.prop(\"gridSize\") * 2;\n\n\t\t\t\tvar gBounds = this.getBounds();\n\t\t\t\tvar vBounds = this.viewport();\n\n\t\t\t\tvBounds.width -= gridSize;\n\t\t\t\tvBounds.height -= gridSize;\n\n\t\t\t\t/* Do not zoom more than actual if graph already fits into the bounds */\n\t\t\t\tk = Math.min((vBounds.width / gBounds.width), (vBounds.height /gBounds.height), 1.0);\n\n\t\t\t\t//TODO: Add centering code here or trigger an event for that\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif (_.isString(k)) k = parseFloat(k);\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.transform(null, null, k);\n\t}\n\n\ttransform(x = null, y = null, scale = null) {\n\t\tlet graph = this.graph;\n\t\tlet root = graph ? graph.currentRoot : null;\n\t\tif (!_.isNull(x)) {\n\t\t\tthis._translate[0] = x;\n\t\t\tif (root)\n\t\t\t\troot.viewProp(this.id, 'x', x);\n\t\t}\n\t\tif (!_.isNull(y)) {\n\t\t\tthis._translate[1] = y;\n\t\t\tif (root)\n\t\t\t\troot.viewProp(this.id, 'y', y);\n\t\t}\n\t\tif (!_.isNull(scale)) {\n\t\t\tthis._scale = scale;\n\t\t\tif (root)\n\t\t\t\troot.viewProp(this.id, 'scale', scale);\n\t\t\t// sync the scale between the dispatcher and the graph\n\t\t\tlet s = this.dispatcher.scale;\n\t\t\tif (s != scale)\n\t\t\t\tthis.dispatcher.scale = scale;\n\t\t}\n\t\tthis.refresh();\n\t}\n\n\trender() {\n\t\tif (!this._graph) return false;\n\t\t// intialize views\n\t\tif (this.layout)\n\t\t\tthis.layout.layout(this._graph.currentRoot, this.viewport());\n\n\t\t// create the event dispatcher if necessary.\n\t\tif (!this.dispatcher) {\n\t\t\tthis.dispatcher = new EventDispatcher(this.box, [this.prop('minZoom'), this.prop('maxZoom')]);\n\t\t\tlet jsClass;\n\t\t\tif (this.prop('graphBehavior')) {\n\t\t\t\tjsClass = Utils.getConstructor(this.prop('graphBehavior'));\n\t\t\t\tthis.graphBehavior = new jsClass(this);\n\t\t\t}\n\t\t\tthis.dispatcher.register('mouseup.node.label', function(type, ns, target, pos, event) {\n\t\t\t\tlet node = this._graph.nodes[target.getAttribute('id')];\n\t\t\t\tif (!this.dispatcher.dragging && !node._firstSelection) {\n\t\t\t\t\tLabel._delayEdit = _.delay(() => {\n\t\t\t\t\t\tif (Label._delayEdit) {\n\t\t\t\t\t\t\tdelete Label._delayEdit;\n\t\t\t\t\t\t\tLabel.editor.start(node.id, this.box, node.getLabelBox(this.id), target, event.nsTarget, this.scale);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 250);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t\tthis.dispatcher.register(['mousedown.*', 'zoom*'], function(type, ns, target, pos, event) {\n\t\t\t\tif (!DomUtils.eventFromInput(event)) {\n\t\t\t\t\tLabel.editor.stop();\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\t\tthis.dispatcher.start();\n\t\treturn true;\n\t}\n\n\trenderLabel(box) {\n\t\treturn this.constructor.renderLabel(box);\n\t}\n\n\trenderLink(shape) {\n\t\treturn this.constructor.renderLink(shape);\n\t}\n\n\trenderMarkers(markers) {\n\t\treturn this.constructor.renderMarkers(markers);\n\t}\n\n\trefresh() {}\n\n\t/**\n\t * Get the template for the specified key.\n\t * @param key\n\t * @param config if the template is a function, this config will be passed as the argument.\n\t * @param preprocessor if the template contains preprossing elements, such as #{shape}, the preprocessor will be\n\t * used to render them.\n\t * @returns {*}\n\t */\n\tgetTemplate(key, config, preprocessor) {\n\t\tvar t = this.constructor.TEMPLATES[key];\n\t\tif (t && _.isFunction(t)) {\n\t\t\tt = t(config);\n\t\t}\n\t\t// check if there are any preprocessing tags.\n\t\tif (preprocessor) {\n\t\t\tvar parts = t.match(/(#{[^#]*})/g);\n\t\t\tvar obj = {};\n\t\t\tfor (let part in parts) {\n\t\t\t\tpart = parts[part];\n\t\t\t\tpart = part.substring(2, part.length -1).trim();\n\t\t\t\tobj[part] = preprocessor[_.camelCase('render ' + part)](this);\n\t\t\t}\n\t\t\tt = _.template(t, {interpolate: /#{([\\s\\S]+?)}/g})(obj);\n\t\t}\n\t\treturn t;\n\t}\n\n\treset() {}\n\n\tdestroy() {\n\t\tdelete this._graph;\n\t\tdelete this.layout;\n\t\tif (this.dispatcher) {\n\t\t\tthis.dispatcher.stop();\n\t\t\tdelete this.dispatcher;\n\t\t}\n\t\tthis.box.innerHTML = '';\n\t}\n}\nRenderer.DEFAULTS = {\n\tdefaultClickMode: \"pan\",\n\thideOutline: false,\n\tsingleSelect: true,\n\tdraggable: true,\n\tgridEnabled: false,\n\tguidesEnabled: true,\n\tgridSize: 30,\n\tmaxZoom: 4.0,\n\tminZoom: 0.2,\n\tzoomFactor: 1.2,\n\tmaskOpacity: 0.5,\n\tgraphBehavior: GraphBehavior\n};\n\nexport default Renderer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/Renderer.js\n **/","/**\n * Created by tong on 6/28/2016.\n */\nimport Behavior from \"./Behavior\";\n\n/**\n * Graph handler handles Panning and Zoom and rubber band selection\n */\nclass GraphBehavior extends Behavior {\n\tconstructor(renderer) {\n\t\tsuper(renderer);\n\t\tlet dispatcher = renderer.dispatcher;\n\t\tlet f = function(type, ns, graph, pos, event) {\n\t\t\t//Cursor.updateCursor(type, ns, graph, event);\n\t\t};\n\t\tdispatcher.register('drag*.graph', this.handleDrag, this);\n\t\tdispatcher.register('zoom.*', this.handleZoom, this);\n\t\t//dispatcher.register(['mousedown.graph', 'mouseenter.graph', 'mouseleave.graph'], f);\n\t\tthis.offset = null;\n\t}\n\n\thandleZoom(type, ns, graph, pos, event) {\n\t\tthis.renderer.transform(null, null, event.scale);\n\t}\n\n\thandleDrag(type, ns, graph, pos, event) {\n\t\tif (type == 'dragstart') {\n\t\t\tlet pan = (this.renderer.prop(\"defaultClickMode\") == \"pan\") ^ (event.ctrlKey || event.shiftKey);\n\t\t\tif (!pan) return;\n\t\t\tlet t = this.renderer.translate;\n\t\t\tthis.offset = [t[0] - pos[0], t[1] - pos[1]];\n\t\t\treturn;\n\t\t}\n\t\tif (!this.offset) return;\n\t\tthis.renderer.transform(pos[0] + this.offset[0], pos[1] + this.offset[1]);\n\t\tif (type == 'dragend') {\n\t\t\t//Cursor.updateCursor('mouseup', ns, graph, event);\n\t\t\tdelete this.offset;\n\t\t}\n\t}\n}\n\nexport default GraphBehavior;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/behavior/GraphBehavior.js\n **/","export default class Behavior {\n\tconstructor(renderer) {\n\t\tthis.renderer = renderer;\n\t}\n\n\tdestroy() {\n\t\tdelete this.renderer;\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/behavior/Behavior.js\n **/","import _ from \"lodash\";\nimport Base64 from \"../util/base64\";\nimport DomUtils from \"../util/DomUtils\";\nimport Renderer from \"./Renderer\";\nimport StringBuffer from \"../util/StringBuffer\";\n\nconst NS = 'http://www.w3.org/2000/svg';\nif (typeof (SVGElement) != \"undefined\") {\n\tvar svg = document.createElementNS(NS, \"svg\");\n\tsvg.innerHTML = '<circle/>';\n\tif (svg.firstChild !== \"[object SVGCircleElement]\") {\n\t\tObject.defineProperties(SVGElement.prototype, {\n\t\t\t\"outerHTML\": {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tget: function() {\n\t\t\t\t\tvar $node, $temp;\n\t\t\t\t\t$temp = document.createElement('div');\n\t\t\t\t\t$node = this.cloneNode(true);\n\t\t\t\t\t$temp.appendChild($node);\n\t\t\t\t\treturn $temp.innerHTML;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"innerHTML\": {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tget: function() {\n\t\t\t\t\tvar s = this.outerHTML;\n\t\t\t\t\tvar ropen = new RegExp(\"<\" + this.nodeName + '\\\\b(?:([\"\\'])[^\"]*?(\\\\1)|[^>])*>', \"i\");\n\t\t\t\t\tvar rclose = new RegExp(\"<\\/\" + this.nodeName + \">$\", \"i\");\n\t\t\t\t\treturn  s.replace(ropen, \"\").replace(rclose, \"\");\n\t\t\t\t},\n\t\t\t\tset: function(markup) {\n\t\t\t\t\t// empty el first.\n\t\t\t\t\tlet child;\n\t\t\t\t\twhile (child = this.lastChild)\n\t\t\t\t\t\tthis.removeChild(child);\n\t\t\t\t\tlet buf = new StringBuffer();\n\t\t\t\t\tbuf.append('<svg>').append(markup).append('</svg');\n\t\t\t\t\tlet $temp = DomUtils.createElement('div', null, null, buf.toString()).firstElementChild;\n\t\t\t\t\twhile ($temp.firstChild)\n\t\t\t\t\t\tthis.appendChild($temp.firstChild);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\t// Define the toDataURL for SVG\n\tSVGElement.prototype.toDataURL = function(type, options = {}) {\n\t\tlet _svg = this;\n\n\t\tlet debug = function(msg) {};\n\n\t\tif (options['debug'] == true && typeof(console) != 'undefined')\n\t\t\tdebug = function(msg) { console.log(\"SVG.toDataURL:\", msg); };\n\n\t\tfunction exportSVG() {\n\t\t\tvar svg_xml = _svg.outerHTML;\n\t\t\tvar svg_dataurl = base64dataURLencode(svg_xml);\n\t\t\tdebug(type + \" length: \" + svg_dataurl.length);\n\n\t\t\t// NOTE double data carrier\n\t\t\tif (options.callback) options.callback(svg_dataurl);\n\t\t\treturn svg_dataurl;\n\t\t}\n\n\t\tfunction base64dataURLencode(s) {\n\t\t\tvar b64 = \"data:image/svg+xml;base64,\";\n\n\t\t\t// https://developer.mozilla.org/en/DOM/window.btoa\n\t\t\tif (window.btoa) {\n\t\t\t\tdebug(\"using window.btoa for base64 encoding\");\n\t\t\t\tb64 += btoa(s);\n\t\t\t} else {\n\t\t\t\tdebug(\"using custom base64 encoder\");\n\t\t\t\tb64 += Base64.encode(s);\n\t\t\t}\n\n\t\t\treturn b64;\n\t\t}\n\n\t\t// Native export doesn't work very well. should use canvg instead.\n\t\tfunction exportImage(type) {\n\t\t\tvar canvas = document.createElement(\"canvas\");\n\t\t\tvar ctx = canvas.getContext('2d');\n\n\t\t\t// TODO: if (options.keepOutsideViewport), do some translation magic?\n\n\t\t\tvar svg_img = new Image();\n\t\t\tvar svg_xml = _svg.outerHTML;\n\t\t\tsvg_img.src = base64dataURLencode(svg_xml);\n\n\t\t\tsvg_img.onload = function() {\n\t\t\t\tdebug(\"exported image size: \" + [svg_img.width, svg_img.height]);\n\t\t\t\tcanvas.width = svg_img.width;\n\t\t\t\tcanvas.height = svg_img.height;\n\t\t\t\tctx.drawImage(svg_img, 0, 0);\n\n\t\t\t\t// SECURITY_ERR WILL HAPPEN NOW\n\t\t\t\tvar image_dataurl = canvas.toDataURL(type);\n\t\t\t\tdebug(type + \" length: \" + image_dataurl.length);\n\n\t\t\t\tif (options.callback) options.callback( image_dataurl );\n\t\t\t\telse debug(\"WARNING: no callback set, so nothing happens.\");\n\t\t\t};\n\n\t\t\tsvg_img.onerror = function() {\n\t\t\t\tdebug(\n\t\t\t\t\t\"Can't export! Maybe your browser doesn't support \" +\n\t\t\t\t\t\"SVG in img element or SVG input for Canvas drawImage?\\n\" +\n\t\t\t\t\t\"http://en.wikipedia.org/wiki/SVG#Native_support\"\n\t\t\t\t);\n\t\t\t};\n\n\t\t\t// NOTE: will not return anything\n\t\t}\n\n\t\tfunction exportImageCanvg(type) {\n\t\t\tif (!canvg) return null;\n\t\t\tlet canvas = DomUtils.createElement('canvas', null, {display: \"none\"});\n\t\t\tdocument.body.appendChild(canvas);\n\t\t\tif (!options.keepOutsideViewport) {\n\t\t\t\tcanvg(canvas, _svg.outerHTML);\n\t\t\t} else {\n\t\t\t\tlet padding = options.padding || 0;\n\t\t\t\tlet scale = 1.0;\n\t\t\t\tlet translate = [0, 0];\n\t\t\t\tlet bbox = _svg.getBBox();\n\t\t\t\tdebug(\"detected svg dimensions \" + [bbox.x, bbox.y, bbox.width, bbox.height]);\n\t\t\t\tlet transform = _svg.firstElementChild.getAttribute('transform');\n\t\t\t\tif (transform) {\n\t\t\t\t\tdebug('detected svg transform ' + transform);\n\t\t\t\t\ttransform = SVGRenderer.transform(transform);\n\t\t\t\t\ttranslate = transform.translate;\n\t\t\t\t\tscale = transform.scale;\n\t\t\t\t}\n\t\t\t\tlet buf = new StringBuffer();\n\t\t\t\tbuf.append('<svg width=\"').append(bbox.width + 2*padding).append('px\" height=\"').append(bbox.height + 2*padding).append('px\"><g transform=\"translate(')\n\t\t\t\t\t.append(-bbox.x+translate[0]+padding).append(',').append(-bbox.y+translate[1]+padding).append(')scale(').append(scale).append(')\">')\n\t\t\t\t\t.append(_svg.firstElementChild.innerHTML).append('</g></svg>');\n\t\t\t\tcanvg(canvas, buf.toString());\n\t\t\t}\n\t\t\tvar image_dataurl = canvas.toDataURL(type);\n\t\t\tif (options.callback) options.callback( image_dataurl );\n\t\t\tcanvas.parentNode.removeChild(canvas);\n\t\t\treturn image_dataurl;\n\t\t}\n\n\t\tif (!type) type = \"image/svg+xml\";\n\n\t\tif (options.keepNonSafe) debug(\"NOTE: keepNonSafe is NOT supported and will be ignored!\");\n\t\tif (options.keepOutsideViewport) debug(\"NOTE: keepOutsideViewport is only supported with canvg exporter.\");\n\n\t\tswitch (type) {\n\t\t\tcase \"image/svg+xml\":\n\t\t\t\treturn exportSVG();\n\t\t\tcase \"image/png\":\n\t\t\tcase \"image/jpeg\":\n\t\t\t\tif (!options.renderer) {\n\t\t\t\t\tif (window.canvg) options.renderer = \"canvg\";\n\t\t\t\t\telse options.renderer=\"native\";\n\t\t\t\t}\n\t\t\t\tswitch (options.renderer) {\n\t\t\t\t\tcase \"canvg\":\n\t\t\t\t\t\tdebug(\"using canvg renderer for \" + type + \" image export\");\n\t\t\t\t\t\treturn exportImageCanvg(type);\n\t\t\t\t\tcase \"native\":\n\t\t\t\t\t\tdebug(\"using native renderer for \" + type + \" export. THIS MIGHT FAIL.\");\n\t\t\t\t\t\treturn exportImage(type);\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tdebug(\"unknown image renderer given, doing noting (\" + options.renderer + \")\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tdebug(\"Sorry! Exporting as '\" + type + \"' is not supported!\");\n\t\t}\n\t\treturn null;\n\t}\n}\n\nclass SVGRenderer extends Renderer {\n\trender() {\n\t\tlet result = super.render();\n\t\tif (result) {\n\t\t\tlet root = this.graph.currentRoot;\n\t\t\tlet buf = new StringBuffer('<svg width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">');\n\t\t\tlet t = this.translate;\n\t\t\tbuf.append('<g transform=\"translate(').append(t[0]).append(',').append(t[1]).append(')scale(').append(this.scale).append(')\">');\n\t\t\tbuf.append(this.renderDefs());\n\t\t\tbuf.append(root.render(this));\n\t\t\tbuf.append('</g></svg>');\n\t\t\tthis.box.innerHTML = buf.toString();\n\t\t\tthis.svg = this.box.firstElementChild;\n\t\t}\n\t}\n\n\trenderDefs() {\n\t\tlet buf = new StringBuffer('<defs>');\n\t\tbuf.append(this.getTemplate('Grid', this.prop(\"gridSize\")));\n\t\tlet markers = this.graph.markers;\n\t\tif (markers.length > 0)\n\t\t\tbuf.append(SVGRenderer.renderMarkers(markers));\n\t\tbuf.append('</defs>');\n\t\treturn buf.toString();\n\t}\n\n\trefresh() {\n\t\tif (!this.svg) return;\n\t\tlet g = this.svg.querySelector('g');\n\t\tlet t = this.translate;\n\t\tg.setAttribute('transform', 'translate(' + t[0] + ',' + t[1] + ')scale(' + this.scale + ')');\n\t}\n\n\tstatic renderMarkers(markers) {\n\t\tlet buf = new StringBuffer(), str1, str2;\n\t\tmarkers.forEach(function(marker) {\n\t\t\tstr1 = this.TEMPLATES['Marker'](marker);\n\t\t\tstr2 = marker.shape;\n\t\t\tif (!_.isString(str2))\n\t\t\t\tstr2 = this.renderShape(str2);\n\t\t\tstr1 = str1.replace(/\\#\\{shape\\}/, str2);\n\t\t\tbuf.append(str1);\n\t\t}, this);\n\t\treturn buf.toString();\n\t}\n\n\tstatic renderLabel(box) {\n\t\treturn this.TEMPLATES['Label'](box);\n\t}\n\n\tstatic renderShape(shape) {\n\t\tlet template = this.TEMPLATES[shape.name];\n\t\tif (_.isString(template))\n\t\t\ttemplate = _.template(template);\n\t\treturn template(shape);\n\t}\n\n\tstatic renderLink(shape) {\n\t\tlet points = shape.points;\n\t\tlet controlPts = shape.controlPts;\n\t\tif (!points || points.length == 0) return '';\n\n\t\tif (!controlPts && shape.round) {\n\t\t\t// render rounded line joins.\n\t\t\tlet newPts = [];\n\t\t\tcontrolPts = [];\n\t\t\tlet prev = points[0], next, d1, d2, corner;\n\t\t\tnewPts.push(prev);\n\t\t\tfor (let i = 1; i < points.length - 1; i++) {\n\t\t\t\tnext = points[i];\n\t\t\t\t// set the control point first.\n\t\t\t\tcontrolPts[2*i] = [next, next];\n\t\t\t\t// check the size of the corner.\n\t\t\t\td1 = prev.distance(next);\n\t\t\t\td2 = next.distance(points[i+1]);\n\t\t\t\tcorner = Math.min(shape.round, d1/2, d2/2);\n\t\t\t\t// split the point into two.\n\t\t\t\tnewPts.push(next.getDirection(prev).scale(corner).translate(next));\n\t\t\t\tnewPts.push(next.getDirection(points[i+1]).scale(corner).translate(next));\n\t\t\t\tprev = next;\n\t\t\t}\n\t\t\tnewPts.push(points[points.length - 1]);\n\t\t\tpoints = newPts;\n\t\t}\n\t\tlet buf = new StringBuffer('M'), point;\n\t\tfor (let i = 0; i < points.length; i++) {\n\t\t\tpoint = points[i];\n\t\t\tif (i == 0)\n\t\t\t\tbuf.append(point);\n\t\t\telse {\n\t\t\t\tif (controlPts && controlPts[i]) {\n\t\t\t\t\tbuf.append(' C ');\n\t\t\t\t\tfor (let j = 0; j < controlPts[i].length; j++)\n\t\t\t\t\t\tbuf.append(controlPts[i][j]).append(' ');\n\t\t\t\t\tbuf.append(point);\n\t\t\t\t} else\n\t\t\t\t\tbuf.append(' L ').append(point);\n\t\t\t}\n\t\t}\n\t\tlet d = buf.toString();\n\t\tbuf.clear();\n\t\tif (shape.showGauge)\n\t\t\tbuf.append('<path style=\"stroke: white; stroke-width: 9; visibility: hidden; pointer-events: stroke;\" d=\"')\n\t\t\t\t.append(d).append('\"/>');\n\t\tbuf.append('<path d=\"').append(d).append('\"');\n\t\tif (shape.startMarker || shape.endMarker) {\n\t\t\tbuf.append(' style=\"');\n\t\t\tif (shape.startMarker)\n\t\t\t\tbuf.append('marker-start: url(#').append(_.isString(shape.startMarker) ? shape.startMarker : shape.startMarker.id).append(');');\n\t\t\tif (shape.endMarker)\n\t\t\t\tbuf.append('marker-end: url(#').append(_.isString(shape.endMarker) ? shape.endMarker : shape.endMarker.id).append(');');\n\t\t\tbuf.append('\"');\n\t\t}\n\t\tbuf.append('/>');\n\t\treturn buf.toString();\n\t}\n\n\tstatic appendContent(el, content) {\n\t\tlet buf = new StringBuffer();\n\t\tbuf.append('<svg>').append(content).append('</svg');\n\t\tlet temp = DomUtils.createElement('div', null, null, buf.toString()).firstElementChild;\n\n\t\twhile (temp.firstChild)\n\t\t\tel.appendChild(temp.firstChild);\n\t\treturn el;\n\t}\n\n\tstatic transform(transform) {\n\t\tlet translate = [0, 0], scale = 1.0;\n\t\t//\n\t\tlet parts = transform.match(/translate\\(\\s*([^)]+)/);\n\t\tif (parts) {\n\t\t\tlet m = parts[1].trim().match(/([\\d.-]+)[ ,]([\\d.-]+)/);\n\t\t\tif (m) {\n\t\t\t\ttranslate[0] = parseFloat(m[1]) || 0;\n\t\t\t\ttranslate[1] = parseFloat(m[2]) || 0;\n\t\t\t} else\n\t\t\t\ttranslate[0] = translate[1] = parseFloat(parts[1]);\n\t\t}\n\t\tparts = transform.match(/scale\\(\\s*([^)]+)/);\n\t\tif (parts)\n\t\t\tscale = parseFloat(parts[1]) || 1.0;\n\n\t\treturn {translate, scale};\n\t}\n}\nSVGRenderer.TEMPLATES = {\n\t$root: '<g id=\"${id}\" class=\"${className}\">#{children}</g>',\n\t$node: '<g id=\"${id}\" class=\"${className}\" ns=\"${namespace}\" transform=\"translate(${x},${y})\">#{shape}#{label}</g>',\n\t$edge: '<g id=\"${id}\" class=\"${className}\" ns=\"${namespace}\">#{shape}#{label}</g>',\n\tEllipse: '<ellipse cx=\"0\" cy=\"0\" rx=\"${width/2}\" ry=\"${height/2}\"/>',\n\tRectangle: '<rect x=\"${-width/2}\" y=\"${-height/2}\" width=\"${width}\" height=\"${height}\" rx=\"9\" ry=\"9\"/>',\n\tTriangle: '<polygon points=\"${-width/2},${-height/2} ${width/2},${-height/2} 0,${height/2}\"/>',\n\tRhombus: '<polygon points=\"0,${-height/2} ${width/2},0 0,${height/2} ${-width/2},0\"/>',\n\tHexagon: function(config) {\n\t\tvar vertical = config.direction == 'north' || config.direction == 'south';\n\t\tif (vertical)\n\t\t\treturn '<polygon points=\"0,${-height/2} ${width/2},${-height/4} ${width/2},${height/4} 0,${height/2} ${-width/2},${height/4} ${-width/2},${-height/4}\"/>';\n\t\telse\n\t\t\treturn '<polygon points=\"${-width/2},0 ${width/4},${-height/2} ${width/4},${-height/2} ${width/2},0 ${width/4},${height/2} ${-width/4},${height/2}\"/>';\n\t},\n\tPolygon: function(shape) {\n\t\tlet buf = new StringBuffer('<polygon points=\"');\n\t\tshape.points.forEach(function(pt){\n\t\t\tbuf.append(pt[0]).append(',').append(pt[1]).append(' ');\n\t\t});\n\t\tbuf.removeLast();\n\t\tbuf.append('\"/>');\n\t\treturn buf.toString();\n\t},\n\tImage: function(config) {\n\t\treturn '<image x=\"${-width/2}\" y=\"${-height/2}\" width=\"${width}\" height=\"${height}\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"' + config.image + '\"/>';\n\t},\n\tMarker: function(marker) {\n\t\treturn `\n<marker id=\"${marker.id}\" markerWidth=\"${marker.size}\" markerHeight=\"${marker.size}\" refx=\"${marker.ref[0]}\" \nrefy=\"${marker.ref[1]}\" orient=\"auto\" viewbox=\"${marker.viewBox.x} ${marker.viewBox.y} ${marker.viewBox.width} ${marker.viewBox.height}\"\nmarkerUnits=\"userSpaceOnUse\" ${marker.fill ? `style=\"stroke: ${marker.fill};fill:${marker.fill}\"` : ''}>#{shape}</marker>\n`.trim();\n\t},\n\tGrid: function(size) {\n\t\treturn `\n<pattern id=\"GridPattern\" width=\"${size}\" height=\"${size}\" patternUnits=\"userSpaceOnUse\">\n\t<ellipse cx=\"0\" cy=\"0\" rx=\"1\" ry=\"1\" fill=\"#999999\"/>\n\t<ellipse cx=\"0\" cy=\"${size}\" rx=\"1\" ry=\"1\" fill=\"#999999\"/>\n\t<ellipse cx=\"${size}\" cy=\"0\" rx=\"1\" ry=\"1\" fill=\"#999999\"/>\n\t<ellipse cx=\"${size}\" cy=\"${size}\" rx=\"1\" ry=\"1\" fill=\"#999999\"/>\n</pattern>`.trim();\n\t},\n\tLabel: _.template(`\n<% var box = _.has(data, \"dx\") ? data : (data.getLabelBox ? data.getLabelBox() : null); \n   if (box) {%>\n\t<g <% if (box.config && box.config.class) {%>class=\"<%=box.config.class%>\"<%}%>\\\n\t\t<% if (box.config && box.config.ns) {%>ns=\"<%=box.config.ns%>\"<%}%>\\\n\t\ttext-anchor=\"<%=box.anchor%>\"\\\n\t\ttransform=\"translate(<%=box.bounds.x%>,<%=box.bounds.y%>)<% if (box.config && box.config.rotation) {%>rotate(<%=box.config.rotation%> <%=box.pivot[0]%> <%=box.pivot[1]%>)<%}%>\">\n\t<% if (box.config.backgroundStyle) {%>\n\t\t<rect x=\"<%=-box.bounds.width/2%>\" y=\"<%=-box.bounds.height/2%>\" width=\"<%=box.bounds.width%>\" height=\"<%=box.bounds.height%>\" style=\"<%=box.config.backgroundStyle%>\"/>\n\t<% } if (_.isArray(box.label)) { \n\t\t_.each(box.label, function(value, line) {%>\n\t\t\t<text <% if (box.config && box.config.textStyle) {%>style=\"<%=box.config.textStyle%>\"<%}%>\\\n\t\t\t\tdx=\"<%=box.dx%>\" dy=\"<%=box.dy + box.lineHeight * line%>\"><%=value%></text>\n\t\t<%});} else { %>\n\t\t\t<text><%=box.label%></text>\n\t\t<%}%>\n\t</g>\n<%}%>\n`.trim(), {variable: \"data\"})\n};\n\nexport default SVGRenderer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/SVGRenderer.js\n **/"],"sourceRoot":"/source/"}