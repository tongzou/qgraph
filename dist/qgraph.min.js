/*!
 * 
 * 	qgraph - A Graph Manipulation and Visualization Library
 * 	Author: Tong Zou
 * 	Version: v0.1.3
 * 	Url: https://github.com/tongzou/qgraph
 * 	License(s): MIT
 * 
 */
(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):"object"==typeof exports?exports.qgraph=t(require("lodash")):e.qgraph=t(e._)})(this,function(__WEBPACK_EXTERNAL_MODULE_5__){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),a=n(2),s=r(a),l=n(7),u=r(l),h=n(8),f=r(h),c=n(3),d=r(c),p=n(9),g=r(p),y=n(6),v=r(y),m=n(4),b=r(m),w=n(10),x=r(w),_=n(11),k=r(_),E=n(12),P=r(E),S=n(13),M=r(S),O=n(14),C=r(O),T=n(16),N=r(T),j=n(18),R=r(j),L=n(17),B=r(L),A=n(21),I=r(A),D=n(23),$=r(D),F=n(24),z=r(F),U=n(20),H=r(U),K=n(22),W=r(K),V=n(25),G=r(V),X=n(29),q=r(X),Y=n(26),Z=r(Y),J=n(28),Q=r(J);v["default"].addShape("Rectangle",b["default"]),v["default"].addShape("Ellipse",x["default"]),v["default"].addShape("Rhombus",k["default"]),t["default"]={Events:M["default"],Base64:o["default"],Cache:s["default"],Utils:s["default"],DomUtils:u["default"],StringBuffer:f["default"],Point:d["default"],Line:g["default"],Shape:v["default"],Rectangle:b["default"],Ellipse:x["default"],Link:P["default"],EventDispatcher:C["default"],Label:H["default"],Marker:W["default"],Graph:N["default"],Cell:R["default"],Node:B["default"],Edge:I["default"],Layout:$["default"],FlowLayout:z["default"],Renderer:G["default"],SVGRenderer:q["default"],GraphBehavior:Z["default"],SelectionBehavior:Q["default"]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,r,i,o,a,s,l,u="",h=0;for(e=n._utf8_encode(e);h<e.length;)t=e.charCodeAt(h++),r=e.charCodeAt(h++),i=e.charCodeAt(h++),o=t>>2,a=(3&t)<<4|r>>4,s=(15&r)<<2|i>>6,l=63&i,isNaN(r)?s=l=64:isNaN(i)&&(l=64),u=u+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(s)+this._keyStr.charAt(l);return u},decode:function(e){var t,r,i,o,a,s,l,u="",h=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<e.length;)o=this._keyStr.indexOf(e.charAt(h++)),a=this._keyStr.indexOf(e.charAt(h++)),s=this._keyStr.indexOf(e.charAt(h++)),l=this._keyStr.indexOf(e.charAt(h++)),t=o<<2|a>>4,r=(15&a)<<4|s>>2,i=(3&s)<<6|l,u+=String.fromCharCode(t),64!=s&&(u+=String.fromCharCode(r)),64!=l&&(u+=String.fromCharCode(i));return u=n._utf8_decode(u)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode:function(e){for(var t="",n=0,r=c1=c2=0;n<e.length;)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return t}};t["default"]=n},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _Point=__webpack_require__(3),_Point2=_interopRequireDefault(_Point),_Rectangle=__webpack_require__(4),_Rectangle2=_interopRequireDefault(_Rectangle);"undefined"==typeof window&&"undefined"!=typeof global&&(global.window={addEventHandler:function(){}},global.document={},global.navigator={});var _debugging=[],_debugAll=!1,typeRegistry={},splice=Array.splice;exports["default"]={type:function(e,t,n){return typeRegistry[e]||(typeRegistry[e]=new Map),t?n?void typeRegistry[e].set(t,n):typeRegistry[e].get(t):typeRegistry[e]},createType:function(e,t,n){var r=t.name,i=this.type(e,r);if(!i){var o=t["extends"]?this.type(e,t["extends"]):null;!o&&n&&(o=n),i=o?function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),t}(o):function a(e){_classCallCheck(this,a),_.assign(this,e)},delete t.name,delete t["extends"],_.assign(i.prototype,t),i.typeName=r,this.type(e,r,i),this.log("Utils","Utils.createType - "+e+"."+r)}return i},buildTypes:function(e,t,n){var r=this;if(this.log("Utils","Utils.buildTypes - "+t),!e&&n)return this.createType(t,n),void this.log("Utils","Utils.buildTypes end");if(n){var i=_.remove(e,{name:n.name});i=i.length>0?i[0]:null,n=i?this.createType(t,_.defaultsDeep(i,n)):this.createType(t,n)}_.forEach(e,function(e){r.createType(t,e,n)}),this.log("Utils","Utils.buildTypes end")},extend:function(e,t,n,r){_.extend(e,t,r);var i=function(){this.constructor=e};return i.prototype=t.prototype,e.prototype=new i,n&&_.extend(e.prototype,n),e.superclass=t.prototype,e},initConfig:function(e,t){for(var n={},r=e.constructor,i=[r];r;)r["super"]?(r=r["super"].constructor,splice.apply(i,[0,0,r])):r=null;for(var o=0;o<i.length;o++)r=i[o],r.DEFAULTS&&_.assign(n,r.DEFAULTS);e.props=_.assign(n,t),r.prototype.prop=function(e,t){return t?void(this.props[e]=t):this.props[e]}},getConstructor:function getConstructor(jsClass,defaultClass){return jsClass||(jsClass=defaultClass),_.isString(jsClass)&&(jsClass=eval(jsClass)),jsClass},debug:function(e){e?_debugging.push(e):_debugAll=!0},log:function(e,t){if(window.console){var n=_debugAll;if(!_debugAll){n=!1;for(var r=0;r<_debugging.length;r++)_debugging[r]==e&&(n=!0)}if(n){for(;e.length<10;)e+=" ";e=e.substring(0,10)+" - ",console.info(e,t)}}},getRelativePosition:function(e,t){var n=Math.abs(t.x)<=1?e.width*t.x:t.x,r=Math.abs(t.y)<=1?e.height*t.y:t.y;return this.offsetPosition([n,r],t)},offsetPosition:function(e,t){return[e[0]+t.width*t.anchorX+t.offsetX,e[1]+t.height*t.anchorY+t.offsetY]},unscale:function(e,t,n){return n instanceof _Rectangle2["default"]?new _Rectangle2["default"](n.x*t+e[0],n.y*t+e[1],n.width*t,n.height*t):n instanceof _Point2["default"]?new _Point2["default"](n.x*t+e[0],n.y*t+e[1]):[n[0]*t+e[0],n[1]*t+e[1]]},scale:function(e,t,n){return n instanceof _Rectangle2["default"]?new _Rectangle2["default"]((n.x-e[0])/t,(n.y-e[1])/t,n.width/t,n.height/t):n instanceof _Point2["default"]?new _Point2["default"]((n.x-e[0])/t,(n.y-e[1])/t):[(n[0]-e[0])/t,(n[1]-e[1])/t]},getProperty:function(e,t){return e?_.has(e,t)?e[t]:e.prop&&_.isFunction(e.prop)?e.prop(t):null:null}}}).call(exports,function(){return this}())},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){n(this,e),this.x=t,this.y=r}return r(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"distance",value:function(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}},{key:"translate",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"scale",value:function(e){return this.x*=e,this.y*=e,this}},{key:"getScaled",value:function(t){return new e(this.x*t,this.y*t)}},{key:"getTranslated",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"getDirection",value:function(t){var n=this.distance(t);return new e((t.x-this.x)/n,(t.y-this.y)/n)}},{key:"rotate",value:function(e){var t=Math.cos(e*Math.PI/180),n=Math.sin(e*Math.PI/180),r=this.x,i=this.y;return this.x=r*t-i*n,this.y=r*n+i*t,this}},{key:"getRotated",value:function(e){return this.clone().rotate(e)}},{key:"dotProduct",value:function(e){return this.x*e.x+this.y*e.y}},{key:"getMidPoint",value:function(t){return new e((this.x+t.x)/2,(this.y+t.y)/2)}},{key:"reverse",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"equals",value:function(t){return!(!t||t.constructor!=e)&&(this.x==t.x&&this.y==t.y)}},{key:"reflect",value:function(e,t){return t?this.x=2*e.x-this.x:this.y=2*e.y-this.y,this}},{key:"toString",value:function(){return this.x+","+this.y}}]),e}();i.W=new i((-1),0),i.N=new i(0,(-1)),i.S=new i(0,1),i.E=new i(1,0),i.NE=new i(1,(-1)),i.NW=new i((-1),(-1)),i.SE=new i(1,1),i.SW=new i((-1),1),t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),u=r(l),h=n(3),f=r(h),c=n(6),d=r(c),p=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"contains",value:function(e){var t=e.width||0,n=e.height||0,r=e.x-t/2,i=e.x+t/2,o=e.y-n/2,a=e.y+n/2;return i<=this.right&&r>=this.left&&o>=this.top&&a<=this.bottom}},{key:"distance",value:function(e){return this.contains(e)?0:e.x<this.left?e.y<this.top?e.distance(new f["default"](this.left,this.top)):e.y<=this.bottom?this.left-e.x:e.distance(new f["default"](this.left,this.bottom)):e.x<=this.right?e.y<=this.top?this.top-e.y:e.y-this.bottom:e.y<this.top?e.distance(new f["default"](this.right,this.top)):e.y<=this.bottom?e.x-this.right:e.distance(new f["default"](this.right,this.bottom))}},{key:"detectIntersection",value:function(e,t){var n=e.y==t.y,r=this.contains(e),i=this.contains(t);if(r&&i)return 4;if(!r&&!i){if(n&&e.y>=this.top&&e.y<=this.bottom){if(e.x<this.left&&t.x>this.right)return 0;if(e.x>this.right&&t.x<this.left)return 2}if(!n&&e.x>=this.left&&e.x<=this.right){if(e.y<this.top&&t.y>this.bottom)return 1;if(e.y>this.bottom&&t.y<this.top)return 3}return-1}var o=r?t:e;return n?o.x>this.right?2:0:o.y<this.top?1:3}},{key:"toString",value:function(){return"Rectangle:{x="+this.x+";y="+this.y+";width="+this.width+";height="+this.height+"}"}}],[{key:"getPerimeter",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.x,o=e.y,a=n.x-i,s=n.y-o,l=Math.atan2(s,a),u=new f["default"](0,0),h=Math.PI,c=Math.PI/2,d=c-l,p=Math.atan2(e.height,e.width);l<-h+p||l>h-p?(u.x=e.left,u.y=o-e.width*Math.tan(l)/2):l<-p?(u.y=e.top,u.x=i-e.height*Math.tan(d)/2):l<p?(u.x=e.right,u.y=o+e.width*Math.tan(l)/2):(u.y=e.bottom,u.x=i+e.height*Math.tan(d)/2),r&&(l<-h+p||l>h-p?(u.x=e.left,u.y=o):l<-p?(u.y=e.top,u.x=i):l<p?(u.x=e.right,u.y=o):(u.y=e.bottom,u.x=i));var g=t.getDirection(e,u,r);return{point:u,direction:g}}},{key:"getBoundingRectangle",value:function(e,n){if(!e||0==e.length)return null;n=n||[0,0,0,0],u["default"].isArray(n)||(n=[n,n,n,n]);for(var r=[e[0].x,e[0].y],i=[e[0].x,e[0].y],o=1;o<e.length;o++){var a=e[o];a.x<r[0]&&(r[0]=a.x),a.y<r[1]&&(r[1]=a.y),a.x>i[0]&&(i[0]=a.x),a.y>i[1]&&(i[1]=a.y)}r[0]=r[0]-n[0],r[1]=r[1]-n[1],i[0]=i[0]+n[2],i[1]=i[1]+n[3];var s=Math.abs(i[0]-r[0]),l=Math.abs(i[1]-r[1]);return new t(r[0]+s/2,r[1]+l/2,s,l)}},{key:"union",value:function(e){var n=null,r=null,i=-(1/0),o=-(1/0);return u["default"].each(e,function(e){n=n||e.x,r=r||e.y,n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.right()),o=Math.max(o,e.bottom())}),n=n||0,r=r||0,new t(n,r,i-n,o-r)}},{key:"getDirection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n)return new f["default"](e.x,e.y).getDirection(new f["default"](t.x,t.y));var r=void 0,i=Math.abs(e.left-t.x),o=f["default"].W;return r=Math.abs(e.top-t.y),r<=i&&(i=r,o=f["default"].N),r=Math.abs(e.bottom-t.y),r<=i&&(i=r,o=f["default"].S),r=Math.abs(e.right-t.x),r<i&&(o=f["default"].E),o}}]),t}(d["default"]);t["default"]=p},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_5__},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=r(a),l=n(3),u=r(l),h=n(4),f=r(h),c={},d=function(){function e(t,n,r,o,a){i(this,e),this.x=t,this.y=n,this.width=r,this.height=o,s["default"].defaults(this,a,{x:0,y:0,width:0,height:0})}return o(e,[{key:"contains",value:function(e){return!1}},{key:"getRegularPoints",value:function(e){return null}},{key:"getPerimeter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.constructor.getPerimeter(this,e,t)}},{key:"render",value:function(e){var t=s["default"].template(e.getTemplate(this.name,this));return t(this)}},{key:"top",get:function(){return this.y-this.height/2}},{key:"bottom",get:function(){return this.y+this.height/2}},{key:"left",get:function(){return this.x-this.width/2}},{key:"right",get:function(){return this.x+this.width/2}},{key:"center",get:function(){return new u["default"](this.x,this.y)}},{key:"bounds",get:function(){return new f["default"](this.x,this.y,this.width,this.height)}}],[{key:"getShape",value:function(e){return c[e]}},{key:"addShape",value:function(e,t){c[e]=t}},{key:"removeShape",value:function(e){delete c[e]}}]),e}();t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=r(i);t["default"]={isIE:function(){if(!window||!window.navigator||!navigator)return!1;var e=window.navigator.userAgent,t=e.indexOf("MSIE");return t>0?parseInt(e.substring(t+5,e.indexOf(".",t))):navigator.userAgent.match(/Trident\/7\./)?11:!!navigator.userAgent.match(/Edge\//)&&"Edge"}(),isFireFox:function(){return"undefined"!=typeof InstallTrigger}(),isChrome:function(){if(!window||!window.navigator||!navigator||navigator.userAgent.indexOf("Edge")>=0)return!1;var e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return!!e&&parseInt(e[2],10)}(),isMac:function(){return!!(window&&window.navigator&&navigator)&&navigator.platform.toUpperCase().indexOf("MAC")>=0}(),isWindows:function(){return!!(window&&window.navigator&&navigator)&&navigator.appVersion.indexOf("Windows")>=0}(),isLinux:function(){return!!(window&&window.navigator&&navigator)&&navigator.appVersion.indexOf("Linux")>=0}(),createElement:function(e,t,n,r){var i=document.createElement(e);return this.setElement(i,t,n),r&&(i.innerHTML=r),i},createElementByString:function(e){var t=this.createElement("div",null,null,e);return t.childNodes},setElement:function(e,t,n){t&&o["default"].forEach(t,function(t,n){e.setAttribute(n,t)}),n&&o["default"].forEach(n,function(t,n){e.style[n]=t})},testElement:function(e,t){return e&&1==e.nodeType&&(!t||t(e))},getAncestorBy:function(e,t){for(;e=e.parentNode;)if(this.testElement(e,t))return e;return null},getPosition:function(e,t){t||(t=document.body);var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return[n.left-r.left,n.top-r.top]},getCenterPosition:function(e,t){t||(t=document.body);var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=n.right-n.left,o=n.bottom-n.top;return[n.left-r.left+i/2,n.top-r.top+o/2]},move:function(e,t,n){t&&(e.style.left=t+"px"),n&&(e.style.top=n+"px")},getSize:function(e){var t=parseInt(e.style.offsetWidth,10),n=parseInt(e.style.offsetHeight,10);return[t,n]},resize:function(e,t,n){t&&(e.style.width=t+"px"),n&&(e.style.height=n+"px")},preloadImages:function(e){this.preloadImages.list||(this.preloadImages.list=[]),this.preloadImages.loaded||(this.preloadImages.loaded={});for(var t,n=this.preloadImages.list,r=this,i=0;i<e.length;i++)t=new Image,t.onload=function(){var e=n.indexOf(this);e!==-1&&(r.preloadImages.loaded[this.name]={width:this.width,height:this.height},n.splice(e,1))},n.push(t),t.src=e[i],t.name=e[i]},getImageInfo:function(e){return this.preloadImages.loaded?this.preloadImages.loaded[e]:null},downloadFile:function(e,t){if(t){var n=t.match(/^data:([^;,]*)/)[1];if(e.indexOf(".")<0)if(n||(n="text/plain"),"text/plain"==n)e+=".txt";else{var r=n.split("/")[1];r.indexOf("+")>0&&(r=r.split("+")[0]),e=e+"."+r}if(this.isIE){var i=t.indexOf(";base64")>=0;t=i?atob(t.replace("data:"+n+";base64,","")):decodeURI(t.replace("data:"+n+",","")),t=this.GetBlob(t,n),navigator.msSaveBlob(t,e)}else{var o=this.createElement("a",{href:t,download:e},{display:"none"});document.body.appendChild(o),o.click(),o.parentNode.removeChild(o)}}},GetBlob:function(e,t,n){t=t||"",n=n||512;for(var r=[],i=0;i<e.length;i+=n){for(var o=e.slice(i,i+n),a=new Array(o.length),s=0;s<o.length;s++)a[s]=o.charCodeAt(s);var l=new Uint8Array(a);r.push(l)}return new Blob(r,{type:t})},openImage:function(e,t){var n=window.open("","_blank","toolbar=yes, scrollbars=yes, resizable=yes, width=500, height=500"),r=n.document,i=r.createElement("img");this.setElement(i,{src:t,name:e}),r.body.appendChild(i)},eventFromInput:function(e){var t=e.target.tagName;return"INPUT"==t||"TEXTAREA"==t||"SELECT"==t}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=r(a),l=function(){function e(t){i(this,e),this.buffer=[],t&&this.buffer.push(t)}return o(e,[{key:"append",value:function(e){return s["default"].isString(e)?this.buffer.push(e):s["default"].isArray(e)?this.buffer=this.buffer.concat(e):this.buffer.push(""+e),this}},{key:"prepend",value:function(e){return s["default"].isString(e)?this.buffer.splice(0,0,e):s["default"].isArray(e)?this.buffer=e.concat(this.buffer):this.buffer.splice(0,0,""+e),this}},{key:"clear",value:function(){this.buffer=[]}},{key:"removeLast",value:function(){return this.buffer.pop(),this}},{key:"toString",value:function(e){return e||(e=""),this.buffer.join(e)}}]),e}();t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),s=r(a),l=function(){function e(t,n){i(this,e),this.start=t,this.end=n}return o(e,[{key:"length",value:function(){return this.start.distance(this.end)}},{key:"distance",value:function(e){var t=this.start.distance(e);if(0==t)return 0;var n=this.length(),r=new s["default"]((this.end.x-this.start.x)/n,(this.end.y-this.start.y)/n).dotProduct(new s["default"](e.x/t,e.y/t));return t*Math.sqrt(1-r*r)}},{key:"toString",value:function(){return"Line:{start="+this.start+";end="+this.end+"}"}}],[{key:"intersection",value:function(e,t,n,r,i,o,a,l){var u=(l-o)*(n-e)-(a-i)*(r-t),h=(a-i)*(t-o)-(l-o)*(e-i),f=(n-e)*(t-o)-(r-t)*(e-i),c=h/u,d=f/u;if(c>=0&&c<=1&&d>=0&&d<=1){var p=e+c*(n-e),g=t+c*(r-t);return new s["default"](p,g)}return null}}]),e}();t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(6),u=r(l),h=n(3),f=r(h),c=n(4),d=r(c),p=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"toString",value:function(){return"Ellipse:{x="+this.x+";y="+this.y+";width="+this.width+";height="+this.height+"}"}}],[{key:"getPerimeter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.width/2,i=e.height/2,o=e.x,a=e.y,s=t.x,l=t.y,u=parseInt(s-o),h=parseInt(l-a);if(0==u&&0!=h)return new f["default"](o,a+i*h/Math.abs(h));if(0==u&&0==h)return new f["default"](s,l);var c=h/u,p=a-c*o,g=r*r*c*c+i*i,y=-2*o*g,v=r*r*c*c*o*o+i*i*o*o-r*r*i*i,m=Math.sqrt(y*y-4*g*v),b=(-y+m)/(2*g),w=(-y-m)/(2*g),x=c*b+p,_=c*w+p,k=Math.sqrt(Math.pow(b-s,2)+Math.pow(x-l,2)),E=Math.sqrt(Math.pow(w-s,2)+Math.pow(_-l,2)),P=0,S=0;k<E?(P=b,S=x):(P=w,S=_);var M=new f["default"](P,S),O=d["default"].getDirection(e,M,n);if(n){if(O.x==-1)return{point:new f["default"](o-r,a),direction:O};if(1==O.x)return{point:new f["default"](o+r,a),direction:O};if(O.y==-1)return{point:new f["default"](o,a-i),direction:O};if(1==O.y)return{point:new f["default"](o,a+i),direction:O}}return{point:M,direction:O}}}]),t}(u["default"]);t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(6),u=r(l),h=n(3),f=r(h),c=n(9),d=r(c),p=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"toString",value:function(){return"Rhombus:{x="+this.x+";y="+this.y+";width="+this.width+";height="+this.height+"}"}}],[{key:"getPerimeter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.width,i=e.height,o=e.x,a=e.y,s=o-r/2,l=a-i/2,u=t.x,h=t.y;if(o===u)return a>h?{point:new f["default"](o,l),direction:f["default"].S}:{point:new f["default"](o,l+i),direction:f["default"].N};if(a===h)return o>u?{point:new f["default"](s,a),direction:f["default"].E}:{point:new f["default"](s+r,a),direction:f["default"].W};var c=o,p=a;n&&(u>=s&&u<=s+r?c=u:h>=l&&h<=l+i&&(p=h));var g=void 0,y=void 0;return u<o?h<a?(g=d["default"].intersection(u,h,c,p,o,l,s,a),y=f["default"].S):(g=d["default"].intersection(u,h,c,p,o,l+i,s,a),y=f["default"].N):h<a?(g=d["default"].intersection(u,h,c,p,o,l,s+r,a),y=f["default"].E):(g=d["default"].intersection(u,h,c,p,o,l+i,s+r,a),y=f["default"].W),{point:g,direction:y}}}]),t}(u["default"]);t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),u=r(l),h=n(3),f=r(h),c=n(2),d=r(c),p={type:"direct",showGauge:!0,orthogonal:!1},g={width:0,height:0,anchorX:0,anchorY:0,offsetX:0,offsetY:0},y={},v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;a(this,e),this.start=t[0].point,this.end=t[1].point,this.startNormal=t[0].direction,this.endNormal=t[1].direction,this.startMarker=r,this.endMarker=i,u["default"].assign(this,n)}return s(e,[{key:"render",value:function(e){return e.renderLink(this)}},{key:"getRelativePosition",value:function(e){u["default"].isNumber(e)&&(e={x:e}),e=u["default"].defaults(e,g);var t=e.x,n=this.length;Math.abs(t)<=1&&(t*=n),t<0&&(t=n+t),t>n&&(t=n);for(var r=this.points,i=void 0,o=void 0,a=void 0,s=0;s<r.length-1;s++){if(i=r[s].distance(r[s+1]),t<=i){o=r[s].clone(),a=o.getDirection(r[s+1]),o.translate(a.getScaled(t));break}t-=i}return o||(o=r[r.length-1]),d["default"].offsetPosition([o.x,o.y],e)}},{key:"toString",value:function(){return"Link"}},{key:"points",get:function(){return null}},{key:"controlPts",get:function(){return null}},{key:"length",get:function(){var e=this.points,t=void 0,n=0;for(t=0;t<e.length-1;t++)n+=e[t].distance(e[t+1]);return n}}],[{key:"getLink",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=u["default"].defaultsDeep(t,p);var i=y[t.type];return i?new i(e,t,n,r):(console.log("link type not supported: "+t.type),null)}}]),e}(),m=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"points",get:function(){return[this.start,this.end]}}]),t}(v),b=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"getRelativePosition",value:function(e){u["default"].isNumber(e)&&(e={x:e}),e=u["default"].defaults(e,g);var t=e.x,n=this.length;Math.abs(t)>1&&(t/=n),t<0&&t++,t>1&&t--;var r=this.points,i=this.controlPts,o=r[0],a=i[1][0],s=i[1][1],l=r[1],h=[(1-t)*(1-t)*(1-t)*o.x+3*t*(1-t)*(1-t)*a.x+3*t*t*(1-t)*s.x+t*t*t*l.x,(1-t)*(1-t)*(1-t)*o.y+3*t*(1-t)*(1-t)*a.y+3*t*t*(1-t)*s.y+t*t*t*l.y];return d["default"].offsetPosition([h.x,h.y],e)}},{key:"points",get:function(){return[this.start,this.end]}},{key:"controlPts",get:function(){var e=this.points[0],t=this.points[1],n=[];return n[0]=null,n[1]=[],0===this.startNormal.x?n[1][0]=new f["default"](e.x,(e.y+t.y)/2):n[1][0]=new f["default"]((e.x+t.x)/2,e.y),0===this.endNormal.x?n[1][1]=new f["default"](t.x,(e.y+t.y)/2):n[1][1]=new f["default"]((e.x+t.x)/2,t.y),n}}]),t}(v),w=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"points",get:function(){var e=Port.getBounds(edge,!0),t=Port.getBounds(edge,!1),n=t.right()<e.x,r=e.right()<t.x,i=[],o=n?e.x:e.x+e.width,a=e.getCenterY();i.push(new f["default"](o,a));var s=r?t.x:t.x+t.width,l=t.getCenterY(),u=this.segment,h=n?-u:u,c=new f["default"](o+h,a);h=r?-u:u;var d=new f["default"](s+h,l);if(n==r){var p=n?Math.min(o,s)-u:Math.max(o,s)+u;i.push(new f["default"](p,a)),i.push(new f["default"](p,l))}else if(c.x<d.x==n){var g=a+(l-a)/2;i.push(c),i.push(new f["default"](c.x,g)),i.push(new f["default"](d.x,g)),i.push(d)}else i.push(c),i.push(d);return i.push(new f["default"](s,l)),i}}]),t}(v),x=function(e){function t(e,n,r,o){return a(this,t),n=u["default"].defaults(n,{MIN_BUFFER:10,autoRoute:!1,randomNoise:0,step:1,maxChannelWidth:100}),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,o))}return o(t,e),s(t,[{key:"autoRoute",value:function(e,t,n,r,i){var o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,h=void 0,c=void 0,d=void 0,p=void 0,g=void 0,y=0,v=void 0;l=n[i],p=e[e.length-2],o=p.y<l.y?1:p.y>l.y+l.height?3:p.x<l.x?0:2,c=_getChannel(t,i,n,o),v=c.horizontal?(c.right-c.left)/2:(c.bottom-c.top)/2;for(var m=0;m<e.length-1;m++)if((e[m+1].x!=e[m].x||e[m+1].y!=e[m].y)&&(u=_getFirstIntersection(e,m,n,r,i))){switch(h=u[0],o=u[1],l=n[h],c=_getChannel(t,h,n,o),o){case 0:case 2:p=new f["default"]((c.right+c.left)/2,e[m].y),g=_getRouteTendency(e,m,p,l,o),a=g<0?1:3,d=_getChannel(t,h,n,a),s=m>1&&e[m-2].y==e[m-1].y&&e[m-1].y>d.top&&e[m-1].y<d.bottom?e[m-1].y-p.y:m<e.length-3&&e[m+2].y==e[m+3].y&&e[m+2].y>d.top&&e[m+2].y<d.bottom?e[m+2].y-p.y:(d.bottom+d.top)/2-p.y,0==o&&p.x<=e[m].x||2==o&&p.x>=e[m].x?p=null:m>0&&(_hasIntersection([new f["default"](e[m].x,e[m].y),new f["default"](e[m].x,e[m].y+s),new f["default"](p.x,p.y+s)],n)||(p=null));break;case 1:case 3:p=new f["default"](e[m].x,(c.bottom+c.top)/2),g=_getRouteTendency(e,m,p,l,o),a=g<0?0:2,d=_getChannel(t,h,n,a),s=m>1&&e[m-2].x==e[m-1].x&&e[m-1].x>d.left&&e[m-1].x<d.right?e[m-1].x-p.x:m<e.length-3&&e[m+2].x==e[m+3].x&&e[m+2].x>d.left&&e[m+2].x<d.right?e[m+2].x-p.x:(d.right+d.left)/2-p.x,1==o&&p.y<=e[m].y||3==o&&p.y>=e[m].y?p=null:m>0&&(_hasIntersection([new f["default"](e[m].x,e[m].y),new f["default"](e[m].x+s,e[m].y),new f["default"](p.x+s,p.y)],n)||(p=null));break;case 4:continue}if(m>20)return;!p||p.x==e[m].x&&p.y==e[m].y?_moveSegment(e,m,s,y,v):(e.splice(m+1,0,p),_moveSegment(e,m+1,s,y,v),m++)}}},{key:"_getRouteTendency",value:function(e,t,n,r,i){var o=void 0,a=void 0;switch(i){case 0:case 2:a="y";break;case 1:case 3:a="x"}return o=_getRouteDirection(n,e[e.length-1])[a],0==o&&(o=-_getRouteDirection(e[0],e[e.length-1])[a],0==o&&(o=n[a]<r.getCenter()[a]?-1:1)),o}},{key:"_getChannel",value:function(e,t,n,r){var i=this.maxChannelWidth,o=n[t],a=void 0,s=void 0,l=void 0,u={},h=void 0,f=void 0,c=void 0,d=void 0;switch(r){case 0:for(s=o.getLeft(),u.right=s.x,u.horizontal=!1,l=0;l<n.length;l++)l!=t&&(d=n[l].getRight().x,
d>=s.x||(!u.left||u.left<d)&&(u.left=d));for(u.left||(u.left=e.getLeft().x,u.right-u.left>i&&(u.left=u.right-i)),l=0;l<n.length;l++)l!=t&&(a=n[l],c=a.getBottom().y,f=a.getTop().y,c<s.y&&a.getRight()>u.left&&a.getLeft()<u.right&&(!u.top||u.top<c)&&(u.top=c),f>s.y&&a.getRight()>u.left&&a.getLeft()<u.right&&(!u.bottom||u.bottom>f)&&(u.bottom=f));u.top||(u.top=e.getTop().y),u.bottom||(u.bottom=e.getBottom().y);break;case 1:for(s=o.getTop(),u.horizontal=!0,u.bottom=s.y,l=0;l<n.length;l++)l!=t&&(c=n[l].getBottom().y,c>=s.y||(!u.top||u.top<c)&&(u.top=c));for(u.top||(u.top=e.getTop().y,u.bottom-u.top>i&&(u.top=u.bottom-i)),l=0;l<n.length;l++)l!=t&&(a=n[l],h=a.getLeft().x,d=a.getRight().x,d<s.x&&a.getBottom()>u.top&&a.getTop()<u.bottom&&(!u.left||u.left<d)&&(u.left=d),h>s.x&&a.getBottom()>u.top&&a.getTop()<u.bottom&&(!u.right||u.right>h)&&(u.right=h));u.left||(u.left=e.getLeft().x),u.right||(u.right=e.getRight().x);break;case 2:for(s=o.getRight(),u.horizontal=!1,u.left=s.x,l=0;l<n.length;l++)l!=t&&(h=n[l].getLeft().x,h<=s.x||(!u.right||u.right>h)&&(u.right=h));for(u.right||(u.right=e.getRight().x,u.right-u.left>i&&(u.right=u.left+i)),l=0;l<n.length;l++)l!=t&&(a=n[l],c=a.getBottom().y,f=a.getTop().y,c<s.y&&a.getRight()>u.left&&a.getLeft()<u.right&&(!u.top||u.top<c)&&(u.top=c),f>s.y&&a.getRight()>u.left&&a.getLeft()<u.right&&(!u.bottom||u.bottom>f)&&(u.bottom=f));u.top||(u.top=e.getTop().y),u.bottom||(u.bottom=e.getBottom().y);break;case 3:for(s=o.getBottom(),u.horizontal=!0,u.top=s.y,l=0;l<n.length;l++)l!=t&&(a=n[l],a.getTop().y<=s.y||(!u.bottom||u.bottom>a.getTop().y)&&(u.bottom=a.getTop().y));for(u.bottom||(u.bottom=e.getBottom().y,u.bottom-u.top>i&&(u.bottom=u.top+i)),l=0;l<n.length;l++)l!=t&&(a=n[l],h=a.getLeft().x,d=a.getRight().x,d<s.x&&a.getBottom()>u.top&&a.getTop()<u.bottom&&(!u.left||u.left<d)&&(u.left=d),h>s.x&&a.getBottom()>u.top&&a.getTop()<u.bottom&&(!u.right||u.right>h)&&(u.right=h));u.left||(u.left=e.getLeft().x),u.right||(u.right=e.getRight().x)}return u}},{key:"_moveSegment",value:function(e,t,n,r,i){var o=void 0,a=void 0,s=void 0;return 0==t?(o=e[0].getDirection(e[1]),r||(r=this.MIN_BUFFER),a=Math.min(r,e[0].distance(e[1])/2),s=e[0].getTranslated(o.scale(a)),e.splice(1,0,s),void this._moveSegment(e,t+1,n)):t==e.length-2?(o=e[e.length-1].getDirection(e[e.length-2]),i||(i=this.MIN_BUFFER),a=Math.min(i,e[e.length-1].distance(e[e.length-2])/2),s=e[e.length-1].getTranslated(o.scale(a)),e.splice(e.length-1,0,s),void this._moveSegment(e,t,n)):void(e[t].y==e[t+1].y?(t>0&&e[t-1].y==e[t].y&&(e.splice(t+1,0,e[t].clone()),t++),t<e.length-2&&e[t+1].y==e[t+2].y&&e.splice(t+1,0,e[t+1].clone()),e[t].y+=n,e[t+1].y+=n):(t>0&&e[t-1].x==e[t].x&&(e.splice(t+1,0,e[t].clone()),t++),t<e.length-2&&e[t+1].x==e[t+2].x&&e.splice(t+1,0,e[t+1].clone()),e[t].x+=n,e[t+1].x+=n))}},{key:"points",get:function(){var e=t.route(this.start,this.end,this.startNormal,this.endNormal,this.MIN_BUFFER);if(this.autoRoute){this._mergeSegments(e);for(var n=[],r=void 0,i=void 0,o=void 0,a=edge.source.getCommonAncestor(edge.target),s=a.getDescendants(),l=0,u=0;u<s.length;u++)r=s[u],r.excludeFromRouting(edge)||r.isAncestor(edge.source)||r.isAncestor(edge.target)||(r==edge.source&&(i=l),r==edge.target&&(o=l),n.push(r.getBounds(document)),l++);n.length>1&&this.autoRoute(e,a.getBounds(document),n,i,o)}if(t._mergeSegments(e),this.randomNoise&&e.length>3)for(var h=1;h<e.length-2;h++){var f=this.randomNoise/this.step,c=Math.floor(Math.random()*f*2-f+1)*this.step,d=void 0;if(this.randomNoise&&4==e.length){d=0!=this.startNormal.x&&this.startNormal.x!=this.endNormal.x?this.randomNoise<=Math.abs(e[1].x-e[0].x-this.startNormal.x*this.MIN_BUFFER)?this.randomNoise:Math.abs(e[1].x-e[0].x-this.startNormal.x*this.MIN_BUFFER):0!=this.startNormal.y&&this.startNormal.y!=this.endNormal.y?this.randomNoise<=Math.abs(e[1].y-e[0].y-this.startNormal.y*this.MIN_BUFFER)?this.randomNoise:Math.abs(e[1].y-e[0].y-this.startNormal.y*this.MIN_BUFFER):this.randomNoise;var p=d/this.step,g=void 0;g=this.startNormal.x!=this.endNormal.x||this.startNormal.y!=this.endNormal.y?Math.floor(Math.random()*p*2-p+1)*this.step:Math.sign(0!=this.startNormal.x?this.startNormal.x:this.startNormal.y)*Math.floor(Math.random()*p+1)*this.step,this._moveSegment(e,1,g,1,1)}if(this.randomNoise&&e.length>4)for(var y=1;y<e.length-2;y++)f=this.randomNoise/this.step,c=1==y?Math.sign(0!=this.startNormal.x?this.startNormal.x:this.startNormal.y)*Math.floor(Math.random()*f+1)*this.step:y==e.length-3?Math.sign(0!=this.endNormal.x?this.endNormal.x:this.endNormal.y)*Math.floor(Math.random()*f+1)*this.step:Math.floor(Math.random()*f*2-f+1)*this.step,this._moveSegment(e,y,c,1,1)}return e}}],[{key:"route",value:function(e,t,n,r,i){var o=new f["default"](e.x+n.x*i,e.y+n.y*i),a=new f["default"](t.x+r.x*i,t.y+r.y*i),s=void 0,l=void 0,u=void 0;if(s=0!=n.x?(a.x-o.x)/n.x>0?n:new f["default"](0,a.y>=o.y?1:-1):(a.y-o.y)/n.y>0?n:new f["default"](a.x>=o.x?1:-1,0),l=0!=r.x?(o.x-a.x)/r.x>0?r:new f["default"](0,o.y>=a.y?1:-1):(o.y-a.y)/r.y>0?r:new f["default"](o.x>=a.x?1:-1,0),0==s.dotProduct(l)){var h=0==s.x?new f["default"](o.x,a.y):new f["default"](a.x,o.y);u=[e,o,h,a,t]}else u=s.dotProduct(l)<0?0==s.x?[e,o,new f["default"](o.x,(e.y+t.y)/2),new f["default"](a.x,(e.y+t.y)/2),a,t]:[e,o,new f["default"]((e.x+t.x)/2,o.y),new f["default"]((e.x+t.x)/2,a.y),a,t]:[e,o,new f["default"](o.x+s.x*i,o.y+s.y*i),new f["default"](a.x+l.x*i,a.y+l.y*i),a,t];var c=[];c[0]=u[0];for(var d=1;d<u.length-1;d++)u[d].x==u[d-1].x&&u[d].x==u[d+1].x||u[d].y==u[d-1].y&&u[d].y==u[d+1].y||c.push(u[d]);return c.push(u[u.length-1]),c}},{key:"_hasIntersection",value:function(e,t){for(var n=0;n<e.length-1;n++)for(var r=0;r<t.length;r++)if(t[r].detectIntersection(e[n],e[n+1])>=0)return!0;return!1}},{key:"_getFirstIntersection",value:function(e,t,n,r,i){for(var o=void 0,a=void 0,s=null,l=null,u=0;u<n.length;u++)0==t&&u==r||t==e.length-2&&u==i||(o=n[u],a=o.detectIntersection(e[t],e[t+1]),a>=0&&(null==s?(s=u,l=a):n[s].distance(e[t])>o.distance(e[t])&&(s=u,l=a)));return null!=s?[s,l]:null}},{key:"_getRouteDirection",value:function(e,t){return e.x==t.x?e.y<t.y?f["default"].S:f["default"].N:e.y==t.y?e.x<t.x?f["default"].E:f["default"].W:e.x<t.x?e.y<t.y?f["default"].SE:f["default"].NE:e.y<t.y?f["default"].SW:f["default"].NW}},{key:"_mergeSegments",value:function(e){for(var t=e[e.length-1].y==e[e.length-2].y,n=void 0,r=e.length-2;r>=1;r--)n=e[r].y==e[r-1].y,n==t||e[r].equals(e[r-1])?e.splice(r,1):t=!t}}]),t}(v);y.direct=m,y.bezier=b,y.entityRelations=w,y.manhattan=x,t["default"]=v},function(e,t,n){var r,i;/*!
	  * Bean - copyright (c) Jacob Thornton 2011-2012
	  * https://github.com/fat/bean
	  * MIT license
	  */
(function(o,a,s){"undefined"!=typeof e&&e.exports?e.exports=s():(r=s,i="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==i&&(e.exports=i)))})("bean",this,function(e,t){e=e||"bean",t=t||this;var n,r=window,i=t[e],o=/[^\.]*(?=\..*)\.|.*/,a=/\..*/,s="addEventListener",l="removeEventListener",u=document||{},h=u.documentElement||{},f=h[s],c=f?s:"attachEvent",d={},p=Array.prototype.slice,g=function(e,t){return e.split(t||" ")},y=function(e){return"string"==typeof e},v=function(e){return"function"==typeof e},m="click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll ",b="show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinput readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ",w=function(e,t,n){for(n=0;n<t.length;n++)t[n]&&(e[t[n]]=1);return e}({},g(m+(f?b:""))),x=function(){var e="compareDocumentPosition"in h?function(e,t){return t.compareDocumentPosition&&16===(16&t.compareDocumentPosition(e))}:"contains"in h?function(e,t){return t=9===t.nodeType||t===window?h:t,t!==e&&t.contains(e)}:function(e,t){for(;e=e.parentNode;)if(e===t)return 1;return 0},t=function(t){var n=t.relatedTarget;return n?n!==this&&"xul"!==n.prefix&&!/document/.test(this.toString())&&!e(n,this):null==n};return{mouseenter:{base:"mouseover",condition:t},mouseleave:{base:"mouseout",condition:t},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),_=function(){var e=g("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),t=e.concat(g("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),n=t.concat(g("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),i=e.concat(g("char charCode key keyCode keyIdentifier keyLocation location")),o=e.concat(g("data")),a=e.concat(g("touches targetTouches changedTouches scale rotation")),s=e.concat(g("data origin source")),l=e.concat(g("state")),f=/over|out/,c=[{reg:/key/i,fix:function(e,t){return t.keyCode=e.keyCode||e.which,i}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(e,n,r){return n.rightClick=3===e.which||2===e.button,n.pos={x:0,y:0},e.pageX||e.pageY?(n.clientX=e.pageX,n.clientY=e.pageY):(e.clientX||e.clientY)&&(n.clientX=e.clientX+u.body.scrollLeft+h.scrollLeft,n.clientY=e.clientY+u.body.scrollTop+h.scrollTop),f.test(r)&&(n.relatedTarget=e.relatedTarget||e[("mouseover"==r?"from":"to")+"Element"]),t}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return n}},{reg:/^text/i,fix:function(){return o}},{reg:/^touch|^gesture/i,fix:function(){return a}},{reg:/^message$/i,fix:function(){return s}},{reg:/^popstate$/i,fix:function(){return l}},{reg:/.*/,fix:function(){return e}}],d={},p=function(e,t,n){if(arguments.length&&(e=e||((t.ownerDocument||t.document||t).parentWindow||r).event,this.originalEvent=e,this.isNative=n,this.isBean=!0,e)){var i,o,a,s,l,u=e.type,h=e.target||e.srcElement;if(this.target=h&&3===h.nodeType?h.parentNode:h,n){if(l=d[u],!l)for(i=0,o=c.length;i<o;i++)if(c[i].reg.test(u)){d[u]=l=c[i].fix;break}for(s=l(e,this,u),i=s.length;i--;)!((a=s[i])in this)&&a in e&&(this[a]=e[a])}}};return p.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},p.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},p.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},p.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},p.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},p.prototype.clone=function(e){var t=new p(this,this.element,this.isNative);return t.currentTarget=e,t},p}(),k=function(e,t){return f||t||e!==u&&e!==r?e:h},E=function(){var e=function(e,t,n,r){var i=function(n,i){return t.apply(e,r?p.call(i,n?0:1).concat(r):i)},o=function(n,r){return t.__beanDel?t.__beanDel.ft(n.target,e):r},a=n?function(e){var t=o(e,this);if(n.apply(t,arguments))return e&&(e.currentTarget=t),i(e,arguments)}:function(e){return t.__beanDel&&(e=e.clone(o(e))),i(e,arguments)};return a.__beanDel=t.__beanDel,a},t=function(t,n,r,i,o,a,s){var l,u=x[n];"unload"==n&&(r=C(T,t,n,r,i)),u&&(u.condition&&(r=e(t,r,u.condition,a)),n=u.base||n),this.isNative=l=w[n]&&!!t[c],this.customType=!f&&!l&&n,this.element=t,this.type=n,this.original=i,this.namespaces=o,this.eventType=f||l?n:"propertychange",this.target=k(t,l),this[c]=!!this.target[c],this.root=s,this.handler=e(t,r,null,a)};return t.prototype.inNamespaces=function(e){var t,n,r=0;if(!e)return!0;if(!this.namespaces)return!1;for(t=e.length;t--;)for(n=this.namespaces.length;n--;)e[t]==this.namespaces[n]&&r++;return e.length===r},t.prototype.matches=function(e,t,n){return!(this.element!==e||t&&this.original!==t||n&&this.handler!==n)},t}(),P=function(){var e={},t=function(n,r,i,o,a,s){var l=a?"r":"$";if(r&&"*"!=r){var u,h=0,f=e[l+r],c="*"==n;if(!f)return;for(u=f.length;h<u;h++)if((c||f[h].matches(n,i,o))&&!s(f[h],f,h,r))return}else for(var d in e)d.charAt(0)==l&&t(n,d.substr(1),i,o,a,s)},n=function(t,n,r,i){var o,a=e[(i?"r":"$")+n];if(a)for(o=a.length;o--;)if(!a[o].root&&a[o].matches(t,r,null))return!0;return!1},r=function(e,n,r,i){var o=[];return t(e,n,r,null,i,function(e){return o.push(e)}),o},i=function(t){var n=!t.root&&!this.has(t.element,t.type,null,!1),r=(t.root?"r":"$")+t.type;return(e[r]||(e[r]=[])).push(t),n},o=function(n){t(n.element,n.type,null,n.handler,n.root,function(t,n,r){return n.splice(r,1),t.removed=!0,0===n.length&&delete e[(t.root?"r":"$")+t.type],!1})},a=function(){var t,n=[];for(t in e)"$"==t.charAt(0)&&(n=n.concat(e[t]));return n};return{has:n,get:r,put:i,del:o,entries:a}}(),S=function(e){n=arguments.length?e:u.querySelectorAll?function(e,t){return t.querySelectorAll(e)}:function(){throw new Error("Bean: No selector engine installed")}},M=function(e,t){if(f||!t||!e||e.propertyName=="_on"+t){var n=P.get(this,t||e.type,null,!1),r=n.length,i=0;for(e=new _(e,this,(!0)),t&&(e.type=t);i<r&&!e.isImmediatePropagationStopped();i++)n[i].removed||n[i].handler.call(this,e)}},O=f?function(e,t,n){e[n?s:l](t,M,!1)}:function(e,t,n,r){var i;n?(P.put(i=new E(e,r||t,function(t){M.call(e,t,r)},M,null,null,(!0))),r&&null==e["_on"+r]&&(e["_on"+r]=0),i.target.attachEvent("on"+i.eventType,i.handler)):(i=P.get(e,r||t,M,!0)[0],i&&(i.target.detachEvent("on"+i.eventType,i.handler),P.del(i)))},C=function(e,t,n,r,i){return function(){r.apply(this,arguments),e(t,n,i)}},T=function(e,t,n,r){var i,o,s=t&&t.replace(a,""),l=P.get(e,s,null,!1),u={};for(i=0,o=l.length;i<o;i++)n&&l[i].original!==n||!l[i].inNamespaces(r)||(P.del(l[i]),!u[l[i].eventType]&&l[i][c]&&(u[l[i].eventType]={t:l[i].eventType,c:l[i].type}));for(i in u)P.has(e,u[i].t,null,!1)||O(e,u[i].t,!1,u[i].c)},N=function(e,t){var r=function(t,r){for(var i,o=y(e)?n(e,r):e;t&&t!==r;t=t.parentNode)for(i=o.length;i--;)if(o[i]===t)return t},i=function(e){var n=r(e.target,this);n&&t.apply(n,arguments)};return i.__beanDel={ft:r,selector:e},i},j=f?function(e,t,n){var i=u.createEvent(e?"HTMLEvents":"UIEvents");i[e?"initEvent":"initUIEvent"](t,!0,!0,r,1),n.dispatchEvent(i)}:function(e,t,n){n=k(n,e),e?n.fireEvent("on"+t,u.createEventObject()):n["_on"+t]++},R=function(e,t,n){var r,i,s,l,u=y(t);if(u&&t.indexOf(" ")>0){for(t=g(t),l=t.length;l--;)R(e,t[l],n);return e}if(i=u&&t.replace(a,""),i&&x[i]&&(i=x[i].base),!t||u)(s=u&&t.replace(o,""))&&(s=g(s,".")),T(e,i,n,s);else if(v(t))T(e,null,t);else for(r in t)t.hasOwnProperty(r)&&R(e,r,t[r]);return e},L=function(e,t,r,i){var s,l,u,h,f,y,m;{if(void 0!==r||"object"!=typeof t){for(v(r)?(f=p.call(arguments,3),i=s=r):(s=i,f=p.call(arguments,4),i=N(r,s,n)),u=g(t),this===d&&(i=C(R,e,t,i,s)),h=u.length;h--;)m=P.put(y=new E(e,u[h].replace(a,""),i,s,g(u[h].replace(o,""),"."),f,(!1))),y[c]&&m&&O(e,y.eventType,!0,y.customType);return e}for(l in t)t.hasOwnProperty(l)&&L.call(this,e,l,t[l])}},B=function(e,t,n,r){return L.apply(null,y(n)?[e,n,t,r].concat(arguments.length>3?p.call(arguments,5):[]):p.call(arguments))},A=function(){return L.apply(d,arguments)},I=function(e,t,n){var r,i,s,l,u,h=g(t);for(r=h.length;r--;)if(t=h[r].replace(a,""),(l=h[r].replace(o,""))&&(l=g(l,".")),l||n||!e[c])for(u=P.get(e,t,null,!1),n=[!1].concat(n),i=0,s=u.length;i<s;i++)u[i].inNamespaces(l)&&u[i].handler.apply(e,n);else j(w[t],t,e);return e},D=function(e,t,n){for(var r,i,o=P.get(t,n,null,!1),a=o.length,s=0;s<a;s++)o[s].original&&(r=[e,o[s].type],(i=o[s].handler.__beanDel)&&r.push(i.selector),r.push(o[s].original),L.apply(null,r));return e},$={on:L,add:B,one:A,off:R,remove:R,clone:D,fire:I,Event:_,setSelectorEngine:S,noConflict:function(){return t[e]=i,this}};if(r.attachEvent){var F=function(){var e,t=P.entries();for(e in t)t[e].type&&"unload"!==t[e].type&&R(t[e].element,t[e].type);r.detachEvent("onunload",F),r.CollectGarbage&&r.CollectGarbage()};r.attachEvent("onunload",F)}return S(),$})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(5),l=i(s),u=n(13),h=i(u),f=n(15),c=r(f),d=n(7),p=i(d),g=n(8),y=i(g),v={stopPropagation:!1},m=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,1/0],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,e),this.root=t,this.rootNS=t.getAttribute("ns")||"root",this.zoomScale=n,l["default"].assign(this,v,r),this.scale=1,this.listeners={},this.dragging=!1,this.handler=l["default"].bind(this.handleEvent,this),this.started=!1,this.enterStack=[]}return a(e,[{key:"start",value:function(){this.started||(h["default"].on(this.root,"mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel",this.handler),this.startKeys(),this.started=!0)}},{key:"stop",value:function(){this.started&&(h["default"].off(this.root,"mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel",this.handler),this.stopKeys(),this.started=!1)}},{key:"startKeys",value:function(){h["default"].on(document,"keydown keyup",this.handler)}},{key:"stopKeys",value:function(){h["default"].off(document,"keydown keyup",this.handler)}},{key:"zoomIn",value:function(){return this.scale*=1.25,this.scale=Math.max(Math.min(this.zoomScale[1],this.scale),this.zoomScale[0]),this.scale}},{key:"zoomOut",value:function(){return this.scale*=.8,this.scale=Math.max(Math.min(this.zoomScale[1],this.scale),this.zoomScale[0]),this.scale}},{key:"getEventInfo",value:function(e){for(var t=e.target,n=new y["default"],r=void 0,i=[],o=!1;!o&&t&&t!=document;)r=t.getAttribute("ns"),r&&(o=l["default"].startsWith(r,"root."),o&&(r=r.substring(5),e.rootTarget=t),e.nsTarget||(e.nsTarget=t),i.splice(0,0,t),n.prepend(r)),t=t.parentNode;return o||(e.rootTarget=e.nsTarget),e.targetStack=i,r=n.toString("."),""==r&&(r=this.rootNS),{data:e.rootTarget,ns:r}}},{key:"handleEvent",value:function(t){var n=this,r=t.type;if(!this.dragging&&!p["default"].eventFromInput(t)){var i=void 0,o=void 0,a=this.getPosition(t),s=void 0,l="keydown"==r||"keyup"==r;if(l)i=this.root,o=c.getKeyEvent(t);else{if(s=this.getEventInfo(t),!s)return;i=s.data,o=s.ns}if("mousewheel"==r&&(this.scale*=Math.pow(2,.002*t.wheelDelta),this.scale=Math.max(Math.min(this.zoomScale[1],this.scale),this.zoomScale[0]),t.scale=this.scale,r="zoom"),"mousedown"==r&&0==t.button){var u={data:i,pos:"root"==o?e.mouse(this.root,t):a};this.dragging=!1;var f=void 0,d=function(t){var r=n.getPosition(t);if(!n.dragging){if(u.pos[0]==r[0]&&u.pos[1]==r[1])return;n.dragging=!0,t.rootTarget=u.data,n.dispatch(t,"dragstart",o,u.data,u.pos)}f="root"==o?e.mouse(n.root,t):r,n.getEventInfo(t),n.dispatch(t,"drag",o,u.data,f)},g=function y(t){f="root"==o?e.mouse(n.root,t):n.getPosition(t);var r=n.getEventInfo(t);n.dragging?(n.dragging=!1,n.dispatch(t,"dragend",o,u.data,f)):n.dispatch(t,"mouseup",o,r.data,f),h["default"].off(window,"mousemove",d),h["default"].off(window,"mouseup",y)};t.preventDefault(),h["default"].on(window,"mousemove",d),h["default"].on(window,"mouseup",g)}l||this.simulateEnterLeave(t,r,o,i,a),this.dispatch(t,r,o,i,a)}}},{key:"simulateEnterLeave",value:function(e,t,n,r,i){var o=this,a=void 0,s=void 0,u=function(t){for(t=t||0;o.enterStack.length>=t+1;)a=o.enterStack.pop(),o.dispatch(e,"mouseleave",a.ns,a.data,i)},h=function(e){for(var t=new y["default"],n=0;n<=e;n++){var r=s[n].getAttribute("ns");l["default"].startsWith(r,"root.")&&(r=r.substring(5)),t.append(r)}return t.toString(".")};if(n&&n!=this.rootNS&&"mouseover"==t){s=e.targetStack;for(var f=void 0,c=0;c<s.length;c++){if(c<this.enterStack.length){if(this.enterStack[c].target==s[c])continue;u(c)}f={data:r,ns:h(c),target:s[c]},this.enterStack.push(f),this.dispatch(e,"mouseenter",f.ns,r,i)}s.length<this.enterStack.length&&u(s.length)}n==this.rootNS&&this.enterStack.length>0&&u()}},{key:"dispatch",value:function(t,n,r,i,o){if(this.started){var a=r?n+"."+r:n;l["default"].forEach(this.listeners,function(s,u){e.match(a,s.regexp?s.regexp:u)&&l["default"].forEach(s,function(e){e.context?e.callback.apply(e.context,[n,r,i,o,t]):e.callback.apply(window,[n,r,i,o,t])})}),this.stopPropagation&&t.stopPropagation&&t.stopPropagation()}}},{key:"getPosition",value:function(t){var n=e.mouse(this.root,t);return l["default"].isNaN(n[0])||l["default"].isNaN(n[1])||(this.lastPosition=n),this.lastPosition}},{key:"registerKey",value:function(e,t,n,r){var i=this;if(l["default"].isArray(t))return void l["default"].forEach(t,function(t){i.registerKey(e,t,n,r)});if(t=c.getKeyData(t.ctrl,t.alt,t.shift,t.meta,t.code),t.length){t=new y["default"](e).append(t).toString(".");var o={callback:n,context:r};this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(o)}}},{key:"unregisterKey",value:function(e,t,n,r){var i=this;if(l["default"].isArray(t))return void l["default"].forEach(t,function(t){i.unregisterKey(e,t,n,r)});if(t=c.getKeyData(t.ctrl,t.alt,t.shift,t.meta,t.code),t.length){t=new y["default"](e).append(t).toString(".");var o=this.listeners[t],a=void 0;if(o)for(var s=0;s<o.length;s++)if(a=o[s],a.callback===n&&(!r||r===a.context))return void o.splice(s,1)}}},{key:"register",value:function(e,t,n,r){var i=this;if(l["default"].isArray(e))return void l["default"].forEach(e,function(e){i.register(e,t,n,r)});var o={callback:t,context:n,zIndex:r},a=null;e instanceof RegExp&&(a=e,e+=""),this.listeners[e]||(this.listeners[e]=[]),a&&!this.listeners[e].regexp&&(this.listeners[e].regexp=a),this.listeners[e].push(o)}},{key:"unregister",value:function(e,t,n){e instanceof RegExp&&(e+="");var r=this.listeners[e],i=void 0;if(r)for(var o=0;o<r.length;o++)if(i=r[o],i.callback===t&&(!n||n===i.context))return void r.splice(o,1)}},{key:"destroy",value:function(){this.stop(),delete this.root,delete this.listeners,delete this.enterStack}}],[{key:"match",value:function(e,t){return t instanceof RegExp?e.match(t):e==t}},{key:"mouse",value:function(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}]),e}();t["default"]=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(!e||!e instanceof KeyboardEvent)return null;var t=e.keyCode||e.which;return t>=16&&t<=18&&(t=null),o(e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,t)}function o(e,t,n,r,i){var o=new s["default"];return e&&o.append("CTRL"),t&&o.append("ALT"),n&&o.append("SHIFT"),r&&o.append("META"),i&&o.append(i),o.toString(".")}Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyEvent=i,t.getKeyData=o;var a=n(8),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=r(a),l=n(2),u=r(l),h=n(17),f=r(h),c=n(21),d=r(c),p=n(22),g=r(p),y={name:"Default",role:"node",draggable:!0,selectable:!0,editable:!0,resizable:!1,sourceable:!0,targetable:!0,visible:!0},v={name:"Default",role:"edge",selectable:!0,visible:!0,startMarker:null,endMarker:{id:"Default_EndMarker",type:"arrow",size:10,color:"#0ea117"},start:[0,0],end:[400,200]},m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s["default"].uniqueId("G"),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];i(this,e),this.id=t,this.nodes={},this.edges={},this.selection=null,this.destroyed=!1,u["default"].buildTypes(n.nodeTypes,"Nodes",y),u["default"].buildTypes(n.edgeTypes,"Edges",v),this.markers=[];var o=u["default"].type(d["default"].namespace),a=void 0,l=void 0;o.forEach(function(e){l=e.prototype.startMarker,l&&(a=g["default"].getMarker(l,!0),this.markers.push(a)),l=e.prototype.endMarker,l&&(a=g["default"].getMarker(l,!1),this.markers.push(a))},this),delete n.nodeTypes,delete n.edgeTypes,u["default"].initConfig(this,n),this.root=null,r&&this.loadModel(r)}return o(e,[{key:"addNode",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentRoot,r=arguments[2],i=e.getJSClass(t,f["default"]),o=new i(this,t);return n?e.addChild(n,o,r):(this.root=o,this.root.prop("role","root")),this.nodes[o.id]=o,o}},{key:"addEdge",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentRoot,r=arguments[2],i=arguments[3],o=e.getJSClass(t,d["default"]),a=new o(this,t,r,i);return e.addChild(n,a),this.edges[a.id]=a,a}},{key:"loadModel",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentRoot,r=e.nodes,i=e.edges;delete e.nodes,delete e.edges;var o=this.addNode(e,n);r&&s["default"].forEach(r,function(e){t.loadModel(e,o)}),i&&s["default"].forEach(i,function(e){var n=void 0,r=void 0;e.from&&(n=t.nodes[e.from]),e.to&&(r=t.nodes[e.to]),t.addEdge(e,o,n,r)})}},{key:"reset",value:function(){}},{key:"destroy",value:function(){}},{key:"currentRoot",get:function(){return this.root}}],[{key:"getJSClass",value:function(e,t){var n=null;if(e&&e.type){var r=u["default"].type(t.namespace,e.type);r&&(n=r.jsClass)}return u["default"].getConstructor(n,t)}},{key:"addChild",value:function(e,t){e.children||(e.children=[]),t.parent!=e&&(e.children.push(t),t.parent&&t.parent.children&&(t.parent.children=s["default"].without(t.parent.children,t))),t.parent=e}}]),e}();m.DEFAULTS={allowDanglingEdges:!0,multiConnect:!1,readOnly:!1,viewOnly:!1},t["default"]=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),u=r(l),h=n(8),f=r(h),c=n(18),d=r(c),p=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),n.id||(n.id=u["default"].uniqueId("N"));var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.inEdges=[],r.outEdges=[],r.ports=null,r.parent=null,r}return a(t,e),s(t,[{key:"isAncestor",value:function(e){for(var t=e.parent;t;){if(this==t)return!0;t=t.parent}return!1}},{key:"removeEdge",value:function(e){for(var t=e.source==this?this.outEdges:this.inEdges,n=0;n<t.length;n++)if(e==t[n]){t.splice(n,1);break}}},{key:"addInEdge",value:function(e,t){null==t||void 0===t?this.inEdges.push(e):this.inEdges.splice(t,0,e)}},{key:"addOutEdge",value:function(e,t){null==t||void 0===t||t>e.length-1?this.outEdges.push(e):this.outEdges.splice(t,0,e)}},{key:"renderChildren",value:function(e){if(this.children){var t=new f["default"];return u["default"].forEach(this.children,function(n){t.append(n.render(e))}),t.toString()}return""}},{key:"getPort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",n=arguments[2],r=arguments[3],i=this.getShape(e);return"auto"==t?i.getPerimeter(n,r):null}},{key:"toString",value:function(){var e=this.prop("label")?this.prop("label"):"undefined";return u["default"].isArray(e)&&(e=e[0]),"Node:{id:"+this.id+";label:"+e+";type:"+this.props.constructor.typeName+"}"}}]),t}(d["default"]);p.namespace="Nodes",t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=r(a),l=n(2),u=r(l),h=n(19),f=r(h),c=n(8),d=r(c),p=n(6),g=r(p),y=n(4),v=(r(y),n(20)),m=r(v),b=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:s["default"].uniqueId()};i(this,e),this.graph=t,this.id=n.id,delete n.id,n.decorators&&(this.createDecorators(n.decorators),delete n.decorators),n.views&&(this.viewProps=n.views,delete n.views);var r=n.type||"Default";if(r=u["default"].type(this.constructor.namespace,r),!r)throw new Error("Type not found "+n.type);delete n.type,this.props=new r(n)}return o(e,[{key:"prop",value:function(e,t){return s["default"].isUndefined(t)?this.props[e]:void(this.props[e]=t)}},{key:"viewProp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments[1],n=arguments[2];return s["default"].isUndefined(n)?"default"==e?this.prop(t,n):this.viewProps[e][t]:void("default"==e?this.prop(t,n):(this.viewProps[e]||(this.viewProps[e]={}),this.viewProps[e][t]=n))}},{key:"createDecorators",value:function(e){}},{key:"getView",value:function(e){var t=this.getShape(e);return s["default"].assign({id:this.id,key:e,className:this.computedClassName,style:this.viewProp(e,"style"),namespace:this.namespace},t)}},{key:"getShape",value:function(e){var t=f["default"].get(this.id+".shape",e);if(t)return t;var n=this.viewProp(e,"shape"),r=n?g["default"].getShape(n.name):g["default"].getShape("Rectangle"),i=this.viewProp(e,"x"),o=this.viewProp(e,"y"),a=this.viewProp(e,"width"),s=this.viewProp(e,"height");return t=new r(i,o,a,s,n),f["default"].set(this.id+".shape",t,e),t}},{key:"render",value:function(e){var t=f["default"].get(this.id+".template",e.id);if(!t){var n=this.prop("role");t=e.getTemplate("$"+n,null,this),s["default"].isString(t)&&(t=s["default"].template(t)),f["default"].set(this.id+".template",t,e.id)}return t(this.getView(e.id))}},{key:"renderShape",value:function(e){var t=this.getShape(e.id);return t?t.render(e):""}},{key:"renderLabel",value:function(e){if(this==this.graph.currentRoot)return null;var t=this.getLabelBox(e.id);return t?e.renderLabel(t):""}},{key:"getLabelBox",value:function(e){var t=f["default"].get(this.id+".labelBox",e);if(t)return t;var n=this.getShape(e);return t=m["default"].getLabelBox(this.prop("label"),this.viewProp(e,"labelConfig"),n.width,n.height),f["default"].set(this.id+".labelBox",t,e),t}},{key:"destroy",value:function(){delete this.graph,delete this.decorators,delete this.props,delete this.viewProps,this.destroyed=!0}},{key:"computedClassName",get:function(){if(!this._computedClassName){var e=new d["default"](this.prop("role")),t=this.props;for(t.hasOwnProperty("className")&&e.append(t.className),t=t.constructor.prototype;t;)t.hasOwnProperty("className")&&e.append(t.className),t=Object.getPrototypeOf(t);this._computedClassName=e.toString(" ")}return this._computedClassName}},{key:"namespace",get:function(){return this==this.graph.currentRoot?"":"root."+this.prop("role")}}]),e}();t["default"]=b},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={},r={get:function(e,t){return this.getCache(t)[e]},set:function(e,t,n){this.getCache(n)[e]=t},contains:function(e,t){return e in this.getCache(t)},remove:function(e,t){delete this.getCache(t)[e]},clear:function(e){namespace?n[namespace]&&(n[namespace]={}):n={}},getCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return n[e]||(n[e]={}),n[e]}};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=r(i),a=n(13),s=r(a),l=n(2),u=r(l),h=n(7),f=r(h),c=n(8),d=r(c),p=n(4),g=r(p),y=1,v=2,m=4,b=8,w={fontSize:11,fontFamily:"Arial",fontStyle:0,fontColor:"black",padding:0,linePadding:0,align:"left",width:0,height:0,rotation:null,geometry:{x:0,y:0,anchorY:0,offsetX:0,offsetY:0}};t["default"]=function(){function e(e,t,r,i){return n.call(this,e,t,{width:r,height:i})}function t(e,t,r){return n.call(this,e,t,r)}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];t=o["default"].defaultsDeep(t,w);var r=t.fontSize,i=t.fontFamily,a=t.fontStyle,s=(a&y)==y,l=t.padding,h=t.linePadding,f=t.align,c=t.width,d=t.height;n.width&&(c=c<=5?n.width*c:c,d=d<=5?n.height*d:d),c-=2*l,d-=2*l,c=Math.max(0,c),d=Math.max(0,d);var p=o["default"].clone(t.geometry),x=this.wrap(e,c,r,i,s);p.width=x.width+2*l,p.height=x.height+2*l+(x.length-1)*h;var _="start",k=0,E=!o["default"].has(p,"anchorX");switch(f){case"center":_="middle",E&&(p.anchorX=0);break;case"right":_="end",k=x.width/2,E&&(p.anchorX=-.5);break;case"left":k=-x.width/2,E&&(p.anchorX=.5)}var P=void 0;P=n.getRelativePosition?n.getRelativePosition(p):u["default"].getRelativePosition({width:n.width,height:n.height},p);var S=new g["default"](P[0],P[1],p.width,p.height),M="center"==f?[0,0]:"left"==f?[-x.width/2,0]:[x.width/2,0];p.width=Math.max(c+2*l,p.width),p.height=Math.max(d+2*l,p.height),P=n.getRelativePosition?n.getRelativePosition(p):u["default"].getRelativePosition({width:n.width,height:n.height},p);var O=new g["default"](P[0],P[1],p.width,p.height);return{config:t,label:x,_label:e,bold:s,underline:a&m,italic:a&v,shadow:a&b,dx:k,dy:-p.height/2+l+x.lineHeight-x.baseline,anchor:_,lineHeight:x.lineHeight+h,pivot:M,bounds:S,maxBounds:O}}function r(e,t){return e.renderLabel(t)}var i=null,a=void 0,l=void 0,h=o["default"].memoize(function(e,t,n,r){if(t=t||11,n=n||"Arial,Helvetica",r=!o["default"].isUndefined(r)&&r,!i){i=f["default"].createElement("iframe",{id:"_ComputeStylesIframe"},{position:"absolute",visibility:"hidden",width:"auto"}),document.body.appendChild(i);var s=i.contentWindow.document;s.open(),s.write('<html><body>\t\t\t\t\t<div id="baselineDiv" style="height:100px;"><span style="line-height:0">T</span><span style="height:100%;display:inline-block;"></span></div>\t\t\t\t\t<div id="measureDiv" style="position:absolute;width:auto;height:auto;padding:0;white-space:nowrap;display:inline-block;"></div>\t\t\t\t\t</body></html>'),s.close(),a=s.getElementById("measureDiv"),l=s.getElementById("baselineDiv")}l.style.fontSize=a.style.fontSize=t,l.style.fontFamily=a.style.fontFamily=n,l.style.fontWeight=a.style.fontWeight=r?"bold":"normal",a.innerHTML=e;var u=l.firstChild,h=u.offsetTop+u.offsetHeight-l.offsetHeight-l.offsetTop;return{width:a.offsetWidth,height:a.offsetHeight,baseline:h}},function(e,t,n,r){return e+";"+t+";"+n+";"+r}),c=o["default"].memoize(function(e,t,n,r,i){t=t||0,n=n||11,r=r||"Arial,Helvetica",i=!o["default"].isUndefined(i)&&i;var a=[],s=h("&nbsp;",n,r,i),l=s.width;if(a.lineHeight=s.height,a.baseline=s.baseline,!t||!e||""==e)return a.push(e),a.width=e&&""!=e?h(e,n,r,i).width:l,a.height=a.lineHeight,a;for(var u=0,f=e.split("\n"),c=new d["default"],p=0;p<f.length;p++){for(var g=f[p].split(/\s/),y="",v=0,m=0,b=!0,w=void 0,x=0;x<g.length;x++)w=g[x],m=h(w,n,r,i).width,(b?m:v+l+m)>t?(b?(c.append(w),u=Math.max(u,m),x<g.length-1&&(a.push(c.toString()),c.clear())):(a.push(c.append(y).toString()),u=Math.max(u,v+l+m),c.clear()),y="",v=0,b||x--,b=!0):(y=b?w:y+" "+w,v=b?m:v+l+m,u=Math.max(u,v),b=!1);""!=y&&c.append(y),p<f.length-1&&(a.push(c.toString()),c.clear())}return a.push(c.toString()),a.width=u,a.height=a.lineHeight*a.length,a},function(e,t,n,r,i){return e+";"+t+";"+n+";"+r+";"+i}),p={start:function(e,t,n,r,i){var o=this,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(this.input){if(this.key==e)return;this.stop()}var u=l?"input":"textarea";this.input=f["default"].createElement(u,{id:"inlineEditor",unselectable:"off"},{position:"absolute",overflow:"hidden",padding:"0px",margin:"0px",border:"transparent"}),l&&s["default"].on(this.input,"keydown keyup",function(e){13==e.keyCode&&(s["default"].off(o.input,"keydown keyup"),o.stop())}),t.appendChild(this.input),this.key=e,this.box=n,this.refEl=r,this.textEl=i;var h=n.config,c=new g["default"](n.maxBounds.x,n.maxBounds.y,n.maxBounds.width*a,n.maxBounds.height*a),d=f["default"].getCenterPosition(r,t);d=[d[0]+c.left,d[1]+c.top],i&&(i.style.visibility="hidden"),f["default"].setElement(this.input,null,{visibility:"visible",left:d[0]+"px",top:d[1]+"px",width:c.width+"px",height:c.height+"px","font-family":h.fontFamily,"font-size":h.fontSize*a+"px","font-weight":(h.fontStyle&y)==y?"bold":"normal"}),this.input.value=n._label,this.input.focus(),this.input.select(),s["default"].fire(this,"editor.start",[this.key])},stop:function(e){this.input&&(e=e||!1,this.textEl&&(this.textEl.style.visibility=null),this.input.parentNode.removeChild(this.input),e||s["default"].fire(this,"editor.update",[this.key,this.input.value]),s["default"].fire(this,"editor.stop",[this.key]),delete this.input,delete this.key,delete this.box,delete this.refEl,delete this.textEl);
}};return{FONT_BOLD:y,FONT_ITALIC:v,FONT_UNDERLINE:m,FONT_SHADOW:b,getStringSize:h,wrap:c,getLabelBox:e,getLabelBoxForLink:t,render:r,editor:p}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function _(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:_(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},u=n(5),h=r(u),f=n(18),c=r(f),d=n(4),p=r(d),g=n(12),y=r(g),v=n(20),m=r(v),b=n(19),w=r(b),x=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],a=arguments[3];i(this,t),n.id||(n.id=h["default"].uniqueId("E"));var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.source=s.target=null,s.setSource(r,n.sourcePos),s.setTarget(a,n.targetPos),s}return a(t,e),s(t,[{key:"setSource",value:function(e,t){this.setTerminal(e,t,"source")}},{key:"setTarget",value:function(e,t){this.setTerminal(e,t,"target")}},{key:"setTerminal",value:function(e,t,n){var r="source"==n?this.source:this.target;r==e?e&&e.setEdgeAt(this,t):(r&&r.removeEdge(this),e&&("source"==n?e.addOutEdge(this,t):e.addInEdge(this,t)),"source"==n?this.source=e:this.target=e)}},{key:"getLabelBox",value:function(e){var t=this.prop("label");return t?m["default"].getLabelBoxForLink(t,this.viewProp(e,"labelConfig"),this.getShape(e)):null}},{key:"getReferencePoints",value:function(e){var t=[];return this.source?t.push(this.source.getShape(e).center):t.push(this.viewProp(e,"start")),this.target?t.push(this.target.getShape(e).center):t.push(this.viewProp(e,"end")),t}},{key:"getTerminalVisual",value:function(e,t){var n=this.getReferencePoints(e),r=[],i=function(e){return new p["default"](e.x,e.y,3,3)};return this.source?r.push(this.source.getPort(e,this.prop("sourcePort"),n[1],t)):r.push({point:n[0],direction:p["default"].getDirection(i(n[0]),n[1],!0)}),this.target?r.push(this.target.getPort(e,this.prop("targetPort"),n[0],t)):r.push({point:n[1],direction:p["default"].getDirection(i(n[1]),n[0],!0)}),r}},{key:"getShape",value:function(e){var t=w["default"].get(this.id+".shape",e);if(t)return t;var n=this.viewProp(e,"shape");return t=y["default"].getLink(this.getTerminalVisual(e,n.orthogonal),n,this.prop("startMarker"),this.prop("endMarker")),w["default"].set(this.id+".shape",t,e),t}},{key:"toString",value:function(){return"Edge:{"+(this.source?this.source.id:"null")+"--"+(this.target?this.target.id:"null")+"}"}},{key:"destroy",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.setSource(null),this.setTarget(null)}}]),t}(c["default"]);x.namespace="Edges",t["default"]=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=r(i),a={},s=function(){function e(e,t,n){var r=t?-1:1,i={viewBox:new o["default"]((-5),(-5),10,10),size:e,ref:[4*r,0],fill:n.color};return i.shape={name:"Polygon",points:[[-2*r,0],[-4*r,4],[4*r,0],[-4*r,-4]]},i}function t(e,t,n){var r=t?-1:1,i={viewBox:new o["default"]((-5),(-5),10,10),size:e,ref:[4*r,0],fill:n.color};return i.shape={name:"Polygon",points:[[-5*r,-5],[-5*r,5],[4*r,0]]},i}function n(e,t,n){var r=e/2,i={viewBox:new o["default"]((-r),(-r),e,e),size:e,ref:[0,0],fill:n.color};return i.shape='<ellipse cx="0" cy="0" rx="'+r+'" ry="'+r+'"></ellipse>',i}function r(e,t,n){var r=t?-1:1,i={viewBox:new o["default"]((-5),(-5),10,10),size:e,ref:[4*r,0],fill:n.color};return i.shape={name:"Polygon",points:[[-4,0],[0,4],[4,0],[0,-4]]},i}function i(e,t){var n=a[e.type],r=n(e.size,t,e);return r.id=e.id,r}return a.arrow=e,a.triangle=t,a.oval=n,a.diamond=r,{registry:a,getMarker:i}}();t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=r(a),l=n(2),u=r(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),t.hasOwnProperty("orientation")&&s["default"].isString(t.orientation)&&("HORIZONTAL"==t.orientation.toUpperCase()?t.orientation=e.HORIZONTAL:delete t.orientation),u["default"].initConfig(this,t)}return o(e,[{key:"layout",value:function(e,t){}},{key:"reset",value:function(){}},{key:"destroy",value:function(){}}]),e}();h.VERTICAL=0,h.HORIZONTAL=1,h.DEFAULTS={orientation:h.VERTICAL},t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(23),u=r(l),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"layout",value:function(e,t){var n;if(n=e?_.isArray(e)?e:e.getLinkedNodes("target"):this.owner.childNodes,n&&0!=n.length){for(var r,i=0,o=0,a=0,s=0,l=0,u=0;u<n.length;u++)r=n[u],i>0&&i+this.hgap+r.getProperty("width")>t.width&&(o+=a+this.vgap,i=0,a=0,s=0,l++),r._flPos=[s,l],r.moveTo([t.x+i,t.y+o]),i+=this.hgap+r.getProperty("width"),s++,a=a<r.getProperty("height")?r.getProperty("height"):a;this.trigger(new Rectangle(t.x,t.y,t.width,o+a))}}}]),t}(u["default"]);h.DEFAULTS={hgap:10,vgap:10},t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=r(a),l=n(13),u=r(l),h=n(2),f=r(h),c=n(7),d=r(c),p=n(23),g=r(p),y=n(4),v=r(y),m=n(14),b=r(m),w=n(26),x=r(w),_=n(28),k=r(_),E=n(20),P=r(E),S=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(i(this,e),this.id=t,this.box=d["default"].createElement("div",{id:this.id,tabindex:0,ns:"graph"},{overflow:"hidden",width:"100%",height:"100%",position:"relative"}),n.appendChild(this.box),r.layout){var a=f["default"].getConstructor(r.layout.jsClass,g["default"]);this.layout=new a(r.layout.config),delete r.layout}this.clear=!0,this._translate=[0,0],this._scale=1,this.graph=o,this.dispatcher=null,this.graphBehavior=null,this.selectionBehavior=null,this.nodeBehavior=null,this.edgeBehavior=null,this.connectionBehavior=null,f["default"].initConfig(this,r),u["default"].on(P["default"].editor,"editor.update.*",s["default"].bind(function(e,t){console.log(e+"="+t)},this))}return o(e,[{key:"viewport",value:function(e,t){if((s["default"].isUndefined(e)||s["default"].isNull(e))&&(e=!1),!t){var n=new v["default"](0,0,this.box.offsetWidth,this.box.offsetHeight);return e?f["default"].scale(this.translate,this.scale,n):n}e||(t=f["default"].scale(this.translate,this.scale,t));var r=this.box.offsetWidth,i=r/t.width;this.transform(-t.x*i,-t.y*i,i)}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.graph,i=r?r.currentRoot:null;if(s["default"].isNull(e)||(this._translate[0]=e,i&&i.viewProp(this.id,"x",e)),s["default"].isNull(t)||(this._translate[1]=t,i&&i.viewProp(this.id,"y",t)),!s["default"].isNull(n)){this._scale=n,i&&i.viewProp(this.id,"scale",n);var o=this.dispatcher.scale;o!=n&&(this.dispatcher.scale=n)}this.refresh()}},{key:"render",value:function(){return!!this._graph&&(this.layout&&this.layout.layout(this._graph.currentRoot,this.viewport()),this.initializeBehaviors(),!0)}},{key:"renderLabel",value:function(e){return this.constructor.renderLabel(e)}},{key:"renderLink",value:function(e){return this.constructor.renderLink(e)}},{key:"renderMarkers",value:function(e){return this.constructor.renderMarkers(e)}},{key:"initializeBehaviors",value:function(){if(!this.dispatcher){this.dispatcher=new b["default"](this.box,[this.prop("minZoom"),this.prop("maxZoom")]);var e=void 0;this.prop("graphBehavior")&&(e=f["default"].getConstructor(this.prop("graphBehavior")),this.graphBehavior=new e(this)),this.prop("selectionBehavior")&&(e=f["default"].getConstructor(this.prop("selectionBehavior")),this.selectionBehavior=new e(this)),this.dispatcher.register("mouseup.node.label",function(e,t,n,r,i){var o=this,a=this._graph.nodes[n.getAttribute("id")];this.dispatcher.dragging||a._firstSelection||(P["default"]._delayEdit=s["default"].delay(function(){P["default"]._delayEdit&&(delete P["default"]._delayEdit,P["default"].editor.start(a.id,o.box,a.getLabelBox(o.id),n,i.nsTarget,o.scale))},250))},this),this.dispatcher.register([/^mousedown/,/^zoom/],function(e,t,n,r,i){d["default"].eventFromInput(i)||P["default"].editor.stop()},this)}this.dispatcher.start()}},{key:"refresh",value:function(){}},{key:"getTemplate",value:function(e,t,n){var r=this.constructor.TEMPLATES[e];if(r&&s["default"].isFunction(r)&&(r=r(t)),n){var i=r.match(/(#{[^#]*})/g),o={};for(var a in i)a=i[a],a=a.substring(2,a.length-1).trim(),o[a]=n[s["default"].camelCase("render "+a)](this);r=s["default"].template(r,{interpolate:/#{([\s\S]+?)}/g})(o)}return r}},{key:"reset",value:function(){}},{key:"destroy",value:function(){delete this._graph,delete this.layout,this.dispatcher&&(this.dispatcher.stop(),delete this.dispatcher),this.box.innerHTML=""}},{key:"graph",get:function(){return this._graph},set:function(e){this._graph=e;var t=e.currentRoot;t&&(this._translate=[t.viewProp(this.id,"x")||0,t.viewProp(this.id,"y")||0],this._scale=t.viewProp(this.id,"scale")||1)}},{key:"translate",get:function(){return this._translate},set:function(e){this.transform(e[0],e[1])}},{key:"scale",get:function(){return this._scale},set:function(e){switch(e){case"in":e=this.scale*this.prop("zoomFactor");break;case"out":e=this.scale/this.prop("zoomFactor");break;case"actual":e=1;break;case"fit":var t=2*this.prop("gridSize"),n=this.getBounds(),r=this.viewport();r.width-=t,r.height-=t,e=Math.min(r.width/n.width,r.height/n.height,1);break;default:s["default"].isString(e)&&(e=parseFloat(e))}this.transform(null,null,e)}}]),e}();S.DEFAULTS={defaultClickMode:"pan",hideOutline:!1,singleSelect:!0,draggable:!0,gridEnabled:!1,guidesEnabled:!0,gridSize:30,maxZoom:4,minZoom:.2,zoomFactor:1.2,maskOpacity:.5,graphBehavior:x["default"],selectionBehavior:k["default"]},t["default"]=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(27),u=r(l),h=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.dispatcher;return r.register(/^drag.*\.graph$/,n.handleDrag,n),r.register(/^zoom/,n.handleZoom,n),n.offset=null,n}return a(t,e),s(t,[{key:"handleZoom",value:function(e,t,n,r,i){this.renderer.transform(null,null,i.scale)}},{key:"handleDrag",value:function(e,t,n,r,i){if("dragstart"==e){var o="pan"==this.renderer.prop("defaultClickMode")^(i.ctrlKey||i.shiftKey);if(!o)return;var a=this.renderer.translate;return void(this.offset=[a[0]-r[0],a[1]-r[1]])}this.offset&&(this.renderer.transform(r[0]+this.offset[0],r[1]+this.offset[1]),"dragend"==e&&delete this.offset)}}]),t}(u["default"]);t["default"]=h},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.renderer=t}return r(e,[{key:"destroy",value:function(){delete this.renderer}}]),e}();t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function y(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:y(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},u=n(4),h=r(u),f=n(18),c=r(f),d=n(27),p=r(d),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.dispatcher;return r.register("mousedown.*",n.selectCell,n),r.register("mouseup.*",n.unselectCell,n),r.register("drag*.graph",n.handleMultiSelect,n),n.selectedNodes=null,n.selectedLinks=null,n.attachedLinks=null,n}return a(t,e),s(t,[{key:"updateSelections",value:function(){this.selectedNodes&&this.selectedNodes.classed("selected",!1),this.selectedLinks&&this.selectedLinks.classed("selected",!1),this.selectedNodes=null,this.selectedLinks=null,this.attachedLinks=null,this.graph.selectedVertices&&this.graph.selectedVertices.length>0&&(this.selectedNodes=this.graph.renderer.getShapes(this.graph.selectedVertices),this.attachedLinks=this.graph.renderer.getShapes(this.graph.getAttachedEdges()),this.selectedNodes.classed("selected",!0)),this.graph.selectedEdges&&this.graph.selectedEdges.length>0&&(this.selectedLinks=this.graph.renderer.getShapes(this.graph.selectedEdges),this.selectedLinks.classed("selected",!0))}},{key:"selectCell",value:function(e,t,n,r,i){var o=n==this.graph?null:n;if(!o||o instanceof c["default"]){var a=i.ctrlKey||i.shiftKey;o&&o instanceof c["default"]&&(this.graph.isSelected(o)?o._firstSelection=!0:delete o._firstSelection,d3.select(i.dataTarget).moveToFront(),this.graph.setSelection(o,a))}}},{key:"unselectCell",value:function(e,t,n,r,i){var o=n==this.graph?null:n;if(!o||o instanceof c["default"]){var a=i.ctrlKey||i.shiftKey;o||this.graph.setSelection(o,a)}}},{key:"handleMultiSelect",value:function(e,t,n,r,i){if(r=util.scale(this.graph,r),"dragstart"==e){var o="select"==this.graph.getProperty("defaultClickMode")^(i.ctrlKey||i.shiftKey);if(!o)return;return void(this.startPt=new Point(r[0],r[1]))}if(this.startPt){var a=h["default"].getBoundingRectangle([new Point(r[0],r[1]),this.startPt]),s=this.graph.renderer;if(this.rubberband||(this.rubberband=d3.select(s.appendNode(s.getCellLayer(),{template:_.template('<g><rect x="0" y="0" width="100" height="100" stroke="#000000" fill="none" stroke-dasharray="3 3"/></g>')},!1))),"dragend"==e){var l=this.graph.getCurrentRoot().children;return l=_.filter(l,function(e){var t=e.getBounds();return!!a.contains(t)}),this.graph.setSelection(l,i.ctrlKey),this.rubberband.remove(),delete this.startPt,void delete this.rubberband}this.rubberband.select("rect").attr({x:a.x,y:a.y,width:a.width,height:a.height})}}},{key:"destroy",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),delete this.selectedNodes,delete this.selectedLinks,delete this.attachedLinks}}]),t}(p["default"]);t["default"]=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function _(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:_(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},u=n(5),h=r(u),f=n(1),c=r(f),d=n(7),p=r(d),g=n(25),y=r(g),v=n(8),m=r(v),b="http://www.w3.org/2000/svg";if("undefined"!=typeof SVGElement){var w=document.createElementNS(b,"svg");w.innerHTML="<circle/>","[object SVGCircleElement]"!==w.firstChild&&Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:!1,configurable:!0,get:function(){var e,t;return t=document.createElement("div"),e=this.cloneNode(!0),t.appendChild(e),t.innerHTML}},innerHTML:{enumerable:!1,configurable:!0,get:function(){var e=this.outerHTML,t=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i"),n=new RegExp("</"+this.nodeName+">$","i");return e.replace(t,"").replace(n,"")},set:function(e){for(var t=void 0;t=this.lastChild;)this.removeChild(t);var n=new m["default"];n.append("<svg>").append(e).append("</svg");for(var r=p["default"].createElement("div",null,null,n.toString()).firstElementChild;r.firstChild;)this.appendChild(r.firstChild)}}}),SVGElement.prototype.toDataURL=function(e){function t(){var t=a.outerHTML,r=n(t);return s(e+" length: "+r.length),o.callback&&o.callback(r),r}function n(e){var t="data:image/svg+xml;base64,";return window.btoa?(s("using window.btoa for base64 encoding"),t+=btoa(e)):(s("using custom base64 encoder"),t+=c["default"].encode(e)),t}function r(e){var t=document.createElement("canvas"),r=t.getContext("2d"),i=new Image,l=a.outerHTML;i.src=n(l),i.onload=function(){s("exported image size: "+[i.width,i.height]),t.width=i.width,t.height=i.height,r.drawImage(i,0,0);var n=t.toDataURL(e);s(e+" length: "+n.length),o.callback?o.callback(n):s("WARNING: no callback set, so nothing happens.")},i.onerror=function(){s("Can't export! Maybe your browser doesn't support SVG in img element or SVG input for Canvas drawImage?\nhttp://en.wikipedia.org/wiki/SVG#Native_support")}}function i(e){if(!canvg)return null;var t=p["default"].createElement("canvas",null,{display:"none"});if(document.body.appendChild(t),"javascript"==e){var n=new jsCanvas("jscanvastest");n.canvas.style.display="none"}if(o.keepOutsideViewport){var r=o.padding||0,i=1,l=[0,0],u=a.getBBox();s("detected svg dimensions "+[u.x,u.y,u.width,u.height]);var h=a.firstElementChild.getAttribute("transform");h&&(s("detected svg transform "+h),h=x.transform(h),l=h.translate,i=h.scale);var f=new m["default"];if(f.append('<svg width="').append(u.width+2*r).append('px" height="').append(u.height+2*r).append('px"><g transform="translate(').append(-u.x+l[0]+r).append(",").append(-u.y+l[1]+r).append(")scale(").append(i).append(')">').append(a.firstElementChild.innerHTML).append("</g></svg>"),"javascript"==e)return void n.compile(f.toString(),function(){o.callback&&o.callback(n.toString())});canvg(t,f.toString())}else canvg(t,a.outerHTML);var c=t.toDataURL(e);return o.callback&&o.callback(c),t.parentNode.removeChild(t),c}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this,s=function(e){};switch(1==o.debug&&"undefined"!=typeof console&&(s=function(e){console.log("SVG.toDataURL:",e)}),e||(e="image/svg+xml"),o.keepNonSafe&&s("NOTE: keepNonSafe is NOT supported and will be ignored!"),o.keepOutsideViewport&&s("NOTE: keepOutsideViewport is only supported with canvg exporter."),e){case"image/svg+xml":return t();case"image/png":case"image/jpeg":case"javascript":switch(o.renderer||(window.canvg?o.renderer="canvg":o.renderer="native"),o.renderer){case"canvg":return s("using canvg renderer for "+e+" image export"),i(e);case"native":return s("using native renderer for "+e+" export. THIS MIGHT FAIL."),r(e);default:s("unknown image renderer given, doing noting ("+o.renderer+")")}break;default:s("Sorry! Exporting as '"+e+"' is not supported!")}return null}}var x=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this);if(e){var n=this.graph.currentRoot,r=new m["default"]('<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">'),i=this.translate;r.append('<g transform="translate(').append(i[0]).append(",").append(i[1]).append(")scale(").append(this.scale).append(')">'),r.append(this.renderDefs()),r.append(n.render(this)),r.append("</g></svg>"),this.box.innerHTML=r.toString(),this.svg=this.box.firstElementChild}}},{key:"renderDefs",value:function(){var e=new m["default"]("<defs>");e.append(this.getTemplate("Grid",this.prop("gridSize")));var n=this.graph.markers;return n.length>0&&e.append(t.renderMarkers(n)),e.append("</defs>"),e.toString()}},{key:"refresh",value:function(){if(this.svg){var e=this.svg.querySelector("g"),t=this.translate;e.setAttribute("transform","translate("+t[0]+","+t[1]+")scale("+this.scale+")")}}}],[{key:"renderMarkers",value:function(e){var t=new m["default"],n=void 0,r=void 0;return e.forEach(function(e){n=this.TEMPLATES.Marker(e),r=e.shape,h["default"].isString(r)||(r=this.renderShape(r)),n=n.replace(/\#\{shape\}/,r),t.append(n)},this),t.toString()}},{key:"renderLabel",value:function(e){return this.TEMPLATES.Label(e)}},{key:"renderShape",value:function(e){var t=this.TEMPLATES[e.name];return h["default"].isString(t)&&(t=h["default"].template(t)),t(e)}},{key:"getPathData",value:function(e){var t=e.points,n=e.controlPts;if(!t||0==t.length)return"";if(!n&&e.round){var r=[];n=[];var i=t[0],o=void 0,a=void 0,s=void 0,l=void 0;r.push(i);for(var u=1;u<t.length-1;u++)o=t[u],n[2*u]=[o,o],a=i.distance(o),s=o.distance(t[u+1]),l=Math.min(e.round,a/2,s/2),r.push(o.getDirection(i).scale(l).translate(o)),r.push(o.getDirection(t[u+1]).scale(l).translate(o)),i=o;r.push(t[t.length-1]),t=r}for(var h=new m["default"]("M"),f=void 0,c=0;c<t.length;c++)if(f=t[c],0==c)h.append(f);else if(n&&n[c]){h.append(" C ");for(var d=0;d<n[c].length;d++)h.append(n[c][d]).append(" ");h.append(f)}else h.append(" L ").append(f);return h.toString()}},{key:"renderLink",value:function(e){var n=new m["default"],r=t.getPathData(e);return e.showGauge&&n.append('<path style="stroke: white; stroke-width: 9; visibility: hidden; pointer-events: stroke;" d="').append(r).append('"/>'),n.append('<path d="').append(r).append('"'),(e.startMarker||e.endMarker)&&(n.append(' style="'),e.startMarker&&n.append("marker-start: url(#").append(h["default"].isString(e.startMarker)?e.startMarker:e.startMarker.id).append(");"),e.endMarker&&n.append("marker-end: url(#").append(h["default"].isString(e.endMarker)?e.endMarker:e.endMarker.id).append(");"),n.append('"')),n.append("/>"),n.toString()}},{key:"appendContent",value:function(e,t){var n=new m["default"];n.append("<svg>").append(t).append("</svg");for(var r=p["default"].createElement("div",null,null,n.toString()).firstElementChild;r.firstChild;)e.appendChild(r.firstChild);return e}},{key:"transform",value:function(e){var t=[0,0],n=1,r=e.match(/translate\(\s*([^)]+)/);if(r){var i=r[1].trim().match(/([\d.-]+)[ ,]([\d.-]+)/);i?(t[0]=parseFloat(i[1])||0,t[1]=parseFloat(i[2])||0):t[0]=t[1]=parseFloat(r[1])}return r=e.match(/scale\(\s*([^)]+)/),r&&(n=parseFloat(r[1])||1),{translate:t,scale:n}}}]),t}(y["default"]);x.TEMPLATES={$root:'<g id="${id}" class="${className}">#{children}</g>',$node:'<g id="${id}" class="${className}" style="${style}" ns="${namespace}" transform="translate(${x},${y})">#{shape}#{label}</g>',$edge:'<g id="${id}" class="${className}" style="${style}" ns="${namespace}">#{shape}#{label}</g>',Ellipse:'<ellipse cx="0" cy="0" rx="${width/2}" ry="${height/2}"/>',Rectangle:'<rect x="${-width/2}" y="${-height/2}" width="${width}" height="${height}" rx="9" ry="9"/>',Triangle:'<polygon points="${-width/2},${-height/2} ${width/2},${-height/2} 0,${height/2}"/>',Rhombus:'<polygon points="0,${-height/2} ${width/2},0 0,${height/2} ${-width/2},0"/>',Hexagon:function(e){var t="north"==e.direction||"south"==e.direction;return t?'<polygon points="0,${-height/2} ${width/2},${-height/4} ${width/2},${height/4} 0,${height/2} ${-width/2},${height/4} ${-width/2},${-height/4}"/>':'<polygon points="${-width/2},0 ${width/4},${-height/2} ${width/4},${-height/2} ${width/2},0 ${width/4},${height/2} ${-width/4},${height/2}"/>'},Polygon:function(e){var t=new m["default"]('<polygon points="');return e.points.forEach(function(e){t.append(e[0]).append(",").append(e[1]).append(" ")}),t.removeLast(),t.append('"/>'),t.toString()},Image:function(e){return'<image x="${-width/2}" y="${-height/2}" width="${width}" height="${height}" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+e.image+'"/>'},Marker:function(e){return('\n<marker id="'+e.id+'" markerWidth="'+e.size+'" markerHeight="'+e.size+'" refx="'+e.ref[0]+'" \nrefy="'+e.ref[1]+'" orient="auto" viewbox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'"\nmarkerUnits="userSpaceOnUse" '+(e.fill?'style="stroke: '+e.fill+";fill:"+e.fill+'"':"")+">#{shape}</marker>\n").trim()},Grid:function(e){return('\n<pattern id="GridPattern" width="'+e+'" height="'+e+'" patternUnits="userSpaceOnUse">\n\t<ellipse cx="0" cy="0" rx="1" ry="1" fill="#999999"/>\n\t<ellipse cx="0" cy="'+e+'" rx="1" ry="1" fill="#999999"/>\n\t<ellipse cx="'+e+'" cy="0" rx="1" ry="1" fill="#999999"/>\n\t<ellipse cx="'+e+'" cy="'+e+'" rx="1" ry="1" fill="#999999"/>\n</pattern>').trim()},Label:h["default"].template('\n<% var box = _.has(data, "dx") ? data : (data.getLabelBox ? data.getLabelBox() : null); \n   if (box) {%>\n\t<g <% if (box.config && box.config.class) {%>class="<%=box.config.class%>"<%}%>\t\t<% if (box.config && box.config.ns) {%>ns="<%=box.config.ns%>"<%}%>\t\t<% if (box.config && box.config.inlineStyle) {%>\t\t\tfont-size="<%=box.config.fontSize%>"\t\t\tfont-family="<%=box.config.fontFamily%>"\t\t\tfont-weight="<% if (box.bold) {%>bold<%} else {%>normal<%}%>"\t\t\t<% if (box.underline) {%>text-decoration="underline"<%}%>\t\t\t<% if (box.italic) {%>font-style="italic"<%}%>\t\t<%}%>\t\ttext-anchor="<%=box.anchor%>"\t\ttransform="translate(<%=box.bounds.x%>,<%=box.bounds.y%>)<% if (box.config && box.config.rotation) {%>rotate(<%=box.config.rotation%> <%=box.pivot[0]%> <%=box.pivot[1]%>)<%}%>">\n\t<% if (box.config.backgroundStyle) {%>\n\t\t<rect x="<%=-box.bounds.width/2%>" y="<%=-box.bounds.height/2%>" width="<%=box.bounds.width%>" height="<%=box.bounds.height%>" style="<%=box.config.backgroundStyle%>"/>\n\t<% } if (_.isArray(box.label)) { \n\t\t_.each(box.label, function(value, line) {%>\n\t\t\t<text <% if (box.config && box.config.textStyle) {%>style="<%=box.config.textStyle%>"<%}%>\t\t\t\tdx="<%=box.dx%>" dy="<%=box.dy + box.lineHeight * line%>"><%=value%></text>\n\t\t<%});} else { %>\n\t\t\t<text><%=box.label%></text>\n\t\t<%}%>\n\t\t<% if (box.config.title) {%>\n\t\t\t<title><%=box.config.title%></title>\n\t\t<%}%>\n\t</g>\n<%}%>\n'.trim(),{variable:"data"})},t["default"]=x}])});
//# sourceMappingURL=qgraph.min.js.map
