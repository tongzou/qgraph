/*!
 * 
 * 	qgraph - A Graph Manipulation and Visualization Library
 * 	Author: Tong Zou
 * 	Version: v0.0.5
 * 	Url: https://github.com/tongzou/qgraph
 * 	License(s): MIT
 * 
 */
(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],e):"object"==typeof exports?exports.qgraph=e(require("lodash")):t.qgraph=e(t._)})(this,function(__WEBPACK_EXTERNAL_MODULE_5__){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=r(i),a=n(2),u=r(a),s=n(7),l=r(s),f=n(8),h=r(f),c=n(3),d=r(c),p=n(9),g=r(p),y=n(6),v=r(y),b=n(4),m=r(b),w=n(10),x=r(w),k=n(11),_=r(k),P=n(12),E=r(P),S=n(14),T=r(S),M=n(16),O=r(M),C=n(15),j=r(C),R=n(19),L=r(R),N=n(21),D=r(N),I=n(22),B=r(I),A=n(18),$=r(A),F=n(20),U=r(F),z=n(23),H=r(z),K=n(26),X=r(K),q=n(24),W=r(q);v["default"].addShape("Rectangle",m["default"]),v["default"].addShape("Ellipse",x["default"]),e["default"]={Events:o["default"],Cache:u["default"],Utils:u["default"],DomUtils:l["default"],StringBuffer:h["default"],Point:d["default"],Line:g["default"],Shape:v["default"],Rectangle:m["default"],Ellipse:x["default"],Link:_["default"],EventDispatcher:E["default"],Label:$["default"],Marker:U["default"],Graph:T["default"],Cell:O["default"],Node:j["default"],Edge:L["default"],Layout:D["default"],FlowLayout:B["default"],Renderer:H["default"],SVGRenderer:X["default"],GraphBehavior:W["default"]}},function(t,e,n){var r,i;/*!
	  * Bean - copyright (c) Jacob Thornton 2011-2012
	  * https://github.com/fat/bean
	  * MIT license
	  */
(function(o,a,u){"undefined"!=typeof t&&t.exports?t.exports=u():(r=u,i="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==i&&(t.exports=i)))})("bean",this,function(t,e){t=t||"bean",e=e||this;var n,r=window,i=e[t],o=/[^\.]*(?=\..*)\.|.*/,a=/\..*/,u="addEventListener",s="removeEventListener",l=document||{},f=l.documentElement||{},h=f[u],c=h?u:"attachEvent",d={},p=Array.prototype.slice,g=function(t,e){return t.split(e||" ")},y=function(t){return"string"==typeof t},v=function(t){return"function"==typeof t},b="click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll ",m="show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinput readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ",w=function(t,e,n){for(n=0;n<e.length;n++)e[n]&&(t[e[n]]=1);return t}({},g(b+(h?m:""))),x=function(){var t="compareDocumentPosition"in f?function(t,e){return e.compareDocumentPosition&&16===(16&e.compareDocumentPosition(t))}:"contains"in f?function(t,e){return e=9===e.nodeType||e===window?f:e,e!==t&&e.contains(t)}:function(t,e){for(;t=t.parentNode;)if(t===e)return 1;return 0},e=function(e){var n=e.relatedTarget;return n?n!==this&&"xul"!==n.prefix&&!/document/.test(this.toString())&&!t(n,this):null==n};return{mouseenter:{base:"mouseover",condition:e},mouseleave:{base:"mouseout",condition:e},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),k=function(){var t=g("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),e=t.concat(g("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),n=e.concat(g("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),i=t.concat(g("char charCode key keyCode keyIdentifier keyLocation location")),o=t.concat(g("data")),a=t.concat(g("touches targetTouches changedTouches scale rotation")),u=t.concat(g("data origin source")),s=t.concat(g("state")),h=/over|out/,c=[{reg:/key/i,fix:function(t,e){return e.keyCode=t.keyCode||t.which,i}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(t,n,r){return n.rightClick=3===t.which||2===t.button,n.pos={x:0,y:0},t.pageX||t.pageY?(n.clientX=t.pageX,n.clientY=t.pageY):(t.clientX||t.clientY)&&(n.clientX=t.clientX+l.body.scrollLeft+f.scrollLeft,n.clientY=t.clientY+l.body.scrollTop+f.scrollTop),h.test(r)&&(n.relatedTarget=t.relatedTarget||t[("mouseover"==r?"from":"to")+"Element"]),e}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return n}},{reg:/^text/i,fix:function(){return o}},{reg:/^touch|^gesture/i,fix:function(){return a}},{reg:/^message$/i,fix:function(){return u}},{reg:/^popstate$/i,fix:function(){return s}},{reg:/.*/,fix:function(){return t}}],d={},p=function(t,e,n){if(arguments.length&&(t=t||((e.ownerDocument||e.document||e).parentWindow||r).event,this.originalEvent=t,this.isNative=n,this.isBean=!0,t)){var i,o,a,u,s,l=t.type,f=t.target||t.srcElement;if(this.target=f&&3===f.nodeType?f.parentNode:f,n){if(s=d[l],!s)for(i=0,o=c.length;i<o;i++)if(c[i].reg.test(l)){d[l]=s=c[i].fix;break}for(u=s(t,this,l),i=u.length;i--;)!((a=u[i])in this)&&a in t&&(this[a]=t[a])}}};return p.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},p.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},p.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},p.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},p.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},p.prototype.clone=function(t){var e=new p(this,this.element,this.isNative);return e.currentTarget=t,e},p}(),_=function(t,e){return h||e||t!==l&&t!==r?t:f},P=function(){var t=function(t,e,n,r){var i=function(n,i){return e.apply(t,r?p.call(i,n?0:1).concat(r):i)},o=function(n,r){return e.__beanDel?e.__beanDel.ft(n.target,t):r},a=n?function(t){var e=o(t,this);if(n.apply(e,arguments))return t&&(t.currentTarget=e),i(t,arguments)}:function(t){return e.__beanDel&&(t=t.clone(o(t))),i(t,arguments)};return a.__beanDel=e.__beanDel,a},e=function(e,n,r,i,o,a,u){var s,l=x[n];"unload"==n&&(r=O(C,e,n,r,i)),l&&(l.condition&&(r=t(e,r,l.condition,a)),n=l.base||n),this.isNative=s=w[n]&&!!e[c],this.customType=!h&&!s&&n,this.element=e,this.type=n,this.original=i,this.namespaces=o,this.eventType=h||s?n:"propertychange",this.target=_(e,s),this[c]=!!this.target[c],this.root=u,this.handler=t(e,r,null,a)};return e.prototype.inNamespaces=function(t){var e,n,r=0;if(!t)return!0;if(!this.namespaces)return!1;for(e=t.length;e--;)for(n=this.namespaces.length;n--;)t[e]==this.namespaces[n]&&r++;return t.length===r},e.prototype.matches=function(t,e,n){return!(this.element!==t||e&&this.original!==e||n&&this.handler!==n)},e}(),E=function(){var t={},e=function(n,r,i,o,a,u){var s=a?"r":"$";if(r&&"*"!=r){var l,f=0,h=t[s+r],c="*"==n;if(!h)return;for(l=h.length;f<l;f++)if((c||h[f].matches(n,i,o))&&!u(h[f],h,f,r))return}else for(var d in t)d.charAt(0)==s&&e(n,d.substr(1),i,o,a,u)},n=function(e,n,r,i){var o,a=t[(i?"r":"$")+n];if(a)for(o=a.length;o--;)if(!a[o].root&&a[o].matches(e,r,null))return!0;return!1},r=function(t,n,r,i){var o=[];return e(t,n,r,null,i,function(t){return o.push(t)}),o},i=function(e){var n=!e.root&&!this.has(e.element,e.type,null,!1),r=(e.root?"r":"$")+e.type;return(t[r]||(t[r]=[])).push(e),n},o=function(n){e(n.element,n.type,null,n.handler,n.root,function(e,n,r){return n.splice(r,1),e.removed=!0,0===n.length&&delete t[(e.root?"r":"$")+e.type],!1})},a=function(){var e,n=[];for(e in t)"$"==e.charAt(0)&&(n=n.concat(t[e]));return n};return{has:n,get:r,put:i,del:o,entries:a}}(),S=function(t){n=arguments.length?t:l.querySelectorAll?function(t,e){return e.querySelectorAll(t)}:function(){throw new Error("Bean: No selector engine installed")}},T=function(t,e){if(h||!e||!t||t.propertyName=="_on"+e){var n=E.get(this,e||t.type,null,!1),r=n.length,i=0;for(t=new k(t,this,(!0)),e&&(t.type=e);i<r&&!t.isImmediatePropagationStopped();i++)n[i].removed||n[i].handler.call(this,t)}},M=h?function(t,e,n){t[n?u:s](e,T,!1)}:function(t,e,n,r){var i;n?(E.put(i=new P(t,r||e,function(e){T.call(t,e,r)},T,null,null,(!0))),r&&null==t["_on"+r]&&(t["_on"+r]=0),i.target.attachEvent("on"+i.eventType,i.handler)):(i=E.get(t,r||e,T,!0)[0],i&&(i.target.detachEvent("on"+i.eventType,i.handler),E.del(i)))},O=function(t,e,n,r,i){return function(){r.apply(this,arguments),t(e,n,i)}},C=function(t,e,n,r){var i,o,u=e&&e.replace(a,""),s=E.get(t,u,null,!1),l={};for(i=0,o=s.length;i<o;i++)n&&s[i].original!==n||!s[i].inNamespaces(r)||(E.del(s[i]),!l[s[i].eventType]&&s[i][c]&&(l[s[i].eventType]={t:s[i].eventType,c:s[i].type}));for(i in l)E.has(t,l[i].t,null,!1)||M(t,l[i].t,!1,l[i].c)},j=function(t,e){var r=function(e,r){for(var i,o=y(t)?n(t,r):t;e&&e!==r;e=e.parentNode)for(i=o.length;i--;)if(o[i]===e)return e},i=function(t){var n=r(t.target,this);n&&e.apply(n,arguments)};return i.__beanDel={ft:r,selector:t},i},R=h?function(t,e,n){var i=l.createEvent(t?"HTMLEvents":"UIEvents");i[t?"initEvent":"initUIEvent"](e,!0,!0,r,1),n.dispatchEvent(i)}:function(t,e,n){n=_(n,t),t?n.fireEvent("on"+e,l.createEventObject()):n["_on"+e]++},L=function(t,e,n){var r,i,u,s,l=y(e);if(l&&e.indexOf(" ")>0){for(e=g(e),s=e.length;s--;)L(t,e[s],n);return t}if(i=l&&e.replace(a,""),i&&x[i]&&(i=x[i].base),!e||l)(u=l&&e.replace(o,""))&&(u=g(u,".")),C(t,i,n,u);else if(v(e))C(t,null,e);else for(r in e)e.hasOwnProperty(r)&&L(t,r,e[r]);return t},N=function(t,e,r,i){var u,s,l,f,h,y,b;{if(void 0!==r||"object"!=typeof e){for(v(r)?(h=p.call(arguments,3),i=u=r):(u=i,h=p.call(arguments,4),i=j(r,u,n)),l=g(e),this===d&&(i=O(L,t,e,i,u)),f=l.length;f--;)b=E.put(y=new P(t,l[f].replace(a,""),i,u,g(l[f].replace(o,""),"."),h,(!1))),y[c]&&b&&M(t,y.eventType,!0,y.customType);return t}for(s in e)e.hasOwnProperty(s)&&N.call(this,t,s,e[s])}},D=function(t,e,n,r){return N.apply(null,y(n)?[t,n,e,r].concat(arguments.length>3?p.call(arguments,5):[]):p.call(arguments))},I=function(){return N.apply(d,arguments)},B=function(t,e,n){var r,i,u,s,l,f=g(e);for(r=f.length;r--;)if(e=f[r].replace(a,""),(s=f[r].replace(o,""))&&(s=g(s,".")),s||n||!t[c])for(l=E.get(t,e,null,!1),n=[!1].concat(n),i=0,u=l.length;i<u;i++)l[i].inNamespaces(s)&&l[i].handler.apply(t,n);else R(w[e],e,t);return t},A=function(t,e,n){for(var r,i,o=E.get(e,n,null,!1),a=o.length,u=0;u<a;u++)o[u].original&&(r=[t,o[u].type],(i=o[u].handler.__beanDel)&&r.push(i.selector),r.push(o[u].original),N.apply(null,r));return t},$={on:N,add:D,one:I,off:L,remove:L,clone:A,fire:B,Event:k,setSelectorEngine:S,noConflict:function(){return e[t]=i,this}};if(r.attachEvent){var F=function(){var t,e=E.entries();for(t in e)e[t].type&&"unload"!==e[t].type&&L(e[t].element,e[t].type);r.detachEvent("onunload",F),r.CollectGarbage&&r.CollectGarbage()};r.attachEvent("onunload",F)}return S(),$})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var _Point=__webpack_require__(3),_Point2=_interopRequireDefault(_Point),_Rectangle=__webpack_require__(4),_Rectangle2=_interopRequireDefault(_Rectangle),_debugging=[],_debugAll=!1,typeRegistry={},splice=Array.splice;exports["default"]={type:function(t,e,n){return typeRegistry[t]||(typeRegistry[t]=new Map),e?n?void typeRegistry[t].set(e,n):typeRegistry[t].get(e):typeRegistry[t]},createType:function(t,e,n){var r=e.name,i=this.type(t,r);if(!i){var o=e["extends"]?this.type(t,e["extends"]):null;!o&&n&&(o=n),i=o?function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),e}(o):function a(t){_classCallCheck(this,a),_.assign(this,t)},delete e.name,delete e["extends"],_.assign(i.prototype,e),i.typeName=r,this.type(t,r,i),this.log("Utils","Utils.createType - "+t+"."+r)}return i},buildTypes:function(t,e,n){var r=this;if(this.log("Utils","Utils.buildTypes - "+e),!t&&n)return this.createType(e,n),void this.log("Utils","Utils.buildTypes end");if(n){var i=_.remove(t,{name:n.name});i=i.length>0?i[0]:null,n=i?this.createType(e,_.assign({},n,i)):this.createType(e,n)}_.forEach(t,function(t){r.createType(e,t,n)}),this.log("Utils","Utils.buildTypes end")},extend:function(t,e,n,r){_.extend(t,e,r);var i=function(){this.constructor=t};return i.prototype=e.prototype,t.prototype=new i,n&&_.extend(t.prototype,n),t.superclass=e.prototype,t},initConfig:function(t,e){for(var n={},r=t.constructor,i=[r];r;)r["super"]?(r=r["super"].constructor,splice.apply(i,[0,0,r])):r=null;for(var o=0;o<i.length;o++)r=i[o],r.DEFAULTS&&_.assign(n,r.DEFAULTS);t.props=_.assign(n,e),r.prototype.prop=function(t,e){return e?void(this.props[t]=e):this.props[t]}},getConstructor:function getConstructor(jsClass,defaultClass){return jsClass||(jsClass=defaultClass),_.isString(jsClass)&&(jsClass=eval(jsClass)),jsClass},debug:function(t){t?_debugging.push(t):_debugAll=!0},log:function(t,e){if(window.console){var n=_debugAll;if(!_debugAll){n=!1;for(var r=0;r<_debugging.length;r++)_debugging[r]==t&&(n=!0)}if(n){for(;t.length<10;)t+=" ";t=t.substring(0,10)+" - ",console.info(t,e)}}},getRelativePosition:function(t,e){var n=Math.abs(e.x)<=1?t.width*e.x:e.x,r=Math.abs(e.y)<=1?t.height*e.y:e.y;return this.offsetPosition([n,r],e)},offsetPosition:function(t,e){return[t[0]+e.width*e.anchorX+e.offsetX,t[1]+e.height*e.anchorY+e.offsetY]},unscale:function(t,e,n){return n instanceof _Rectangle2["default"]?new _Rectangle2["default"](n.x*e+t[0],n.y*e+t[1],n.width*e,n.height*e):n instanceof _Point2["default"]?new _Point2["default"](n.x*e+t[0],n.y*e+t[1]):[n[0]*e+t[0],n[1]*e+t[1]]},scale:function(t,e,n){return n instanceof _Rectangle2["default"]?new _Rectangle2["default"]((n.x-t[0])/e,(n.y-t[1])/e,n.width/e,n.height/e):n instanceof _Point2["default"]?new _Point2["default"]((n.x-t[0])/e,(n.y-t[1])/e):[(n[0]-t[0])/e,(n[1]-t[1])/e]},getProperty:function(t,e){return t?_.has(t,e)?t[e]:t.prop&&_.isFunction(t.prop)?t.prop(e):null:null}}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,r){n(this,t),this.x=e,this.y=r}return r(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"distance",value:function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))}},{key:"translate",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this}},{key:"getScaled",value:function(e){return new t(this.x*e,this.y*e)}},{key:"getTranslated",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"getDirection",value:function(e){var n=this.distance(e);return new t((e.x-this.x)/n,(e.y-this.y)/n)}},{key:"rotate",value:function(t){var e=Math.cos(t*Math.PI/180),n=Math.sin(t*Math.PI/180),r=this.x,i=this.y;return this.x=r*e-i*n,this.y=r*n+i*e,this}},{key:"getRotated",value:function(t){return this.clone().rotate(t)}},{key:"dotProduct",value:function(t){return this.x*t.x+this.y*t.y}},{key:"getMidPoint",value:function(e){return new t((this.x+e.x)/2,(this.y+e.y)/2)}},{key:"reverse",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"equals",value:function(e){return!(!e||e.constructor!=t)&&(this.x==e.x&&this.y==e.y)}},{key:"reflect",value:function(t,e){return e?this.x=2*t.x-this.x:this.y=2*t.y-this.y,this}},{key:"toString",value:function(){return this.x+","+this.y}}]),t}();i.W=new i((-1),0),i.N=new i(0,(-1)),i.S=new i(0,1),i.E=new i(1,0),i.NE=new i(1,(-1)),i.NW=new i((-1),(-1)),i.SE=new i(1,1),i.SW=new i((-1),1),e["default"]=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(5),l=r(s),f=n(3),h=r(f),c=n(6),d=r(c),p=function(t){function e(){return i(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),u(e,[{key:"contains",value:function(t){var e=t.width||0,n=t.height||0,r=t.x-e/2,i=t.x+e/2,o=t.y-n/2,a=t.y+n/2;return i<=this.right&&r>=this.left&&o>=this.top&&a<=this.bottom}},{key:"distance",value:function(t){return this.contains(t)?0:t.x<this.left?t.y<this.top?t.distance(new h["default"](this.left,this.top)):t.y<=this.bottom?this.left-t.x:t.distance(new h["default"](this.left,this.bottom)):t.x<=this.right?t.y<=this.top?this.top-t.y:t.y-this.bottom:t.y<this.top?t.distance(new h["default"](this.right,this.top)):t.y<=this.bottom?t.x-this.right:t.distance(new h["default"](this.right,this.bottom))}},{key:"detectIntersection",value:function(t,e){var n=t.y==e.y,r=this.contains(t),i=this.contains(e);if(r&&i)return 4;if(!r&&!i){if(n&&t.y>=this.top&&t.y<=this.bottom){if(t.x<this.left&&e.x>this.right)return 0;if(t.x>this.right&&e.x<this.left)return 2}if(!n&&t.x>=this.left&&t.x<=this.right){if(t.y<this.top&&e.y>this.bottom)return 1;if(t.y>this.bottom&&e.y<this.top)return 3}return-1}var o=r?e:t;return n?o.x>this.right?2:0:o.y<this.top?1:3}},{key:"toString",value:function(){return"Rectangle:{x="+this.x+";y="+this.y+";width="+this.width+";height="+this.height+"}"}}],[{key:"getPerimeter",value:function(t,n){var r=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],i=t.x,o=t.y,a=n.x-i,u=n.y-o,s=Math.atan2(u,a),l=new h["default"](0,0),f=Math.PI,c=Math.PI/2,d=c-s,p=Math.atan2(t.height,t.width);s<-f+p||s>f-p?(l.x=t.left,l.y=o-t.width*Math.tan(s)/2):s<-p?(l.y=t.top,l.x=i-t.height*Math.tan(d)/2):s<p?(l.x=t.right,l.y=o+t.width*Math.tan(s)/2):(l.y=t.bottom,l.x=i+t.height*Math.tan(d)/2),r&&(s<-f+p||s>f-p?(l.x=t.left,l.y=o):s<-p?(l.y=t.top,l.x=i):s<p?(l.x=t.right,l.y=o):(l.y=t.bottom,l.x=i));var g=e.getDirection(t,l,r);return{point:l,direction:g}}},{key:"getBoundingRectangle",value:function(t,n){if(!t||0==t.length)return null;n=n||[0,0,0,0],l["default"].isArray(n)||(n=[n,n,n,n]);for(var r=[t[0].x,t[0].y],i=[t[0].x,t[0].y],o=1;o<t.length;o++){var a=t[o];a.x<r[0]&&(r[0]=a.x),a.y<r[1]&&(r[1]=a.y),a.x>i[0]&&(i[0]=a.x),a.y>i[1]&&(i[1]=a.y)}r[0]=r[0]-n[0],r[1]=r[1]-n[1],i[0]=i[0]+n[2],i[1]=i[1]+n[3];var u=Math.abs(i[0]-r[0]),s=Math.abs(i[1]-r[1]);return new e(r[0]+u/2,r[1]+s/2,u,s)}},{key:"union",value:function(t){var n=null,r=null,i=-(1/0),o=-(1/0);return l["default"].each(t,function(t){n=n||t.x,r=r||t.y,n=Math.min(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.right()),o=Math.max(o,t.bottom())}),n=n||0,r=r||0,new e(n,r,i-n,o-r)}},{key:"getDirection",value:function(t,e){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if(!n)return new h["default"](t.x,t.y).getDirection(new h["default"](e.x,e.y));var r=void 0,i=Math.abs(t.left-e.x),o=h["default"].W;return r=Math.abs(t.top-e.y),r<=i&&(i=r,o=h["default"].N),r=Math.abs(t.bottom-e.y),r<=i&&(i=r,o=h["default"].S),r=Math.abs(t.right-e.x),r<i&&(o=h["default"].E),o}}]),e}(d["default"]);e["default"]=p},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE_5__},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(5),u=r(a),s=n(3),l=r(s),f=n(4),h=r(f),c={},d=function(){function t(e,n,r,o,a){i(this,t),this.x=e,this.y=n,this.width=r,this.height=o,u["default"].defaults(this,a,{x:0,y:0,width:0,height:0})}return o(t,[{key:"contains",value:function(t){return!1}},{key:"getRegularPoints",value:function(t){return null}},{key:"getPerimeter",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return this.constructor.getPerimeter(this,t,e)}},{key:"render",value:function(t){var e=u["default"].template(t.getTemplate(this.name,this));return e(this)}},{key:"top",get:function(){return this.y-this.height/2}},{key:"bottom",get:function(){return this.y+this.height/2}},{key:"left",get:function(){return this.x-this.width/2}},{key:"right",get:function(){return this.x+this.width/2}},{key:"center",get:function(){return new l["default"](this.x,this.y)}},{key:"bounds",get:function(){return new h["default"](this.x,this.y,this.width,this.height)}}],[{key:"getShape",value:function(t){return c[t]}},{key:"addShape",value:function(t,e){c[t]=e}},{key:"removeShape",value:function(t){delete c[t]}}]),t}();e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=r(i);e["default"]={isIE:function(){if(!window||!window.navigator||!navigator)return!1;var t=window.navigator.userAgent,e=t.indexOf("MSIE");return e>0?parseInt(t.substring(e+5,t.indexOf(".",e))):!!navigator.userAgent.match(/Trident\/7\./)&&11}(),isFireFox:function(){return"undefined"!=typeof InstallTrigger}(),createElement:function(t,e,n,r){var i=document.createElement(t);return this.setElement(i,e,n),r&&(i.innerHTML=r),i},createElementByString:function(t){var e=this.createElement("div",null,null,t);return e.childNodes},setElement:function(t,e,n){e&&o["default"].forEach(e,function(e,n){t.setAttribute(n,e)}),n&&o["default"].forEach(n,function(e,n){t.style[n]=e})},testElement:function(t,e){return t&&1==t.nodeType&&(!e||e(t))},getAncestorBy:function(t,e){for(;t=t.parentNode;)if(this.testElement(t,e))return t;return null},getPosition:function(t,e){e||(e=document.body);var n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return[n.left-r.left,n.top-r.top]},getCenterPosition:function(t,e){e||(e=document.body);var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.right-n.left,o=n.bottom-n.top;return[n.left-r.left+i/2,n.top-r.top+o/2]},move:function(t,e,n){e&&(t.style.left=e+"px"),n&&(t.style.top=n+"px")},getSize:function(t){var e=parseInt(t.style.offsetWidth,10),n=parseInt(t.style.offsetHeight,10);return[e,n]},resize:function(t,e,n){e&&(t.style.width=e+"px"),n&&(t.style.height=n+"px")},preloadImages:function(t){this.preloadImages.list||(this.preloadImages.list=[]),this.preloadImages.loaded||(this.preloadImages.loaded={});for(var e,n=this.preloadImages.list,r=this,i=0;i<t.length;i++)e=new Image,e.onload=function(){var t=n.indexOf(this);t!==-1&&(r.preloadImages.loaded[this.name]={width:this.width,height:this.height},n.splice(t,1))},n.push(e),e.src=t[i],e.name=t[i]},getImageInfo:function(t){return this.preloadImages.loaded?this.preloadImages.loaded[t]:null},eventFromInput:function(t){var e=t.target.tagName;return"INPUT"==e||"TEXTAREA"==e||"SELECT"==e}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(5),u=r(a),s=function(){function t(e){i(this,t),this.buffer=[],e&&this.buffer.push(e)}return o(t,[{key:"append",value:function(t){return u["default"].isString(t)?this.buffer.push(t):u["default"].isArray(t)?this.buffer=this.buffer.concat(t):this.buffer.push(""+t),this}},{key:"prepend",value:function(t){return u["default"].isString(t)?this.buffer.splice(0,0,t):u["default"].isArray(t)?this.buffer=t.concat(this.buffer):this.buffer.splice(0,0,""+t),this}},{key:"clear",value:function(){this.buffer=[]}},{key:"removeLast",value:function(){return this.buffer.pop(),this}},{key:"toString",value:function(t){return t||(t=""),this.buffer.join(t)}}]),t}();e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),u=r(a),s=function(){function t(e,n){i(this,t),this.start=e,this.end=n}return o(t,[{key:"length",value:function(){return this.start.distance(this.end)}},{key:"distance",value:function(t){var e=this.start.distance(t);if(0==e)return 0;var n=this.length(),r=new u["default"]((this.end.x-this.start.x)/n,(this.end.y-this.start.y)/n).dotProduct(new u["default"](t.x/e,t.y/e));return e*Math.sqrt(1-r*r)}},{key:"toString",value:function(){return"Line:{start="+this.start+";end="+this.end+"}"}}],[{key:"intersection",value:function(t,e,n,r,i,o,a,s){var l=(s-o)*(n-t)-(a-i)*(r-e),f=(a-i)*(e-o)-(s-o)*(t-i),h=(n-t)*(e-o)-(r-e)*(t-i),c=f/l,d=h/l;if(c>=0&&c<=1&&d>=0&&d<=1){var p=t+c*(n-t),g=e+c*(r-e);return new u["default"](p,g)}return null}}]),t}();e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(6),l=r(s),f=n(3),h=r(f),c=n(4),d=r(c),p=function(t){function e(){return i(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),u(e,[{key:"toString",value:function(){return"Ellipse:{x="+this.x+";y="+this.y+";width="+this.width+";height="+this.height+"}"}}],[{key:"getPerimeter",value:function(t,e){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],r=t.width/2,i=t.height/2,o=t.x,a=t.y,u=e.x,s=e.y,l=parseInt(u-o),f=parseInt(s-a);if(0==l&&0!=f)return new h["default"](o,a+i*f/Math.abs(f));if(0==l&&0==f)return new h["default"](u,s);var c=f/l,p=a-c*o,g=r*r*c*c+i*i,y=-2*o*g,v=r*r*c*c*o*o+i*i*o*o-r*r*i*i,b=Math.sqrt(y*y-4*g*v),m=(-y+b)/(2*g),w=(-y-b)/(2*g),x=c*m+p,k=c*w+p,_=Math.sqrt(Math.pow(m-u,2)+Math.pow(x-s,2)),P=Math.sqrt(Math.pow(w-u,2)+Math.pow(k-s,2)),E=0,S=0;_<P?(E=m,S=x):(E=w,S=k);var T=new h["default"](E,S),M=d["default"].getDirection(t,T,n);if(n){if(M.x==-1)return{point:new h["default"](o-r,a),direction:M};if(1==M.x)return{point:new h["default"](o+r,a),direction:M};if(M.y==-1)return{point:new h["default"](o,a-i),direction:M};if(1==M.y)return{point:new h["default"](o,a+i),direction:M}}return{point:T,direction:M}}}]),e}(l["default"]);e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(5),l=r(s),f=n(3),h=r(f),c=n(2),d=r(c),p={type:"direct",showGauge:!0,orthogonal:!1},g={width:0,height:0,anchorX:0,anchorY:0,offsetX:0,offsetY:0},y={},v=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],i=arguments.length<=3||void 0===arguments[3]?null:arguments[3];a(this,t),this.start=e[0].point,this.end=e[1].point,this.startNormal=e[0].direction,this.endNormal=e[1].direction,this.startMarker=r,this.endMarker=i,l["default"].assign(this,n)}return u(t,[{key:"render",value:function(t){return t.renderLink(this)}},{key:"getRelativePosition",value:function(t){l["default"].isNumber(t)&&(t={x:t}),t=l["default"].defaults(t,g);var e=t.x,n=this.length;Math.abs(e)<=1&&(e*=n),e<0&&(e=n+e),e>n&&(e=n);for(var r=this.points,i=void 0,o=void 0,a=void 0,u=0;u<r.length-1;u++){if(i=r[u].distance(r[u+1]),e<=i){o=r[u].clone(),a=o.getDirection(r[u+1]),o.translate(a.getScaled(e));break}e-=i}return o||(o=r[r.length-1]),d["default"].offsetPosition([o.x,o.y],t)}},{key:"toString",value:function(){return"Link"}},{key:"points",get:function(){return null}},{key:"controlPts",get:function(){return null}},{key:"length",get:function(){var t=this.points,e=void 0,n=0;for(e=0;e<t.length-1;e++)n+=t[e].distance(t[e+1]);return n}}],[{key:"getLink",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=arguments.length<=3||void 0===arguments[3]?null:arguments[3];e=l["default"].defaultsDeep(e,p);var i=y[e.type];return i?new i(t,e,n,r):(console.log("link type not supported: "+e.type),null)}}]),t}(),b=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,t),u(e,[{key:"points",get:function(){return[this.start,this.end]}}]),e}(v),m=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,t),u(e,[{key:"getRelativePosition",value:function(t){l["default"].isNumber(t)&&(t={x:t}),t=l["default"].defaults(t,g);var e=t.x,n=this.length;Math.abs(e)>1&&(e/=n),e<0&&e++,e>1&&e--;var r=this.points,i=this.controlPts,o=r[0],a=i[1][0],u=i[1][1],s=r[1],f=[(1-e)*(1-e)*(1-e)*o.x+3*e*(1-e)*(1-e)*a.x+3*e*e*(1-e)*u.x+e*e*e*s.x,(1-e)*(1-e)*(1-e)*o.y+3*e*(1-e)*(1-e)*a.y+3*e*e*(1-e)*u.y+e*e*e*s.y];return d["default"].offsetPosition([f.x,f.y],t)}},{key:"points",get:function(){return[this.start,this.end]}},{key:"controlPts",get:function(){var t=this.points[0],e=this.points[1],n=[];return n[0]=null,n[1]=[],0==this.startNormal.x?n[1][0]=new h["default"](t.x,(t.y+e.y)/2):n[1][0]=new h["default"]((t.x+e.x)/2,t.y),0==this.endNormal.x?n[1][1]=new h["default"](e.x,(t.y+e.y)/2):n[1][1]=new h["default"]((t.x+e.x)/2,e.y),n}}]),e}(v),w=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,t),u(e,[{key:"points",get:function(){var t=Port.getBounds(edge,!0),e=Port.getBounds(edge,!1),n=e.right()<t.x,r=t.right()<e.x,i=[],o=n?t.x:t.x+t.width,a=t.getCenterY();i.push(new h["default"](o,a));var u=r?e.x:e.x+e.width,s=e.getCenterY(),l=this.segment,f=n?-l:l,c=new h["default"](o+f,a);
f=r?-l:l;var d=new h["default"](u+f,s);if(n==r){var p=n?Math.min(o,u)-l:Math.max(o,u)+l;i.push(new h["default"](p,a)),i.push(new h["default"](p,s))}else if(c.x<d.x==n){var g=a+(s-a)/2;i.push(c),i.push(new h["default"](c.x,g)),i.push(new h["default"](d.x,g)),i.push(d)}else i.push(c),i.push(d);return i.push(new h["default"](u,s)),i}}]),e}(v),x=function(t){function e(t,n,r,o){return a(this,e),n=l["default"].defaults(n,{MIN_BUFFER:10,autoRoute:!1,maxChannelWidth:100}),i(this,Object.getPrototypeOf(e).call(this,t,n,r,o))}return o(e,t),u(e,[{key:"autoRoute",value:function(t,e,n,r,i){var o,a,u,s,l,f,c,d,p,g,y,v=0;s=n[i],p=t[t.length-2],o=p.y<s.y?1:p.y>s.y+s.height?3:p.x<s.x?0:2,c=_getChannel(e,i,n,o),y=c.horizontal?(c.right-c.left)/2:(c.bottom-c.top)/2;for(var b=0;b<t.length-1;b++)if((t[b+1].x!=t[b].x||t[b+1].y!=t[b].y)&&(l=_getFirstIntersection(t,b,n,r,i))){switch(f=l[0],o=l[1],s=n[f],c=_getChannel(e,f,n,o),o){case 0:case 2:p=new h["default"]((c.right+c.left)/2,t[b].y),g=_getRouteTendency(t,b,p,s,o),a=g<0?1:3,d=_getChannel(e,f,n,a),u=b>1&&t[b-2].y==t[b-1].y&&t[b-1].y>d.top&&t[b-1].y<d.bottom?t[b-1].y-p.y:b<t.length-3&&t[b+2].y==t[b+3].y&&t[b+2].y>d.top&&t[b+2].y<d.bottom?t[b+2].y-p.y:(d.bottom+d.top)/2-p.y,0==o&&p.x<=t[b].x||2==o&&p.x>=t[b].x?p=null:b>0&&(_hasIntersection([new h["default"](t[b].x,t[b].y),new h["default"](t[b].x,t[b].y+u),new h["default"](p.x,p.y+u)],n)||(p=null));break;case 1:case 3:p=new h["default"](t[b].x,(c.bottom+c.top)/2),g=_getRouteTendency(t,b,p,s,o),a=g<0?0:2,d=_getChannel(e,f,n,a),u=b>1&&t[b-2].x==t[b-1].x&&t[b-1].x>d.left&&t[b-1].x<d.right?t[b-1].x-p.x:b<t.length-3&&t[b+2].x==t[b+3].x&&t[b+2].x>d.left&&t[b+2].x<d.right?t[b+2].x-p.x:(d.right+d.left)/2-p.x,1==o&&p.y<=t[b].y||3==o&&p.y>=t[b].y?p=null:b>0&&(_hasIntersection([new h["default"](t[b].x,t[b].y),new h["default"](t[b].x+u,t[b].y),new h["default"](p.x+u,p.y)],n)||(p=null));break;case 4:continue}if(b>20)return;!p||p.x==t[b].x&&p.y==t[b].y?_moveSegment(t,b,u,v,y):(t.splice(b+1,0,p),_moveSegment(t,b+1,u,v,y),b++)}}},{key:"_hasIntersection",value:function(t,e){for(var n=0;n<t.length-1;n++)for(var r=0;r<e.length;r++)if(e[r].detectIntersection(t[n],t[n+1])>=0)return!0;return!1}},{key:"_getFirstIntersection",value:function(t,e,n,r,i){for(var o,a,u=null,s=null,l=0;l<n.length;l++)0==e&&l==r||e==t.length-2&&l==i||(o=n[l],a=o.detectIntersection(t[e],t[e+1]),a>=0&&(null==u?(u=l,s=a):n[u].distance(t[e])>o.distance(t[e])&&(u=l,s=a)));return null!=u?[u,s]:null}},{key:"_getRouteTendency",value:function(t,e,n,r,i){var o,a;switch(i){case 0:case 2:a="y";break;case 1:case 3:a="x"}return o=_getRouteDirection(n,t[t.length-1])[a],0==o&&(o=-_getRouteDirection(t[0],t[t.length-1])[a],0==o&&(o=n[a]<r.getCenter()[a]?-1:1)),o}},{key:"_getRouteDirection",value:function(t,e){return t.x==e.x?t.y<e.y?h["default"].S:h["default"].N:t.y==e.y?t.x<e.x?h["default"].E:h["default"].W:t.x<e.x?t.y<e.y?h["default"].SE:h["default"].NE:t.y<e.y?h["default"].SW:h["default"].NW}},{key:"_getChannel",value:function(t,e,n,r){var i,o,a,u,s,l,f,h=this.maxChannelWidth,c=n[e],d={};switch(r){case 0:for(o=c.getLeft(),d.right=o.x,d.horizontal=!1,a=0;a<n.length;a++)a!=e&&(f=n[a].getRight().x,f>=o.x||(!d.left||d.left<f)&&(d.left=f));for(d.left||(d.left=t.getLeft().x,d.right-d.left>h&&(d.left=d.right-h)),a=0;a<n.length;a++)a!=e&&(i=n[a],l=i.getBottom().y,s=i.getTop().y,l<o.y&&i.getRight()>d.left&&i.getLeft()<d.right&&(!d.top||d.top<l)&&(d.top=l),s>o.y&&i.getRight()>d.left&&i.getLeft()<d.right&&(!d.bottom||d.bottom>s)&&(d.bottom=s));d.top||(d.top=t.getTop().y),d.bottom||(d.bottom=t.getBottom().y);break;case 1:for(o=c.getTop(),d.horizontal=!0,d.bottom=o.y,a=0;a<n.length;a++)a!=e&&(l=n[a].getBottom().y,l>=o.y||(!d.top||d.top<l)&&(d.top=l));for(d.top||(d.top=t.getTop().y,d.bottom-d.top>h&&(d.top=d.bottom-h)),a=0;a<n.length;a++)a!=e&&(i=n[a],u=i.getLeft().x,f=i.getRight().x,f<o.x&&i.getBottom()>d.top&&i.getTop()<d.bottom&&(!d.left||d.left<f)&&(d.left=f),u>o.x&&i.getBottom()>d.top&&i.getTop()<d.bottom&&(!d.right||d.right>u)&&(d.right=u));d.left||(d.left=t.getLeft().x),d.right||(d.right=t.getRight().x);break;case 2:for(o=c.getRight(),d.horizontal=!1,d.left=o.x,a=0;a<n.length;a++)a!=e&&(u=n[a].getLeft().x,u<=o.x||(!d.right||d.right>u)&&(d.right=u));for(d.right||(d.right=t.getRight().x,d.right-d.left>h&&(d.right=d.left+h)),a=0;a<n.length;a++)a!=e&&(i=n[a],l=i.getBottom().y,s=i.getTop().y,l<o.y&&i.getRight()>d.left&&i.getLeft()<d.right&&(!d.top||d.top<l)&&(d.top=l),s>o.y&&i.getRight()>d.left&&i.getLeft()<d.right&&(!d.bottom||d.bottom>s)&&(d.bottom=s));d.top||(d.top=t.getTop().y),d.bottom||(d.bottom=t.getBottom().y);break;case 3:for(o=c.getBottom(),d.horizontal=!0,d.top=o.y,a=0;a<n.length;a++)a!=e&&(i=n[a],i.getTop().y<=o.y||(!d.bottom||d.bottom>i.getTop().y)&&(d.bottom=i.getTop().y));for(d.bottom||(d.bottom=t.getBottom().y,d.bottom-d.top>h&&(d.bottom=d.top+h)),a=0;a<n.length;a++)a!=e&&(i=n[a],u=i.getLeft().x,f=i.getRight().x,f<o.x&&i.getBottom()>d.top&&i.getTop()<d.bottom&&(!d.left||d.left<f)&&(d.left=f),u>o.x&&i.getBottom()>d.top&&i.getTop()<d.bottom&&(!d.right||d.right>u)&&(d.right=u));d.left||(d.left=t.getLeft().x),d.right||(d.right=t.getRight().x)}return d}},{key:"_moveSegment",value:function(t){function e(e,n,r,i,o){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e,n,r,i){var o,a,u;return 0==e?(o=t[0].getDirection(t[1]),r||(r=this.MIN_BUFFER),a=Math.min(r,t[0].distance(t[1])/2),u=t[0].getTranslated(o.scale(a)),t.splice(1,0,u),void _moveSegment(t,e+1,n)):e==t.length-2?(o=t[t.length-1].getDirection(t[t.length-2]),i||(i=this.MIN_BUFFER),a=Math.min(i,t[t.length-1].distance(t[t.length-2])/2),u=t[t.length-1].getTranslated(o.scale(a)),t.splice(t.length-1,0,u),void _moveSegment(t,e,n)):void(t[e].y==t[e+1].y?(e>0&&t[e-1].y==t[e].y&&(t.splice(e+1,0,t[e].clone()),e++),e<t.length-2&&t[e+1].y==t[e+2].y&&t.splice(e+1,0,t[e+1].clone()),t[e].y+=n,t[e+1].y+=n):(e>0&&t[e-1].x==t[e].x&&(t.splice(e+1,0,t[e].clone()),e++),e<t.length-2&&t[e+1].x==t[e+2].x&&t.splice(e+1,0,t[e+1].clone()),t[e].x+=n,t[e+1].x+=n))})},{key:"_mergeSegments",value:function(t){for(var e,n=t[t.length-1].y==t[t.length-2].y,r=t.length-2;r>=1;r--)e=t[r].y==t[r-1].y,e==n||t[r].equals(t[r-1])?t.splice(r,1):n=!n}},{key:"points",get:function(){var t=e.findPositions(this.start,this.end,this.startNormal,this.endNormal,this.MIN_BUFFER);if(this.autoRoute){this._mergeSegments(t);for(var n,r,i,o=[],a=edge.source.getCommonAncestor(edge.target),u=a.getDescendants(),s=0,l=0;l<u.length;l++)n=u[l],n.excludeFromRouting(edge)||n.isAncestor(edge.source)||n.isAncestor(edge.target)||(n==edge.source&&(r=s),n==edge.target&&(i=s),o.push(n.getBounds(document)),s++);o.length>1&&this.autoRoute(t,a.getBounds(document),o,r,i)}return this._mergeSegments(t),t}}],[{key:"findPositions",value:function(t,e,n,r,i){var o,a,u,s=new h["default"](t.x+n.x*i,t.y+n.y*i),l=new h["default"](e.x+r.x*i,e.y+r.y*i);if(o=0!=n.x?(l.x-s.x)/n.x>0?n:new h["default"](0,l.y>=s.y?1:-1):(l.y-s.y)/n.y>0?n:new h["default"](l.x>=s.x?1:-1,0),a=0!=r.x?(s.x-l.x)/r.x>0?r:new h["default"](0,s.y>=l.y?1:-1):(s.y-l.y)/r.y>0?r:new h["default"](s.x>=l.x?1:-1,0),0==o.dotProduct(a)){var f=0==o.x?new h["default"](s.x,l.y):new h["default"](l.x,s.y);u=[t,s,f,l,e]}else u=o.dotProduct(a)<0?0==o.x?[t,s,new h["default"](s.x,(t.y+e.y)/2),new h["default"](l.x,(t.y+e.y)/2),l,e]:[t,s,new h["default"]((t.x+e.x)/2,s.y),new h["default"]((t.x+e.x)/2,l.y),l,e]:[t,s,new h["default"](s.x+o.x*i,s.y+o.y*i),new h["default"](l.x+a.x*i,l.y+a.y*i),l,e];var c=[];c[0]=u[0];for(var d=1;d<u.length-1;d++)u[d].x==u[d-1].x&&u[d].x==u[d+1].x||u[d].y==u[d-1].y&&u[d].y==u[d+1].y||c.push(u[d]);return c.push(u[u.length-1]),c}},{key:"routeInternal",value:function(t,e,n,r,i){var o=t.getDirection(e),a=t.getMidPoint(e),u=[],s=new h["default"](n.x*n.x,n.y*n.y),l=new h["default"](r.x*r.x,r.y*r.y),f=0!=n.x;u[0]=f?t.y:t.x,f=!f;var c;return 0==n.dotProduct(r)?n.dotProduct(o)>=0&&r.dotProduct(o)<=0||(c=n.dotProduct(o)<0?s.dotProduct(t.getTranslated(n.getScaled(i))):f?a.y:a.x,u.push(c),f=!f,c=r.dotProduct(o)>0?l.dotProduct(e.getTranslated(r.getScaled(i))):f?a.y:a.x,u.push(c),f=!f):n.dotProduct(r)>0?(c=n.dotProduct(o)>=0?s.dotProduct(t.getTranslated(n.getScaled(i))):l.dotProduct(e.getTranslated(r.getScaled(i))),u.push(c),f=!f):(n.dotProduct(o)<0&&(c=s.dotProduct(t.getTranslated(n.getScaled(i))),u.push(c),f=!f),c=f?a.y:a.x,u.push(c),f=!f,n.dotProduct(o)<0&&(c=l.dotProduct(e.getTranslated(r.getScaled(i))),u.push(c),f=!f)),u.push(f?e.y:e.x),u}},{key:"processPositions",value:function(t,e,n,r){var i=[];i[0]=r?t.x:t.y;var o;for(o=0;o<n.length;o++)i[o+1]=n[o];i.push(r==(n.length%2==1)?e.x:e.y);var a=[];a[0]=t;var u,s,l;for(o=2;o<i.length-1;o++)r=!r,l=i[o-1],s=i[o],u=r?new h["default"](l,s):new h["default"](s,l),a.push(u);return a.push(e),a}}]),e}(v);y.direct=b,y.bezier=m,y.entityRelations=w,y.manhattan=x,e["default"]=v},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(5),s=i(u),l=n(1),f=i(l),h=n(13),c=r(h),d=n(7),p=i(d),g=n(8),y=i(g),v={stopPropagation:!1},b=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?[0,1/0]:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];o(this,t),this.root=e,this.rootNS=e.getAttribute("ns")||"root",this.zoomScale=n,s["default"].assign(this,v,r),this.scale=1,this.listeners={},this.dragging=!1,this.handler=s["default"].bind(this.handleEvent,this),this.started=!1,this.enterStack=[]}return a(t,[{key:"start",value:function(){this.started||(f["default"].on(this.root,"mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel",this.handler),this.startKeys(),this.started=!0)}},{key:"stop",value:function(){this.started&&(f["default"].off(this.root,"mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel",this.handler),this.stopKeys(),this.started=!1)}},{key:"startKeys",value:function(){f["default"].on(document,"keydown keyup",this.handler)}},{key:"stopKeys",value:function(){f["default"].off(document,"keydown keyup",this.handler)}},{key:"getEventInfo",value:function(t){for(var e=t.target,n=new y["default"],r=void 0,i=[],o=!1;!o&&e&&e!=document;)r=e.getAttribute("ns"),r&&(o=s["default"].startsWith(r,"root."),o&&(r=r.substring(5),t.rootTarget=e),t.nsTarget||(t.nsTarget=e),i.splice(0,0,e),n.prepend(r)),e=e.parentNode;return o||(t.rootTarget=t.nsTarget),t.targetStack=i,r=n.toString("."),""==r&&(r=this.rootNS),{data:t.rootTarget,ns:r}}},{key:"handleEvent",value:function(e){var n=this,r=e.type;if(!this.dragging&&!p["default"].eventFromInput(e)){var i=void 0,o=void 0,a=this.getPosition(e),u=void 0,s="keydown"==r||"keyup"==r;if(s)i=this.root,o=c.getKeyEvent(e);else{if(u=this.getEventInfo(e),!u)return;i=u.data,o=u.ns}"mousewheel"==r&&(this.scale*=Math.pow(2,.002*e.wheelDelta),this.scale=Math.max(Math.min(this.zoomScale[1],this.scale),this.zoomScale[0]),e.scale=this.scale,r="zoom"),"mousedown"==r&&0==e.button&&function(){var r={data:i,pos:"root"==o?t.mouse(n.root,e):a};n.dragging=!1;var u=void 0,s=function(e){var i=n.getPosition(e);if(!n.dragging){if(r.pos[0]==i[0]&&r.pos[1]==i[1])return;n.dragging=!0,e.rootTarget=r.data,n.dispatch(e,"dragstart",o,r.data,r.pos)}u="root"==o?t.mouse(n.root,e):i,n.getEventInfo(e),n.dispatch(e,"drag",o,r.data,u)},l=function h(e){u="root"==o?t.mouse(n.root,e):n.getPosition(e);var i=n.getEventInfo(e);n.dragging?(n.dragging=!1,n.dispatch(e,"dragend",o,r.data,u)):n.dispatch(e,"mouseup",o,i.data,u),f["default"].off(window,"mousemove",s),f["default"].off(window,"mouseup",h)};e.preventDefault(),f["default"].on(window,"mousemove",s),f["default"].on(window,"mouseup",l)}(),s||this.simulateEnterLeave(e,r,o,i,a),this.dispatch(e,r,o,i,a)}}},{key:"simulateEnterLeave",value:function(t,e,n,r,i){var o=this,a=void 0,u=void 0,l=function(e){for(e=e||0;o.enterStack.length>=e+1;)a=o.enterStack.pop(),o.dispatch(t,"mouseleave",a.ns,a.data,i)},f=function(t){for(var e=new y["default"],n=0;n<=t;n++){var r=u[n].getAttribute("ns");s["default"].startsWith(r,"root.")&&(r=r.substring(5)),e.append(r)}return e.toString(".")};if(n&&n!=this.rootNS&&"mouseover"==e){u=t.targetStack;for(var h=void 0,c=0;c<u.length;c++){if(c<this.enterStack.length){if(this.enterStack[c].target==u[c])continue;l(c)}h={data:r,ns:f(c),target:u[c]},this.enterStack.push(h),this.dispatch(t,"mouseenter",h.ns,r,i)}u.length<this.enterStack.length&&l(u.length)}n==this.rootNS&&this.enterStack.length>0&&l()}},{key:"dispatch",value:function(e,n,r,i,o){if(this.started){var a=r?n+"."+r:n;s["default"].forEach(this.listeners,function(u,l){t.match(a,l)&&s["default"].forEach(u,function(t){t.context?t.callback.apply(t.context,[n,r,i,o,e]):t.callback.apply(window,[n,r,i,o,e])})}),this.stopPropagation&&e.stopPropagation&&e.stopPropagation()}}},{key:"getPosition",value:function(e){var n=t.mouse(this.root,e);return s["default"].isNaN(n[0])||s["default"].isNaN(n[1])||(this.lastPosition=n),this.lastPosition}},{key:"registerKey",value:function(t,e,n,r){var i=this;if(s["default"].isArray(e))return void s["default"].forEach(e,function(e){i.registerKey(t,e,n,r)});if(e=c.getKeyData(e.ctrl,e.alt,e.shift,e.meta,e.code),e.length){e=new y["default"](t).append(e).toString(".");var o={callback:n,context:r};this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(o)}}},{key:"unregisterKey",value:function(t,e,n,r){var i=this;if(s["default"].isArray(e))return void s["default"].forEach(e,function(e){i.unregisterKey(t,e,n,r)});if(e=c.getKeyData(e.ctrl,e.alt,e.shift,e.meta,e.code),e.length){e=new y["default"](t).append(e).toString(".");var o=this.listeners[e],a=void 0;if(o)for(var u=0;u<o.length;u++)if(a=o[u],a.callback===n&&(!r||r===a.context))return void o.splice(u,1)}}},{key:"register",value:function(t,e,n,r){var i=this;if(s["default"].isArray(t))return void s["default"].forEach(t,function(t){i.register(t,e,n,r)});var o={callback:e,context:n,zIndex:r};this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(o)}},{key:"unregister",value:function(t,e,n){var r=this.listeners[t],i=void 0;if(r)for(var o=0;o<r.length;o++)if(i=r[o],i.callback===e&&(!n||n===i.context))return void r.splice(o,1)}},{key:"destroy",value:function(){this.stop(),delete this.root,delete this.listeners,delete this.enterStack}}],[{key:"match",value:function(t,e){var n=e.split("*");if(1==n.length)return t==e;for(var r=void 0,i=0,o=0;o<n.length;o++)if(0!=n[o].length){if(r=t.slice(i),i=r.indexOf(n[o]),i<0)return!1;i+=n[o].length}return!0}},{key:"mouse",value:function(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}]),t}();e["default"]=b},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(!t||!t instanceof KeyboardEvent)return null;var e=t.keyCode||t.which;return e>=16&&e<=18&&(e=null),o(t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,e)}function o(t,e,n,r,i){var o=new u["default"];return t&&o.append("CTRL"),e&&o.append("ALT"),n&&o.append("SHIFT"),r&&o.append("META"),i&&o.append(i),o.toString(".")}Object.defineProperty(e,"__esModule",{value:!0}),e.getKeyEvent=i,e.getKeyData=o;var a=n(8),u=r(a)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(5),u=r(a),s=n(2),l=r(s),f=n(15),h=r(f),c=n(19),d=r(c),p=n(20),g=r(p),y={name:"Default",role:"node",draggable:!0,selectable:!0,editable:!0,resizable:!1,sourceable:!0,targetable:!0,visible:!0},v={name:"Default",role:"edge",selectable:!0,visible:!0,startMarker:null,endMarker:{id:"Default_EndMarker",type:"arrow",size:10,color:"#0ea117"},start:[0,0],end:[400,200]},b=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?u["default"].uniqueId("G"):arguments[0],n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments[2];i(this,t),this.id=e,this.nodes={},this.edges={},this.selection=null,this.destroyed=!1,l["default"].buildTypes(n.nodeTypes,"Nodes",y),l["default"].buildTypes(n.edgeTypes,"Edges",v),this.markers=[];var o=l["default"].type(d["default"].namespace),a=void 0,s=void 0,f=!0,h=!1,c=void 0;try{for(var p,b=o.entries()[Symbol.iterator]();!(f=(p=b.next()).done);f=!0){var m=p.value;s=m[1].prototype.startMarker,s&&(a=g["default"].getMarker(s,!0),this.markers.push(a)),s=m[1].prototype.endMarker,s&&(a=g["default"].getMarker(s,!1),this.markers.push(a))}}catch(w){h=!0,c=w}finally{try{!f&&b["return"]&&b["return"]()}finally{if(h)throw c}}delete n.nodeTypes,delete n.edgeTypes,l["default"].initConfig(this,n),this.root=null,r&&this.loadModel(r)}return o(t,[{key:"addNode",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?this.currentRoot:arguments[1],r=arguments[2],i=t.getJSClass(e,h["default"]),o=new i(this,e);return n?t.addChild(n,o,r):(this.root=o,this.root.prop("role","root")),this.nodes[o.id]=o,o}},{key:"addEdge",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?this.currentRoot:arguments[1],r=arguments[2],i=arguments[3],o=t.getJSClass(e,d["default"]),a=new o(this,e,r,i);return t.addChild(n,a),this.edges[a.id]=a,a}},{key:"loadModel",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?this.currentRoot:arguments[1],r=t.nodes,i=t.edges;delete t.nodes,delete t.edges;var o=this.addNode(t,n);r&&u["default"].forEach(r,function(t){e.loadModel(t,o)}),i&&u["default"].forEach(i,function(t){var n=void 0,r=void 0;t.from&&(n=e.nodes[t.from]),t.to&&(r=e.nodes[t.to]),e.addEdge(t,o,n,r)})}},{key:"reset",value:function(){}},{key:"destroy",value:function(){}},{key:"currentRoot",get:function(){return this.root}}],[{key:"getJSClass",value:function(t,e){var n=null;if(t&&t.type){var r=l["default"].type(e.namespace,t.type);r&&(n=r.jsClass)}return l["default"].getConstructor(n,e)}},{key:"addChild",value:function(t,e){t.children||(t.children=[]),e.parent!=t&&(t.children.push(e),e.parent&&e.parent.children&&(e.parent.children=u["default"].without(e.parent.children,e))),e.parent=t}}]),t}();b.DEFAULTS={allowDanglingEdges:!0,multiConnect:!1,readOnly:!1,viewOnly:!1},e["default"]=b},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(5),f=r(l),h=n(8),c=r(h),d=n(16),p=r(d),g=function(t){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];i(this,e),n.id||(n.id=f["default"].uniqueId("N"));var r=o(this,Object.getPrototypeOf(e).call(this,t,n));return r.inEdges=[],r.outEdges=[],r.ports=null,r.parent=null,r}return a(e,t),s(e,[{key:"isAncestor",value:function(t){for(var e=t.parent;e;){if(this==e)return!0;e=e.parent}return!1}},{key:"removeEdge",value:function(t){for(var e=t.source==this?this.outEdges:this.inEdges,n=0;n<e.length;n++)if(t==e[n]){e.splice(n,1);break}}},{key:"addInEdge",value:function(t,e){null==e||void 0===e?this.inEdges.push(t):this.inEdges.splice(e,0,t)}},{key:"addOutEdge",value:function(t,e){null==e||void 0===e||e>t.length-1?this.outEdges.push(t):this.outEdges.splice(e,0,t)}},{key:"renderChildren",value:function(t){var e=this;if(this.children){var n=function(){var n=new c["default"];return f["default"].forEach(e.children,function(e){n.append(e.render(t))}),{v:n.toString()}}();if("object"===("undefined"==typeof n?"undefined":u(n)))return n.v}return""}},{key:"getPort",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"auto":arguments[1],n=arguments[2],r=arguments[3],i=this.getShape(t);return"auto"==e?i.getPerimeter(n,r):null}},{key:"toString",value:function(){var t=this.prop("label")?this.prop("label"):"undefined";return f["default"].isArray(t)&&(t=t[0]),"Node:{id:"+this.id+";label:"+t+";type:"+this.props.constructor.typeName+"}"}}]),e}(p["default"]);g.namespace="Nodes",e["default"]=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(5),u=r(a),s=n(2),l=r(s),f=n(17),h=r(f),c=n(8),d=r(c),p=n(6),g=r(p),y=n(4),v=(r(y),n(18)),b=r(v),m=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{id:u["default"].uniqueId()}:arguments[1];i(this,t),this.graph=e,this.id=n.id,delete n.id,n.decorators&&(this.createDecorators(n.decorators),delete n.decorators),n.views&&(this.viewProps=n.views,delete n.views);var r=n.type||"Default";if(r=l["default"].type(this.constructor.namespace,r),!r)throw new Error("Type not found "+n.type);delete n.type,this.props=new r(n)}return o(t,[{key:"prop",value:function(t,e){return u["default"].isUndefined(e)?this.props[t]:void(this.props[t]=e)}},{key:"viewProp",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"default":arguments[0],e=arguments[1],n=arguments[2];return u["default"].isUndefined(n)?"default"==t?this.prop(e,n):this.viewProps[t][e]:void("default"==t?this.prop(e,n):(this.viewProps[t]||(this.viewProps[t]={}),this.viewProps[t][e]=n))}},{key:"createDecorators",value:function(t){}},{key:"getView",value:function(t){var e=this.getShape(t);return u["default"].assign({id:this.id,key:t,className:this.computedClassName,namespace:this.namespace},e)}},{key:"getShape",value:function(t){var e=h["default"].get(this.id+".shape",t);if(e)return e;var n=this.viewProp(t,"shape"),r=n?g["default"].getShape(n.name):g["default"].getShape("Rectangle"),i=this.viewProp(t,"x"),o=this.viewProp(t,"y"),a=this.viewProp(t,"width"),u=this.viewProp(t,"height");return e=new r(i,o,a,u,n),h["default"].set(this.id+".shape",e,t),e}},{key:"render",value:function(t){var e=h["default"].get(this.id+".template",t.id);if(!e){var n=this.prop("role");e=t.getTemplate("$"+n,null,this),u["default"].isString(e)&&(e=u["default"].template(e)),h["default"].set(this.id+".template",e,t.id)}return e(this.getView(t.id))}},{key:"renderShape",value:function(t){var e=this.getShape(t.id);return e?e.render(t):""}},{key:"renderLabel",value:function(t){if(this==this.graph.currentRoot)return null;var e=this.getLabelBox(t.id);return e?t.renderLabel(e):""}},{key:"getLabelBox",value:function(t){var e=h["default"].get(this.id+".labelBox",t);if(e)return e;var n=this.getShape(t);return e=b["default"].getLabelBox(this.prop("label"),this.viewProp(t,"labelConfig"),n.width,n.height),h["default"].set(this.id+".labelBox",e,t),e}},{key:"destroy",value:function(){delete this.graph,delete this.decorators,delete this.props,delete this.viewProps,this.destroyed=!0}},{key:"computedClassName",get:function(){if(!this._computedClassName){var t=new d["default"](this.prop("role")),e=this.props;for(e.hasOwnProperty("className")&&t.append(e.className),e=e.constructor.prototype;e;)e.hasOwnProperty("className")&&t.append(e.className),e=Object.getPrototypeOf(e);this._computedClassName=t.toString(" ")}return this._computedClassName}},{key:"namespace",get:function(){return this==this.graph.currentRoot?"":"root."+this.prop("role")}}]),t}();e["default"]=m},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={},r={get:function(t,e){return this.getCache(e)[t]},set:function(t,e,n){this.getCache(n)[t]=e},contains:function(t,e){return t in this.getCache(e)},remove:function(t,e){delete this.getCache(e)[t]},clear:function(t){namespace?n[namespace]&&(n[namespace]={}):n={}},getCache:function(){var t=arguments.length<=0||void 0===arguments[0]?"default":arguments[0];return n[t]||(n[t]={}),n[t]}};e["default"]=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=r(i),a=n(1),u=r(a),s=n(2),l=r(s),f=n(7),h=r(f),c=n(8),d=r(c),p=n(4),g=r(p),y=1,v=2,b=4,m=8,w={fontSize:11,fontFamily:"Arial",fontStyle:0,padding:0,linePadding:0,align:"left",width:0,height:0,rotation:null,geometry:{x:0,y:0,anchorY:0,offsetX:0,offsetY:0}};e["default"]=function(){function t(t,e,r,i){return n.call(this,t,e,{width:r,height:i})}function e(t,e,r){return n.call(this,t,e,r)}function n(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments[2];e=o["default"].defaultsDeep(e,w);var r=e.fontSize,i=e.fontFamily,a=e.fontStyle,u=(a&y)==y,s=e.padding,f=e.linePadding,h=e.align,c=e.width,d=e.height;n.width&&(c=c<=5?n.width*c:c,d=d<=5?n.height*d:d),c-=2*s,d-=2*s,c=Math.max(0,c),d=Math.max(0,d);var p=o["default"].clone(e.geometry),v=this.wrap(t,c,r,i,u);p.width=v.width+2*s,p.height=v.height+2*s+(v.length-1)*f;var b="start",m=0,x=!o["default"].has(p,"anchorX");switch(h){case"center":b="middle",x&&(p.anchorX=0);break;case"right":b="end",m=v.width/2,x&&(p.anchorX=-.5);break;case"left":m=-v.width/2,x&&(p.anchorX=.5)}var k=void 0;k=n.getRelativePosition?n.getRelativePosition(p):l["default"].getRelativePosition({width:n.width,height:n.height},p);var _=new g["default"](k[0],k[1],p.width,p.height),P="center"==h?[0,0]:"left"==h?[-v.width/2,0]:[v.width/2,0];p.width=Math.max(c+2*s,p.width),p.height=Math.max(d+2*s,p.height),k=n.getRelativePosition?n.getRelativePosition(p):l["default"].getRelativePosition({width:n.width,height:n.height},p);var E=new g["default"](k[0],k[1],p.width,p.height);return{config:e,label:v,_label:t,dx:m,dy:-p.height/2+s+v.lineHeight-v.baseline,anchor:b,lineHeight:v.lineHeight+f,pivot:P,bounds:_,maxBounds:E}}function r(t,e){return t.renderLabel(e)}var i=null,a=void 0,s=void 0,f=o["default"].memoize(function(t,e,n,r){if(e=e||11,n=n||"Arial,Helvetica",r=!o["default"].isUndefined(r)&&r,!i){i=h["default"].createElement("iframe",{id:"_ComputeStylesIframe"},{position:"absolute",visibility:"hidden",width:"auto"}),document.body.appendChild(i);var u=i.contentWindow.document;u.open(),u.write('<html><body>\t\t\t\t\t<div id="baselineDiv" style="height:100px;"><span style="line-height:0">T</span><span style="height:100%;display:inline-block;"></span></div>\t\t\t\t\t<div id="measureDiv" style="position:absolute;width:auto;height:auto;padding:0;white-space:pre-wrap;word-wrap:break-word;display:inline-block;"></div>\t\t\t\t\t</body></html>'),u.close(),a=u.getElementById("measureDiv"),s=u.getElementById("baselineDiv")}s.style.fontSize=a.style.fontSize=e,s.style.fontFamily=a.style.fontFamily=n,s.style.fontWeight=a.style.fontWeight=r?"bold":"normal",a.innerHTML=t;var l=s.firstChild,f=l.offsetTop+l.offsetHeight-s.offsetHeight-s.offsetTop;return{width:a.offsetWidth,height:a.offsetHeight,baseline:f}},function(t,e,n,r){return t+";"+e+";"+n+";"+r}),c=o["default"].memoize(function(t,e,n,r,i){e=e||0,n=n||11,r=r||"Arial,Helvetica",i=!o["default"].isUndefined(i)&&i;var a=[],u=f("&nbsp;",n,r,i),s=u.width;if(a.lineHeight=u.height,a.baseline=u.baseline,!e||!t||""==t)return a.push(t),a.width=t&&""!=t?f(t,n,r,i).width:s,a.height=a.lineHeight,a;for(var l=0,h=t.split("\n"),c=new d["default"],p=0;p<h.length;p++){for(var g,y=h[p].split(/\s/),v="",b=0,m=0,w=!0,x=0;x<y.length;x++)g=y[x],m=f(g,n,r,i).width,(w?m:b+s+m)>e?(w?(c.append(g),l=Math.max(l,m),x<y.length-1&&(a.push(c.toString()),c.clear())):(a.push(c.append(v).toString()),l=Math.max(l,b+s+m),c.clear()),v="",b=0,w||x--,w=!0):(v=w?g:v+" "+g,b=w?m:b+s+m,l=Math.max(l,b),w=!1);""!=v&&c.append(v),p<h.length-1&&(a.push(c.toString()),c.clear())}return a.push(c.toString()),a.width=l,a.height=a.lineHeight*a.length,a},function(t,e,n,r,i){return t+";"+e+";"+n+";"+r+";"+i}),p={visible:function(){return this.input&&"visible"==this.input.style.visibility},start:function(t,e,n,r,i){var o=arguments.length<=5||void 0===arguments[5]?1:arguments[5];this.input?this.visible()&&this.key!=t&&this.stop():(this.input=h["default"].createElement("textarea",{id:"inlineEditor",unselectable:"off"},{position:"absolute",overflow:"hidden",padding:"0px",margin:"0px",border:"transparent"}),e.appendChild(this.input)),this.key=t,this.box=n,this.refEl=r,this.textEl=i;var a=n.config,s=new g["default"](n.maxBounds.x,n.maxBounds.y,n.maxBounds.width*o,n.maxBounds.height*o),l=h["default"].getCenterPosition(r,e);l=[l[0]+s.left,l[1]+s.top],i&&(i.style.visibility="hidden"),h["default"].setElement(this.input,null,{visibility:"visible",left:l[0]+"px",top:l[1]+"px",width:s.width+"px",height:s.height+"px","font-family":a.fontFamily,"font-size":a.fontSize*o+"px","font-weight":(a.fontStyle&y)==y?"bold":"normal"}),this.input.value=n._label,this.input.focus(),this.input.select(),u["default"].fire(this,"editor.start",[this.key])},stop:function(t){this.visible()&&(t=t||!1,this.textEl&&(this.textEl.style.visibility=null),this.input.style.visibility="hidden",t||u["default"].fire(this,"editor.update",[this.key,this.input.value]),u["default"].fire(this,"editor.stop",[this.key]),delete this.key,delete this.box,delete this.refEl,delete this.textEl)}};return{FONT_BOLD:y,FONT_ITALIC:v,FONT_UNDERLINE:b,FONT_SHADOW:m,getStringSize:f,wrap:c,getLabelBox:t,getLabelBoxForLink:e,render:r,editor:p}}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function k(t,e,n){
null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:k(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=n(5),f=r(l),h=n(16),c=r(h),d=n(4),p=r(d),g=n(11),y=r(g),v=n(18),b=r(v),m=n(17),w=r(m),x=function(t){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments[2],a=arguments[3];i(this,e),n.id||(n.id=f["default"].uniqueId("E"));var u=o(this,Object.getPrototypeOf(e).call(this,t,n));return u.source=u.target=null,u.setSource(r,n.sourcePos),u.setTarget(a,n.targetPos),u}return a(e,t),u(e,[{key:"setSource",value:function(t,e){this.setTerminal(t,e,"source")}},{key:"setTarget",value:function(t,e){this.setTerminal(t,e,"target")}},{key:"setTerminal",value:function(t,e,n){var r="source"==n?this.source:this.target;r==t?t&&t.setEdgeAt(this,e):(r&&r.removeEdge(this),t&&("source"==n?t.addOutEdge(this,e):t.addInEdge(this,e)),"source"==n?this.source=t:this.target=t)}},{key:"getLabelBox",value:function(t){var e=this.prop("label");return e?b["default"].getLabelBoxForLink(e,this.viewProp(t,"labelConfig"),this.getShape(t)):null}},{key:"getReferencePoints",value:function(t){var e=[];return this.source?e.push(this.source.getShape(t).center):e.push(this.viewProp(t,"start")),this.target?e.push(this.target.getShape(t).center):e.push(this.viewProp(t,"end")),e}},{key:"getTerminalVisual",value:function(t,e){var n=this.getReferencePoints(t),r=[],i=function(t){return new p["default"](t.x,t.y,3,3)};return this.source?r.push(this.source.getPort(t,this.prop("sourcePort"),n[1],e)):r.push({point:n[0],direction:p["default"].getDirection(i(n[0]),n[1],!0)}),this.target?r.push(this.target.getPort(t,this.prop("targetPort"),n[0],e)):r.push({point:n[1],direction:p["default"].getDirection(i(n[1]),n[0],!0)}),r}},{key:"getShape",value:function(t){var e=w["default"].get(this.id+".shape",t);if(e)return e;var n=this.viewProp(t,"shape");return e=y["default"].getLink(this.getTerminalVisual(t,n.orthogonal),n,this.prop("startMarker"),this.prop("endMarker")),w["default"].set(this.id+".shape",e,t),e}},{key:"toString",value:function(){return"Edge:{"+(this.source?this.source.id:"null")+"--"+(this.target?this.target.id:"null")+"}"}},{key:"destroy",value:function(){s(Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.setSource(null),this.setTarget(null)}}]),e}(c["default"]);x.namespace="Edges",e["default"]=x},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=r(i),a={},u=function(){function t(t,e,n){var r=e?-1:1,i={viewBox:new o["default"]((-5),(-5),10,10),size:t,ref:[4*r,0],fill:n.color};return i.shape={name:"Polygon",points:[[-2*r,0],[-4*r,4],[4*r,0],[-4*r,-4]]},i}function e(t,e,n){var r=e?-1:1,i={viewBox:new o["default"]((-5),(-5),10,10),size:t,ref:[4*r,0],fill:n.color};return i.shape={name:"Polygon",points:[[-5*r,-5],[-5*r,5],[4*r,0]]},i}function n(t,e,n){var r=t/2,i={viewBox:new o["default"]((-r),(-r),t,t),size:t,ref:[0,0],fill:n.color};return i.shape='<ellipse cx="0" cy="0" rx="'+r+'" ry="'+r+'"></ellipse>',i}function r(t,e,n){var r=e?-1:1,i={viewBox:new o["default"]((-5),(-5),10,10),size:t,ref:[4*r,0],fill:n.color};return i.shape="",i}function i(t,e){var n=a[t.type],r=n(t.size,e,t);return r.id=t.id,r}return a.arrow=t,a.triangle=e,a.oval=n,a.diamond=r,{registry:a,getMarker:i}}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(5),u=r(a),s=n(2),l=r(s),f=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t),e.hasOwnProperty("orientation")&&u["default"].isString(e.orientation)&&("HORIZONTAL"==e.orientation.toUpperCase()?e.orientation=t.HORIZONTAL:delete e.orientation),l["default"].initConfig(this,e)}return o(t,[{key:"layout",value:function(t,e){}},{key:"reset",value:function(){}},{key:"destroy",value:function(){}}]),t}();f.VERTICAL=0,f.HORIZONTAL=1,f.DEFAULTS={orientation:f.VERTICAL},e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(21),l=r(s),f=function(t){function e(){return i(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),u(e,[{key:"layout",value:function(t,e){var n;if(n=t?_.isArray(t)?t:t.getLinkedNodes("target"):this.owner.childNodes,n&&0!=n.length){for(var r,i=0,o=0,a=0,u=0,s=0,l=0;l<n.length;l++)r=n[l],i>0&&i+this.hgap+r.getProperty("width")>e.width&&(o+=a+this.vgap,i=0,a=0,u=0,s++),r._flPos=[u,s],r.moveTo([e.x+i,e.y+o]),i+=this.hgap+r.getProperty("width"),u++,a=a<r.getProperty("height")?r.getProperty("height"):a;this.trigger(new Rectangle(e.x,e.y,e.width,o+a))}}}]),e}(l["default"]);f.DEFAULTS={hgap:10,vgap:10},e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(5),u=r(a),s=n(1),l=r(s),f=n(2),h=r(f),c=n(7),d=r(c),p=n(21),g=r(p),y=n(4),v=r(y),b=n(12),m=r(b),w=n(24),x=r(w),k=n(18),_=r(k),P=function(){function t(e,n){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=arguments.length<=3||void 0===arguments[3]?null:arguments[3];if(i(this,t),this.id=e,this.box=d["default"].createElement("div",{id:this.id,tabindex:0,ns:"graph"},{overflow:"hidden",width:"100%",height:"100%",position:"relative"}),n.appendChild(this.box),r.layout){var a=h["default"].getConstructor(r.layout.jsClass,g["default"]);this.layout=new a(r.layout.config),delete r.layout}this.clear=!0,this._translate=[0,0],this._scale=1,this.graph=o,this.dispatcher=null,this.graphBehavior=null,this.selectionBehavior=null,this.nodeBehavior=null,this.edgeBehavior=null,this.connectionBehavior=null,h["default"].initConfig(this,r),l["default"].on(_["default"].editor,"editor.update.*",function(t,e){console.log(t+"="+e)})}return o(t,[{key:"viewport",value:function(t,e){if((u["default"].isUndefined(t)||u["default"].isNull(t))&&(t=!1),!e){var n=new v["default"](0,0,this.box.offsetWidth,this.box.offsetHeight);return t?h["default"].scale(this.translate,this.scale,n):n}t||(e=h["default"].scale(this.translate,this.scale,e));var r=this.box.offsetWidth,i=r/e.width;this.transform(-e.x*i,-e.y*i,i)}},{key:"transform",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],e=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=this.graph,i=r?r.currentRoot:null;if(u["default"].isNull(t)||(this._translate[0]=t,i&&i.viewProp(this.id,"x",t)),u["default"].isNull(e)||(this._translate[1]=e,i&&i.viewProp(this.id,"y",e)),!u["default"].isNull(n)){this._scale=n,i&&i.viewProp(this.id,"scale",n);var o=this.dispatcher.scale;o!=n&&(this.dispatcher.scale=n)}this.refresh()}},{key:"render",value:function(){if(!this._graph)return!1;if(this.layout&&this.layout.layout(this._graph.currentRoot,this.viewport()),!this.dispatcher){this.dispatcher=new m["default"](this.box,[this.prop("minZoom"),this.prop("maxZoom")]);var t=void 0;this.prop("graphBehavior")&&(t=h["default"].getConstructor(this.prop("graphBehavior")),this.graphBehavior=new t(this)),this.dispatcher.register("mouseup.node.label",function(t,e,n,r,i){var o=this,a=this._graph.nodes[n.getAttribute("id")];this.dispatcher.dragging||a._firstSelection||(_["default"]._delayEdit=u["default"].delay(function(){_["default"]._delayEdit&&(delete _["default"]._delayEdit,_["default"].editor.start(a.id,o.box,a.getLabelBox(o.id),n,i.nsTarget,o.scale))},250))},this),this.dispatcher.register(["mousedown.*","zoom*"],function(t,e,n,r,i){d["default"].eventFromInput(i)||_["default"].editor.stop()},this)}return this.dispatcher.start(),!0}},{key:"renderLabel",value:function(t){return this.constructor.renderLabel(t)}},{key:"renderLink",value:function(t){return this.constructor.renderLink(t)}},{key:"renderMarkers",value:function(t){return this.constructor.renderMarkers(t)}},{key:"refresh",value:function(){}},{key:"getTemplate",value:function(t,e,n){var r=this.constructor.TEMPLATES[t];if(r&&u["default"].isFunction(r)&&(r=r(e)),n){var i=r.match(/(#{[^#]*})/g),o={},a=!0,s=!1,l=void 0;try{for(var f,h=i[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var c=f.value;c=c.substring(2,c.length-1).trim(),o[c]=n[u["default"].camelCase("render "+c)](this)}}catch(d){s=!0,l=d}finally{try{!a&&h["return"]&&h["return"]()}finally{if(s)throw l}}r=u["default"].template(r,{interpolate:/#{([\s\S]+?)}/g})(o)}return r}},{key:"toDataURL",value:function(t,e){}},{key:"reset",value:function(){}},{key:"destroy",value:function(){delete this._graph,delete this.layout,this.dispatcher&&(this.dispatcher.stop(),delete this.dispatcher),this.box.innerHTML=""}},{key:"graph",get:function(){return this._graph},set:function(t){this._graph=t;var e=t.currentRoot;e&&(this._translate=[e.viewProp(this.id,"x")||0,e.viewProp(this.id,"y")||0],this._scale=e.viewProp(this.id,"scale")||1)}},{key:"translate",get:function(){return this._translate},set:function(t){this.transform(t[0],t[1])}},{key:"scale",get:function(){return this._scale},set:function(t){switch(t){case"in":t=this.scale*this.prop("zoomFactor");break;case"out":t=this.scale/this.prop("zoomFactor");break;case"actual":t=1;break;case"fit":var e=2*this.prop("gridSize"),n=this.getBounds(),r=this.viewport();r.width-=e,r.height-=e,t=Math.min(r.width/n.width,r.height/n.height,1);break;default:u["default"].isString(t)&&(t=parseFloat(t))}this.transform(null,null,t)}}]),t}();P.DEFAULTS={defaultClickMode:"pan",hideOutline:!1,singleSelect:!0,draggable:!0,gridEnabled:!1,guidesEnabled:!0,gridSize:30,maxZoom:4,minZoom:.2,zoomFactor:1.2,maskOpacity:.5,graphBehavior:x["default"]},e["default"]=P},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(25),l=r(s),f=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t)),r=t.dispatcher;return r.register("drag*.graph",n.handleDrag,n),r.register("zoom.*",n.handleZoom,n),n.offset=null,n}return a(e,t),u(e,[{key:"handleZoom",value:function(t,e,n,r,i){this.renderer.transform(null,null,i.scale)}},{key:"handleDrag",value:function(t,e,n,r,i){if("dragstart"==t){var o="pan"==this.renderer.prop("defaultClickMode")^(i.ctrlKey||i.shiftKey);if(!o)return;var a=this.renderer.translate;return void(this.offset=[a[0]-r[0],a[1]-r[1]])}this.offset&&(this.renderer.transform(r[0]+this.offset[0],r[1]+this.offset[1]),"dragend"==t&&delete this.offset)}}]),e}(l["default"]);e["default"]=f},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){n(this,t),this.renderer=e}return r(t,[{key:"destroy",value:function(){delete this.renderer}}]),t}();e["default"]=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function b(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:b(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=n(5),f=r(l),h=n(7),c=r(h),d=n(23),p=r(d),g=n(8),y=r(g),v=function(t){function e(){return i(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),u(e,[{key:"render",value:function(){var t=s(Object.getPrototypeOf(e.prototype),"render",this).call(this);if(t){var n=this.graph.currentRoot,r=new y["default"]('<svg width="100%" height="100%">');r.append(this.renderDefs());var i=this.translate;r.append('<g transform="translate(').append(i[0]).append(",").append(i[1]).append(")scale(").append(this.scale).append(')">'),r.append(n.render(this)),r.append("</g></svg>"),e.setContent(this.box,r.toString()),this.svg=this.box.firstElementChild}}},{key:"renderDefs",value:function(){var t=new y["default"]("<defs>");t.append(this.getTemplate("Grid",this.prop("gridSize")));var n=this.graph.markers;return n.length>0&&t.append(e.renderMarkers(n)),t.append("</defs>"),t.toString()}},{key:"refresh",value:function(){if(this.svg){var t=this.svg.querySelector("g"),e=this.translate;t.setAttribute("transform","translate("+e[0]+","+e[1]+")scale("+this.scale+")")}}},{key:"toDataURL",value:function(t,n){e.toDataURL(this.svg,t,n)}}],[{key:"renderMarkers",value:function(t){var e=new y["default"],n=void 0,r=void 0,i=!0,o=!1,a=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;n=this.TEMPLATES.Marker(l),r=l.shape,f["default"].isString(r)||(r=this.renderShape(r)),n=n.replace(/\#\{shape\}/,r),e.append(n)}}catch(h){o=!0,a=h}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw a}}return e.toString()}},{key:"renderLabel",value:function(t){return this.TEMPLATES.Label(t)}},{key:"renderShape",value:function(t){var e=this.TEMPLATES[t.name];return f["default"].isString(e)&&(e=f["default"].template(e)),e(t)}},{key:"renderLink",value:function(t){var e=t.points,n=t.controlPts;if(!e||0==e.length)return"";if(!n&&t.round){var r=[];n=[];var i=e[0],o=void 0,a=void 0,u=void 0,s=void 0;r.push(i);for(var l=1;l<e.length-1;l++)o=e[l],n[2*l]=[o,o],a=i.distance(o),u=o.distance(e[l+1]),s=Math.min(t.round,a/2,u/2),r.push(o.getDirection(i).scale(s).translate(o)),r.push(o.getDirection(e[l+1]).scale(s).translate(o)),i=o;r.push(e[e.length-1]),e=r}for(var h=new y["default"]("M"),c=void 0,d=0;d<e.length;d++)if(c=e[d],0==d)h.append(c);else if(n&&n[d]){h.append(" C ");for(var p=0;p<n[d].length;p++)h.append(n[d][p]).append(" ");h.append(c)}else h.append(" L ").append(c);var g=h.toString();return h.clear(),t.showGauge&&h.append('<path style="stroke: white; stroke-width: 9; visibility: hidden; pointer-events: stroke;" d="').append(g).append('"/>'),h.append('<path d="').append(g).append('"'),(t.startMarker||t.endMarker)&&(h.append(' style="'),t.startMarker&&h.append("marker-start: url(#").append(f["default"].isString(t.startMarker)?t.startMarker:t.startMarker.id).append(");"),t.endMarker&&h.append("marker-end: url(#").append(f["default"].isString(t.endMarker)?t.endMarker:t.endMarker.id).append(");"),h.append('"')),h.append("/>"),h.toString()}},{key:"toDataURL",value:function(t,e,n){if(!canvg)return null;var r=t.getBBox(),i=c["default"].createElement("canvas");document.body.appendChild(i),canvg(i,'<svg style="width: '+r.width+"px; height: "+r.height+'px;"><g transform="translate('+r.width/2+","+r.height/2+")scale("+this.transform.scale+')">'+$(this.g.node()).prop("innerHTML")+"</g></svg>");var o=i.toDataURL(e);return document.body.removeChild(i),o}},{key:"appendContent",value:function(t,e){var n=new y["default"];n.append("<svg>").append(e).append("</svg");for(var r=c["default"].createElement("div",null,null,n.toString()).firstElementChild;r.firstChild;)t.appendChild(r.firstChild);return t}},{key:"setContent",value:function(t,n){if(c["default"].isIE){for(var r=void 0;r=t.lastChild;)t.removeChild(r);e.appendContent(t,n)}else t.innerHTML=n;return t}}]),e}(p["default"]);v.TEMPLATES={$root:'<g id="${id}" class="${className}">#{children}</g>',$node:'<g id="${id}" class="${className}" ns="${namespace}" transform="translate(${x},${y})">#{shape}#{label}</g>',$edge:'<g id="${id}" class="${className}" ns="${namespace}">#{shape}#{label}</g>',Ellipse:'<ellipse cx="0" cy="0" rx="${width/2}" ry="${height/2}"/>',Rectangle:'<rect x="${-width/2}" y="${-height/2}" width="${width}" height="${height}" rx="9" ry="9"/>',Triangle:'<polygon points="${-width/2},${-height/2} ${width/2},${-height/2} 0,${height/2}"/>',Rhombus:'<polygon points="0,${-height/2} ${width/2},0 0,${height/2} ${-width/2},0"/>',Hexagon:function(t){var e="north"==t.direction||"south"==t.direction;return e?'<polygon points="0,${-height/2} ${width/2},${-height/4} ${width/2},${height/4} 0,${height/2} ${-width/2},${height/4} ${-width/2},${-height/4}"/>':'<polygon points="${-width/2},0 ${width/4},${-height/2} ${width/4},${-height/2} ${width/2},0 ${width/4},${height/2} ${-width/4},${height/2}"/>'},Polygon:function(t){var e=new y["default"]('<polygon points="'),n=!0,r=!1,i=void 0;try{for(var o,a=t.points[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;e.append(u[0]).append(",").append(u[1]).append(" ")}}catch(s){r=!0,i=s}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}return e.removeLast(),e.append('"/>'),e.toString()},Image:function(t){return'<image x="${-width/2}" y="${-height/2}" width="${width}" height="${height}" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t.image+'"/>'},Marker:function(t){return('\n<marker id="'+t.id+'" markerWidth="'+t.size+'" markerHeight="'+t.size+'" refx="'+t.ref[0]+'" \nrefy="'+t.ref[1]+'" orient="auto" viewbox="'+t.viewBox.x+" "+t.viewBox.y+" "+t.viewBox.width+" "+t.viewBox.height+'"\nmarkerUnits="userSpaceOnUse" '+(t.fill?'style="stroke: '+t.fill+";fill:"+t.fill+'"':"")+">#{shape}</marker>\n").trim()},Grid:function(t){return('\n<pattern id="GridPattern" width="'+t+'" height="'+t+'" patternUnits="userSpaceOnUse">\n\t<ellipse cx="0" cy="0" rx="1" ry="1" fill="#999999"/>\n\t<ellipse cx="0" cy="'+t+'" rx="1" ry="1" fill="#999999"/>\n\t<ellipse cx="'+t+'" cy="0" rx="1" ry="1" fill="#999999"/>\n\t<ellipse cx="'+t+'" cy="'+t+'" rx="1" ry="1" fill="#999999"/>\n</pattern>').trim()},Label:f["default"].template('\n<% var box = _.has(data, "dx") ? data : (data.getLabelBox ? data.getLabelBox() : null); \n   if (box) {%>\n\t<g <% if (box.config && box.config.class) {%>class="<%=box.config.class%>"<%}%>\t\t<% if (box.config && box.config.ns) {%>ns="<%=box.config.ns%>"<%}%>\t\ttext-anchor="<%=box.anchor%>"\t\ttransform="translate(<%=box.bounds.x%>,<%=box.bounds.y%>)<% if (box.config && box.config.rotation) {%>rotate(<%=box.config.rotation%> <%=box.pivot[0]%> <%=box.pivot[1]%>)<%}%>">\n\t<% if (box.config.backgroundStyle) {%>\n\t\t<rect x="<%=-box.bounds.width/2%>" y="<%=-box.bounds.height/2%>" width="<%=box.bounds.width%>" height="<%=box.bounds.height%>" style="<%=box.config.backgroundStyle%>"/>\n\t<% } if (_.isArray(box.label)) { \n\t\t_.each(box.label, function(value, line) {%>\n\t\t\t<text <% if (box.config && box.config.textStyle) {%>style="<%=box.config.textStyle%>"<%}%>\t\t\t\tdx="<%=box.dx%>" dy="<%=box.dy + box.lineHeight * line%>"><%=value%></text>\n\t\t<%});} else { %>\n\t\t\t<text><%=box.label%></text>\n\t\t<%}%>\n\t</g>\n<%}%>\n'.trim(),{variable:"data"})},e["default"]=v}])});
//# sourceMappingURL=qgraph.min.js.map
