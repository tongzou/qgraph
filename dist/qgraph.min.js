/*!
 * 
 * 	qgraph - A Graph Manipulation and Visualization Library
 * 	Author: Tong Zou
 * 	Version: v0.0.5
 * 	Url: https://github.com/tongzou/qgraph
 * 	License(s): MIT
 * 
 */
(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):"object"==typeof exports?exports.qgraph=t(require("lodash")):e.qgraph=t(e._)})(this,function(__WEBPACK_EXTERNAL_MODULE_5__){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=i(r),a=n(2),u=i(a),s=n(7),l=i(s),f=n(8),h=i(f),c=n(3),d=i(c),p=n(9),g=i(p),y=n(6),v=i(y),b=n(4),m=i(b),w=n(10),x=i(w),_=n(11),k=i(_),E=n(13),P=i(E),O=n(15),S=i(O),T=n(14),C=i(T),j=n(18),M=i(j),N=n(19),R=i(N),A=n(20),$=i(A),I=n(17),L=i(I),D=n(21),B=i(D),F=n(22),U=i(F);v["default"].addShape("Rectangle",m["default"]),v["default"].addShape("Ellipse",x["default"]),t["default"]={Events:o["default"],Cache:u["default"],Utils:u["default"],DomUtils:l["default"],StringBuffer:h["default"],Point:d["default"],Line:g["default"],Shape:v["default"],Rectangle:m["default"],Ellipse:x["default"],EventDispatcher:k["default"],Label:L["default"],Graph:P["default"],Element:S["default"],Node:C["default"],Edge:M["default"],Layout:R["default"],FlowLayout:$["default"],GraphView:B["default"],SVGView:U["default"]}},function(e,t,n){var i,r;/*!
	  * Bean - copyright (c) Jacob Thornton 2011-2012
	  * https://github.com/fat/bean
	  * MIT license
	  */
(function(o,a,u){"undefined"!=typeof e&&e.exports?e.exports=u():(i=u,r="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==r&&(e.exports=r)))})("bean",this,function(e,t){e=e||"bean",t=t||this;var n,i=window,r=t[e],o=/[^\.]*(?=\..*)\.|.*/,a=/\..*/,u="addEventListener",s="removeEventListener",l=document||{},f=l.documentElement||{},h=f[u],c=h?u:"attachEvent",d={},p=Array.prototype.slice,g=function(e,t){return e.split(t||" ")},y=function(e){return"string"==typeof e},v=function(e){return"function"==typeof e},b="click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll ",m="show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinput readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ",w=function(e,t,n){for(n=0;n<t.length;n++)t[n]&&(e[t[n]]=1);return e}({},g(b+(h?m:""))),x=function(){var e="compareDocumentPosition"in f?function(e,t){return t.compareDocumentPosition&&16===(16&t.compareDocumentPosition(e))}:"contains"in f?function(e,t){return t=9===t.nodeType||t===window?f:t,t!==e&&t.contains(e)}:function(e,t){for(;e=e.parentNode;)if(e===t)return 1;return 0},t=function(t){var n=t.relatedTarget;return n?n!==this&&"xul"!==n.prefix&&!/document/.test(this.toString())&&!e(n,this):null==n};return{mouseenter:{base:"mouseover",condition:t},mouseleave:{base:"mouseout",condition:t},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),_=function(){var e=g("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),t=e.concat(g("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),n=t.concat(g("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),r=e.concat(g("char charCode key keyCode keyIdentifier keyLocation location")),o=e.concat(g("data")),a=e.concat(g("touches targetTouches changedTouches scale rotation")),u=e.concat(g("data origin source")),s=e.concat(g("state")),h=/over|out/,c=[{reg:/key/i,fix:function(e,t){return t.keyCode=e.keyCode||e.which,r}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(e,n,i){return n.rightClick=3===e.which||2===e.button,n.pos={x:0,y:0},e.pageX||e.pageY?(n.clientX=e.pageX,n.clientY=e.pageY):(e.clientX||e.clientY)&&(n.clientX=e.clientX+l.body.scrollLeft+f.scrollLeft,n.clientY=e.clientY+l.body.scrollTop+f.scrollTop),h.test(i)&&(n.relatedTarget=e.relatedTarget||e[("mouseover"==i?"from":"to")+"Element"]),t}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return n}},{reg:/^text/i,fix:function(){return o}},{reg:/^touch|^gesture/i,fix:function(){return a}},{reg:/^message$/i,fix:function(){return u}},{reg:/^popstate$/i,fix:function(){return s}},{reg:/.*/,fix:function(){return e}}],d={},p=function(e,t,n){if(arguments.length&&(e=e||((t.ownerDocument||t.document||t).parentWindow||i).event,this.originalEvent=e,this.isNative=n,this.isBean=!0,e)){var r,o,a,u,s,l=e.type,f=e.target||e.srcElement;if(this.target=f&&3===f.nodeType?f.parentNode:f,n){if(s=d[l],!s)for(r=0,o=c.length;o>r;r++)if(c[r].reg.test(l)){d[l]=s=c[r].fix;break}for(u=s(e,this,l),r=u.length;r--;)!((a=u[r])in this)&&a in e&&(this[a]=e[a])}}};return p.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},p.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},p.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},p.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},p.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},p.prototype.clone=function(e){var t=new p(this,this.element,this.isNative);return t.currentTarget=e,t},p}(),k=function(e,t){return h||t||e!==l&&e!==i?e:f},E=function(){var e=function(e,t,n,i){var r=function(n,r){return t.apply(e,i?p.call(r,n?0:1).concat(i):r)},o=function(n,i){return t.__beanDel?t.__beanDel.ft(n.target,e):i},a=n?function(e){var t=o(e,this);return n.apply(t,arguments)?(e&&(e.currentTarget=t),r(e,arguments)):void 0}:function(e){return t.__beanDel&&(e=e.clone(o(e))),r(e,arguments)};return a.__beanDel=t.__beanDel,a},t=function(t,n,i,r,o,a,u){var s,l=x[n];"unload"==n&&(i=C(j,t,n,i,r)),l&&(l.condition&&(i=e(t,i,l.condition,a)),n=l.base||n),this.isNative=s=w[n]&&!!t[c],this.customType=!h&&!s&&n,this.element=t,this.type=n,this.original=r,this.namespaces=o,this.eventType=h||s?n:"propertychange",this.target=k(t,s),this[c]=!!this.target[c],this.root=u,this.handler=e(t,i,null,a)};return t.prototype.inNamespaces=function(e){var t,n,i=0;if(!e)return!0;if(!this.namespaces)return!1;for(t=e.length;t--;)for(n=this.namespaces.length;n--;)e[t]==this.namespaces[n]&&i++;return e.length===i},t.prototype.matches=function(e,t,n){return!(this.element!==e||t&&this.original!==t||n&&this.handler!==n)},t}(),P=function(){var e={},t=function(n,i,r,o,a,u){var s=a?"r":"$";if(i&&"*"!=i){var l,f=0,h=e[s+i],c="*"==n;if(!h)return;for(l=h.length;l>f;f++)if((c||h[f].matches(n,r,o))&&!u(h[f],h,f,i))return}else for(var d in e)d.charAt(0)==s&&t(n,d.substr(1),r,o,a,u)},n=function(t,n,i,r){var o,a=e[(r?"r":"$")+n];if(a)for(o=a.length;o--;)if(!a[o].root&&a[o].matches(t,i,null))return!0;return!1},i=function(e,n,i,r){var o=[];return t(e,n,i,null,r,function(e){return o.push(e)}),o},r=function(t){var n=!t.root&&!this.has(t.element,t.type,null,!1),i=(t.root?"r":"$")+t.type;return(e[i]||(e[i]=[])).push(t),n},o=function(n){t(n.element,n.type,null,n.handler,n.root,function(t,n,i){return n.splice(i,1),t.removed=!0,0===n.length&&delete e[(t.root?"r":"$")+t.type],!1})},a=function(){var t,n=[];for(t in e)"$"==t.charAt(0)&&(n=n.concat(e[t]));return n};return{has:n,get:i,put:r,del:o,entries:a}}(),O=function(e){n=arguments.length?e:l.querySelectorAll?function(e,t){return t.querySelectorAll(e)}:function(){throw new Error("Bean: No selector engine installed")}},S=function(e,t){if(h||!t||!e||e.propertyName=="_on"+t){var n=P.get(this,t||e.type,null,!1),i=n.length,r=0;for(e=new _(e,this,!0),t&&(e.type=t);i>r&&!e.isImmediatePropagationStopped();r++)n[r].removed||n[r].handler.call(this,e)}},T=h?function(e,t,n){e[n?u:s](t,S,!1)}:function(e,t,n,i){var r;n?(P.put(r=new E(e,i||t,function(t){S.call(e,t,i)},S,null,null,!0)),i&&null==e["_on"+i]&&(e["_on"+i]=0),r.target.attachEvent("on"+r.eventType,r.handler)):(r=P.get(e,i||t,S,!0)[0],r&&(r.target.detachEvent("on"+r.eventType,r.handler),P.del(r)))},C=function(e,t,n,i,r){return function(){i.apply(this,arguments),e(t,n,r)}},j=function(e,t,n,i){var r,o,u=t&&t.replace(a,""),s=P.get(e,u,null,!1),l={};for(r=0,o=s.length;o>r;r++)n&&s[r].original!==n||!s[r].inNamespaces(i)||(P.del(s[r]),!l[s[r].eventType]&&s[r][c]&&(l[s[r].eventType]={t:s[r].eventType,c:s[r].type}));for(r in l)P.has(e,l[r].t,null,!1)||T(e,l[r].t,!1,l[r].c)},M=function(e,t){var i=function(t,i){for(var r,o=y(e)?n(e,i):e;t&&t!==i;t=t.parentNode)for(r=o.length;r--;)if(o[r]===t)return t},r=function(e){var n=i(e.target,this);n&&t.apply(n,arguments)};return r.__beanDel={ft:i,selector:e},r},N=h?function(e,t,n){var r=l.createEvent(e?"HTMLEvents":"UIEvents");r[e?"initEvent":"initUIEvent"](t,!0,!0,i,1),n.dispatchEvent(r)}:function(e,t,n){n=k(n,e),e?n.fireEvent("on"+t,l.createEventObject()):n["_on"+t]++},R=function(e,t,n){var i,r,u,s,l=y(t);if(l&&t.indexOf(" ")>0){for(t=g(t),s=t.length;s--;)R(e,t[s],n);return e}if(r=l&&t.replace(a,""),r&&x[r]&&(r=x[r].base),!t||l)(u=l&&t.replace(o,""))&&(u=g(u,".")),j(e,r,n,u);else if(v(t))j(e,null,t);else for(i in t)t.hasOwnProperty(i)&&R(e,i,t[i]);return e},A=function(e,t,i,r){var u,s,l,f,h,y,b;{if(void 0!==i||"object"!=typeof t){for(v(i)?(h=p.call(arguments,3),r=u=i):(u=r,h=p.call(arguments,4),r=M(i,u,n)),l=g(t),this===d&&(r=C(R,e,t,r,u)),f=l.length;f--;)b=P.put(y=new E(e,l[f].replace(a,""),r,u,g(l[f].replace(o,""),"."),h,!1)),y[c]&&b&&T(e,y.eventType,!0,y.customType);return e}for(s in t)t.hasOwnProperty(s)&&A.call(this,e,s,t[s])}},$=function(e,t,n,i){return A.apply(null,y(n)?[e,n,t,i].concat(arguments.length>3?p.call(arguments,5):[]):p.call(arguments))},I=function(){return A.apply(d,arguments)},L=function(e,t,n){var i,r,u,s,l,f=g(t);for(i=f.length;i--;)if(t=f[i].replace(a,""),(s=f[i].replace(o,""))&&(s=g(s,".")),s||n||!e[c])for(l=P.get(e,t,null,!1),n=[!1].concat(n),r=0,u=l.length;u>r;r++)l[r].inNamespaces(s)&&l[r].handler.apply(e,n);else N(w[t],t,e);return e},D=function(e,t,n){for(var i,r,o=P.get(t,n,null,!1),a=o.length,u=0;a>u;u++)o[u].original&&(i=[e,o[u].type],(r=o[u].handler.__beanDel)&&i.push(r.selector),i.push(o[u].original),A.apply(null,i));return e},B={on:A,add:$,one:I,off:R,remove:R,clone:D,fire:L,Event:_,setSelectorEngine:O,noConflict:function(){return t[e]=r,this}};if(i.attachEvent){var F=function(){var e,t=P.entries();for(e in t)t[e].type&&"unload"!==t[e].type&&R(t[e].element,t[e].type);i.detachEvent("onunload",F),i.CollectGarbage&&i.CollectGarbage()};i.attachEvent("onunload",F)}return O(),B})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _Point=__webpack_require__(3),_Point2=_interopRequireDefault(_Point),_Rectangle=__webpack_require__(4),_Rectangle2=_interopRequireDefault(_Rectangle),_debugging=[],_debugAll=!1,typeRegistry={},splice=Array.splice;exports["default"]={type:function(e,t,n){return typeRegistry[e]||(typeRegistry[e]={}),t?n?void(typeRegistry[e][t]=n):typeRegistry[e][t]:typeRegistry[e]},createType:function(e,t,n){var i=t.name,r=this.type(e,i);if(!r){var o=t["extends"]?this.type(e,t["extends"]):null;!o&&n&&(o=n),r=o?function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}(o):function a(e){_classCallCheck(this,a),_.assign(this,e)},delete t.name,delete t["extends"],_.assign(r.prototype,t),r.typeName=i,this.type(e,i,r),this.log("Utils","Utils.createType - "+e+"."+i)}return r},buildTypes:function(e,t,n){var i=this;if(this.log("Utils","Utils.buildTypes - "+t),!e&&n)return this.createType(t,n),void this.log("Utils","Utils.buildTypes end");if(n){var r=_.remove(e,{name:n.name});r=r.length>0?r[0]:null,n=r?this.createType(t,_.assign({},n,r)):this.createType(t,n)}_.forEach(e,function(e){i.createType(t,e,n)}),this.log("Utils","Utils.buildTypes end")},extend:function(e,t,n,i){_.extend(e,t,i);var r=function(){this.constructor=e};return r.prototype=t.prototype,e.prototype=new r,n&&_.extend(e.prototype,n),e.superclass=t.prototype,e},initConfig:function(e,t){for(var n={},i=e.constructor,r=[i];i;)i["super"]?(i=i["super"].constructor,splice.apply(r,[0,0,i])):i=null;for(var o=0;o<r.length;o++)i=r[o],i.DEFAULTS&&_.assign(n,i.DEFAULTS);e.props=_.assign(n,t),i.prototype.prop=function(e,t){return t?void(this.props[e]=t):this.props[e]}},getConstructor:function getConstructor(jsClass,defaultClass){return jsClass||(jsClass=defaultClass),_.isString(jsClass)&&(jsClass=eval(jsClass)),jsClass},debug:function(e){e?_debugging.push(e):_debugAll=!0},log:function(e,t){if(window.console){var n=_debugAll;if(!_debugAll){n=!1;for(var i=0;i<_debugging.length;i++)_debugging[i]==e&&(n=!0)}if(n){for(;e.length<10;)e+=" ";e=e.substring(0,10)+" - ",console.info(e,t)}}},getRelativePosition:function(e,t){return[e.width*t.x+t.width*t.anchorX+t.offsetX,e.height*t.y+t.height*t.anchorY+t.offsetY]},unscale:function(e,t){var n=e.scale(),i=e.translate();return t instanceof _Rectangle2["default"]?new _Rectangle2["default"](t.x*n+i[0],t.y*n+i[1],t.width*n,t.height*n):t instanceof _Point2["default"]?new _Point2["default"](t.x*n+i[0],t.y*n+i[1]):[t[0]*n+i[0],t[1]*n+i[1]]},scale:function e(t,n){var e=t.scale(),i=t.translate();return n instanceof _Rectangle2["default"]?new _Rectangle2["default"]((n.x-i[0])/e,(n.y-i[1])/e,n.width/e,n.height/e):n instanceof _Point2["default"]?new _Point2["default"]((n.x-i[0])/e,(n.y-i[1])/e):[(n[0]-i[0])/e,(n[1]-i[1])/e]},getObjProperty:function(e,t){return e?_.has(e,t)?e[t]:e.getProperty&&_.isFunction(e.getProperty)?e.getProperty(t):null:null}}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,i){n(this,e),this.x=t,this.y=i}return i(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"distance",value:function(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}},{key:"translate",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"scale",value:function(e){return this.x*=e,this.y*=e,this}},{key:"getScaled",value:function(t){return new e(this.x*t,this.y*t)}},{key:"getTranslated",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"getDirection",value:function(t){var n=this.distance(t);return new e((t.x-this.x)/n,(t.y-this.y)/n)}},{key:"rotate",value:function(e){var t=Math.cos(e*Math.PI/180),n=Math.sin(e*Math.PI/180),i=this.x,r=this.y;return this.x=i*t-r*n,this.y=i*n+r*t,this}},{key:"getRotated",value:function(e){return this.clone().rotate(e)}},{key:"dotProduct",value:function(e){return this.x*e.x+this.y*e.y}},{key:"similarity",value:function(e){return Math.abs(this.dotProduct(e))}},{key:"getMidPoint",value:function(t){return new e((this.x+t.x)/2,(this.y+t.y)/2)}},{key:"reverse",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"equals",value:function(t){return t&&t.constructor==e?this.x==t.x&&this.y==t.y:!1}},{key:"reflect",value:function(e,t){return t?this.x=2*e.x-this.x:this.y=2*e.y-this.y,this}},{key:"toString",value:function(){return"Point:{x="+this.x+";y="+this.y+"}"}}]),e}();r.W=new r(-1,0),r.N=new r(0,-1),r.S=new r(0,1),r.E=new r(1,0),r.NE=new r(1,-1),r.NW=new r(-1,-1),r.SE=new r(1,1),r.SW=new r(-1,1),t["default"]=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(5),l=i(s),f=n(3),h=i(f),c=n(6),d=i(c),p=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),u(t,[{key:"getPerimeter",value:function(e,n){return t.getPerimeter(this,e,n)}},{key:"contains",value:function(e){var t=e.width||0,n=e.height||0,i=e.x-t/2,r=e.x+t/2,o=e.y-n/2,a=e.y+n/2;return r<=this.right&&i>=this.left&&o>=this.top&&a<=this.bottom}},{key:"distance",value:function(e){return this.contains(e)?0:e.x<this.left?e.y<this.top?e.distance(new h["default"](this.left,this.top)):e.y<=this.bottom?this.left-e.x:e.distance(new h["default"](this.left,this.bottom)):e.x<=this.right?e.y<=this.top?this.top-e.y:e.y-this.bottom:e.y<this.top?e.distance(new h["default"](this.right,this.top)):e.y<=this.bottom?e.x-this.right:e.distance(new h["default"](this.right,this.bottom))}},{key:"detectIntersection",value:function(e,t){var n=e.y==t.y,i=this.contains(e),r=this.contains(t);if(i&&r)return 4;if(!i&&!r){if(n&&e.y>=this.top&&e.y<=this.bottom){if(e.x<this.left&&t.x>this.right)return 0;if(e.x>this.right&&t.x<this.left)return 2}if(!n&&e.x>=this.left&&e.x<=this.right){if(e.y<this.top&&t.y>this.bottom)return 1;if(e.y>this.bottom&&t.y<this.top)return 3}return-1}var o=i?t:e;return n?o.x>this.right?2:0:o.y<this.top?1:3}},{key:"toString",value:function(){return"Rectangle:{x="+this.x+";y="+this.y+";width="+this.width+";height="+this.height+"}"}}],[{key:"getPerimeter",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],i=e.x,r=e.y,o=(t.x-i,t.y-r,Math.atan2(r,i)),a=new h["default"](0,0),u=Math.PI,s=Math.PI/2,l=s-o,f=Math.atan2(e.height,e.width);return-u+f>o||o>u-f?(a.x=e.left,a.y=r-e.width*Math.tan(o)/2):-f>o?(a.y=e.top,a.x=i-e.height*Math.tan(l)/2):f>o?(a.x=e.right,a.y=r+e.width*Math.tan(o)/2):(a.y=e.bottom,a.x=i+e.height*Math.tan(l)/2),n&&(t.x>=e.left&&t.x<=e.right?a.x=t.x:t.y>=e.top&&t.y<=e.bottom&&(a.y=t.y),t.x<e.left?a.x=e.left:t.x>e.right&&(a.x=e.right),t.y<e.top?a.y=e.top:t.y>e.bottom&&(a.y=e.bottom)),a}},{key:"getBoundingRectangle",value:function(e,n){if(!e||0==e.length)return null;n=n||[0,0,0,0],l["default"].isArray(n)||(n=[n,n,n,n]);for(var i=[e[0].x,e[0].y],r=[e[0].x,e[0].y],o=1;o<e.length;o++){var a=e[o];a.x<i[0]&&(i[0]=a.x),a.y<i[1]&&(i[1]=a.y),a.x>r[0]&&(r[0]=a.x),a.y>r[1]&&(r[1]=a.y)}i[0]=i[0]-n[0],i[1]=i[1]-n[1],r[0]=r[0]+n[2],r[1]=r[1]+n[3];var u=Math.abs(r[0]-i[0]),s=Math.abs(r[1]-i[1]);return new t(i[0]+u/2,i[1]+s/2,u,s)}},{key:"union",value:function(e){var n=null,i=null,r=-(1/0),o=-(1/0);return l["default"].each(e,function(e){n=n||e.x,i=i||e.y,n=Math.min(n,e.x),i=Math.min(i,e.y),r=Math.max(r,e.right()),o=Math.max(o,e.bottom())}),n=n||0,i=i||0,new t(n,i,r-n,o-i)}}]),t}(d["default"]);t["default"]=p},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_5__},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(4),u=i(a),s={},l=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=arguments.length<=3||void 0===arguments[3]?0:arguments[3];r(this,e),this.x=t,this.y=n,this.width=i,this.height=o}return o(e,[{key:"contains",value:function(e){return!1}},{key:"getRegularPoints",value:function(e){return null}},{key:"getPerimeter",value:function(e){arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return null}},{key:"top",get:function(){return this.y-this.height/2}},{key:"bottom",get:function(){return this.y+this.height/2}},{key:"left",get:function(){return this.x-this.width/2}},{key:"right",get:function(){return this.x+this.width/2}},{key:"bounds",get:function(){return new u["default"](this.x,this.y,this.width,this.height)}}],[{key:"getShape",value:function(e){return s[e]}},{key:"addShape",value:function(e,t){s[e]=t}},{key:"removeShape",value:function(e){delete s[e]}}]),e}();t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=i(r);t["default"]={isIE:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE");return t>0?parseInt(e.substring(t+5,e.indexOf(".",t))):navigator.userAgent.match(/Trident\/7\./)?11:!1}(),isIE2:function(){var e=!1,t=null,n=n||{},i=i||{userAgent:""};if(Object.hasOwnProperty.call(n,"ActiveXObject")&&!n.ActiveXObject)e=!0,t=11;else{var r=i.userAgent.toLowerCase();e=-1!=r.indexOf("msie"),e&&(t=parseInt(r.split("msie")[1]))}return function(){return e?t:!1}}(),isFireFox:function(){return"undefined"!=typeof InstallTrigger}(),createElement:function(e,t,n,i){var r=document.createElement(e);return this.setElement(r,t,n),i&&(r.innerHTML=i),r},createElementByString:function(e){var t=this.createElement("div",null,null,e);return t.childNodes},setElement:function(e,t,n){t&&o["default"].forEach(t,function(t,n){e.setAttribute(n,t)}),n&&o["default"].forEach(n,function(t,n){e.style[n]=t})},testElement:function(e,t){return e&&1==e.nodeType&&(!t||t(e))},getAncestorBy:function(e,t){for(;e=e.parentNode;)if(this.testElement(e,t))return e;return null},getPosition:function(e,t){t||(t=document.body);var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return[n.left-i.left,n.top-i.top]},getCenterPosition:function(e,t){t||(t=document.body);var n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r=n.right-n.left,o=n.bottom-n.top;return[n.left-i.left+r/2,n.top-i.top+o/2]},move:function(e,t,n){t&&(e.style.left=t+"px"),n&&(e.style.top=n+"px")},getSize:function(e){var t=parseInt(e.style.offsetWidth,10),n=parseInt(e.style.offsetHeight,10);return[t,n]},resize:function(e,t,n){t&&(e.style.width=t+"px"),n&&(e.style.height=n+"px")},preloadImages:function(e){this.preloadImages.list||(this.preloadImages.list=[]),this.preloadImages.loaded||(this.preloadImages.loaded={});for(var t,n=this.preloadImages.list,i=this,r=0;r<e.length;r++)t=new Image,t.onload=function(){var e=n.indexOf(this);-1!==e&&(i.preloadImages.loaded[this.name]={width:this.width,height:this.height},n.splice(e,1))},n.push(t),t.src=e[r],t.name=e[r]},getImageInfo:function(e){return this.preloadImages.loaded?this.preloadImages.loaded[e]:null},eventFromInput:function(e){var t=e.target.tagName;return"INPUT"==t||"TEXTAREA"==t||"SELECT"==t}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(5),u=i(a),s=function(){function e(t){r(this,e),this.buffer=[],t&&this.buffer.push(t)}return o(e,[{key:"append",value:function(e){return u["default"].isString(e)?this.buffer.push(e):u["default"].isArray(e)?this.buffer=this.buffer.concat(e):this.buffer.push(""+e),this}},{key:"prepend",value:function(e){return u["default"].isString(e)?this.buffer.splice(0,0,e):u["default"].isArray(e)?this.buffer=e.concat(this.buffer):this.buffer.splice(0,0,""+e),this}},{key:"clear",value:function(){this.buffer=[]}},{key:"removeLast",value:function(){return this.buffer.pop(),this}},{key:"toString",value:function(e){return e||(e=""),this.buffer.join(e)}}]),e}();t["default"]=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(3),u=i(a),s=function(){function e(t,n){r(this,e),this.start=t,this.end=n}return o(e,[{key:"length",value:function(){return this.start.distance(this.end)}},{key:"distance",value:function(e){var t=this.start.distance(e);if(0==t)return 0;var n=this.length(),i=new u["default"]((this.end.x-this.start.x)/n,(this.end.y-this.start.y)/n).dotProduct(new u["default"](e.x/t,e.y/t));return t*Math.sqrt(1-i*i)}},{key:"toString",value:function(){return"Line:{start="+this.start+";end="+this.end+"}"}}],[{key:"intersection",value:function(e,t,n,i,r,o,a,s){var l=(s-o)*(n-e)-(a-r)*(i-t),f=(a-r)*(t-o)-(s-o)*(e-r),h=(n-e)*(t-o)-(i-t)*(e-r),c=f/l,d=h/l;if(c>=0&&1>=c&&d>=0&&1>=d){var p=e+c*(n-e),g=t+c*(i-t);return new u["default"](p,g)}return null}}]),e}();t["default"]=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(6),l=i(s),f=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),u(t,[{key:"toString",value:function(){return"Ellipse:{x="+this.x+";y="+this.y+";width="+this.width+";height="+this.height+"}"}}]),t}(l["default"]);t["default"]=f},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(5),s=r(u),l=n(1),f=r(l),h=n(12),c=i(h),d=n(7),p=r(d),g=n(2),y=(r(g),n(8)),v=r(y),b=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?[0,1/0]:arguments[1];o(this,e),this.root=t,this.rootNS=t.getAttribute("ns")||"root",this.zoomScale=n,this.scale=1,this.listeners={},this.dragging=!1,this.handler=s["default"].bind(this.handleEvent,this),this.started=!1,this.enterStack=[]}return a(e,[{key:"start",value:function(){this.started||(f["default"].on(this.root,"mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel",this.handler),this.startKeys(),this.started=!0)}},{key:"stop",value:function(){this.started&&(f["default"].off(this.root,"mousedown mouseover mouseout mouseenter mouseleave dblclick click contextmenu mousewheel",this.handler),this.stopKeys(),this.started=!1)}},{key:"startKeys",value:function(){f["default"].on(document,"keydown keyup",this.handler)}},{key:"stopKeys",value:function(){f["default"].off(document,"keydown keyup",this.handler)}},{key:"getEventInfo",value:function(e){for(var t=e.target,n=new v["default"],i=void 0,r=[],o=!1;!o&&t&&t!=document;)i=t.getAttribute("ns"),i&&(o=s["default"].startsWith(i,"root."),o&&(i=i.substring(5),e.rootTarget=t),e.nsTarget||(e.nsTarget=t),r.splice(0,0,t),n.prepend(i)),t=t.parentNode;return o||(e.rootTarget=e.nsTarget),e.targetStack=r,i=n.toString("."),""==i&&(i=this.rootNS),{data:e.rootTarget,ns:i}}},{key:"handleEvent",value:function(t){var n=this,i=t.type;if(!this.dragging&&!p["default"].eventFromInput(t)){var r=void 0,o=void 0,a=this.getPosition(t),u=void 0,s="keydown"==i||"keyup"==i;if(s)r=this.root,o=c.getKeyEvent(t);else{if(u=this.getEventInfo(t),!u)return;r=u.data,o=u.ns}"mousewheel"==i&&(this.scale*=Math.pow(2,.002*t.wheelDelta),this.scale=Math.max(Math.min(this.zoomScale[1],this.scale),this.zoomScale[0]),t.scale=this.scale,i="zoom"),"mousedown"==i&&0==t.button&&function(){var i={data:r,pos:"root"==o?e.mouse(n.root,t):a};n.dragging=!1;var u=void 0,s=function(t){var r=n.getPosition(t);if(!n.dragging){if(i.pos[0]==r[0]&&i.pos[1]==r[1])return;n.dragging=!0,t.rootTarget=i.data,n.dispatch(t,"dragstart",o,i.data,i.pos)}u="root"==o?e.mouse(n.root,t):r,n.getEventInfo(t),n.dispatch(t,"drag",o,i.data,u)},l=function h(t){u="root"==o?e.mouse(n.root,t):n.getPosition(t);var r=n.getEventInfo(t);n.dragging?(n.dragging=!1,n.dispatch(t,"dragend",o,i.data,u)):n.dispatch(t,"mouseup",o,r.data,u),f["default"].off(window,"mousemove",s),f["default"].off(window,"mouseup",h)};t.preventDefault(),f["default"].on(window,"mousemove",s),f["default"].on(window,"mouseup",l)}(),s||this.simulateEnterLeave(t,i,o,r,a),this.dispatch(t,i,o,r,a),"contextmenu"==i&&t.preventDefault()}}},{key:"simulateEnterLeave",value:function(e,t,n,i,r){var o=this,a=void 0,u=void 0,l=function(t){for(t=t||0;o.enterStack.length>=t+1;)a=o.enterStack.pop(),o.dispatch(e,"mouseleave",a.ns,a.data,r)},f=function(e){for(var t=new v["default"],n=0;e>=n;n++){var i=u[n].getAttribute("ns");s["default"].startsWith(i,"root.")&&(i=i.substring(5)),t.append(i)}return t.toString(".")};if(n&&n!=this.rootNS&&"mouseover"==t){u=e.targetStack;for(var h=void 0,c=0;c<u.length;c++){if(c<this.enterStack.length){if(this.enterStack[c].target==u[c])continue;l(c)}h={data:i,ns:f(c),target:u[c]},this.enterStack.push(h),this.dispatch(e,"mouseenter",h.ns,i,r)}u.length<this.enterStack.length&&l(u.length)}n==this.rootNS&&this.enterStack.length>0&&l()}},{key:"dispatch",value:function(t,n,i,r,o){if(this.started){var a=i?n+"."+i:n;s["default"].forEach(this.listeners,function(u,l){e.match(a,l)&&s["default"].forEach(u,function(e){e.context?e.callback.apply(e.context,[n,i,r,o,t]):e.callback.apply(window,[n,i,r,o,t])})}),t.stopPropagation&&t.stopPropagation()}}},{key:"getPosition",value:function(t){var n=e.mouse(this.root,t);return s["default"].isNaN(n[0])||s["default"].isNaN(n[1])||(this.lastPosition=n),this.lastPosition}},{key:"registerKey",value:function(e,t,n,i){var r=this;if(s["default"].isArray(t))return void s["default"].forEach(t,function(t){r.registerKey(e,t,n,i)});if(t=c.getKeyData(t.ctrl,t.alt,t.shift,t.meta,t.code),t.length){t=new v["default"](e).append(t).toString(".");var o={callback:n,context:i};this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(o)}}},{key:"unregisterKey",value:function(e,t,n,i){var r=this;if(s["default"].isArray(t))return void s["default"].forEach(t,function(t){r.unregisterKey(e,t,n,i)});if(t=c.getKeyData(t.ctrl,t.alt,t.shift,t.meta,t.code),t.length){
t=new v["default"](e).append(t).toString(".");var o=this.listeners[t],a=void 0;if(o)for(var u=0;u<o.length;u++)if(a=o[u],a.callback===n&&(!i||i===a.context))return void o.splice(u,1)}}},{key:"register",value:function(e,t,n,i){var r=this;if(s["default"].isArray(e))return void s["default"].forEach(e,function(e){r.register(e,t,n,i)});var o={callback:t,context:n,zIndex:i};this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(o)}},{key:"unregister",value:function(e,t,n){var i=this.listeners[e],r=void 0;if(i)for(var o=0;o<i.length;o++)if(r=i[o],r.callback===t&&(!n||n===r.context))return void i.splice(o,1)}},{key:"destroy",value:function(){this.stop(),delete this.root,delete this.listeners,delete this.enterStack}}],[{key:"match",value:function(e,t){var n=t.split("*");if(1==n.length)return e==t;for(var i=void 0,r=0,o=0;o<n.length;o++)if(0!=n[o].length){if(i=e.slice(r),r=i.indexOf(n[o]),0>r)return!1;r+=n[o].length}return!0}},{key:"mouse",value:function(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}]),e}();t["default"]=b},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(!e||!e instanceof KeyboardEvent)return null;var t=e.keyCode||e.which;return t>=16&&18>=t&&(t=null),o(e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,t)}function o(e,t,n,i,r){var o=new u["default"];return e&&o.append("CTRL"),t&&o.append("ALT"),n&&o.append("SHIFT"),i&&o.append("META"),r&&o.append(r),o.toString(".")}Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyEvent=r,t.getKeyData=o;var a=n(8),u=i(a)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(5),u=i(a),s=n(2),l=i(s),f=n(14),h=i(f),c=n(18),d=i(c),p={name:"Default",role:"node",draggable:!0,selectable:!0,editable:!0,resizable:!1,sourceable:!0,targetable:!0,visible:!0},g={name:"Default",role:"edge",selectable:!0,visible:!0},y=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?u["default"].uniqueId("G"):arguments[0],n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments[2];r(this,e),this.id=t,this.nodes={},this.edges={},this.selection=null,this.destroyed=!1,l["default"].buildTypes(n.nodeTypes,"Nodes",p),l["default"].buildTypes(n.edgeTypes,"Edges",g),delete n.nodeTypes,delete n.edgeTypes,l["default"].initConfig(this,n),this.root=null,i&&this.loadModel(i)}return o(e,[{key:"addNode",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?this.getCurrentRoot():arguments[1],i=arguments[2],r=e.getJSClass(t,h["default"]),o=new r(this,t);return n?e.addChild(n,o,i):(this.root=o,this.root.prop("role","root")),this.nodes[o.id]=o,o}},{key:"addEdge",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?this.getCurrentRoot():arguments[1],i=arguments[2],r=arguments[3],o=e.getJSClass(t,d["default"]),a=new o(this,t,i,r);return e.addChild(n,a),this.edges[a.id]=a,a}},{key:"loadModel",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?this.getCurrentRoot():arguments[1],i=e.nodes,r=e.edges;delete e.nodes,delete e.edges;var o=this.addNode(e,n);i&&u["default"].forEach(i,function(e){t.loadModel(e,o)}),r&&u["default"].forEach(r,function(e){var n=void 0,i=void 0;e.from&&(n=t.nodes[e.from]),e.to&&(i=t.nodes[e.to]),t.addEdge(e,o,n,i)})}},{key:"getCurrentRoot",value:function(){return this.root}},{key:"reset",value:function(){}},{key:"destroy",value:function(){}}],[{key:"getJSClass",value:function(e,t){var n=null;if(e&&e.type){var i=l["default"].type(t.namespace,e.type);i&&(n=i.jsClass)}return l["default"].getConstructor(n,t)}},{key:"addChild",value:function(e,t){e.children||(e.children=[]),t.parent!=e&&(e.children.push(t),t.parent&&t.parent.children&&(t.parent.children=u["default"].without(t.parent.children,t))),t.parent=e}}]),e}();y.DEFAULTS={allowDanglingEdges:!0,multiConnect:!1,readOnly:!1,viewOnly:!1},t["default"]=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(5),f=i(l),h=n(8),c=i(h),d=n(15),p=i(d),g=function(e){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r(this,t),n.id||(n.id=f["default"].uniqueId("N"));var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i.inEdges=[],i.outEdges=[],i.ports=null,i.parent=null,i}return a(t,e),s(t,[{key:"isAncestor",value:function(e){for(var t=e.parent;t;){if(this==t)return!0;t=t.parent}return!1}},{key:"removeEdge",value:function(e){for(var t=e.source==this?this.outEdges:this.inEdges,n=0;n<t.length;n++)if(e==t[n]){t.splice(n,1);break}}},{key:"addInEdge",value:function(e,t){null==t||void 0===t?this.inEdges.push(e):this.inEdges.splice(t,0,e)}},{key:"addOutEdge",value:function(e,t){null==t||void 0===t||t>e.length-1?this.outEdges.push(e):this.outEdges.splice(t,0,e)}},{key:"renderChildren",value:function(e){var t=this;if(this.children){var n=function(){var n=new c["default"];return f["default"].forEach(t.children,function(t){n.append(t.render(e))}),{v:n.toString()}}();if("object"===("undefined"==typeof n?"undefined":u(n)))return n.v}return""}},{key:"getPort",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"auto":arguments[1],n=arguments[2],i=this.getShape(e),r=void 0;return"auto"==t?r=i.getPerimeter(n):null}},{key:"toString",value:function(){var e=this.prop("label")?this.prop("label"):"undefined";return f["default"].isArray(e)&&(e=e[0]),"Node:{id:"+this.id+";label:"+e+";type:"+this.props.constructor.typeName+"}"}}]),t}(p["default"]);g.namespace="Nodes",t["default"]=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(5),u=i(a),s=n(2),l=i(s),f=n(16),h=i(f),c=n(8),d=i(c),p=n(6),g=i(p),y=n(4),v=(i(y),n(17)),b=i(v),m=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{id:u["default"].uniqueId()}:arguments[1];r(this,e),this.graph=t,this.id=n.id,delete n.id,n.decorators&&(this.createDecorators(n.decorators),delete n.decorators),n.views&&(this.viewProps=n.views,delete n.views);var i=n.type||"Default";if(i=l["default"].type(this.constructor.namespace,i),!i)throw new Error("Type not found "+n.type);delete n.type,this.props=new i(n)}return o(e,[{key:"prop",value:function(e,t){return u["default"].isUndefined(t)?this.props[e]:void(this.props[e]=t)}},{key:"viewProp",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"default":arguments[0],t=arguments[1],n=arguments[2];return u["default"].isUndefined(n)?"default"==e?this.prop(t,n):this.viewProps[e][t]:void("default"==e?this.prop(t,n):(this.viewProps[e]||(this.viewProps[e]={}),this.viewProps[e][t]=n))}},{key:"createDecorators",value:function(e){}},{key:"getView",value:function(e){var t=this.getShape(e);return u["default"].assign({id:this.id,key:e,className:this.computedClassName,namespace:this.namespace,scale:this.viewProp(e,"scale")||1},t)}},{key:"getShape",value:function(e){var t=h["default"].get(this.id+".shape",e);if(t)return t;var n=this.viewProp(e,"shape"),i=n?g["default"].getShape(n.name):g["default"].getShape("Rectangle"),r=this.viewProp(e,"x"),o=this.viewProp(e,"y"),a=this.viewProp(e,"width")||(n?n.width:0),u=this.viewProp(e,"height")||(n?n.height:0);return t=new i(r,o,a,u),h["default"].set(this.id+".shape",t,e),t}},{key:"render",value:function(e){var t=h["default"].get(this.id+".template",e.id);if(!t){var n=this.prop("role");t=e.getTemplate("$"+n,null,this),u["default"].isString(t)&&(t=u["default"].template(t)),h["default"].set(this.id+".template",t,e.id)}return t(this.getView(e.id))}},{key:"renderShape",value:function(e){var t=this.prop("shape");if(t){var n=u["default"].template(e.getTemplate(t.name,t));return n(this.getView(e.id))}return""}},{key:"renderLabel",value:function(e){if(this==this.graph.getCurrentRoot())return null;var t=this.getLabelBox(e.id);return t?b["default"].SVG_TEMPLATE(t):""}},{key:"getLabelBox",value:function(e){var t=h["default"].get(this.id+".labelBox",e);if(t)return t;var n=this.getShape(e);return t=b["default"].getLabelBox(this.prop("label"),n.width,n.height,this.viewProp(e,"labelConfig")),h["default"].set(this.id+".labelBox",t,e),t}},{key:"destroy",value:function(){delete this.graph,delete this.decorators,delete this.props,delete this.viewProps,this.destroyed=!0}},{key:"computedClassName",get:function(){if(!this._computedClassName){var e=new d["default"](this.prop("role")),t=this.props;for(t.hasOwnProperty("className")&&e.append(t.className),t=t.constructor.prototype;t;)t.hasOwnProperty("className")&&e.append(t.className),t=Object.getPrototypeOf(t);this._computedClassName=e.toString(" ")}return this._computedClassName}},{key:"namespace",get:function(){return this==this.graph.getCurrentRoot()?"":"root."+this.prop("role")}}]),e}();t["default"]=m},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={},i={get:function(e,t){return this.getCache(t)[e]},set:function(e,t,n){this.getCache(n)[e]=t},contains:function(e,t){return e in this.getCache(t)},remove:function(e,t){delete this.getCache(t)[e]},clear:function(e){namespace?n[namespace]&&(n[namespace]={}):n={}},getCache:function(){var e=arguments.length<=0||void 0===arguments[0]?"default":arguments[0];return n[e]||(n[e]={}),n[e]}};t["default"]=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=i(r),a=n(1),u=i(a),s=n(2),l=i(s),f=n(7),h=i(f),c=n(8),d=i(c),p=n(4),g=i(p),y=1,v=2,b=4,m=8,w='\n<% var box = _.has(data, "dx") ? data : (data.getLabelBox ? data.getLabelBox() : null); \n   if (box) {%>\n	<g <% if (box.config && box.config.class) {%>class="<%=box.config.class%>"<%}%>		<% if (box.config && box.config.ns) {%>ns="<%=box.config.ns%>"<%}%>		text-anchor="<%=box.anchor%>"		transform="translate(<%=box.bounds.x%>,<%=box.bounds.y%>)">\n	<% if (box.backgroundColor) {%>\n		<rect x="<%=-box.bounds.width/2%>" y="<%=-box.bounds.height/2%>" width="<%=box.bounds.width%>" height="<%=box.bounds.height%>" fill="<%=box.backgroundColor%>"/>\n	<% } if (_.isArray(box.label)) { \n		_.each(box.label, function(value, line) {%>\n			<text <% if (box.config && box.config.textStyle) {%>style="<%=box.config.textStyle%>"<%}%>				dx="<%=box.dx%>" dy="<%=box.dy + box.lineHeight * line%>"><%=value%></text>\n		<%});} else { %>\n			<text><%=box.label%></text>\n		<%}%>\n	</g>\n<%}%>'.trim(),x=o["default"].template(w,{variable:"data"}),_={fontSize:11,fontFamily:"Arial",fontStyle:0,padding:0,linePadding:0,align:"left",width:0,height:0,geometry:{x:0,y:0,anchorY:0,offsetX:0,offsetY:0}};t["default"]=function(){function e(e,t,n,i){i=o["default"].defaultsDeep(i,_);var r=i.fontSize,a=i.fontFamily,u=i.fontStyle,s=(u&y)==y,f=i.padding,h=i.linePadding,c=i.align,d=i.width,p=i.height;d=5>=d?t*d:d,p=5>=p?n*p:p,d-=2*f,p-=2*f,d=Math.max(0,d),p=Math.max(0,p);var v=o["default"].clone(i.geometry),b=this.wrap(e,d,r,a,s);v.width=b.width+2*f,v.height=b.height+2*f+(b.length-1)*h;var m="start",w=0,x=!o["default"].has(v,"anchorX");switch(c){case"center":m="middle",x&&(v.anchorX=0);break;case"right":m="end",w=b.width/2,x&&(v.anchorX=-.5);break;case"left":w=-b.width/2,x&&(v.anchorX=.5)}var k=l["default"].getRelativePosition({width:t,height:n},v),E=new g["default"](k[0],k[1],v.width,v.height);v.width=Math.max(d+2*f,v.width),v.height=Math.max(p+2*f,v.height),k=l["default"].getRelativePosition({width:t,height:n},v);var P=new g["default"](k[0],k[1],v.width,v.height);return{config:i,label:b,_label:e,dx:w,dy:-v.height/2+f+b.lineHeight,anchor:m,lineHeight:b.lineHeight+h,bounds:E,maxBounds:P}}function t(e,t,n){if(n=o["default"].defaultsDeep(n,_),!e||""==e)return null;var i=n.fontSize,r=n.fontFamily,a=n.fontStyle,u=(a&y)==y,s=this.wrap(e,n.width,i,r,u),l=t.getRelativePosition({x:n.labelLocation/2,offsetX:n.labelOffsetX||0,offsetY:n.labelOffsetY||0}),f="start",h=void 0;switch(n.align){case"center":f="middle";break;case"right":f="end",h=s.width/2;break;case"left":default:h=-s.width/2}return{config:n,label:s,_label:e,dx:h,dy:-s.height/2+s.lineHeight,anchor:f,lineHeight:s.lineHeight,bounds:new g["default"](l[0],l[1],s.width,s.height)}}var n=!1,i=null,r=o["default"].memoize(function(e,t,r,a){if(!e||""==e)return[0,0];t=t||11,r=r||"Arial,Helvetica",a=o["default"].isUndefined(a)?!1:a;var u;if(o["default"].isNull(n)&&(i=h["default"].createElement("canvas"),n=!(!i.getContext||!i.getContext("2d"))),n){l["default"].log("Label","using canvas");var s=i.getContext("2d");s.font=t+" "+r+" "+(a?"bold":"normal");var f=s.measureText(e);u=[f.width,10]}else{if(!i){i=h["default"].createElement("iframe",{id:"_ComputeStylesIframe"},{position:"absolute",visibility:"hidden",display:"none",width:"auto"}),document.body.appendChild(i);var c=i.contentWindow.document;c.open(),c.write('<html><body><div id="sizeMeasuringDiv" style="position:absolute;width:auto;height:auto;white-space:pre-wrap;word-wrap:break-word;display:inline-block;"></div></body></html>'),c.close()}i.style.display="";var d=i.contentWindow.document.getElementById("sizeMeasuringDiv");d.style.fontSize=t,d.style.fontFamily=r,d.style.fontWeight=a?"bold":"normal",d.style.padding=0,d.style.width="auto",d.innerHTML=e,u=[d.offsetWidth,d.offsetHeight],i.style.display="none"}return u},function(e,t,n,i){return e+";"+t+";"+n+";"+i}),a=o["default"].memoize(function(e,t,n,i,a){t=t||0,n=n||11,i=i||"Arial,Helvetica",a=o["default"].isUndefined(a)?!1:a;var u=[],s=r("&nbsp;",n,i,a),l=s[0];if(u.lineHeight=s[1],!t||!e||""==e)return u.push(e),u.width=e&&""!=e?r(e,n,i,a)[0]:l,u.height=u.lineHeight,u;for(var f=0,h=e.split(/[\r\n|\n|\r]/),c=new d["default"],p=0;p<h.length;p++){for(var g,y=h[p].split(/[\s]/),v="",b=0,m=0,w=!0,x=0;x<y.length;x++)g=y[x],m=r(g,n,i,a)[0],(w?m:b+l+m)>t?(w?(c.append(g),f=Math.max(f,m),x<y.length-1&&(u.push(c.toString()),c.clear())):(u.push(c.append(v).toString()),f=Math.max(f,b+l+m),c.clear()),v="",b=0,w||x--,w=!0):(v=w?g:v+" "+g,b=w?m:b+l+m,f=Math.max(f,b),w=!1);""!=v&&c.append(v),p<h.length-1&&(u.push(c.toString()),c.clear())}return u.push(c.toString()),u.width=f,u.height=u.lineHeight*u.length,u},function(e,t,n,i,r){return e+";"+t+";"+n+";"+i+";"+r}),s={visible:function(){return this.input&&"visible"==this.input.style.visibility},start:function(e,t,n,i,r){this.input?this.visible()&&this.key!=e&&this.stop():(this.input=h["default"].createElement("textarea",{id:"inlineEditor",unselectable:"off"},{position:"absolute",overflow:"hidden",padding:"0px",margin:"0px",border:"transparent"}),t.appendChild(this.input)),this.key=e,this.box=n,this.refEl=i,this.textEl=r;var o=n.config,a=h["default"].getCenterPosition(i,t);a=[a[0]+n.maxBounds.left,a[1]+n.maxBounds.top];var s=1;r&&(r.style.visibility="hidden"),h["default"].setElement(this.input,null,{visibility:"visible",left:a[0]+"px",top:a[1]+"px",width:n.maxBounds.width*s+"px",height:n.maxBounds.height*s+"px","font-family":o.fontFamily,"font-size":o.fontSize*s+"px","font-weight":(o.fontStyle&y)==y?"bold":"normal"}),this.input.value=n._label,this.input.focus(),this.input.select(),u["default"].fire(this,"editor.start",[this.key])},stop:function(e){this.visible()&&(e=e||!1,this.textEl&&(this.textEl.style.visibility=null),this.input.style.visibility="hidden",e||u["default"].fire(this,"editor.update",[this.key,this.input.value]),u["default"].fire(this,"editor.stop",[this.key]),delete this.key,delete this.box,delete this.refEl,delete this.textEl)}};return{FONT_BOLD:y,FONT_ITALIC:v,FONT_UNDERLINE:b,FONT_SHADOW:m,SVG_TEMPLATE_STR:w,SVG_TEMPLATE:x,getStringSize:r,wrap:a,getLabelBox:e,getLabelBoxForEdge:t,editor:s}}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function v(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:v(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},f=n(5),h=i(f),c=n(15),d=i(c),p=n(17),g=i(p),y=function(e){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments[2],a=arguments[3];r(this,t),n.id||(n.id=h["default"].uniqueId("E"));var u=o(this,Object.getPrototypeOf(t).call(this,e,n));return u.source=u.target=null,u.setSource(i,n.sourcePos),u.setTarget(a,n.targetPos),u}return a(t,e),u(t,[{key:"setSource",value:function(e,t){this.setTerminal(e,t,"source")}},{key:"setTarget",value:function(e,t){this.setTerminal(e,t,"target")}},{key:"setTerminal",value:function(e,t,n){var i="source"==n?this.source:this.target;i==e?e&&e.setEdgeAt(this,t):(i&&i.removeEdge(this),e&&("source"==n?e.addOutEdge(this,t):e.addInEdge(this,t)),"source"==n?this.source=e:this.target=e,this.clearPoints())}},{key:"getLabelBox",value:function(e){return g["default"].getLabelBoxForEdge(this.prop("label"),this.getView(e),this.viewProp(e,"labelConfig"))}},{key:"getPoints",value:function(){return this.points&&0!=this.points.length||(delete this.length,this.points=EdgeStyle.getPoints(this)),this.points}},{key:"getLength",value:function(){if(!h["default"].isUndefined(this.length))return this.length;var e,t=this.getPoints(),n=0;for(e=0;e<t.length-1;e++)n+=t[e].distance(t[e+1]);return this.length=n}},{key:"clearPoints",value:function(){delete this.points,delete this.length}},{key:"getReferencePoints",value:function(){var e=[],t=this.prop("refPts");return this.source?e.push(this.source.getBounds().getCenter()):e.push(t[0]),this.target?e.push(this.target.getBounds().getCenter()):e.push(t[1]),e}},{key:"getRelativePosition",value:function(e){var t=e.x,n=this.getLength();h["default"].isString(t)&&(/%$/.test(t)?t=s(t).strLeft("%").toNumber()/100:/px$/.test(t)&&(t=s(t).strLeft("px").toNumber())),t>=-1&&1>=t&&(t*=n),0>t&&(t=n+t),t>n&&(t=n);for(var i,r,o,a=this.getPoints(),u=0;u<a.length-1;u++){if(i=a[u].distance(a[u+1]),i>=t){r=a[u].clone(),o=r.getDirection(a[u+1]),r.translate(o.getScaled(t));break}t-=i}return r||(r=a[a.length-1]),[r.x+e.offsetX,r.y+e.offsetY]}},{key:"toString",value:function(){return"Edge:{"+(h["default"].isNull(this.source)?"null":this.source.id)+"--"+(h["default"].isNull(this.target)?"null":this.target.id)+"}"}},{key:"destroy",value:function(){l(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.setSource(null),this.setTarget(null)}}]),t}(d["default"]);y.namespace="Edges",t["default"]=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(5),u=i(a),s=n(2),l=i(s),f=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e),t.hasOwnProperty("orientation")&&u["default"].isString(t.orientation)&&("HORIZONTAL"==t.orientation.toUpperCase()?t.orientation=e.HORIZONTAL:delete t.orientation),l["default"].initConfig(this,t)}return o(e,[{key:"layout",value:function(e,t){}},{key:"reset",value:function(){}},{key:"destroy",value:function(){}}]),e}();f.VERTICAL=0,f.HORIZONTAL=1,f.DEFAULTS={orientation:f.VERTICAL},t["default"]=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(19),l=i(s),f=n(1),h=(i(f),function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),u(t,[{key:"layout",value:function(e,t){var n;if(n=e?_.isArray(e)?e:e.getLinkedNodes("target"):this.owner.childNodes,n&&0!=n.length){for(var i,r=0,o=0,a=0,u=0,s=0,l=0;l<n.length;l++)i=n[l],r>0&&r+this.hgap+i.getProperty("width")>t.width&&(o+=a+this.vgap,r=0,a=0,u=0,s++),i._flPos=[u,s],i.moveTo([t.x+r,t.y+o]),r+=this.hgap+i.getProperty("width"),u++,a=a<i.getProperty("height")?i.getProperty("height"):a;this.trigger(new Rectangle(t.x,t.y,t.width,o+a))}}}]),t}(l["default"]));h.DEFAULTS={hgap:10,vgap:10},t["default"]=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(5),u=i(a),s=n(1),l=i(s),f=n(2),h=i(f),c=n(7),d=i(c),p=n(19),g=i(p),y=n(4),v=i(y),b=n(11),m=i(b),w=n(17),x=i(w),_=function(){function e(t,n){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(r(this,e),this.id=t,this.box=d["default"].createElement("div",{id:this.id,tabindex:0},{overflow:"hidden",width:"100%",height:"100%",position:"relative"}),n.appendChild(this.box),i.layout){var o=h["default"].getConstructor(i.layout.jsClass,g["default"]);this.layout=new o(i.layout.config),delete i.layout}this.clear=!0,this._graph=null,this.dispatcher=null,h["default"].initConfig(this,i),this.templateStore={},l["default"].on(x["default"].editor,"editor.update.*",function(e,t){console.log(e+"="+t)})}return o(e,[{key:"graph",value:function(e){return e?(this._graph=e,this):this._graph}},{key:"viewport",value:function(e,t){if((u["default"].isUndefined(e)||u["default"].isNull(e))&&(e=!1),!t){var n=new v["default"](0,0,this.box.offsetWidth,this.box.offsetHeight);return e?h["default"].scale(this,n):n}e||(t=h["default"].scale(this,t));var i=this.box.offsetWidth,r=i/t.width;this.transform(-t.x*r,-t.y*r,r)}},{key:"translate",value:function(e){if(!this._graph)return[0,0];if(!arguments.length){var t=this._graph.getCurrentRoot();return t?[t.viewProp(this.id,"x")||0,t.viewProp(this.id,"y")||0]:[0,0]}this.transform(e[0],e[1])}},{key:"scale",value:function(e){if(!this._graph)return 1;if(!arguments.length){var t=this._graph.getCurrentRoot();return t?t.viewProp(this.id,"scale")||1:1}switch(e){case"in":e=this.scale()*this.prop("zoomFactor");break;case"out":e=this.scale()/this.prop("zoomFactor");break;case"actual":e=1;break;case"fit":var n=2*this.prop("gridSize"),i=this.getBounds(),r=this.viewport();r.width-=n,r.height-=n,e=Math.min(r.width/i.width,r.height/i.height,1);break;default:u["default"].isString(e)&&(e=parseFloat(e))}this.transform(null,null,e)}},{key:"transform",value:function(e,t,n){if(this._graph){this._graph.getCurrentRoot()}}},{key:"render",value:function(){return this._graph?(this.layout&&this.layout.layout(this._graph.getCurrentRoot(),this.viewport()),this.dispatcher||(this.dispatcher=new m["default"](this.box),this.dispatcher.register("mouseup.node.label",function(e,t,n,i,r){var o=this,a=this._graph.nodes[n.getAttribute("id")];this.dispatcher.dragging||a._firstSelection||(x["default"]._delayEdit=u["default"].delay(function(){x["default"]._delayEdit&&(delete x["default"]._delayEdit,x["default"].editor.start(a.id,o.box,a.getLabelBox(o.id),n,r.nsTarget))},250))},this),this.dispatcher.register(["mousedown.*","zoom*"],function(e,t,n,i,r){d["default"].eventFromInput(r)||x["default"].editor.stop()},this)),this.dispatcher.start(),!0):!1}},{key:"getTemplate",value:function(e,t,n){var i=this.templateStore[e];if(i&&u["default"].isFunction(i)&&(i=i(t)),n){var r=i.match(/(#{[^#]*})/g),o={},a=!0,s=!1,l=void 0;try{for(var f,h=r[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var c=f.value;c=c.substring(2,c.length-1).trim(),o[c]=n[u["default"].camelCase("render "+c)](this)}}catch(d){s=!0,l=d}finally{try{!a&&h["return"]&&h["return"]()}finally{if(s)throw l}}i=u["default"].template(i,{interpolate:/#{([\s\S]+?)}/g})(o)}return i}},{key:"reset",value:function(){}},{key:"destroy",value:function(){}}]),e}();_.DEFAULTS={defaultClickMode:"pan",hideOutline:!1,singleSelect:!0,draggable:!0,gridEnabled:!1,guidesEnabled:!0,gridSize:30,maxZoom:4,minZoom:.1,zoomFactor:1.2,maskOpacity:.5},t["default"]=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:m(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=n(5),f=i(l),h=n(7),c=i(h),d=n(21),p=i(d),g=n(8),y=i(g),v={$root:'<g id="${id}" class="${className}" ns="graph" transform="translate(${x},${y})scale(${scale})">#{children}</g>',$node:'<g id="${id}" class="${className}" ns="${namespace}" transform="translate(${x},${y})">#{shape}#{label}</g>',$edge:'<g id="${id}" class="${className}" ns="${namespace}">#{shape}</g>',Ellipse:'<ellipse cx="0" cy="0" rx="${width/2}" ry="${height/2}"></ellipse>',Rectangle:'<rect x="${-width/2}" y="${-height/2}" width="${width}" height="${height}" rx="9" ry="9"></rect>',Triangle:'<polygon points="${-width/2},${-height/2} ${width/2},${-height/2} 0,${height/2}"></polygon>',Rhombus:'<polygon points="0,${-height/2} ${width/2},0 0,${height/2} ${-width/2},0"></polygon>',Hexagon:function(e){var t="north"==e.direction||"south"==e.direction;return t?'<polygon points="0,${-height/2} ${width/2},${-height/4} ${width/2},${height/4} 0,${height/2} ${-width/2},${height/4} ${-width/2},${-height/4}"></polygon>':'<polygon points="${-width/2},0 ${width/4},${-height/2} ${width/4},${-height/2} ${width/2},0 ${width/4},${height/2} ${-width/4},${height/2}"></polygon>'},Path:function(e){var t=new y["default"];return t.append('<path class="gauge" d="<%=gfw.SVGRenderer.getPathData(data.getPoints())%>"></path>'),t.append('<path d="<%=gfw.SVGRenderer.getPathData(data.getPoints())%>"'),"none"==e.startArrow&&"none"==e.endArrow||(t.append(' style="'),"none"!=e.startArrow&&t.append("marker-start: url(#<%=data.type.name%>_StartArrow);"),"none"!=e.endArrow&&t.append("marker-end: url(#<%=data.type.name%>_EndArrow);"),t.append('"')),t.append("></path>"),t.toString()},Image:function(e){return'<image x="${-width/2}" y="${-height/2}" width="${width}" height="${height}" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+e.image+'"></image>'}},b=function(e){function t(e,n,i){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e,n,i));return f["default"].assign(a.templateStore,v),a}return a(t,e),u(t,[{key:"render",value:function(){var e=s(Object.getPrototypeOf(t.prototype),"render",this).call(this);if(e){var n=this._graph.getCurrentRoot(),i=new y["default"]('<svg width="100%" height="100%">');i.append(n.render(this)),i.append("</svg>"),this.box.innerHTML=i.toString()}}}],[{key:"appendContent",value:function(e,t){var n=new y["default"];n.append("<svg>").append(t).append("</svg");for(var i=c["default"].createElement("div",null,null,n.toString()).firstElementChild;i.firstChild;)e.appendChild(i.firstChild);return e}},{key:"setContent",value:function(e,n){if(c["default"].isIE){for(var i=void 0;i=e.lastChild;)e.removeChild(i);t.appendContent(e,n)}else e.innerHTML=n;return e}}]),t}(p["default"]);t["default"]=b}])});
//# sourceMappingURL=qgraph.min.js.map
